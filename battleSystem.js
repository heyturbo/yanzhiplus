const _0x3ebdb0=_0xdc19;(function(_0x456cc7,_0x4669c8){const _0x5e9a21=_0xdc19,_0x47a94e=_0x456cc7();while(!![]){try{const _0x458ac6=parseInt(_0x5e9a21(0x50a))/0x1+parseInt(_0x5e9a21(0x28f))/0x2*(-parseInt(_0x5e9a21(0x352))/0x3)+-parseInt(_0x5e9a21(0x4d2))/0x4+parseInt(_0x5e9a21(0x413))/0x5*(parseInt(_0x5e9a21(0x1fa))/0x6)+-parseInt(_0x5e9a21(0x5fb))/0x7+parseInt(_0x5e9a21(0x41a))/0x8+parseInt(_0x5e9a21(0x412))/0x9;if(_0x458ac6===_0x4669c8)break;else _0x47a94e['push'](_0x47a94e['shift']());}catch(_0x10121b){_0x47a94e['push'](_0x47a94e['shift']());}}}(_0x93b9,0x46b68));let selectedDrug=null,alreadyUseDrug=![],drugInventory={'长生泉':{'quantity':0x2,'url':_0x3ebdb0(0x589),'tier':0x0,'description':_0x3ebdb0(0x38a)},'忘忧水':{'quantity':0x5,'url':_0x3ebdb0(0x557),'tier':0x3,'description':_0x3ebdb0(0x53f)},'三花丸':{'quantity':0x5,'url':_0x3ebdb0(0x2c8),'tier':0x3,'description':_0x3ebdb0(0x26e)},'狂暴之魂':{'quantity':0x0,'url':_0x3ebdb0(0x2f9),'tier':0x0,'description':'橙色品阶，永久提高1%暴击率'},'神力仙丹':{'quantity':0x0,'url':'https://pic.imgdb.cn/item/666c1408d9c307b7e9cea310.png','tier':0x2,'description':_0x3ebdb0(0x269)},'慧心糖果':{'quantity':0x0,'url':_0x3ebdb0(0x4ba),'tier':0x0,'description':'橙色品阶，永久提高1%暴击伤害，最多可使用此道具提升至350%'},'狂暴印记':{'quantity':0x0,'url':_0x3ebdb0(0x2b1),'tier':0x2,'description':'蓝色品阶，20秒内暴击率提高50%'},'武尊秘露':{'quantity':0x1,'url':_0x3ebdb0(0x539),'tier':0x1,'description':_0x3ebdb0(0x308)},'延寿露':{'quantity':0x0,'url':_0x3ebdb0(0x4bd),'tier':0x3,'description':_0x3ebdb0(0x592)},'天山雪莲':{'quantity':0x0,'url':'https://pic.imgdb.cn/item/666d311dd9c307b7e996b5a8.png','tier':0x3,'description':_0x3ebdb0(0x462)},'化功散':{'quantity':0x0,'url':_0x3ebdb0(0x4f9),'tier':0x2,'description':'蓝色品阶，30秒内妖怪暴击率降低至0%'},'见手青':{'quantity':0x0,'url':'https://pic.imgdb.cn/item/666d311dd9c307b7e996b565.png','tier':0x0,'description':_0x3ebdb0(0x427)},'沉檀凝香':{'quantity':0x5,'url':_0x3ebdb0(0x3e7),'tier':0x1,'description':'紫色品阶，恢复10%生命值并有几率清除玩家的异常状态'},'焚灵之丸':{'quantity':0x0,'url':_0x3ebdb0(0x356),'tier':0x1,'description':_0x3ebdb0(0x565)},'冰莲絮':{'quantity':0x2,'url':_0x3ebdb0(0x39b),'tier':0x2,'description':_0x3ebdb0(0x23b)},'晗灵果':{'quantity':0x2,'url':_0x3ebdb0(0x391),'tier':0x2,'description':_0x3ebdb0(0x5e6)},'魔术棱柱':{'quantity':0x0,'url':_0x3ebdb0(0x61b),'tier':0x1,'description':'紫色品阶，消耗300000当前经验升级一个随机技能，通过该道具最多可让技能升至24级'},'幸运金币':{'quantity':0x0,'url':_0x3ebdb0(0x1f5),'tier':0x0,'description':_0x3ebdb0(0x27d)},'双倍经验药':{'quantity':0x1,'url':_0x3ebdb0(0x45b),'tier':0x2,'description':_0x3ebdb0(0x3ae)},'四倍经验药':{'quantity':0x1,'url':_0x3ebdb0(0x554),'tier':0x1,'description':_0x3ebdb0(0x55c)},'普通药材':{'quantity':0x0,'url':_0x3ebdb0(0x4bc),'tier':0x4,'description':_0x3ebdb0(0x453)},'上等药材':{'quantity':0x0,'url':_0x3ebdb0(0x3a2),'tier':0x3,'description':_0x3ebdb0(0x405)},'极品药材':{'quantity':0x0,'url':_0x3ebdb0(0x35f),'tier':0x2,'description':'蓝色品阶，临时增加59点生命值和法力值，收集3个可以合成1个紫色品阶的药品'},'珍贵药材':{'quantity':0x0,'url':_0x3ebdb0(0x2d1),'tier':0x1,'description':_0x3ebdb0(0x52f)},'完美药材':{'quantity':0x0,'url':_0x3ebdb0(0x497),'tier':0x0,'description':_0x3ebdb0(0x216)}},collectCost=0x64,activeBuffs={},tempBonus={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0},drugBonus0={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0},drugBonus={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0},ascensionSkill={'name':_0x3ebdb0(0x4c8),'level':0x1,'effect':_0x3ebdb0(0x5e8)},secondAscensionSkill={'name':'未开启','level':0x1,'effect':'未开启飞升技能'},ascensionAttributes={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0};const ascensionSkills={'attribute':[{'name':_0x3ebdb0(0x549),'effect':_0x4bc483=>_0x3ebdb0(0x2c4)+(0xbb8+_0x4bc483*0x15e)+_0x3ebdb0(0x2a5),'baseValue':0xbb8,'increment':_0x58958c=>_0x58958c*0x15e},{'name':'慈悲心怀','effect':_0x3bf5f4=>_0x3ebdb0(0x2c4)+(0x186a0+_0x3bf5f4*0x1f40)+_0x3ebdb0(0x32b)+(0x186a0+_0x3bf5f4*0x1f40)+_0x3ebdb0(0x2b8),'baseValue':0x186a0,'increment':_0x1f0bcf=>0x1f40*_0x1f0bcf},{'name':_0x3ebdb0(0x419),'effect':_0x92ab9a=>_0x3ebdb0(0x2c4)+(0xbb8+0x12c*_0x92ab9a)+'点速度和'+(0xbb8+0x12c*_0x92ab9a)+_0x3ebdb0(0x3b7),'baseValue':0xbb8,'increment':_0x2a159c=>0x12c*_0x2a159c},{'name':_0x3ebdb0(0x5ee),'effect':_0x509c19=>_0x3ebdb0(0x2c4)+(0x186a0+0x1388*_0x509c19)+_0x3ebdb0(0x4cf)+(0x186a0+0x1388*_0x509c19)+'点法术防御','baseValue':0x186a0,'increment':_0x4785bd=>0x1388*_0x4785bd},{'name':_0x3ebdb0(0x4c8),'effect':_0x31cd15=>_0x3ebdb0(0x5e8),'baseValue':0x0,'increment':_0x509c7b=>_0x509c7b*0x0},{'name':_0x3ebdb0(0x559),'effect':_0x349c56=>_0x3ebdb0(0x5e8),'baseValue':0x0,'increment':_0x11af45=>_0x11af45*0x0}],'combat':[{'name':_0x3ebdb0(0x4ce),'effect':_0x3d2a35=>_0x3ebdb0(0x2d6)+(0xa+0x1*_0x3d2a35)+_0x3ebdb0(0x5e2),'baseValue':0xa,'increment':_0x6ba29e=>0x1*_0x6ba29e},{'name':_0x3ebdb0(0x5c7),'effect':_0x577b3f=>'当妖怪生命值在'+(0x57-0x3*(_0x577b3f-0x1))+_0x3ebdb0(0x415),'baseValue':0x5a,'increment':_0x1fb0dd=>0x5a-0x3*(_0x1fb0dd-0x1)},{'name':'灵魂穿刺','effect':_0x3c5f4a=>_0x3ebdb0(0x39e)+(0xa+1.5*_0x3c5f4a)+_0x3ebdb0(0x3c5),'baseValue':0xa,'increment':_0x2e6c37=>0xa+1.5*_0x2e6c37},{'name':'吸血魔刃','effect':_0x57af98=>_0x3ebdb0(0x31a)+(0xb+0x1*(_0x57af98-0x1))+_0x3ebdb0(0x426),'baseValue':0xb,'increment':_0x22c25a=>0xb+0x1*(_0x22c25a-0x1)},{'name':_0x3ebdb0(0x32a),'effect':_0x24af98=>_0x3ebdb0(0x2ba)+(0x15+0x1*(_0x24af98-0x1))+_0x3ebdb0(0x2d0),'baseValue':0x14,'increment':_0x54ebe6=>0x14+0x1*(_0x54ebe6-0x1)},{'name':'向死而生','effect':_0x1b3ce7=>_0x3ebdb0(0x610)+(0x64-0x1*_0x1b3ce7)+_0x3ebdb0(0x576),'baseValue':0x64,'increment':_0x4ecaab=>-0x2*_0x4ecaab},{'name':_0x3ebdb0(0x44d),'effect':_0x42edd0=>'反弹本次承受伤害的'+(0x2d+0x2*_0x42edd0)+'%~'+(0x3c+0x2*_0x42edd0)+'%','baseValue':0x2d,'increment':_0x1951bb=>0x2*_0x1951bb},{'name':_0x3ebdb0(0x1fd),'effect':_0x3a34d9=>_0x3ebdb0(0x37d)+(0x14+1.5*_0x3a34d9)+'%','baseValue':0x14,'increment':_0x2e0b7c=>1.5*_0x2e0b7c},{'name':_0x3ebdb0(0x38c),'effect':_0x38e461=>'每次使用法术攻击时，有'+(0x1e+0x2*_0x38e461)+_0x3ebdb0(0x1f4),'baseValue':0x1e,'increment':_0x571d01=>0x2*_0x571d01},{'name':'天降甘霖','effect':_0x17e75c=>_0x3ebdb0(0x201)+(0x6+0.1*_0x17e75c)+'秒','baseValue':0x6,'increment':_0x3bd758=>0.1*_0x3bd758}],'settlement':[{'name':_0x3ebdb0(0x5f0),'effect':_0x1b9244=>'战斗胜利后金子奖励额外增加'+convertPrice(0x2710+0x9c4*_0x1b9244)+'文','baseValue':0x2710,'increment':_0x5acf39=>0x9c4*_0x5acf39},{'name':'焉知非福','effect':_0x4f6902=>_0x3ebdb0(0x232)+(0x3+0x1*_0x4f6902)+'秒的仙气护体','baseValue':0x3,'increment':_0x1dabb0=>0x1*_0x1dabb0},{'name':_0x3ebdb0(0x50e),'effect':_0x2a241e=>_0x3ebdb0(0x3f3)+(0x12c+0x32*_0x2a241e)+'%','baseValue':0x12c,'increment':_0x299797=>0x32*_0x299797},{'name':'金牌调解','effect':_0x28a33f=>_0x3ebdb0(0x332)+convertPrice(0x1f4+0x1f4*_0x28a33f)+'文金子的安慰金','baseValue':0x1f4,'increment':_0x36e4e2=>0x1f4*_0x36e4e2}]};let reenableAscension=![],ascensionEnabled=![],spiritLevel=0x1,spiritMultiplier=0x1;const maxSpiritLevel=0x78,minSpiritMultiplier=0.01,maxSpiritMultiplier=4.15;let playerTurn=![];const obj={get 'enemyTurn'(){return!playerTurn;}};let spiritPowerActive=![],attributesFetched=![],battleState,battleInterval,battleAttributes,maxHealth,maxMana,battleRounds=0x1,currentExp=0x0,maxExp=0xd0,enemyHealCount=0x0,enemyPetCultivation,playerCultivation,additionalPlayerCultivation=0x0,enemyPet={'health':0x12,'mana':0xd,'physicalAttack':0x2,'physicalDefense':0x1,'magicAttack':0x2,'magicDefense':0x3,'speed':0x6,'cultivation':0x0},enemyMaxHealth=enemyPet[_0x3ebdb0(0x45e)],enemyMaxMana=enemyPet[_0x3ebdb0(0x41f)],enemyInitialState=null,originalPerformAttack=performAttack,originalPerformPhysicalAttack=performPhysicalAttack,originalPerformMagicalAttack=performMagicalAttack,originalPerformHeal=performHeal,originalPerformPoison=performPoison,originalPerformDefense=performDefense,autoBattleInterval=null,playerCritRate=0.1,playerCritDamage=1.5,enemyCritRate=0.6,enemyCritDamage=1.8,pierceDamageContainer={'totalPierceDamage':0x0},poisonSkillActivated=![],enemyPhysicalAttackCount=0x0,extraShield=0x0,wiseDefense=0x0,wiseDefenseManaCost,firstStartBattle=![],onBattleState,divinedWeaponStatus=![],waterAmuletTriggered=![];const weaponDescriptions={'lostBook':_0x3ebdb0(0x402),'fragmentedMap':_0x3ebdb0(0x555),'nirvanaGem':_0x3ebdb0(0x5b0)},effectCooldowns={'drunken':![],'healingBan':![],'soulCapture':![],'blindfold':![],'spellSlow':![],'torn':![],'suppressed':![],'taunt':![],'seal':![],'slaughter':![]};function startBattle(){const _0x36f525=_0x3ebdb0;if(!attributesFetched){showInfoBox('请先从属性面板获取属性。');return;}onBattleState=!![],!firstStartBattle&&(logBattleEvent(_0x36f525(0x48d),_0x36f525(0x4a4),_0x36f525(0x49e)),firstStartBattle=!![]),battleInterval=setInterval(()=>{const _0x2ee59e=_0x36f525;if(onBattleState){if(battleAttributes[_0x2ee59e(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x2ee59e(0x46d)][_0x2ee59e(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}}if(summonEnemy){const _0x5b71fa=battleState[_0x2ee59e(0x46d)][_0x2ee59e(0x5b7)],_0x5f2120=specificAttackByEnemy[_0x5b71fa];_0x5f2120&&_0x5f2120[_0x2ee59e(0x206)]==='interval'&&_0x5f2120[_0x2ee59e(0x2f8)]();}updateUI(),divineWeaponManager['applyNirvanaGemEffects'](),handleSpiritHeal(),handleSpiritPower(),handleSpiritAttack();}else console['log'](_0x2ee59e(0x377));},0x3e8),playerTurn=battleAttributes[_0x36f525(0x521)]>=battleState[_0x36f525(0x46d)]['speed'],updateUI(),updatePetColor(),updatePetName(),decideEnemyCanPerform(),!playerTurn&&setTimeout(enemyAttack,0x1f4);}function stopBattle(){onBattleState=![],stopEnemyAction(),clearInterval(battleInterval),summonEnemy&&handleBattleWithSummonEnemy(![]),logBattleEvent('战斗停止。');}function decreaseElixirVigor(_0x200c0e=!![]){const _0x28e63a=_0x3ebdb0,_0xa5da31=elixirStates[_0x28e63a(0x4b6)](_0xbb969e=>_0xbb969e[_0x28e63a(0x355)]&&_0xbb969e[_0x28e63a(0x582)]&&_0xbb969e[_0x28e63a(0x48a)]===currentPet[_0x28e63a(0x621)]&&_0xbb969e['vigor']>0x0);if(_0xa5da31['length']===0x0)return;_0xa5da31['forEach'](_0xfa5f44=>{const _0x524227=_0x28e63a;let _0x106275;_0x200c0e?_0x106275=Math['floor'](0x14+Math['random']()*0xb):_0x106275=Math['floor'](0x32+Math[_0x524227(0x61a)]()*0x1f),_0xfa5f44['vigor']=Math[_0x524227(0x389)](0x0,_0xfa5f44[_0x524227(0x317)]-_0x106275),_0xfa5f44[_0x524227(0x317)]===0x0&&(updateElixirDisplay(),updateQualityDisplayWithBonuses(),updateAttributePanel());});}let elixirExpDoubleState=![];function checkElixirVigorStatus(){const _0x4ac050=_0x3ebdb0,_0x21c2e6=elixirStates[_0x4ac050(0x4b6)](_0x5aa022=>_0x5aa022['applied']&&_0x5aa022[_0x4ac050(0x582)]&&_0x5aa022[_0x4ac050(0x48a)]===currentPet[_0x4ac050(0x621)]&&_0x5aa022[_0x4ac050(0x317)]===0x0);if(_0x21c2e6[_0x4ac050(0x545)]>0x0){const _0x5aeddf=_0x21c2e6[_0x4ac050(0x545)]===0x1?_0x4ac050(0x465):'有'+_0x21c2e6[_0x4ac050(0x545)]+_0x4ac050(0x4e1);showInfoBox(_0x5aeddf);}}let defeatedPets=[],usedPets=[];function showNextBattlePrompt(_0x4ab279){const _0x44e647=_0x3ebdb0;if(_0x4ab279){const _0x4e7f10=Math[_0x44e647(0x300)](0x0+Math[_0x44e647(0x61a)]()*0x2),_0xf4e78d=elixirExpDoubleState?Math[_0x44e647(0x300)](0x508*Math['max'](0x1,Math[_0x44e647(0x61a)]()*battleRounds))*0x2:Math['floor'](0x508*Math['max'](0x1,Math[_0x44e647(0x61a)]()*battleRounds));decreaseArmsEndurance(key=null,_0x4e7f10),decreaseElixirVigor(!![]),increaseEachElixirExp(_0xf4e78d),currentLifeSpan=Math[_0x44e647(0x389)](0x0,currentLifeSpan-_0x4e7f10);if(!summonEnemy){handleVictory();return;}else{toggleFightingDrawer(),handleBattleWithSummonEnemy(_0x4ab279),summonEnemy=![];return;}}else{const _0x162b6e=Math[_0x44e647(0x300)](0x5+Math['random']()*0x5);decreaseArmsEndurance(key=null,_0x162b6e),decreaseElixirVigor(![]),currentLifeSpan=Math['max'](0x0,currentLifeSpan-_0x162b6e);if(!summonEnemy){handlePetDefeat();return;}else{toggleFightingDrawer(),handleBattleWithSummonEnemy(![]),summonEnemy=![];return;}}}function handleVictory(){const _0x1b3ef2=_0x3ebdb0,_0x543e73=0.35,_0x2f9d7f=1.75,_0x551de3=Math[_0x1b3ef2(0x61a)]()*(_0x2f9d7f-_0x543e73)+_0x543e73;let _0x169ca6=Math[_0x1b3ef2(0x300)](0x120*battleRounds*_0x551de3);_0x169ca6=Math[_0x1b3ef2(0x389)](_0x169ca6,0x120);(ascensionSkill[_0x1b3ef2(0x621)]===_0x1b3ef2(0x5f0)||secondAscensionSkill[_0x1b3ef2(0x621)]===_0x1b3ef2(0x5f0))&&(_0x169ca6+=calculateExtraReward());if(Math['random']()<0.5)addItemToJinnang(_0x1b3ef2(0x5fd),0x1);goldAmount+=_0x169ca6,updateGoldDisplay(goldAmount),updateTitle(),showBattleOverlay(_0x1b3ef2(0x485),0x1f4,0x1,0x3e8),increaseCurrentPetIntimacy(0x1e),increaseCurrentPetAttention(0x1),increaseCurrentPetLearningValue(0xc8),defeatedPets=[],usedPets=[],battleRounds++,updateEnemyAttributes(),gainExp(),resetBattleState(!![]),resetBuffState(!![]),extraShield=0x0,battleAttributes[_0x1b3ef2(0x521)]>=battleState[_0x1b3ef2(0x46d)][_0x1b3ef2(0x521)]?playerTurn=!![]:playerTurn=![];}function handlePetDefeat(){const _0xd2b6a0=_0x3ebdb0;applyDefeatPenalty(),logBattleEvent('战斗失败！正在重新开始...',_0xd2b6a0(0x2a4),_0xd2b6a0(0x49e));}function applyDefeatPenalty(){const _0x5962cd=_0x3ebdb0;let _0x2c1bad=0x184*battleRounds;ascensionSkill[_0x5962cd(0x621)]===_0x5962cd(0x249)||secondAscensionSkill[_0x5962cd(0x621)]===_0x5962cd(0x249)?(_0x2c1bad=0x0,goldAmount+=calculateCompensation()):goldAmount=Math[_0x5962cd(0x389)](0x0,goldAmount-_0x2c1bad),showBattleOverlay(_0x5962cd(0x32d),0x1f4,0x1,0x3e8),increaseCurrentPetIntimacy(-0x5),updateGoldDisplay(goldAmount),defeatedPets=[],usedPets=[],resetBattleState(![]),resetBuffState(![]),extraShield=0x0,setTimeout(()=>{startBattle(),updatePetInfo();},0x3e8);}function calculateExtraReward(){const _0xf6c4f4=_0x3ebdb0;let _0x8d0062=0x0;return ascensionSkill[_0xf6c4f4(0x621)]===_0xf6c4f4(0x5f0)&&(_0x8d0062+=ascensionSkill[_0xf6c4f4(0x2bb)]+ascensionSkill[_0xf6c4f4(0x624)](ascensionSkill[_0xf6c4f4(0x1f2)])),secondAscensionSkill[_0xf6c4f4(0x621)]===_0xf6c4f4(0x5f0)&&(_0x8d0062+=secondAscensionSkill[_0xf6c4f4(0x2bb)]+secondAscensionSkill[_0xf6c4f4(0x624)](secondAscensionSkill[_0xf6c4f4(0x1f2)])),logBattleEvent(_0xf6c4f4(0x3ee)+convertPrice(_0x8d0062)+_0xf6c4f4(0x495),_0xf6c4f4(0x2db)),_0x8d0062;}function calculateCompensation(){const _0x552867=_0x3ebdb0;let _0x5e096d=0x0;return ascensionSkill[_0x552867(0x621)]===_0x552867(0x249)&&(_0x5e096d+=ascensionSkill['baseValue']+ascensionSkill['increment'](ascensionSkill[_0x552867(0x1f2)])),secondAscensionSkill['name']===_0x552867(0x249)&&(_0x5e096d+=secondAscensionSkill[_0x552867(0x2bb)]+secondAscensionSkill[_0x552867(0x624)](secondAscensionSkill[_0x552867(0x1f2)])),logBattleEvent(_0x552867(0x5d5)+convertPrice(_0x5e096d)+_0x552867(0x1fb),_0x552867(0x2db)),_0x5e096d;}function resetBuffState(_0x25f695){const _0x231f4a=_0x3ebdb0;battleState['player'][_0x231f4a(0x61f)]&&(battleState[_0x231f4a(0x3aa)][_0x231f4a(0x61f)]=![],logBattleEvent(_0x231f4a(0x1ff),_0x231f4a(0x24a)),updateUI());if(_0x25f695){const _0x5849d1=[],_0x204aae=Math['random']();let _0x3efdad;if(_0x204aae<0.1)_0x3efdad=0x0;else{if(_0x204aae<0.29)_0x3efdad=0x1;else _0x204aae<0.6?_0x3efdad=0x2:_0x3efdad=0x3;}const _0x178c48=Object[_0x231f4a(0x28b)](drugInventory)['filter'](_0x3b567e=>drugInventory[_0x3b567e]['tier']===_0x3efdad),_0x55a400=_0x178c48[Math['floor'](Math[_0x231f4a(0x61a)]()*_0x178c48[_0x231f4a(0x545)])];drugInventory[_0x55a400][_0x231f4a(0x36d)]+=0x1,_0x5849d1[_0x231f4a(0x48f)](_0x55a400+_0x231f4a(0x228));if(battleRounds>=0x64)for(let _0x236fcb=0x0;_0x236fcb<0x2;_0x236fcb++){const _0x515825=Math[_0x231f4a(0x61a)]();let _0x553278;if(_0x515825<0.1)_0x553278=0x0;else{if(_0x515825<0.29)_0x553278=0x1;else _0x515825<0.6?_0x553278=0x2:_0x553278=0x3;}const _0x449b1b=Object[_0x231f4a(0x28b)](drugInventory)['filter'](_0x31783b=>drugInventory[_0x31783b][_0x231f4a(0x627)]===_0x553278),_0x69e9b8=_0x449b1b[Math['floor'](Math[_0x231f4a(0x61a)]()*_0x449b1b[_0x231f4a(0x545)])];drugInventory[_0x69e9b8][_0x231f4a(0x36d)]+=0x1,_0x5849d1['push'](_0x69e9b8+_0x231f4a(0x228));}if(spiritLevel>=0x51){let _0x520490=(spiritLevel-0x50)*0.05;_0x520490>0x1&&(_0x520490=0x1);if(Math[_0x231f4a(0x61a)]()<_0x520490){const _0x43ab47=Object['keys'](drugInventory),_0x5dbe0b=_0x43ab47[Math[_0x231f4a(0x300)](Math['random']()*_0x43ab47[_0x231f4a(0x545)])];drugInventory[_0x5dbe0b][_0x231f4a(0x36d)]+=0x1,_0x5849d1[_0x231f4a(0x48f)](_0x231f4a(0x23e)+_0x5dbe0b+_0x231f4a(0x228));}}if(_0x5849d1['length']>0x0){const _0x4f12a3=_0x5849d1[_0x231f4a(0x46b)]('，\x20');logBattleEvent('本轮战斗胜利获得了:\x20'+_0x4f12a3,_0x231f4a(0x2db));}updateDrugGrid();}}function gainExp(_0x4342e7=0x0){const _0x2c0500=_0x3ebdb0,_0x377f8a=document['getElementById'](_0x2c0500(0x52b)),_0x2b3810=parseInt(_0x377f8a['innerText'],0xa);let _0x4935b2=battleState[_0x2c0500(0x3aa)][_0x2c0500(0x5d6)]||0x1;if(ascensionSkill[_0x2c0500(0x621)]===_0x2c0500(0x50e)||secondAscensionSkill[_0x2c0500(0x621)]==='举一反三'){let _0x20769b=0x0;ascensionSkill[_0x2c0500(0x621)]===_0x2c0500(0x50e)&&(_0x20769b+=(ascensionSkill[_0x2c0500(0x2bb)]+ascensionSkill[_0x2c0500(0x624)](ascensionSkill[_0x2c0500(0x1f2)]))/0x64),secondAscensionSkill[_0x2c0500(0x621)]==='举一反三'&&(_0x20769b+=(secondAscensionSkill[_0x2c0500(0x2bb)]+secondAscensionSkill['increment'](secondAscensionSkill[_0x2c0500(0x1f2)]))/0x64),_0x4935b2+=_0x20769b,logBattleEvent(_0x2c0500(0x231)+_0x20769b*0x64+'%。',_0x2c0500(0x2db));}const _0x430f40=_0x4342e7>0x0?_0x4342e7:petLevel>=0xb4?Math[_0x2c0500(0x300)](Math['random']()*(0x8f0-0x508+0x1)*_0x4935b2)+0x508:Math[_0x2c0500(0x300)](0x64+Math[_0x2c0500(0x289)](_0x2b3810,1.1)*0.85*_0x2b3810*_0x4935b2);let _0xa8081a=currentExp+_0x430f40;while(_0xa8081a>=maxExp){_0xa8081a-=maxExp;if(petLevel===0xb4){maxExp=0x56bc75e2d63100000,logBattleEvent(_0x2c0500(0x4d6),_0x2c0500(0x2db));break;}let _0x27541d;if(petLevel<0x64&&_0x2b3810<0x64)_0x27541d=Math['floor'](Math['random']()*(0x3e8-0x258+0x1))+0x258;else{if(petLevel>=0x65&&petLevel<=0xb4&&_0x2b3810>=0x65&&_0x2b3810<=0x8c)_0x27541d=Math['floor'](Math[_0x2c0500(0x61a)]()*(0x708-0x4b0+0x1))+0x4b0;else petLevel>=0xb5&&petLevel<=0xc8&&_0x2b3810>=0x8d&&_0x2b3810<=0x96?_0x27541d=Math[_0x2c0500(0x300)](Math['random']()*(0xe10-0x7d0+0x1))+0x7d0:_0x27541d=Math[_0x2c0500(0x300)](Math[_0x2c0500(0x61a)]()*(0xe10-0x258+0x1))+0x258;}maxExp+=_0x27541d,petLevel<0xc8?(logBattleEvent(_0x2c0500(0x541),_0x2c0500(0x2db)),increasePetLevel(0x1)):(logBattleEvent(_0x2c0500(0x5d7),_0x2c0500(0x2db)),addItemToJinnang(_0x2c0500(0x2de)),updateJinnangItems());}currentExp=_0xa8081a,updateExpBar(currentExp,maxExp);}function updateExpBar(_0x30343d,_0xa0e206){const _0x408f38=_0x3ebdb0,_0x2fe085=document[_0x408f38(0x43e)]('exp-bar'),_0x37d1e2=document[_0x408f38(0x43e)](_0x408f38(0x2b5)),_0x27f838=document[_0x408f38(0x43e)](_0x408f38(0x398)),_0x4cecda=document[_0x408f38(0x43e)](_0x408f38(0x406));if(_0x2fe085&&_0x27f838){const _0x15c079=_0x30343d/_0xa0e206*0x64;_0x2fe085[_0x408f38(0x604)][_0x408f38(0x5f4)]=_0x15c079+'%',_0x27f838[_0x408f38(0x418)]=_0x408f38(0x2c6)+_0x30343d+_0x408f38(0x49d)+_0xa0e206;}if(_0x37d1e2&&_0x4cecda){const _0x4e241b=_0x30343d/_0xa0e206*0x64;_0x37d1e2[_0x408f38(0x604)]['width']=_0x4e241b+'%',_0x4cecda[_0x408f38(0x418)]=_0x408f38(0x2c6)+_0x30343d+_0x408f38(0x49d)+_0xa0e206;}}let OneHundredOne=![],OneHundredFiftyOne=![];function resetBattleState(_0x531741){const _0x26d195=_0x3ebdb0;if(!_0x531741){restoreEnemyState();if(ascensionSkill['name']==='焉知非福'||secondAscensionSkill['name']===_0x26d195(0x50c)){battleState[_0x26d195(0x3aa)][_0x26d195(0x211)]=!![];const _0x200804=(ascensionSkill['name']==='焉知非福'?ascensionSkill[_0x26d195(0x2bb)]+ascensionSkill[_0x26d195(0x624)](ascensionSkill['level']):0x0)+(secondAscensionSkill['name']===_0x26d195(0x50c)?secondAscensionSkill[_0x26d195(0x2bb)]+secondAscensionSkill[_0x26d195(0x624)](secondAscensionSkill[_0x26d195(0x1f2)]):0x0);logBattleEvent(_0x26d195(0x526)+_0x200804+'\x20秒的仙气护体。',_0x26d195(0x282)),setTimeout(()=>{const _0x109010=_0x26d195;battleState['player'][_0x109010(0x211)]=![],logBattleEvent(_0x109010(0x472),_0x109010(0x282));},_0x200804*0x3e8);}}_0x531741&&battleRounds===0x65&&!OneHundredOne&&(OneHundredOne=!![],addItemToJinnang(_0x26d195(0x483),0x1),showInfoBox(_0x26d195(0x438))),_0x531741&&battleRounds===0x97&&!OneHundredFiftyOne&&(OneHundredFiftyOne=!![],changeEnemyImage('realShape'),autoBattleInterval!==null&&clearAutoBattle,showInfoBox(_0x26d195(0x403))),battleState[_0x26d195(0x46d)][_0x26d195(0x5ef)]&&(enemyMaxHealth=battleState[_0x26d195(0x46d)][_0x26d195(0x3f2)]||enemyMaxHealth,battleState[_0x26d195(0x46d)][_0x26d195(0x5ef)]=![],battleState[_0x26d195(0x46d)][_0x26d195(0x383)]=0x0,battleState['enemy'][_0x26d195(0x3f2)]=undefined),updateUI(),storeEnemyInitialState(),clearEnemyEffect(),clearPlayerEffect(),enemyHealCount=0x0,updatePetInfo(),resetResurrectionState();}function setBackgroundImage(_0x34428e){const _0x2b722d=_0x3ebdb0,_0x3411e6=document[_0x2b722d(0x2bd)]('.battle-system-drawer');_0x3411e6&&(_0x3411e6[_0x2b722d(0x604)][_0x2b722d(0x533)]=_0x2b722d(0x3c4)+_0x34428e+'\x27)');}function logBattleEvent(_0x70fca5,_0x152ecc=_0x3ebdb0(0x276),_0xe1f3a0=_0x3ebdb0(0x5da)){const _0x15dbca=_0x3ebdb0,_0x15d1bb=document['getElementById'](_0x15dbca(0x27a));if(_0x15d1bb){const _0x3fd52a=document[_0x15dbca(0x514)]('p');_0x3fd52a[_0x15dbca(0x331)]=_0x70fca5,_0x3fd52a['style'][_0x15dbca(0x45d)]=_0x152ecc,_0x3fd52a[_0x15dbca(0x604)][_0x15dbca(0x4cd)]=_0xe1f3a0,_0x15d1bb[_0x15dbca(0x2b2)](_0x3fd52a);const _0x13cf5f=_0x15d1bb[_0x15dbca(0x4ab)]('p');while(_0x13cf5f[_0x15dbca(0x545)]>0x64){_0x15d1bb[_0x15dbca(0x2fd)](_0x13cf5f[0x0]);}_0x15d1bb[_0x15dbca(0x54f)]=_0x15d1bb['scrollHeight'];}else console['error']('logDiv\x20not\x20found');}function clearBattleLog(){const _0x57c119=_0x3ebdb0,_0x2581d4=document[_0x57c119(0x43e)](_0x57c119(0x27a));_0x2581d4?_0x2581d4['innerHTML']='':console[_0x57c119(0x1f6)]('logDiv\x20not\x20found');}document[_0x3ebdb0(0x43e)]('battle-log-head')['addEventListener'](_0x3ebdb0(0x5a6),()=>clearBattleLog());function toggleFightingDrawer(){const _0x47d8d7=_0x3ebdb0;if(!attributesFetched){showInfoBox(_0x47d8d7(0x5a9));return;}const _0x4cabe6=jinnangItems[_0x47d8d7(0x397)](_0x94e1dd=>_0x94e1dd[_0x47d8d7(0x621)]===_0x47d8d7(0x49b)&&_0x94e1dd[_0x47d8d7(0x36d)]>0x0);if(currentPet['name']===_0x47d8d7(0x28c)&&_0x4cabe6){toggleGuolinPanel();return;}if(battleState[_0x47d8d7(0x3aa)][_0x47d8d7(0x60a)]&&!summonEnemy){performAttack('physical');return;}const _0x4db24b=document['getElementById'](_0x47d8d7(0x45c)),_0x2625a9=_0x4db24b[_0x47d8d7(0x35d)][_0x47d8d7(0x205)](_0x47d8d7(0x493));_0x4db24b['classList'][_0x47d8d7(0x244)](_0x47d8d7(0x4e6));if(_0x2625a9){_0x4db24b[_0x47d8d7(0x604)][_0x47d8d7(0x569)]=_0x47d8d7(0x2a2),startBattle();if(!summonEnemy){}else updatePetInfo();}else _0x4db24b['style'][_0x47d8d7(0x569)]=_0x47d8d7(0x30b),stopBattle();document['getElementById'](_0x47d8d7(0x26a))[_0x47d8d7(0x331)]=battleRounds,syncBattlePetSelect();}function calculateSkillAttributes(){const _0x1fd0a7=_0x3ebdb0,_0x41fbe3=document['getElementById'](_0x1fd0a7(0x5cc));let _0x266c5e={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0};maxLifeSpan=0x1388;if(_0x41fbe3&&currentPet[_0x1fd0a7(0x5ca)]){const _0x239047=Array[_0x1fd0a7(0x2bc)](_0x41fbe3[_0x1fd0a7(0x4b9)]);_0x239047[_0x1fd0a7(0x32f)](_0x419c01=>{const _0x42e25c=_0x1fd0a7,_0x1143e1=_0x419c01[_0x42e25c(0x331)][_0x42e25c(0x552)]('\x20')[0x0],_0x91313=currentPet[_0x42e25c(0x5ca)]['find'](_0x5c22be=>_0x5c22be[_0x42e25c(0x621)]===_0x1143e1&&(_0x5c22be[_0x42e25c(0x206)]==='N'||_0x5c22be[_0x42e25c(0x206)]==='NE'));if(_0x91313){const _0x527c6a=_0x91313['level']||0x1,_0x1ef52e=Math[_0x42e25c(0x389)](0x1,_0x91313[_0x42e25c(0x22b)]),_0x1771f2=0.1*_0x527c6a*_0x1ef52e;if(_0x91313[_0x42e25c(0x206)]==='N'&&_0x91313[_0x42e25c(0x621)]==='长寿'){const _0x1d656c=Math['round'](0xa8*_0x1771f2*_0x527c6a);maxLifeSpan+=_0x1d656c;}const _0x46c65c={'天神祝福':{'health':0x7d0,'speed':0xc8,'maxLevel':0x6},'天王护卫':{'physicalDefense':0x1f4,'magicDefense':0x1f4,'maxLevel':0x6},'姐就是女王':{'health':0x2710,'maxLevel':0x6},'生生不息':{'lifeSpanBonus':0x2710,'maxLevel':0x6}};if(_0x91313[_0x42e25c(0x206)]==='N')_0x266c5e['health']+=Math[_0x42e25c(0x420)](0xa8*_0x1771f2),_0x266c5e[_0x42e25c(0x41f)]+=Math[_0x42e25c(0x420)](0x62*_0x1771f2),_0x266c5e[_0x42e25c(0x2f3)]+=Math[_0x42e25c(0x420)](0x40*_0x1771f2),_0x266c5e[_0x42e25c(0x54a)]+=Math[_0x42e25c(0x420)](0x20*_0x1771f2),_0x266c5e[_0x42e25c(0x5dc)]+=Math[_0x42e25c(0x420)](0x3f*_0x1771f2),_0x266c5e[_0x42e25c(0x34c)]+=Math[_0x42e25c(0x420)](0x1f*_0x1771f2),_0x266c5e[_0x42e25c(0x521)]+=Math[_0x42e25c(0x420)](0x9*_0x1771f2);else{if(_0x91313[_0x42e25c(0x206)]==='NE'){const _0x41f0a7=_0x46c65c[_0x1143e1];if(_0x41f0a7){const _0x4ce4ac=_0x41f0a7[_0x42e25c(0x4fd)]||_0x527c6a,_0xf808e8=Math[_0x42e25c(0x296)](_0x4ce4ac,_0x527c6a);_0x1143e1===_0x42e25c(0x53a)?maxLifeSpan+=_0x41f0a7[_0x42e25c(0x570)]*_0xf808e8:Object['entries'](_0x41f0a7)[_0x42e25c(0x32f)](([_0x2d2612,_0x1d799a])=>{const _0x1f4c55=_0x42e25c;_0x2d2612!==_0x1f4c55(0x4fd)&&_0x2d2612!==_0x1f4c55(0x570)&&_0x266c5e['hasOwnProperty'](_0x2d2612)&&(_0x266c5e[_0x2d2612]+=_0x1d799a*_0xf808e8);});}}}}});}return _0x266c5e;}function updatePetInfo(){const _0xd6d26a=_0x3ebdb0;if(!currentPet){console['error']('currentPet\x20is\x20not\x20initialized');return;}const _0x367dae=calculateCurrentAttributes(),_0x1e7977={'endurance':_0x367dae[_0xd6d26a(0x5c9)],'intelligence':_0x367dae[_0xd6d26a(0x3ab)],'strength':_0x367dae[_0xd6d26a(0x42b)],'agility':_0x367dae[_0xd6d26a(0x56d)],'faith':_0x367dae[_0xd6d26a(0x281)]},_0x3115b3=calculateSecondaryAttributes(_0x1e7977,currentWisdom),_0x3d610c=getCurrentSpiritAttributes(),_0x5789ca=playerCritRate,_0x66fdb5=playerCritDamage;!battleState?(battleState={'player':{'health':_0x3115b3[_0xd6d26a(0x45e)]+_0x3d610c[_0xd6d26a(0x45e)]+ascensionAttributes[_0xd6d26a(0x45e)],'mana':_0x3115b3[_0xd6d26a(0x41f)]+_0x3d610c[_0xd6d26a(0x41f)]+ascensionAttributes['mana'],'physicalAttack':_0x3115b3[_0xd6d26a(0x2f3)]+_0x3d610c[_0xd6d26a(0x2f3)]+ascensionAttributes[_0xd6d26a(0x2f3)],'physicalDefense':_0x3115b3['physicalDefense']+_0x3d610c[_0xd6d26a(0x54a)]+ascensionAttributes[_0xd6d26a(0x54a)],'magicAttack':_0x3115b3[_0xd6d26a(0x5dc)]+_0x3d610c[_0xd6d26a(0x5dc)]+ascensionAttributes[_0xd6d26a(0x5dc)],'magicDefense':_0x3115b3[_0xd6d26a(0x34c)]+_0x3d610c[_0xd6d26a(0x34c)]+ascensionAttributes[_0xd6d26a(0x34c)],'speed':_0x3115b3[_0xd6d26a(0x521)]+_0x3d610c['speed']+ascensionAttributes['speed'],'critRate':playerCritRate,'critDamage':playerCritDamage},'enemy':{...enemyPet}},ascensionSkill[_0xd6d26a(0x621)]&&ascensionEnabled&&ascensionSkill[_0xd6d26a(0x621)]!==_0xd6d26a(0x559)&&(battleState['player']['originalAscensionSkill']=ascensionSkill['name']),secondAscensionSkill[_0xd6d26a(0x621)]&&reenableAscension&&secondAscensionSkill[_0xd6d26a(0x621)]!==_0xd6d26a(0x559)&&(battleState['player']['originalSecondAscensionSkill']=secondAscensionSkill['name'])):(battleState['player'][_0xd6d26a(0x45e)]=_0x3115b3['health']+_0x3d610c[_0xd6d26a(0x45e)]+ascensionAttributes['health'],battleState[_0xd6d26a(0x3aa)][_0xd6d26a(0x41f)]=_0x3115b3[_0xd6d26a(0x41f)]+_0x3d610c[_0xd6d26a(0x41f)]+ascensionAttributes[_0xd6d26a(0x41f)],battleState['player'][_0xd6d26a(0x2f3)]=_0x3115b3[_0xd6d26a(0x2f3)]+_0x3d610c[_0xd6d26a(0x2f3)]+ascensionAttributes['physicalAttack'],battleState[_0xd6d26a(0x3aa)]['physicalDefense']=_0x3115b3['physicalDefense']+_0x3d610c['physicalDefense']+ascensionAttributes['physicalDefense'],battleState[_0xd6d26a(0x3aa)][_0xd6d26a(0x5dc)]=_0x3115b3[_0xd6d26a(0x5dc)]+_0x3d610c[_0xd6d26a(0x5dc)]+ascensionAttributes[_0xd6d26a(0x5dc)],battleState[_0xd6d26a(0x3aa)][_0xd6d26a(0x34c)]=_0x3115b3[_0xd6d26a(0x34c)]+_0x3d610c[_0xd6d26a(0x34c)]+ascensionAttributes[_0xd6d26a(0x34c)],battleState['player']['speed']=_0x3115b3[_0xd6d26a(0x521)]+_0x3d610c[_0xd6d26a(0x521)]+ascensionAttributes[_0xd6d26a(0x521)],battleState[_0xd6d26a(0x3aa)][_0xd6d26a(0x2e5)]=playerCritRate,battleState[_0xd6d26a(0x3aa)][_0xd6d26a(0x345)]=playerCritDamage,ascensionSkill[_0xd6d26a(0x621)]&&ascensionEnabled&&ascensionSkill[_0xd6d26a(0x621)]!==_0xd6d26a(0x559)&&(battleState[_0xd6d26a(0x3aa)]['originalAscensionSkill']=ascensionSkill[_0xd6d26a(0x621)]),secondAscensionSkill['name']&&reenableAscension&&ascensionSkill[_0xd6d26a(0x621)]!==_0xd6d26a(0x559)&&(battleState[_0xd6d26a(0x3aa)][_0xd6d26a(0x36f)]=secondAscensionSkill[_0xd6d26a(0x621)])),battleAttributes={...battleState[_0xd6d26a(0x3aa)]},maxHealth=battleAttributes[_0xd6d26a(0x45e)],maxMana=battleAttributes['mana'],updateUI(),attributesFetched=!![];}let summonEnemy=![];const enemyImages=[{'status':'default','name':'妖怪','url':_0x3ebdb0(0x2ed)},{'status':_0x3ebdb0(0x340),'name':_0x3ebdb0(0x5b9),'url':_0x3ebdb0(0x52e)},{'status':'mao','name':'上古心魔','url':'https://pic.imgdb.cn/item/66a0d383d9c307b7e93a3779.gif'},{'status':'realShape','name':_0x3ebdb0(0x587),'url':_0x3ebdb0(0x3b3)},{'status':'darkShape','name':_0x3ebdb0(0x573),'url':'https://pic.imgdb.cn/item/66a61b8cd9c307b7e9b71e30.gif'},{'status':_0x3ebdb0(0x56a),'name':_0x3ebdb0(0x439),'url':_0x3ebdb0(0x5cb)},{'status':_0x3ebdb0(0x3bb),'name':'高级树桩','url':_0x3ebdb0(0x5cb)},{'status':_0x3ebdb0(0x396),'name':_0x3ebdb0(0x361),'url':_0x3ebdb0(0x1f3)},{'status':_0x3ebdb0(0x47e),'name':_0x3ebdb0(0x2a7),'url':_0x3ebdb0(0x433)},{'status':'noWorkBoss','name':_0x3ebdb0(0x5de),'url':'https://pic.imgdb.cn/item/66cdda7cd9c307b7e941d522.gif'},{'status':_0x3ebdb0(0x55f),'name':'穷奇','url':_0x3ebdb0(0x395)},{'status':'baiYin','name':_0x3ebdb0(0x354),'url':_0x3ebdb0(0x4a8)},{'status':_0x3ebdb0(0x3ff),'name':'岩龙','url':_0x3ebdb0(0x392)},{'status':_0x3ebdb0(0x579),'name':_0x3ebdb0(0x43d),'url':_0x3ebdb0(0x543)}];function changeEnemyImage(_0x5c1e35){const _0x8f7609=_0x3ebdb0,_0x5a267b=enemyImages['find'](_0x115460=>_0x115460[_0x8f7609(0x49c)]===_0x5c1e35);_0x5a267b?(document[_0x8f7609(0x43e)](_0x8f7609(0x56b))[_0x8f7609(0x508)]=_0x5a267b[_0x8f7609(0x460)],document[_0x8f7609(0x43e)](_0x8f7609(0x5be))[_0x8f7609(0x331)]=_0x5a267b['name']):console[_0x8f7609(0x1f6)](_0x8f7609(0x3d0)+_0x5c1e35+_0x8f7609(0x4c6));}const enemies={'practiceEnemy':{'name':_0x3ebdb0(0x439),'level':0x64,'health':0x12a05f200,'mana':0x12a05f200,'physicalAttack':0x64,'physicalDefense':0x0,'magicAttack':0x64,'magicDefense':0x0,'speed':0x64,'cultivation':0x400,'enemyCritRate':0.8,'enemyCritDamage':2.5,'backgroundImage':_0x3ebdb0(0x522),'reward':()=>gainExp(0xbb8),'rewardMessage':_0x3ebdb0(0x268),'specialty':_0x3ebdb0(0x56a)},'practiceEnemyPlus':{'name':'高级练习树桩','level':0xc8,'health':0x12a05f200,'mana':0x12a05f200,'physicalAttack':0x3e8,'physicalDefense':0x186a0,'magicAttack':0x3e8,'magicDefense':0x186a0,'speed':0xea60,'cultivation':0x7ef40,'enemyCritRate':0.8,'enemyCritDamage':2.5,'backgroundImage':_0x3ebdb0(0x522),'reward':()=>gainExp(0x2710),'rewardMessage':_0x3ebdb0(0x372),'specialty':_0x3ebdb0(0x3bb)},'ancientEvil':{'name':'太古魔魂封印','level':0x64,'health':0x400c7c0,'mana':0x249f00,'physicalAttack':0x29040,'physicalDefense':0xf423f,'magicAttack':0x13ec,'magicDefense':0xf423f,'speed':0xbb8,'cultivation':0x250f8,'enemyCritRate':0.01,'enemyCritDamage':0x3e8,'backgroundImage':'https://pic.imgdb.cn/item/66cc8f01d9c307b7e9c6d2e8.png','reward':()=>{const _0x1b7988=_0x3ebdb0,_0x2f5eee=['cultivationPill500','universalCrystal',_0x1b7988(0x3ad)],_0x33e901=_0x2f5eee[Math[_0x1b7988(0x300)](Math[_0x1b7988(0x61a)]()*_0x2f5eee[_0x1b7988(0x545)])],_0xe14054=Math[_0x1b7988(0x300)](Math['random']()*0x4)+0x2,_0x454246={'cultivationPill500':_0x1b7988(0x255),'universalCrystal':'天空之晶','universalKernel':_0x1b7988(0x5c1)};addItemToJinnang(_0x33e901,_0xe14054),showInfoBox(_0x1b7988(0x575)+_0xe14054+'个'+_0x454246[_0x33e901]+_0x1b7988(0x2fb));},'rewardMessage':'无','specialty':'ancientEvil'},'expEnemy':{'name':_0x3ebdb0(0x2a7),'level':0xc8,'health':0x7944ec0,'mana':0x249f00,'physicalAttack':0x445c0,'physicalDefense':0x3a980,'magicAttack':0x4da30,'magicDefense':0x21408,'speed':0x46118,'cultivation':0x49ae8,'enemyCritRate':0.15,'enemyCritDamage':1.8,'backgroundImage':_0x3ebdb0(0x5c3),'reward':()=>gainExp(0x186a00),'rewardMessage':_0x3ebdb0(0x481),'specialty':_0x3ebdb0(0x47e)},'noWorkBoss':{'name':'無班之魂','level':0xc8,'health':0x258,'mana':0x2ab980,'physicalAttack':0x992,'physicalDefense':0x4b0,'magicAttack':0x992,'magicDefense':0x4b0,'speed':0xf423f,'cultivation':0x98967f,'enemyCritRate':0x1,'enemyCritDamage':2.5,'backgroundImage':_0x3ebdb0(0x5c3),'reward':()=>addItemToJinnang('angelWings',0x1),'rewardMessage':'天使之翼','specialty':_0x3ebdb0(0x3f9)},'qiongQi':{'name':'穷奇','level':0xa0,'health':0x9470,'mana':0x2ee0,'physicalAttack':0xd7a,'physicalDefense':0xf870,'magicAttack':0x468,'magicDefense':0x7a12,'speed':0x4e200,'cultivation':0x249f0,'enemyCritRate':0x0,'enemyCritDamage':0x0,'backgroundImage':_0x3ebdb0(0x22c),'reward':()=>addItemToJinnang(_0x3ebdb0(0x5ed),0x1),'rewardMessage':_0x3ebdb0(0x39f),'specialty':_0x3ebdb0(0x55f)},'baiYin':{'name':_0x3ebdb0(0x365),'level':0xb4,'health':0x186a0,'mana':0x4e20,'physicalAttack':0x5dc,'physicalDefense':0x12c,'magicAttack':0x514,'magicDefense':0x118,'speed':0x7e8,'cultivation':0x400,'enemyCritRate':0.5,'enemyCritDamage':1.5,'backgroundImage':_0x3ebdb0(0x248),'reward':()=>{const _0x2927bf=_0x3ebdb0,_0x1c491c=Math[_0x2927bf(0x420)](petLevel*(0x5+Math['random']()*0x5));petLevel<=0xb4&&gainExp(_0x1c491c),handleBaiYinReward();},'rewardMessage':'无','specialty':'baiYin'},'stoneDragon':{'name':'岩龙','level':0xb4,'health':0xe27f6600,'mana':0x1e848,'physicalAttack':0xd7a,'physicalDefense':0xea60,'magicAttack':0x468,'magicDefense':0xea60,'speed':0x960,'cultivation':0x730a0,'enemyCritRate':0.65,'enemyCritDamage':3.8,'backgroundImage':_0x3ebdb0(0x48b),'reward':()=>{const _0x55049d=_0x3ebdb0;generateItemToJinnang('hongHuang',_0x55049d(0x339),_0x55049d(0x346),price=0x1f40,quantity=0x1,description=_0x55049d(0x251)),increaseCurrentPetIntimacy(0x258);},'rewardMessage':_0x3ebdb0(0x500),'specialty':_0x3ebdb0(0x3ff)},'fireGiant':{'name':_0x3ebdb0(0x43d),'level':0xb4,'health':0x3b9aca00,'mana':0x2faf080,'physicalAttack':0xa5a,'physicalDefense':0xbb8,'magicAttack':0x1978,'magicDefense':0xa8c,'speed':0xea60,'cultivation':0x1f40,'enemyCritRate':0.35,'enemyCritDamage':2.15,'backgroundImage':_0x3ebdb0(0x48b),'reward':()=>{increaseCurrentPetLearningValue(0x3e8),increaseCurrentPetIntimacy(0x258);},'rewardMessage':'在法术精英怪物训练下的珍贵成果：1000学习度和600亲密度，可用于训练技能加成','specialty':'fireGiant'}},specificAttackByEnemy={'expEnemy':{'type':_0x3ebdb0(0x444),'action':()=>handleExpEnemySkill()},'noWorkBoss':{'type':_0x3ebdb0(0x444),'action':()=>{const _0x78099e=_0x3ebdb0,_0x9eccc4=Math[_0x78099e(0x420)](battleAttributes[_0x78099e(0x41f)]*0.15);battleAttributes[_0x78099e(0x41f)]-=_0x9eccc4,battleState[_0x78099e(0x46d)]['magicDefense']=Math[_0x78099e(0x420)](battleAttributes[_0x78099e(0x5dc)]*battleState[_0x78099e(0x3aa)][_0x78099e(0x345)]),battleState[_0x78099e(0x46d)][_0x78099e(0x54a)]=Math[_0x78099e(0x420)](battleAttributes['physicalDefense']*battleState[_0x78099e(0x3aa)]['critDamage']),logBattleEvent(_0x78099e(0x2d2)+_0x9eccc4+_0x78099e(0x5a4),_0x78099e(0x209)),handleNoWorkBossSkill();}},'ancientEvil':{'type':'interval','action':()=>handleAncientEvilSkill()},'qiongQi':{'type':_0x3ebdb0(0x29f),'action':()=>{handleQiongQiSkill(),handleTaunt();}},'practiceEnemy':{'type':_0x3ebdb0(0x29f),'action':()=>{let _0x4994ee;_0x4994ee=setTimeout(()=>{const _0x165309=_0xdc19;summonEnemy&&battleState[_0x165309(0x46d)][_0x165309(0x5b7)]===_0x165309(0x56a)&&onBattleState?(battleState[_0x165309(0x46d)][_0x165309(0x2f3)]+=0x2dc6c0,battleState[_0x165309(0x46d)]['magicAttack']+=0x2dc6c0,updateUI(),showInfoBox(_0x165309(0x5ec))):clearTimeout(_0x4994ee);},0x927c0);}},'practiceEnemyPlus':{'type':_0x3ebdb0(0x29f),'action':()=>{let _0x55bbe6;_0x55bbe6=setTimeout(()=>{const _0x4d0fd2=_0xdc19;summonEnemy&&battleState[_0x4d0fd2(0x46d)][_0x4d0fd2(0x5b7)]===_0x4d0fd2(0x3bb)&&onBattleState?(battleState[_0x4d0fd2(0x46d)][_0x4d0fd2(0x45e)]=enemyMaxHealth,updateUI(),logBattleEvent(_0x4d0fd2(0x4f1))):clearTimeout(_0x55bbe6);},0x7530);}},'baiYin':{'type':_0x3ebdb0(0x29f),'action':()=>{logBattleEvent('战胜后可得到大量经验值和概率获得提升宠物技能的神秘物质','gold');}},'stoneDragon':{'type':_0x3ebdb0(0x444),'action':()=>{const _0x574955=_0x3ebdb0;if(summonEnemy&&battleState[_0x574955(0x46d)]['name']==='岩龙'&&onBattleState){if(battleState['enemy'][_0x574955(0x45e)]>=enemyMaxHealth*0.2)battleState[_0x574955(0x46d)]['physicalDefense']+=0xea60,battleState['enemy'][_0x574955(0x34c)]+=0xea60,updateUI();else{battleState[_0x574955(0x46d)][_0x574955(0x2f3)]+=Math[_0x574955(0x300)](Math[_0x574955(0x61a)]()*0x5dc+0x5dc);if(battleState[_0x574955(0x3aa)][_0x574955(0x59a)])return;else battleState[_0x574955(0x3aa)]['shocked']=!![],logBattleEvent(_0x574955(0x5d8),'grey');}}}},'fireGiant':{'type':_0x3ebdb0(0x29f),'action':()=>{const _0x1a02b5=_0x3ebdb0;typeof battleState[_0x1a02b5(0x3aa)]['heat']===_0x1a02b5(0x2da)&&(battleState['player'][_0x1a02b5(0x3d9)]=![]);if(battleState[_0x1a02b5(0x3aa)][_0x1a02b5(0x3d9)])return;const _0x2874e6=playerCritDamage,_0x118f8d=playerCritRate;battleState[_0x1a02b5(0x3aa)][_0x1a02b5(0x345)]=Math[_0x1a02b5(0x389)](1.5,_0x2874e6*0x2),battleState[_0x1a02b5(0x3aa)][_0x1a02b5(0x2e5)]=Math['max'](0.1,Math[_0x1a02b5(0x296)](0.5,Math[_0x1a02b5(0x300)](_0x118f8d*0x32)*0.01)),battleState[_0x1a02b5(0x3aa)]['heat']=!![],showEffect(_0x1a02b5(0x416),_0x1a02b5(0x20b)),updateUI();}}};function handleCleanHeat(){const _0x153bf2=_0x3ebdb0;battleState[_0x153bf2(0x3aa)]['heat']=![],battleState[_0x153bf2(0x3aa)]['critDamage']=Math[_0x153bf2(0x389)](1.5,playerCritDamage*0.5),battleState[_0x153bf2(0x3aa)][_0x153bf2(0x2e5)]=Math['max'](0.1,playerCritRate*0x2),updateUI();}function applySpecificAttackByEnemy(_0x3a97e7){const _0x2bee1e=_0x3ebdb0,_0x483fb8=specificAttackByEnemy[_0x3a97e7];if(_0x483fb8){if(_0x483fb8[_0x2bee1e(0x206)]===_0x2bee1e(0x444))_0x483fb8[_0x2bee1e(0x2f8)]();else _0x483fb8[_0x2bee1e(0x206)]===_0x2bee1e(0x29f)&&_0x483fb8['action']();}else console[_0x2bee1e(0x27a)](_0x2bee1e(0x48e)+_0x3a97e7+'\x20没有特殊攻击能力');}function handleBattleWithSummonEnemy(_0x3ff984){const _0xcb124c=_0x3ebdb0;if(!battleState[_0xcb124c(0x5ae)]||!enemies[battleState['enemyKey']])return;const _0x116647=enemies[battleState['enemyKey']];_0x3ff984?_0x116647[_0xcb124c(0x2c7)]?(_0x116647[_0xcb124c(0x2c7)](),_0x116647[_0xcb124c(0x5b1)]!=='无'&&showInfoBox('你击败了'+_0x116647[_0xcb124c(0x621)]+'，获得了'+_0x116647[_0xcb124c(0x5b1)]+'！',null,null,_0xcb124c(0x417))):showInfoBox(_0xcb124c(0x2cf)+_0x116647[_0xcb124c(0x621)]+_0xcb124c(0x4b1),null,null,'yellow'):showInfoBox(_0xcb124c(0x246)+_0x116647['name']+_0xcb124c(0x4fe),null,null,_0xcb124c(0x24a)),resetBattleState(!![]),resetBuffState(![]),clearEnemyEffect(),clearPlayerEffect(),clearAutoBattle(),restoreEnemyState(),summonEnemy=![],updateUI();}function summonEnemyByType(_0x7c0dd1,_0x52e748=!![]){const _0x573c7f=_0x3ebdb0;if(!summonEnemy&&attributesFetched){const _0x263a2e=enemies[_0x7c0dd1];if(_0x263a2e){const _0x24500c=()=>{const _0x184f96=_0xdc19;summonEnemy=!![],toggleFightingDrawer(),battleState[_0x184f96(0x46d)]={..._0x263a2e},battleState[_0x184f96(0x5ae)]=_0x7c0dd1,enemyMaxHealth=_0x263a2e[_0x184f96(0x45e)],enemyMaxMana=_0x263a2e[_0x184f96(0x41f)],enemyPetCultivation=_0x263a2e[_0x184f96(0x26f)],enemyCritRate=_0x263a2e[_0x184f96(0x2ec)],enemyCritDamage=_0x263a2e['enemyCritDamage'],changeEnemyImage(_0x7c0dd1),setBackgroundImage(_0x263a2e[_0x184f96(0x533)]),document[_0x184f96(0x43e)](_0x184f96(0x52b))[_0x184f96(0x331)]=_0x263a2e['level'],updateUI(),storeSummonEnemyInitialState();const _0x37c024=specificAttackByEnemy[_0x263a2e[_0x184f96(0x5b7)]];_0x37c024&&_0x37c024[_0x184f96(0x206)]===_0x184f96(0x29f)&&_0x37c024[_0x184f96(0x2f8)]();};_0x52e748?showInfoBox(_0x573c7f(0x5f5)+_0x263a2e[_0x573c7f(0x621)]+'，战胜后你会获得奖励',_0x24500c,()=>{const _0x177f18=_0x573c7f;summonEnemy=![],goldAmount-=0x4e20,updateGoldDisplay(goldAmount),showInfoBox(_0x177f18(0x3c0),null,null,_0x177f18(0x24a));return;}):_0x24500c();}else showInfoBox(_0x573c7f(0x515),null,null,'red');}else showInfoBox(_0x573c7f(0x454),null,null,_0x573c7f(0x24a));}function handleBaiYinReward(){const _0x135a9d=_0x3ebdb0,_0x319b48=getRandomInt(0x1,0x64);if(_0x319b48<=0x32)generateItemToJinnang(_0x135a9d(0x548),'宇宙之尘',_0x135a9d(0x4af),price=0xa,quantity=0x1,description=_0x135a9d(0x516)),showInfoBox('你获得一个宇宙之尘',null,null,null,_0x135a9d(0x4af));else _0x319b48<=0x5a?(addItemToJinnang(_0x135a9d(0x230),0x1),showInfoBox(_0x135a9d(0x33e),null,null,null,_0x135a9d(0x380))):(addItemToJinnang(_0x135a9d(0x241),0x1),showInfoBox(_0x135a9d(0x3bf),null,null,null,_0x135a9d(0x51e)));}let baiYinInterval=null;function handleBattleWithBaiYin(){const _0x16e2ca=_0x3ebdb0;if(baiYinInterval!==null){showInfoBox('试炼之地正在持续中！无法叠加！',null,null,'red');return;}showInfoBox(_0x16e2ca(0x4b8),null,null,_0x16e2ca(0x24a)),!onBattleState&&!summonEnemy?baiYinInterval=setInterval(()=>{const _0x592ca0=_0x16e2ca;useItem(_0x592ca0(0x34e),0x1)?(summonEnemyByType(_0x592ca0(0x428),![]),addItemToJinnang(_0x592ca0(0x236),0x1),autoBattle()):(clearInterval(baiYinInterval),baiYinInterval=null,showInfoBox(_0x592ca0(0x235)),document['getElementById'](_0x592ca0(0x240))['style'][_0x592ca0(0x569)]=_0x592ca0(0x30b));},0x3e8):(clearInterval(baiYinInterval),baiYinInterval=null);}function handleExpEnemySkill(){const _0x1bb3d2=_0x3ebdb0,_0x2030b0=Math[_0x1bb3d2(0x420)](battleAttributes[_0x1bb3d2(0x45e)]*0.1);battleAttributes['health']-=_0x2030b0,battleState[_0x1bb3d2(0x46d)][_0x1bb3d2(0x45e)]+=_0x2030b0*0xa,battleAttributes[_0x1bb3d2(0x54a)]=0x1,battleAttributes[_0x1bb3d2(0x34c)]=0x1,logBattleEvent(_0x1bb3d2(0x5bb)+_0x2030b0+_0x1bb3d2(0x26d),_0x1bb3d2(0x24a)),updateUI();}let qiongQi=null;function handleQiongQiSkill(){const _0x57be64=_0x3ebdb0,_0x4ca67c=battleState[_0x57be64(0x46d)][_0x57be64(0x5b7)]===_0x57be64(0x55f),_0x8ed258=Math[_0x57be64(0x420)](battleAttributes[_0x57be64(0x45e)]*(0.01+Math[_0x57be64(0x61a)]()*0.02));let _0x470588=Math[_0x57be64(0x420)](_0x8ed258*playerCritDamage);battleAttributes[_0x57be64(0x2f3)]*=0.01,battleAttributes[_0x57be64(0x5dc)]*=0.01,qiongQi!==null&&(clearInterval(qiongQi),qiongQi=null),summonEnemy&&_0x4ca67c?(battleState[_0x57be64(0x46d)][_0x57be64(0x54a)]=0xe8d4a50fff,battleState['enemy'][_0x57be64(0x34c)]=0xe8d4a50fff,setTimeout(()=>{const _0xd25df8=_0x57be64;battleState[_0xd25df8(0x46d)]['physicalDefense']=battleAttributes[_0xd25df8(0x2f3)]*0x64,battleState[_0xd25df8(0x46d)][_0xd25df8(0x34c)]=battleAttributes[_0xd25df8(0x5dc)]*0x64,qiongQi=setInterval(()=>{const _0x5a002b=_0xd25df8;battleAttributes['health']-=_0x8ed258,enemyMaxHealth+=_0x8ed258,battleState[_0x5a002b(0x46d)][_0x5a002b(0x45e)]+=_0x8ed258,battleState['enemy'][_0x5a002b(0x54a)]+=_0x470588,battleState[_0x5a002b(0x46d)][_0x5a002b(0x34c)]+=_0x470588,enemyPetCultivation=playerCultivation+0x5dc0,battleState[_0x5a002b(0x46d)][_0x5a002b(0x521)]=battleAttributes[_0x5a002b(0x521)]+0x960,updateUI(),(battleAttributes['health']<=0x0||battleState[_0x5a002b(0x46d)]['health']<=0x0||!summonEnemy)&&(clearInterval(qiongQi),qiongQi=null);},0x3e8);},0xbb8),logBattleEvent(_0x57be64(0x4b4),_0x57be64(0x4a4))):qiongQi!==null&&(clearInterval(qiongQi),qiongQi=null);}function handleNoWorkBossSkill(){const _0x50e9f7=_0x3ebdb0;if(Math[_0x50e9f7(0x61a)]()<0.8)return;const _0x5ee8c2=document[_0x50e9f7(0x43e)](_0x50e9f7(0x52b)),_0x265fd6=parseInt(_0x5ee8c2[_0x50e9f7(0x331)],0xa),_0x3f5403=_0x265fd6+0xc8;_0x5ee8c2['innerText']=_0x3f5403,logBattleEvent(_0x50e9f7(0x21c),'red');}function handleAncientEvilSkill(){const _0x404e3a=_0x3ebdb0;typeof battleState[_0x404e3a(0x3aa)][_0x404e3a(0x3e3)]===_0x404e3a(0x2da)&&(battleState[_0x404e3a(0x3aa)][_0x404e3a(0x3e3)]=![]);if(battleState[_0x404e3a(0x3aa)][_0x404e3a(0x3e3)])return;const _0x171a38=playerCritDamage,_0x105edb=enemyCritDamage;battleState[_0x404e3a(0x3aa)][_0x404e3a(0x345)]=_0x171a38*0.5,enemyCritDamage+=_0x171a38*0.5,battleState[_0x404e3a(0x3aa)]['damageLost']=!![],setTimeout(()=>{const _0x26a848=_0x404e3a;battleState[_0x26a848(0x3aa)]['damageLost']=![],battleState[_0x26a848(0x3aa)]['critDamage']=_0x171a38,enemyCritDamage=_0x105edb,updateUI();},0x2710),logBattleEvent(_0x404e3a(0x447),'lightblue');}function initializeEnemyPet(){const _0x34230d=_0x3ebdb0;enemyPet={'health':0xd,'mana':0x7,'physicalAttack':0x9,'physicalDefense':0x3,'magicAttack':0x5,'magicDefense':0x1,'speed':0x7,'cultivation':0xc},enemyMaxHealth=enemyPet['health'],enemyMaxMana=enemyPet[_0x34230d(0x41f)],enemyPetCultivation=enemyPet['cultivation'],battleState&&(battleState[_0x34230d(0x46d)]={...enemyPet}),storeEnemyInitialState();}function updateEnemyAttributes(){const _0x4983d8=_0x3ebdb0,_0x245412={'health':0x11e1a300,'mana':0x8f0d180,'physicalAttack':0x53020,'physicalDefense':0x38270,'magicAttack':0x41eb0,'magicDefense':0x38270,'speed':0xfa00,'cultivation':0x7ef40},_0x471da1={'health':0xc350,'mana':0x7d00,'physicalAttack':0x1e,'physicalDefense':0x96,'magicAttack':0x19,'magicDefense':0x78,'speed':0x14,'cultivation':0x23};function _0x56f924(_0x44054c,_0x2236d9){const _0x55012b=_0xdc19;let _0x4bf5bd=0x0;if(battleRounds<=0x2d){const _0x1c6ea8=Math[_0x55012b(0x300)](Math[_0x55012b(0x61a)]()*0x32)+0x1+battleRounds;_0x4bf5bd=_0x2236d9+0x7*_0x1c6ea8;}else{if(battleRounds<=0x46){const _0x32bd65=Math[_0x55012b(0x300)](Math['random']()*0x3c)+0x1+battleRounds;_0x4bf5bd=_0x2236d9+0x8*_0x32bd65;}else{if(battleRounds<=0x50){const _0x2fb33b=Math['floor'](Math[_0x55012b(0x61a)]()*0x64)+0x1+battleRounds;_0x4bf5bd=_0x2236d9+0x10*_0x2fb33b;}else{if(battleRounds<=0x5a){const _0x17f109=0.0003+Math['random']()*0.0006;_0x4bf5bd=_0x2236d9+_0x245412[_0x44054c]*_0x17f109;}else{if(battleRounds<=0x63){const _0x1de4d5=0.0006+Math['random']()*0.0012;_0x4bf5bd=_0x2236d9+_0x245412[_0x44054c]*_0x1de4d5;}else{if(battleRounds===0x64)_0x4bf5bd=_0x245412[_0x44054c]*0.1;else{if(battleRounds<=0x95){const _0x41ecd7=_0x245412[_0x44054c]*0.1,_0x2f04df=(_0x245412[_0x44054c]-_0x41ecd7)/0x96;_0x4bf5bd=_0x2f04df*battleRounds;}else{if(battleRounds===0x96)_0x4bf5bd=_0x245412[_0x44054c];else{const _0x27e197=_0x245412[_0x44054c],_0x1df4a1=battleRounds-0x96,_0x4a4568=Math[_0x55012b(0x300)](Math['random']()*(0x96-0x2+0x1))+0x2,_0x373ed0=_0x1df4a1*(_0x471da1[_0x44054c]*_0x4a4568);_0x4bf5bd=_0x27e197+_0x373ed0;}}}}}}}}return battleRounds<=0x96&&(_0x4bf5bd=Math['min'](_0x4bf5bd,_0x245412[_0x44054c])),_0x4bf5bd;}!battleState[_0x4983d8(0x46d)][_0x4983d8(0x340)]&&(enemyCritRate=Math[_0x4983d8(0x61a)]()*0.99+0.01,enemyCritDamage=Math[_0x4983d8(0x61a)]()*1.5+1.5),enemyPet[_0x4983d8(0x45e)]=Math[_0x4983d8(0x420)](_0x56f924(_0x4983d8(0x45e),enemyPet[_0x4983d8(0x45e)])),enemyPet[_0x4983d8(0x41f)]=Math['round'](_0x56f924('mana',enemyPet[_0x4983d8(0x41f)])),enemyPet[_0x4983d8(0x2f3)]=Math[_0x4983d8(0x420)](_0x56f924(_0x4983d8(0x2f3),enemyPet[_0x4983d8(0x2f3)])),enemyPet[_0x4983d8(0x54a)]=Math['round'](_0x56f924('physicalDefense',enemyPet[_0x4983d8(0x54a)])),enemyPet[_0x4983d8(0x5dc)]=Math[_0x4983d8(0x420)](_0x56f924(_0x4983d8(0x5dc),enemyPet['magicAttack'])),enemyPet['magicDefense']=Math['round'](_0x56f924(_0x4983d8(0x34c),enemyPet[_0x4983d8(0x34c)])),enemyPet[_0x4983d8(0x521)]=Math[_0x4983d8(0x420)](_0x56f924('speed',enemyPet[_0x4983d8(0x521)])),enemyPet[_0x4983d8(0x26f)]=Math[_0x4983d8(0x420)](_0x56f924(_0x4983d8(0x26f),enemyPet[_0x4983d8(0x26f)])),enemyMaxHealth=enemyPet[_0x4983d8(0x45e)],enemyMaxMana=enemyPet['mana'],enemyPetCultivation=enemyPet[_0x4983d8(0x26f)],battleState[_0x4983d8(0x46d)]={...enemyPet},storeEnemyInitialState(),enemyLevel=battleRounds,document[_0x4983d8(0x43e)](_0x4983d8(0x52b))[_0x4983d8(0x331)]=enemyLevel,handleRampaged();}function storeEnemyInitialState(){const _0x136480=_0x3ebdb0;enemyInitialState=JSON['parse'](JSON[_0x136480(0x3a7)](enemyPet));}function restoreEnemyState(){const _0x16a547=_0x3ebdb0;enemyInitialState&&(enemyPet=JSON['parse'](JSON[_0x16a547(0x3a7)](enemyInitialState)),enemyMaxHealth=enemyPet[_0x16a547(0x45e)],enemyMaxMana=enemyPet[_0x16a547(0x41f)],enemyPetCultivation=enemyPet['cultivation'],battleState[_0x16a547(0x46d)]={...enemyPet},clearPlayerEffect(),enemyLevel=battleRounds,document[_0x16a547(0x43e)](_0x16a547(0x52b))[_0x16a547(0x331)]=enemyLevel);}function storeSummonEnemyInitialState(){const _0x277582=_0x3ebdb0;if(summonEnemy)summonEnemyInitialState=JSON[_0x277582(0x617)](JSON[_0x277582(0x3a7)](battleState[_0x277582(0x46d)]));}function restoreSummonEnemyState(){const _0x725cf3=_0x3ebdb0;summonEnemyInitialState&&(enemyPet=JSON[_0x725cf3(0x617)](JSON[_0x725cf3(0x3a7)](enemyInitialState)),enemyMaxHealth=enemyPet['health'],enemyMaxMana=enemyPet['mana'],enemyPetCultivation=enemyPet['cultivation'],battleState[_0x725cf3(0x46d)]={...enemyPet},clearPlayerEffect(),enemyLevel=battleRounds,document[_0x725cf3(0x43e)](_0x725cf3(0x52b))[_0x725cf3(0x331)]=enemyLevel);}function getEnemyStatus(){const _0x3b1074=_0x3ebdb0;let _0x216795=[];if(!playerTurn)_0x216795[_0x3b1074(0x48f)]('⚔️');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x340)])_0x216795[_0x3b1074(0x48f)]('狂暴');if(enemyRivival)_0x216795['push']('复活中');if(battleState[_0x3b1074(0x46d)]['armorBreak'])_0x216795['push']('破甲');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x257)])_0x216795['push']('虚弱');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x506)])_0x216795[_0x3b1074(0x48f)]('重伤');if(battleState[_0x3b1074(0x46d)]['bleeding'])_0x216795['push']('流血');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x3ac)])_0x216795[_0x3b1074(0x48f)]('腐蚀');if(battleState['enemy']['sleep'])_0x216795[_0x3b1074(0x48f)]('沉睡');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x57e)])_0x216795[_0x3b1074(0x48f)]('穿透');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x258)])_0x216795[_0x3b1074(0x48f)]('沉默');if(battleState['enemy'][_0x3b1074(0x351)])_0x216795[_0x3b1074(0x48f)]('中毒');if(battleState['enemy']['stunned'])_0x216795[_0x3b1074(0x48f)]('眩晕');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x364)])_0x216795[_0x3b1074(0x48f)]('恐吓');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x220)])_0x216795[_0x3b1074(0x48f)]('惶恐');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x5ef)])_0x216795[_0x3b1074(0x48f)]('麻痹');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x329)])_0x216795[_0x3b1074(0x48f)]('混乱');if(battleState[_0x3b1074(0x46d)][_0x3b1074(0x29c)])_0x216795[_0x3b1074(0x48f)]('灼烧');if(battleState[_0x3b1074(0x46d)]['slow'])_0x216795[_0x3b1074(0x48f)]('迟缓');return _0x216795[_0x3b1074(0x46b)](',\x20');}function updateEnemyStatusDisplay(){const _0x3a3c7d=_0x3ebdb0,_0x4ab206=document['getElementById'](_0x3a3c7d(0x338));_0x4ab206&&(_0x4ab206[_0x3a3c7d(0x331)]=getEnemyStatus());}function getPlayerStatus(){const _0x36f8b8=_0x3ebdb0;let _0xfe45b1=[];if(playerTurn)_0xfe45b1[_0x36f8b8(0x48f)]('⚔️');if(lifeBoxMode)_0xfe45b1['push']('肉盾模式');if(battleState[_0x36f8b8(0x3aa)]['defensing'])_0xfe45b1[_0x36f8b8(0x48f)]('蓄力中');if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x59a)])_0xfe45b1['push']('触电');if(battleState[_0x36f8b8(0x3aa)]['heat'])_0xfe45b1['push']('高温');if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x303)])_0xfe45b1['push']('护盾');if(battleState['player'][_0x36f8b8(0x4ae)])_0xfe45b1[_0x36f8b8(0x48f)]('隐身');if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x4a3)])_0xfe45b1[_0x36f8b8(0x48f)](_0x36f8b8(0x505));if(battleState['player']['healing'])_0xfe45b1['push'](_0x36f8b8(0x242));if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x385)])_0xfe45b1[_0x36f8b8(0x48f)]('北冥');if(battleState[_0x36f8b8(0x3aa)]['spiritPowerActive'])_0xfe45b1[_0x36f8b8(0x48f)]('Blessing!');if(battleState['player'][_0x36f8b8(0x211)])_0xfe45b1[_0x36f8b8(0x48f)](_0x36f8b8(0x538));if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x461)])_0xfe45b1[_0x36f8b8(0x48f)]('醉酒');if(battleState['player'][_0x36f8b8(0x55d)])_0xfe45b1[_0x36f8b8(0x48f)]('撕裂');if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x4ff)])_0xfe45b1[_0x36f8b8(0x48f)]('压制');if(battleState[_0x36f8b8(0x3aa)]['taunt'])_0xfe45b1[_0x36f8b8(0x48f)]('嘲讽');if(battleState['player'][_0x36f8b8(0x291)])_0xfe45b1[_0x36f8b8(0x48f)]('封印');if(battleState['player'][_0x36f8b8(0x374)])_0xfe45b1[_0x36f8b8(0x48f)]('杀戮');if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x5b6)])_0xfe45b1[_0x36f8b8(0x48f)]('禁疗');if(battleState[_0x36f8b8(0x3aa)][_0x36f8b8(0x58c)])_0xfe45b1['push']('摄魂');if(battleState['player'][_0x36f8b8(0x29a)])_0xfe45b1[_0x36f8b8(0x48f)]('失明');if(battleState[_0x36f8b8(0x3aa)]['spellSlow'])_0xfe45b1[_0x36f8b8(0x48f)](_0x36f8b8(0x3be));return _0xfe45b1[_0x36f8b8(0x46b)](',\x20');}function updatePlayerStatusDisplay(){const _0x3b19f8=_0x3ebdb0,_0xa405c4=document[_0x3b19f8(0x43e)](_0x3b19f8(0x36a));_0xa405c4&&(_0xa405c4['innerText']=getPlayerStatus());}function showEffect(_0x46276e,_0x446b69){const _0x1cf2ba=_0x3ebdb0,_0x575b09=document['getElementById'](_0x46276e);_0x575b09['style'][_0x1cf2ba(0x533)]=_0x1cf2ba(0x2b7)+_0x446b69+')',_0x575b09[_0x1cf2ba(0x35d)][_0x1cf2ba(0x244)](_0x1cf2ba(0x3b6)),setTimeout(()=>{const _0x27f261=_0x1cf2ba;_0x575b09[_0x27f261(0x35d)][_0x27f261(0x4d4)](_0x27f261(0x3b6)),_0x575b09[_0x27f261(0x604)][_0x27f261(0x533)]='';},0x15e);}function formatLargeNumber(_0x123f16){const _0x59f528=_0x3ebdb0;if(_0x123f16<0x2710)return _0x123f16['toString']();const _0x1d5492=Math[_0x59f528(0x300)](_0x123f16/0x2710),_0x1b1114=_0x123f16%0x2710;if(_0x1b1114===0x0)return _0x1d5492+'w';return _0x1d5492+'w'+_0x1b1114;}function updateUI(){const _0x1a2474=_0x3ebdb0,_0xe3c53a=document['getElementById'](_0x1a2474(0x37e)),_0x1e4d22=document[_0x1a2474(0x43e)](_0x1a2474(0x422)),_0x4bf635=document[_0x1a2474(0x43e)](_0x1a2474(0x501)),_0x164660=document[_0x1a2474(0x43e)]('your-pet-max-mana');_0xe3c53a[_0x1a2474(0x331)]=formatLargeNumber(battleAttributes[_0x1a2474(0x45e)]),_0x1e4d22[_0x1a2474(0x331)]=formatLargeNumber(maxHealth),_0x4bf635[_0x1a2474(0x331)]=formatLargeNumber(battleAttributes[_0x1a2474(0x41f)]),_0x164660[_0x1a2474(0x331)]=formatLargeNumber(maxMana),_0xe3c53a[_0x1a2474(0x35d)][_0x1a2474(0x244)]('gold-text'),_0x1e4d22[_0x1a2474(0x35d)][_0x1a2474(0x244)](_0x1a2474(0x4f8)),_0x4bf635[_0x1a2474(0x35d)]['add']('blue-text'),_0x164660['classList']['add'](_0x1a2474(0x301));const _0x261571=document[_0x1a2474(0x43e)]('enemy-pet-health'),_0x4f72dc=document[_0x1a2474(0x43e)]('enemy-max-health'),_0x896423=document[_0x1a2474(0x43e)](_0x1a2474(0x520)),_0x17aec6=document['getElementById'](_0x1a2474(0x25e));_0x261571[_0x1a2474(0x331)]=formatLargeNumber(battleState[_0x1a2474(0x46d)][_0x1a2474(0x45e)]),_0x4f72dc['innerText']=formatLargeNumber(enemyMaxHealth),_0x896423['innerText']=formatLargeNumber(battleState[_0x1a2474(0x46d)][_0x1a2474(0x41f)]),_0x17aec6[_0x1a2474(0x331)]=formatLargeNumber(enemyMaxMana),_0x261571[_0x1a2474(0x35d)][_0x1a2474(0x244)]('gold-text'),_0x4f72dc['classList']['add'](_0x1a2474(0x4f8)),_0x896423['classList']['add']('blue-text'),_0x17aec6[_0x1a2474(0x35d)][_0x1a2474(0x244)](_0x1a2474(0x301)),document[_0x1a2474(0x43e)](_0x1a2474(0x3f4))[_0x1a2474(0x331)]=formatLargeNumber(battleAttributes['physicalAttack']),document[_0x1a2474(0x43e)]('your-pet-physical-defense')[_0x1a2474(0x331)]=formatLargeNumber(battleAttributes[_0x1a2474(0x54a)]),document[_0x1a2474(0x43e)](_0x1a2474(0x517))['innerText']=formatLargeNumber(battleAttributes[_0x1a2474(0x5dc)]),document[_0x1a2474(0x43e)](_0x1a2474(0x227))['innerText']=formatLargeNumber(battleAttributes[_0x1a2474(0x34c)]),document[_0x1a2474(0x43e)]('your-pet-speed')['innerText']=formatLargeNumber(battleAttributes[_0x1a2474(0x521)]),document[_0x1a2474(0x43e)](_0x1a2474(0x38d))[_0x1a2474(0x331)]=formatLargeNumber(playerCultivation),document[_0x1a2474(0x43e)](_0x1a2474(0x2d3))[_0x1a2474(0x331)]=formatLargeNumber(playerCultivation),document[_0x1a2474(0x43e)]('enemy-pet-physical-attack')[_0x1a2474(0x331)]=formatLargeNumber(battleState['enemy'][_0x1a2474(0x2f3)]),document['getElementById']('enemy-pet-physical-defense')[_0x1a2474(0x331)]=formatLargeNumber(battleState[_0x1a2474(0x46d)][_0x1a2474(0x54a)]),document['getElementById'](_0x1a2474(0x4ca))[_0x1a2474(0x331)]=formatLargeNumber(battleState[_0x1a2474(0x46d)][_0x1a2474(0x5dc)]),document[_0x1a2474(0x43e)](_0x1a2474(0x2e8))[_0x1a2474(0x331)]=formatLargeNumber(battleState[_0x1a2474(0x46d)]['magicDefense']),document[_0x1a2474(0x43e)](_0x1a2474(0x3e2))[_0x1a2474(0x331)]=formatLargeNumber(battleState[_0x1a2474(0x46d)][_0x1a2474(0x521)]);const _0x9ec9b6=document['getElementById'](_0x1a2474(0x2fa));_0x9ec9b6['innerText']=formatLargeNumber(battleState[_0x1a2474(0x46d)][_0x1a2474(0x26f)]),document[_0x1a2474(0x43e)](_0x1a2474(0x324))[_0x1a2474(0x331)]=Math[_0x1a2474(0x420)](battleAttributes[_0x1a2474(0x2e5)]*0x64)+'%',document['getElementById'](_0x1a2474(0x43c))[_0x1a2474(0x331)]=Math[_0x1a2474(0x420)](battleAttributes['critDamage']*0x64)+'%',document[_0x1a2474(0x43e)](_0x1a2474(0x482))[_0x1a2474(0x331)]=Math[_0x1a2474(0x420)](enemyCritRate*0x64)+'%',document[_0x1a2474(0x43e)](_0x1a2474(0x29b))[_0x1a2474(0x331)]=Math[_0x1a2474(0x420)](enemyCritDamage*0x64)+'%',updatePlayerStatusDisplay(),updateEnemyStatusDisplay(),updatePetLevel(),getShieldStatus(),updateHealthAndManaDisplay(),calculateAndDisplayDodgeRate(),document[_0x1a2474(0x43e)](_0x1a2474(0x26a))[_0x1a2474(0x331)]=battleRounds;}document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x43a))['addEventListener'](_0x3ebdb0(0x5a6),()=>{const _0x4e2a09=_0x3ebdb0;if(!attributesFetched){showInfoBox(_0x4e2a09(0x5a9));return;}const _0x178525=calculateSkillAttributes(),_0x1350b8=new Map([[_0x4e2a09(0x45e),_0x4e2a09(0x26d)],['magicAttack',_0x4e2a09(0x3c3)],[_0x4e2a09(0x34c),_0x4e2a09(0x5f9)],[_0x4e2a09(0x41f),'法力值'],[_0x4e2a09(0x2f3),'物理攻击'],['physicalDefense',_0x4e2a09(0x294)],['speed','速度']]);let _0x5c6db8='';for(const [_0x2a8aa1,_0x31c40f]of Object[_0x4e2a09(0x307)](_0x178525)){const _0x3f1921=_0x1350b8['get'](_0x2a8aa1)||_0x2a8aa1;_0x5c6db8+=_0x3f1921+':\x20'+_0x31c40f+'\x0a';}showInfoBox(_0x4e2a09(0x50f)+_0x5c6db8+_0x4e2a09(0x51d));});function updateHealthAndManaDisplay(){const _0x3b0864=_0x3ebdb0;updateDisplay('your-pet-health',_0x3b0864(0x422),'health',0x14,_0x3b0864(0x367),battleAttributes[_0x3b0864(0x45e)],maxHealth),updateDisplay(_0x3b0864(0x501),_0x3b0864(0x5e4),_0x3b0864(0x41f),0xa,_0x3b0864(0x234),battleAttributes[_0x3b0864(0x41f)],maxMana),updateDisplay(_0x3b0864(0x4e0),_0x3b0864(0x3a6),_0x3b0864(0x45e),0x14,_0x3b0864(0x367),battleState[_0x3b0864(0x46d)][_0x3b0864(0x45e)],enemyMaxHealth),updateDisplay(_0x3b0864(0x520),_0x3b0864(0x25e),_0x3b0864(0x41f),0xa,_0x3b0864(0x234),battleState[_0x3b0864(0x46d)][_0x3b0864(0x41f)],enemyMaxMana);}function updateDisplay(_0x4e866c,_0x3ba81e,_0x1bc0c2,_0x3e45ee,_0x4a3d39,_0x12e553,_0x2edb0c){const _0x38eb4f=_0x3ebdb0,_0x388156=document[_0x38eb4f(0x43e)](_0x4e866c),_0x314ba6=document['getElementById'](_0x3ba81e),_0x2d15c6=_0x12e553,_0x57cf7b=_0x2edb0c,_0x4de716=_0x2d15c6/_0x57cf7b*0x64,_0x2cec12=formatLargeNumber(_0x2d15c6),_0x248ba5=formatLargeNumber(_0x57cf7b);let _0x129dc4;if(_0x1bc0c2==='health')_0x4e866c===_0x38eb4f(0x37e)&&extraShield!==0x0?_0x129dc4=_0x38eb4f(0x5d4):_0x129dc4=_0x38eb4f(0x366);else _0x1bc0c2===_0x38eb4f(0x41f)&&(_0x129dc4=_0x38eb4f(0x20e));_0x388156[_0x38eb4f(0x3de)]=_0x38eb4f(0x3db)+_0x4e866c+_0x38eb4f(0x3a8)+_0x4de716+_0x38eb4f(0x52d)+_0x129dc4+_0x38eb4f(0x3c9)+_0x2cec12+'/'+_0x248ba5+_0x38eb4f(0x357)+(_0x4de716<_0x3e45ee?_0x38eb4f(0x5ea)+_0x4e866c+_0x38eb4f(0x3c8)+_0x4a3d39+_0x38eb4f(0x542):'')+_0x38eb4f(0x502),_0x314ba6[_0x38eb4f(0x604)][_0x38eb4f(0x569)]=_0x38eb4f(0x30b);}let damageRatio=0x1;function calculateDamage(_0x450eb0,_0x247def,_0x349bfa,_0x2f2e88=![]){const _0x3aa240=_0x3ebdb0;_0x247def&&(_0x450eb0=Math['floor'](_0x450eb0*_0x349bfa));_0x2f2e88&&(_0x450eb0*=Math['floor'](Math[_0x3aa240(0x389)](0x0,damageRatio)));try{const _0x482b18=document[_0x3aa240(0x43e)](_0x3aa240(0x3bd))?.[_0x3aa240(0x3ed)];if(_0x482b18){const _0x38a6f6=_0x3aa240(0x618)+_0x482b18,_0x1ce1df=localStorage[_0x3aa240(0x2e7)](_0x38a6f6);if(_0x1ce1df){const _0x330a7c=JSON[_0x3aa240(0x617)](_0x1ce1df),_0x45e0f5=_0x330a7c[_0x3aa240(0x3df)]||0x0;_0x45e0f5>0x0&&(_0x450eb0=Math[_0x3aa240(0x300)](_0x450eb0*(0x1+_0x45e0f5*0.01)),console['log'](_0x482b18+_0x3aa240(0x2c2)+_0x45e0f5[_0x3aa240(0x21f)](0x2)+_0x3aa240(0x486)+_0x450eb0));}}}catch(_0x5ee8b1){console[_0x3aa240(0x4a5)](_0x3aa240(0x5c2),_0x5ee8b1);}try{const _0x501138=getCurrentJingmaiState();if(_0x501138&&_0x501138['jingmaiStates']){const _0x371511=_0x501138[_0x3aa240(0x62a)]['currentLevel']||0x0,_0x251867=getStageNumber(_0x371511);if(_0x251867>0x1){const _0x5b05e5=0x1+_0x251867*0.02;_0x450eb0=Math[_0x3aa240(0x300)](_0x450eb0*_0x5b05e5);const _0x54e885=Math[_0x3aa240(0x61a)]();let _0x2839ec=0x1;if(_0x251867>=0x2&&_0x251867<=0xa)_0x54e885<0.1&&(_0x2839ec=1.2);else{if(_0x251867>=0xb&&_0x251867<=0x14)_0x54e885<0.2&&(_0x2839ec=1.4);else{if(_0x251867>=0x15&&_0x251867<=0x1e)_0x54e885<0.3&&(_0x2839ec=1.6);else{if(_0x251867>=0x1f&&_0x251867<=0x28)_0x54e885<0.4&&(_0x2839ec=1.8);else _0x251867>=0x29&&(_0x54e885<0.5&&(_0x2839ec=0x2));}}}_0x2839ec>0x1&&(_0x450eb0=Math[_0x3aa240(0x300)](_0x450eb0*_0x2839ec));}}}catch(_0x3b9bf6){console['warn']('经脉伤害加成计算出错，使用默认伤害:',_0x3b9bf6);}return _0x450eb0;}function checkCriticalHit(_0x398a6a){const _0x4455d6=_0x3ebdb0;return Math[_0x4455d6(0x61a)]()<_0x398a6a;}function calculateAndDisplayDodgeRate(){const _0x4c9efe=_0x3ebdb0;let _0x41aa38,_0x48029d,_0x2dda58=document['getElementById'](_0x4c9efe(0x2f2)),_0x5e73bc=document[_0x4c9efe(0x43e)](_0x4c9efe(0x283)),_0x3e4da7=document['getElementById']('enemy-physical-dodge-rate'),_0x48e7f3=document[_0x4c9efe(0x43e)](_0x4c9efe(0x45a)),_0x468b78=0x0;if(battleState[_0x4c9efe(0x3aa)][_0x4c9efe(0x4ae)])_0x468b78=0.2;_0x41aa38=battleAttributes[_0x4c9efe(0x521)]-battleState[_0x4c9efe(0x46d)][_0x4c9efe(0x521)],_0x41aa38>0x0?(_0x2dda58[_0x4c9efe(0x331)]=(Math['min'](Math[_0x4c9efe(0x310)](_0x41aa38)/0x9c4*0.01+_0x468b78,0.8)*0x64)[_0x4c9efe(0x21f)](0x2)+'%',_0x3e4da7['innerText']='0%'):(_0x3e4da7[_0x4c9efe(0x331)]=(Math[_0x4c9efe(0x296)](Math[_0x4c9efe(0x310)](_0x41aa38)/0x9c4*0.01,0.8)*0x64)['toFixed'](0x2)+'%',_0x2dda58[_0x4c9efe(0x331)]='0%'),_0x48029d=playerCultivation-enemyPetCultivation,_0x48029d>0x0?(_0x5e73bc['innerText']=(Math[_0x4c9efe(0x296)](Math['abs'](_0x48029d)/0x88b8*0.01+_0x468b78,0.8)*0x64)[_0x4c9efe(0x21f)](0x2)+'%',_0x48e7f3[_0x4c9efe(0x331)]='0%'):(_0x48e7f3[_0x4c9efe(0x331)]=(Math[_0x4c9efe(0x296)](Math[_0x4c9efe(0x310)](_0x48029d)/0x88b8*0.01,0.8)*0x64)['toFixed'](0x2)+'%',_0x5e73bc[_0x4c9efe(0x331)]='0%');}function handleDodge(_0x2af29d){const _0x39e5b8=_0x3ebdb0;let _0x2b19c9,_0x3bd714=0x0,_0x2fa696,_0x5ea662=0x0;if(battleState[_0x39e5b8(0x3aa)][_0x39e5b8(0x4ae)])_0x5ea662=0.2;if(_0x2af29d===_0x39e5b8(0x3aa))_0x2b19c9=battleAttributes[_0x39e5b8(0x521)]-battleState[_0x39e5b8(0x46d)][_0x39e5b8(0x521)],_0x2b19c9>0x0&&(_0x3bd714=Math[_0x39e5b8(0x296)](Math['abs'](_0x2b19c9)/0x9c4*0.01+_0x5ea662,0.8)),_0x2fa696=document[_0x39e5b8(0x43e)](_0x39e5b8(0x29d)),console[_0x39e5b8(0x27a)](_0x39e5b8(0x38e)+_0x3bd714);else{if(_0x2af29d===_0x39e5b8(0x46d))_0x2b19c9=battleState['enemy']['speed']-battleAttributes[_0x39e5b8(0x521)],_0x2b19c9>0x0&&(_0x3bd714=Math[_0x39e5b8(0x296)](Math[_0x39e5b8(0x310)](_0x2b19c9)/0x9c4*0.01,0.8)),_0x2fa696=document[_0x39e5b8(0x43e)](_0x39e5b8(0x56b)),console[_0x39e5b8(0x27a)]('敌人闪避概率为：'+_0x3bd714);else return console[_0x39e5b8(0x1f6)](_0x39e5b8(0x378)),![];}const _0x23a66c=Math['random'](),_0x165b1a=_0x23a66c<_0x3bd714;console['log']('闪避随机数为：'+_0x23a66c);if(_0x165b1a)return _0x2af29d===_0x39e5b8(0x3aa)?(_0x2fa696[_0x39e5b8(0x604)]['opacity']=_0x39e5b8(0x32c),showEffect('enemyEffect','https://pic.imgdb.cn/item/66bb115dd9c307b7e9a6c2d0.png')):(_0x2fa696[_0x39e5b8(0x604)]['opacity']=_0x39e5b8(0x32c),showEffect('playerEffect',_0x39e5b8(0x27b))),setTimeout(()=>{_0x2fa696['style']['opacity']='';},0x64),!![];return![];}function handleMagicDodge(_0x131b9d){const _0x3dd9f8=_0x3ebdb0;let _0x351a0f,_0x6849ab=0x0,_0x43a5db,_0x2166ad=0x0;if(battleState['player']['hidden'])_0x2166ad=0.2;if(_0x131b9d===_0x3dd9f8(0x3aa))_0x351a0f=playerCultivation-enemyPetCultivation,_0x351a0f>0x0&&(_0x6849ab=Math[_0x3dd9f8(0x296)](Math['abs'](_0x351a0f)/0x88b8*0.01+_0x2166ad,0.8)),battleState['player'][_0x3dd9f8(0x4ae)]&&(_0x6849ab=Math[_0x3dd9f8(0x296)](0.8,_0x6849ab+0.2)),_0x43a5db=document[_0x3dd9f8(0x43e)](_0x3dd9f8(0x29d)),console['log'](_0x3dd9f8(0x3d6)+_0x6849ab);else{if(_0x131b9d===_0x3dd9f8(0x46d))_0x351a0f=enemyPetCultivation-playerCultivation,_0x351a0f>0x0&&(_0x6849ab=Math[_0x3dd9f8(0x296)](Math[_0x3dd9f8(0x310)](_0x351a0f)/0x88b8*0.01,0.8)),_0x43a5db=document[_0x3dd9f8(0x43e)](_0x3dd9f8(0x56b)),console[_0x3dd9f8(0x27a)]('敌人魔法闪避概率为：'+_0x6849ab);else return console[_0x3dd9f8(0x1f6)](_0x3dd9f8(0x3b9)),![];}const _0x127e02=Math[_0x3dd9f8(0x61a)](),_0x1c616a=_0x127e02<_0x6849ab;console[_0x3dd9f8(0x27a)]('魔法闪避随机数为：'+_0x127e02);if(_0x1c616a)return _0x131b9d===_0x3dd9f8(0x3aa)?(_0x43a5db[_0x3dd9f8(0x604)]['opacity']='0.5',showEffect(_0x3dd9f8(0x416),_0x3dd9f8(0x27b))):(_0x43a5db['style'][_0x3dd9f8(0x3fa)]=_0x3dd9f8(0x32c),showEffect('playerEffect',_0x3dd9f8(0x27b))),setTimeout(()=>{_0x43a5db['style']['opacity']='';},0x64),!![];return![];}function levelUpSkill(){const _0x230f35=_0x3ebdb0;if(battleState[_0x230f35(0x3aa)][_0x230f35(0x60a)]){performAttack(_0x230f35(0x3f0));return;}const _0x525b4f=document['createElement'](_0x230f35(0x463));_0x525b4f[_0x230f35(0x604)][_0x230f35(0x46c)]=_0x230f35(0x2a3),_0x525b4f[_0x230f35(0x604)]['top']='0',_0x525b4f[_0x230f35(0x604)][_0x230f35(0x390)]='0',_0x525b4f[_0x230f35(0x604)][_0x230f35(0x5f4)]=_0x230f35(0x443),_0x525b4f[_0x230f35(0x604)][_0x230f35(0x577)]='100%',_0x525b4f[_0x230f35(0x604)][_0x230f35(0x24d)]=_0x230f35(0x44f),_0x525b4f['style'][_0x230f35(0x569)]='flex',_0x525b4f[_0x230f35(0x604)][_0x230f35(0x407)]='center',_0x525b4f[_0x230f35(0x604)][_0x230f35(0x31f)]=_0x230f35(0x5a2),_0x525b4f[_0x230f35(0x604)][_0x230f35(0x536)]='1000';const _0x22b44d=document[_0x230f35(0x514)]('div');_0x22b44d['style']=_0x230f35(0x288);const _0x441fcb=document[_0x230f35(0x514)]('h2');_0x441fcb[_0x230f35(0x331)]='升级技能',_0x441fcb['style']['textAlign']=_0x230f35(0x5a2),_0x22b44d[_0x230f35(0x2b2)](_0x441fcb);const _0xeb193e=document[_0x230f35(0x514)]('span');_0xeb193e[_0x230f35(0x331)]='X',_0xeb193e[_0x230f35(0x604)][_0x230f35(0x46c)]=_0x230f35(0x4f4),_0xeb193e['style']['top']=_0x230f35(0x4f3),_0xeb193e[_0x230f35(0x604)][_0x230f35(0x3ba)]=_0x230f35(0x4f3),_0xeb193e[_0x230f35(0x604)][_0x230f35(0x3cb)]=_0x230f35(0x625),_0xeb193e[_0x230f35(0x604)][_0x230f35(0x4cd)]=_0x230f35(0x5e9),_0xeb193e[_0x230f35(0x604)][_0x230f35(0x45d)]=_0x230f35(0x276),_0xeb193e[_0x230f35(0x245)]=()=>document[_0x230f35(0x2eb)]['removeChild'](_0x525b4f),_0x22b44d[_0x230f35(0x2b2)](_0xeb193e);const _0x2d769a=document[_0x230f35(0x514)]('div');_0x2d769a['style']['display']=_0x230f35(0x40b),_0x2d769a[_0x230f35(0x604)][_0x230f35(0x45d)]=_0x230f35(0x3cd),_0x2d769a['style'][_0x230f35(0x4cd)]=_0x230f35(0x5da),_0x2d769a['style']['gridTemplateColumns']=_0x230f35(0x4fb),_0x2d769a[_0x230f35(0x604)][_0x230f35(0x27e)]='10px',_0x22b44d[_0x230f35(0x2b2)](_0x2d769a);const _0x51d15e=document[_0x230f35(0x514)](_0x230f35(0x463));_0x51d15e[_0x230f35(0x331)]=_0x230f35(0x622),_0x51d15e[_0x230f35(0x604)]=_0x230f35(0x512),_0x22b44d[_0x230f35(0x2b2)](_0x51d15e);function _0x2ae6ea(){const _0x292f70=_0x230f35;_0x2d769a[_0x292f70(0x3de)]='';const _0x5e536b=document[_0x292f70(0x43e)](_0x292f70(0x5cc)),_0x4c9240=Array['from'](_0x5e536b[_0x292f70(0x4b9)]),_0xea6f8f=['PA',_0x292f70(0x5ba),'MA',_0x292f70(0x456),'PP','PPE','PH',_0x292f70(0x2b0),'TC'];_0x4c9240[_0x292f70(0x32f)](_0x506c22=>{const _0x20a825=_0x292f70,_0x2c50e3=_0x506c22[_0x20a825(0x331)][_0x20a825(0x552)]('\x20')[0x0],_0x5c0330=currentPet[_0x20a825(0x5ca)][_0x20a825(0x397)](_0xa9ed69=>_0xa9ed69[_0x20a825(0x621)]===_0x2c50e3);if(_0x5c0330){const _0x5e504d=calculateSkillLevelAndMultiplier(_0x5c0330);_0x5c0330[_0x20a825(0x1f2)]=_0x5e504d[_0x20a825(0x2c0)];const _0x275621=document['createElement'](_0x20a825(0x463));_0x275621[_0x20a825(0x331)]=_0x5c0330[_0x20a825(0x621)]+_0x20a825(0x4bf)+_0x5c0330['level'],_0x275621[_0x20a825(0x604)][_0x20a825(0x207)]=_0x20a825(0x4f3),_0x275621['style'][_0x20a825(0x24d)]='#fff',_0x275621[_0x20a825(0x604)][_0x20a825(0x401)]=_0x20a825(0x1fc),_0x275621['style']['borderRadius']='8px',_0x275621[_0x20a825(0x604)][_0x20a825(0x3cb)]=_0x20a825(0x625),_0x275621[_0x20a825(0x604)]['textAlign']='center',_0x275621[_0x20a825(0x604)][_0x20a825(0x467)]=_0x20a825(0x435),_0x275621['onclick']=()=>{const _0x33d5b3=_0x20a825;document[_0x33d5b3(0x333)]('.selected-skill')['forEach'](_0x169626=>{const _0x52f574=_0x33d5b3;_0x169626[_0x52f574(0x35d)]['remove'](_0x52f574(0x457)),_0x169626['style']['backgroundColor']=_0x52f574(0x275),_0x169626[_0x52f574(0x604)][_0x52f574(0x55e)]='scale(1)';}),_0x275621[_0x33d5b3(0x35d)][_0x33d5b3(0x244)]('selected-skill'),_0x275621[_0x33d5b3(0x604)]['backgroundColor']='#add8e6',_0x275621[_0x33d5b3(0x604)][_0x33d5b3(0x55e)]=_0x33d5b3(0x30f);const _0x1aaea4=calculateSkillLevelAndMultiplier(_0x5c0330)['skillMultiplier'],_0x2d7bd6=_0xea6f8f['includes'](_0x5c0330[_0x33d5b3(0x206)])?_0x33d5b3(0x279)+Math['floor'](_0x1aaea4*0x64)+'%':'';_0x51d15e['innerText']=_0x5c0330[_0x33d5b3(0x3a5)]+'技能'+_0x2d7bd6+'，说明：'+_0x5c0330[_0x33d5b3(0x4c4)];},_0x2d769a['appendChild'](_0x275621);}});}_0x2ae6ea();const _0x3a803b=document[_0x230f35(0x514)](_0x230f35(0x463));_0x3a803b[_0x230f35(0x604)][_0x230f35(0x28a)]=_0x230f35(0x49e),_0x3a803b['style'][_0x230f35(0x569)]='flex',_0x3a803b[_0x230f35(0x604)]['flexDirection']='row',_0x3a803b[_0x230f35(0x604)][_0x230f35(0x407)]=_0x230f35(0x4bb),_0x3a803b[_0x230f35(0x604)][_0x230f35(0x20d)]=_0x230f35(0x5a2),_0x22b44d[_0x230f35(0x2b2)](_0x3a803b);const _0x33c8e1=document[_0x230f35(0x514)](_0x230f35(0x326));_0x33c8e1[_0x230f35(0x331)]=_0x230f35(0x629),_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x207)]=_0x230f35(0x2fc),_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x2b3)]=_0x230f35(0x5d0),_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x4b7)]='8px',_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x401)]=_0x230f35(0x30b),_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x24d)]=_0x230f35(0x336),_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x45d)]=_0x230f35(0x276),_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x3cb)]='pointer',_0x33c8e1[_0x230f35(0x604)]['fontSize']=_0x230f35(0x5da),_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x467)]=_0x230f35(0x4da),_0x33c8e1[_0x230f35(0x266)]=()=>_0x33c8e1[_0x230f35(0x604)][_0x230f35(0x24d)]=_0x230f35(0x478),_0x33c8e1[_0x230f35(0x3fb)]=()=>_0x33c8e1[_0x230f35(0x604)]['backgroundColor']=_0x230f35(0x336),_0x33c8e1[_0x230f35(0x245)]=()=>{handleLevelUp(),_0x2ae6ea();},_0x3a803b[_0x230f35(0x2b2)](_0x33c8e1);const _0x56d911=document[_0x230f35(0x514)]('button');_0x56d911[_0x230f35(0x331)]=_0x230f35(0x4cc),_0x56d911[_0x230f35(0x604)][_0x230f35(0x207)]=_0x230f35(0x2fc),_0x56d911[_0x230f35(0x604)][_0x230f35(0x2b3)]=_0x230f35(0x5d0),_0x56d911[_0x230f35(0x604)][_0x230f35(0x4b7)]=_0x230f35(0x3eb),_0x56d911[_0x230f35(0x604)][_0x230f35(0x401)]=_0x230f35(0x30b),_0x56d911[_0x230f35(0x604)][_0x230f35(0x24d)]=_0x230f35(0x404),_0x56d911[_0x230f35(0x604)]['color']=_0x230f35(0x276),_0x56d911[_0x230f35(0x604)][_0x230f35(0x3cb)]=_0x230f35(0x625),_0x56d911[_0x230f35(0x604)][_0x230f35(0x4cd)]=_0x230f35(0x5da),_0x56d911[_0x230f35(0x604)][_0x230f35(0x467)]='background-color\x200.3s',_0x56d911[_0x230f35(0x266)]=()=>_0x56d911[_0x230f35(0x604)][_0x230f35(0x24d)]='#e0a800',_0x56d911[_0x230f35(0x3fb)]=()=>_0x56d911['style'][_0x230f35(0x24d)]=_0x230f35(0x404),_0x56d911['onclick']=()=>{handleBulkLevelUp(),_0x2ae6ea();},_0x3a803b['appendChild'](_0x56d911);const _0x50fa03=document[_0x230f35(0x514)](_0x230f35(0x326));_0x50fa03[_0x230f35(0x331)]=_0x230f35(0x513),_0x50fa03['style'][_0x230f35(0x207)]='10px\x2020px',_0x50fa03[_0x230f35(0x604)]['margin']=_0x230f35(0x5d0),_0x50fa03[_0x230f35(0x604)][_0x230f35(0x4b7)]=_0x230f35(0x3eb),_0x50fa03[_0x230f35(0x604)][_0x230f35(0x401)]='none',_0x50fa03[_0x230f35(0x604)][_0x230f35(0x24d)]=_0x230f35(0x4e4),_0x50fa03[_0x230f35(0x604)][_0x230f35(0x45d)]=_0x230f35(0x276),_0x50fa03[_0x230f35(0x604)][_0x230f35(0x3cb)]=_0x230f35(0x625),_0x50fa03[_0x230f35(0x604)]['fontSize']=_0x230f35(0x5da),_0x50fa03[_0x230f35(0x604)][_0x230f35(0x467)]='background-color\x200.3s',_0x50fa03[_0x230f35(0x266)]=()=>_0x50fa03[_0x230f35(0x604)]['backgroundColor']=_0x230f35(0x399),_0x50fa03[_0x230f35(0x3fb)]=()=>_0x50fa03[_0x230f35(0x604)][_0x230f35(0x24d)]=_0x230f35(0x4e4),_0x50fa03[_0x230f35(0x245)]=()=>showInfoBox(_0x230f35(0x273)),_0x3a803b[_0x230f35(0x2b2)](_0x50fa03),_0x525b4f[_0x230f35(0x2b2)](_0x22b44d),document[_0x230f35(0x2eb)][_0x230f35(0x2b2)](_0x525b4f);}function handleLevelUp(){const _0x522e15=_0x3ebdb0,_0x3eabf4=document['querySelector'](_0x522e15(0x487));if(!_0x3eabf4){showInfoBox('请选择一个技能！');return;}const _0x115bda=_0x3eabf4['innerText'][_0x522e15(0x552)]('\x20')[0x0],_0x408309=currentPet[_0x522e15(0x5ca)]['find'](_0x33c7bc=>_0x33c7bc['name']===_0x115bda);if(!_0x408309){showInfoBox(_0x522e15(0x223));return;}if(_0x408309[_0x522e15(0x1f2)]>=0x1e&&!_0x408309[_0x522e15(0x2cb)]){showInfoBox('当前技能已达到最大等级！',_0x522e15(0x24a));return;}if(_0x408309[_0x522e15(0x1f2)]>=0x6&&_0x408309['type']==='NE'&&_0x408309[_0x522e15(0x2cb)]){_0x408309['level']=0x6;return;}if(_0x408309['byLearned']){const _0x2eec18=jinnangItems[_0x522e15(0x397)](_0x5e515b=>_0x5e515b['displayName']===_0x408309['name']+'天赋书'&&_0x5e515b[_0x522e15(0x36d)]>0x0);if(_0x2eec18){return showCustomOptionsBox(_0x522e15(0x37a)+_0x2eec18[_0x522e15(0x471)]+_0x522e15(0x4f0),[{'text':_0x522e15(0x3f8),'onClick':function(){const _0x1e5520=_0x522e15;if(_0x408309['level']>0x63){showInfoBox(_0x1e5520(0x43f),null,null,_0x1e5520(0x24a));return;}const _0x19fdff=jinnangItems['find'](_0x1e94a5=>_0x1e94a5[_0x1e5520(0x621)]==='universalHeart'&&_0x1e94a5[_0x1e5520(0x36d)]>=0x5);_0x19fdff?(useItem('universalHeart',0x5),_0x408309['level']+=0x1,showInfoBox(_0x408309[_0x1e5520(0x621)]+'\x20成功升级至\x20'+_0x408309[_0x1e5520(0x1f2)]+'\x20级')):showInfoBox(_0x1e5520(0x4df),null,null,'red');}},{'text':''+_0x2eec18['displayName'],'onClick':function(){const _0x271434=_0x522e15;if(_0x408309[_0x271434(0x1f2)]>0x63){showInfoBox(_0x271434(0x43f),null,null,_0x271434(0x24a));return;}Math[_0x271434(0x61a)]()<0.2?(useItem(_0x2eec18[_0x271434(0x621)],0x1),_0x408309['level']+=0x1,showInfoBox(_0x271434(0x53c)+_0x2eec18['displayName']+'，'+_0x408309[_0x271434(0x621)]+_0x271434(0x2d7)+_0x408309['level']+'\x20级！')):(useItem(_0x2eec18[_0x271434(0x621)],0x1),showInfoBox('消耗一本'+_0x2eec18[_0x271434(0x471)]+_0x271434(0x430)+_0x408309[_0x271434(0x621)]+_0x271434(0x4ea),null,null,_0x271434(0x24a)));}}],_0x522e15(0x475));return;}const _0xae21c0=jinnangItems['find'](_0x6c839d=>_0x6c839d[_0x522e15(0x621)]==='universalHeart'&&_0x6c839d[_0x522e15(0x36d)]>=0x5);if(_0xae21c0){if(_0x408309[_0x522e15(0x1f2)]>0x63){showInfoBox(_0x522e15(0x43f),null,null,'red');return;}useItem(_0x522e15(0x287),0x5),_0x408309[_0x522e15(0x1f2)]+=0x1,showInfoBox(_0x408309[_0x522e15(0x621)]+'\x20成功升级至\x20'+_0x408309['level']+'\x20级');return;}else{showInfoBox('天赋高级技能需要使用特殊道具\x22宇宙之心\x22才能升级，请尝试获取后再操作',null,null,_0x522e15(0x24a));return;}}const _0x19d739=_0x1b9d33=>Math[_0x522e15(0x61a)]()<_0x1b9d33;if(_0x408309[_0x522e15(0x1f2)]>=0x1c&&_0x408309[_0x522e15(0x1f2)]<=0x1d){if(useItem(_0x522e15(0x3ad),0x5)){_0x19d739(0.4)?(_0x408309[_0x522e15(0x1f2)]+=0x1,showInfoBox(_0x408309[_0x522e15(0x621)]+_0x522e15(0x2d7)+_0x408309[_0x522e15(0x1f2)]+'\x20级')):showInfoBox(_0x408309[_0x522e15(0x621)]+_0x522e15(0x39a),null,null,'red');return;}else{showInfoBox(_0x522e15(0x558),null,null,'red');return;}}if(_0x408309['level']>=0x18&&_0x408309[_0x522e15(0x1f2)]<=0x1b){if(useItem('universalCrystal',0x5)){_0x19d739(0.4)?(_0x408309[_0x522e15(0x1f2)]+=0x1,showInfoBox(_0x408309[_0x522e15(0x621)]+_0x522e15(0x2d7)+_0x408309[_0x522e15(0x1f2)]+'\x20级')):showInfoBox(_0x408309[_0x522e15(0x621)]+_0x522e15(0x39a),null,null,_0x522e15(0x24a));return;}else{showInfoBox(_0x522e15(0x5a0),null,null,_0x522e15(0x24a));return;}}if(_0x408309[_0x522e15(0x1f2)]<0xa){showInfoBox('该技能现在不需要升级,10级后再来吧！');return;}if(_0x408309[_0x522e15(0x1f2)]>=0x14){showInfoBox(_0x522e15(0x341));return;}const _0x15c286=_0x408309[_0x522e15(0x1f2)]+0x1,_0x59027c=0x3e8+0xc8*(_0x15c286-0xb);if(currentExp<_0x59027c){showInfoBox(_0x522e15(0x212)+_0x59027c+_0x522e15(0x3ec));return;}currentExp-=_0x59027c,_0x408309[_0x522e15(0x1f2)]=_0x15c286,showInfoBox(_0x522e15(0x4a1)+_0x59027c+_0x522e15(0x58e)+_0x408309['name']+_0x522e15(0x238)+_0x15c286+_0x522e15(0x53e)),updateExpBar(currentExp,maxExp),updateUI();}function handleBulkLevelUp(){const _0x2e6071=_0x3ebdb0,_0x47e930=[];currentPet[_0x2e6071(0x5ca)][_0x2e6071(0x32f)](_0x3f07ad=>{const _0x223644=_0x2e6071;while(!_0x3f07ad[_0x223644(0x2cb)]&&_0x3f07ad[_0x223644(0x1f2)]>=0xa&&_0x3f07ad[_0x223644(0x1f2)]<0x14&&currentExp>=0x4b0+0xc8*(_0x3f07ad['level']-0xa)){const _0x436e6f=0x4b0+0xc8*(_0x3f07ad[_0x223644(0x1f2)]-0xa);currentExp-=_0x436e6f,_0x3f07ad[_0x223644(0x1f2)]+=0x1,_0x47e930['push'](_0x223644(0x5ab)+_0x436e6f+'点经验值，将'+_0x3f07ad[_0x223644(0x621)]+_0x223644(0x238)+_0x3f07ad[_0x223644(0x1f2)]+_0x223644(0x53e));}}),_0x47e930[_0x2e6071(0x545)]===0x0?showInfoBox(_0x2e6071(0x30a)):showInfoBox(_0x47e930[_0x2e6071(0x46b)]('\x0a')),updateExpBar(currentExp,maxExp),updateUI();}function _0xdc19(_0x50fab9,_0x1cb741){const _0x93b991=_0x93b9();return _0xdc19=function(_0xdc19b,_0x4d3e42){_0xdc19b=_0xdc19b-0x1f1;let _0x1832e7=_0x93b991[_0xdc19b];return _0x1832e7;},_0xdc19(_0x50fab9,_0x1cb741);}function showSkillSelectionMenu(_0x22b04a,_0x2531b1){const _0x29b63c=_0x3ebdb0,_0x4d0a1e=document[_0x29b63c(0x43e)]('skills-area');if(!_0x4d0a1e){console['error'](_0x29b63c(0x297));return;}let _0x103cf1=[];const _0x32595c=Array[_0x29b63c(0x2bc)](_0x4d0a1e[_0x29b63c(0x4b9)]);_0x32595c['forEach'](_0x46724=>{const _0xeca78e=_0x29b63c,_0xf73a30=_0x46724['innerText'][_0xeca78e(0x552)]('\x20')[0x0],_0x324ad4=currentPet['skills'][_0xeca78e(0x397)](_0x3c0128=>_0x3c0128[_0xeca78e(0x621)]===_0xf73a30);if(_0x324ad4){if(_0x22b04a===_0xeca78e(0x3f0)&&(_0x324ad4[_0xeca78e(0x206)]==='PA'||_0x324ad4[_0xeca78e(0x206)]===_0xeca78e(0x5ba)))_0x103cf1[_0xeca78e(0x48f)](_0x324ad4);else _0x22b04a===_0xeca78e(0x35e)&&(_0x324ad4['type']==='MA'||_0x324ad4[_0xeca78e(0x206)]===_0xeca78e(0x456))&&_0x103cf1[_0xeca78e(0x48f)](_0x324ad4);}});if(_0x103cf1[_0x29b63c(0x545)]===0x0){_0x2531b1(null);return;}if(_0x103cf1['length']===0x1){playerSkillPreference[_0x22b04a]=_0x103cf1[0x0]['name'],_0x2531b1(_0x103cf1[0x0]);return;}const _0x5e49e4=document[_0x29b63c(0x514)](_0x29b63c(0x463));_0x5e49e4[_0x29b63c(0x604)][_0x29b63c(0x42a)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20position:\x20fixed;\x0a\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20left:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20height:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(0,\x200,\x200,\x200.7);\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20justify-content:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x2010000;\x0a\x20\x20\x20\x20';const _0x5cdd09=document[_0x29b63c(0x514)](_0x29b63c(0x463));_0x5cdd09['style'][_0x29b63c(0x42a)]=_0x29b63c(0x3cc);const _0x43fc40=document['createElement']('h3');_0x43fc40[_0x29b63c(0x418)]=_0x22b04a===_0x29b63c(0x3f0)?_0x29b63c(0x5b5):_0x29b63c(0x270),_0x43fc40[_0x29b63c(0x604)][_0x29b63c(0x42a)]=_0x29b63c(0x607),_0x5cdd09['appendChild'](_0x43fc40);const _0x25e24b=document['createElement']('div');_0x25e24b[_0x29b63c(0x604)][_0x29b63c(0x42a)]=_0x29b63c(0x35b),_0x103cf1[_0x29b63c(0x32f)](_0x57dcc1=>{const _0x15ec33=_0x29b63c,{skillLevel:_0x51ef97}=calculateSkillLevelAndMultiplier(_0x57dcc1),_0x6d9ee8=document[_0x15ec33(0x514)](_0x15ec33(0x326)),_0x2c60fe=playerSkillPreference[_0x22b04a]===_0x57dcc1[_0x15ec33(0x621)];_0x6d9ee8[_0x15ec33(0x604)]['cssText']=_0x15ec33(0x5ce)+(_0x2c60fe?_0x15ec33(0x35c):'white')+';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x20'+(_0x2c60fe?'3px\x20solid\x20#ff6b6b':'none')+_0x15ec33(0x4aa),_0x6d9ee8['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+(_0x2c60fe?'<div\x20style=\x22position:\x20absolute;\x20top:\x205px;\x20right:\x2010px;\x20color:\x20#ff6b6b;\x20font-weight:\x20bold;\x20font-size:\x2012px;\x22>上次选择</div>':'')+_0x15ec33(0x3fc)+_0x57dcc1[_0x15ec33(0x621)]+_0x15ec33(0x3a1)+_0x51ef97+_0x15ec33(0x44c)+(_0x57dcc1[_0x15ec33(0x22b)]*(0x1+0.1*(_0x51ef97-0x1)))[_0x15ec33(0x21f)](0x2)+'x\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',_0x6d9ee8[_0x15ec33(0x266)]=()=>{const _0x323d43=_0x15ec33;_0x6d9ee8['style'][_0x323d43(0x55e)]='translateY(-2px)',_0x6d9ee8['style']['boxShadow']='0\x206px\x2012px\x20rgba(0,\x200,\x200,\x200.15)',!_0x2c60fe&&(_0x6d9ee8[_0x323d43(0x604)][_0x323d43(0x200)]=_0x323d43(0x42f));},_0x6d9ee8['onmouseout']=()=>{const _0x4c2d4f=_0x15ec33;_0x6d9ee8[_0x4c2d4f(0x604)][_0x4c2d4f(0x55e)]=_0x4c2d4f(0x5bc),_0x6d9ee8[_0x4c2d4f(0x604)][_0x4c2d4f(0x3dc)]=_0x4c2d4f(0x217),!_0x2c60fe&&(_0x6d9ee8[_0x4c2d4f(0x604)][_0x4c2d4f(0x200)]='white');},_0x6d9ee8[_0x15ec33(0x245)]=()=>{const _0xdf9ec0=_0x15ec33;playerSkillPreference[_0x22b04a]=_0x57dcc1[_0xdf9ec0(0x621)],document[_0xdf9ec0(0x2eb)][_0xdf9ec0(0x2fd)](_0x5e49e4),_0x2531b1(_0x57dcc1);},_0x25e24b['appendChild'](_0x6d9ee8);}),_0x5cdd09[_0x29b63c(0x2b2)](_0x25e24b);const _0x3b0315=document[_0x29b63c(0x514)]('button');_0x3b0315[_0x29b63c(0x418)]='取消',_0x3b0315[_0x29b63c(0x604)][_0x29b63c(0x42a)]=_0x29b63c(0x213),_0x3b0315['onmouseover']=()=>{const _0x53d43d=_0x29b63c;_0x3b0315[_0x53d43d(0x604)][_0x53d43d(0x200)]=_0x53d43d(0x47c);},_0x3b0315[_0x29b63c(0x3fb)]=()=>{const _0x6fab51=_0x29b63c;_0x3b0315[_0x6fab51(0x604)][_0x6fab51(0x200)]=_0x6fab51(0x474);},_0x3b0315[_0x29b63c(0x245)]=()=>{document['body']['removeChild'](_0x5e49e4);},_0x5cdd09['appendChild'](_0x3b0315),_0x5e49e4[_0x29b63c(0x2b2)](_0x5cdd09),document[_0x29b63c(0x2eb)][_0x29b63c(0x2b2)](_0x5e49e4);}function getPreferredSkill(_0x48b359){const _0x471624=_0x3ebdb0,_0x4dded5=document[_0x471624(0x43e)]('skills-area');if(!_0x4dded5)return null;const _0x3d35dd=Array[_0x471624(0x2bc)](_0x4dded5[_0x471624(0x4b9)]),_0x1976b6=[];_0x3d35dd[_0x471624(0x32f)](_0x354efe=>{const _0x4b0c08=_0x471624,_0x55b7dc=_0x354efe['innerText'][_0x4b0c08(0x552)]('\x20')[0x0],_0x1d3366=currentPet[_0x4b0c08(0x5ca)][_0x4b0c08(0x397)](_0x1f9d79=>_0x1f9d79[_0x4b0c08(0x621)]===_0x55b7dc);if(_0x1d3366){if(_0x48b359===_0x4b0c08(0x3f0)&&(_0x1d3366['type']==='PA'||_0x1d3366['type']===_0x4b0c08(0x5ba)))_0x1976b6['push'](_0x1d3366);else _0x48b359==='magical'&&(_0x1d3366[_0x4b0c08(0x206)]==='MA'||_0x1d3366[_0x4b0c08(0x206)]===_0x4b0c08(0x456))&&_0x1976b6[_0x4b0c08(0x48f)](_0x1d3366);}});if(_0x1976b6[_0x471624(0x545)]===0x0)return null;if(_0x1976b6[_0x471624(0x545)]===0x1)return _0x1976b6[0x0];if(playerSkillPreference[_0x48b359]){const _0x14f53a=_0x1976b6[_0x471624(0x397)](_0x57e083=>_0x57e083['name']===playerSkillPreference[_0x48b359]);if(_0x14f53a)return _0x14f53a;}return _0x1976b6[0x0];}function performAutoAttack(_0x1372ff){const _0x2a1728=_0x3ebdb0;if(!attributesFetched||!battleState||!battleState[_0x2a1728(0x46d)]||!playerTurn)return;let _0x5b12eb=battleState[_0x2a1728(0x3aa)][_0x2a1728(0x60a)]?_0x2a1728(0x3f0):_0x1372ff;const _0x5a1392=getPreferredSkill(_0x5b12eb),{skillMultiplier:_0x4fc641,isSkillUsed:_0x235230}=selectSkillAndCalculateMultiplier(_0x5b12eb,_0x5a1392);let _0x10adbb=0x0;if(_0x5a1392&&(_0x5a1392[_0x2a1728(0x206)]===_0x2a1728(0x5ba)||_0x5a1392[_0x2a1728(0x206)]===_0x2a1728(0x456)))applySpecialSkillEffects(_0x5a1392);else{if(_0x5b12eb===_0x2a1728(0x3f0))_0x10adbb=performPhysicalAttack(_0x4fc641,_0x235230,_0x5a1392),handlePostAttackEffects(_0x5b12eb,_0x10adbb,{'selectedSkill':_0x5a1392,'isCritical':checkCriticalHit(battleState[_0x2a1728(0x3aa)]['critRate']),'skillMultiplier':_0x4fc641});else{const _0x442576=performMagicalAttack(_0x4fc641,_0x235230,_0x5a1392);if(_0x442576[_0x2a1728(0x534)]){performAutoAttack('physical');return;}_0x10adbb=_0x442576[_0x2a1728(0x2f1)],handlePostAttackEffects(_0x5b12eb,_0x10adbb,{'selectedSkill':_0x5a1392,'isCritical':checkCriticalHit(battleState['player'][_0x2a1728(0x2e5)]),'skillMultiplier':_0x4fc641});}}if(battleState['enemy']['health']<=0x0){updateEnemyAttributes(),showNextBattlePrompt(!![]);return;}else{if(battleAttributes['health']<=0x0){showNextBattlePrompt(![]);return;}}playerTurn=![],updateUI();}function getSkillByType(_0x41c093){const _0x1fdec2=_0x3ebdb0,_0xc717a1=document['getElementById'](_0x1fdec2(0x5cc));if(!_0xc717a1)return console['error'](_0x1fdec2(0x297)),null;const _0x19ac43=Array[_0x1fdec2(0x2bc)](_0xc717a1[_0x1fdec2(0x4b9)])['map'](_0x303908=>{const _0x1ede9c=_0x1fdec2,_0x581a30=_0x303908[_0x1ede9c(0x331)][_0x1ede9c(0x552)]('\x20')[0x0],_0x4be476=currentPet[_0x1ede9c(0x5ca)]['find'](_0x38a1ad=>_0x38a1ad[_0x1ede9c(0x621)]===_0x581a30&&_0x38a1ad[_0x1ede9c(0x206)]===_0x41c093);return _0x4be476;})[_0x1fdec2(0x4b6)](_0x123445=>_0x123445!==null);return _0x19ac43[_0x1fdec2(0x545)]>0x0?_0x19ac43[Math[_0x1fdec2(0x300)](Math['random']()*_0x19ac43[_0x1fdec2(0x545)])]:null;}function calculateSkillLevelAndMultiplier(_0x157934){const _0x1890e1=_0x3ebdb0;let _0x508ff2=_0x157934[_0x1890e1(0x1f2)]||0x1;if(_0x157934['type']==='NE'&&_0x157934[_0x1890e1(0x2cb)])_0x508ff2=Math[_0x1890e1(0x296)](0x6,Math['floor'](petLevel/0xa)+0x1);else _0x508ff2<0xa&&(_0x508ff2=Math['min'](0xa,Math['floor'](petLevel/0xa)+0x1));const _0x7a1693=_0x157934[_0x1890e1(0x22b)]*(0x1+0.1*(_0x508ff2-0x1));return{'skillLevel':_0x508ff2,'skillMultiplier':_0x7a1693};}function selectSkillAndCalculateMultiplier(_0x2ad326,_0x2e774f=null){const _0x3a3d1c=_0x3ebdb0;let _0x21bcd9=0x1,_0xb0e917=0x1,_0x2642de=![];if(_0x2e774f){const _0x1aa504=calculateSkillLevelAndMultiplier(_0x2e774f);_0xb0e917=_0x1aa504[_0x3a3d1c(0x2c0)],_0x21bcd9=_0x1aa504[_0x3a3d1c(0x40d)],_0x2642de=!![],logBattleEvent(_0x3a3d1c(0x53d)+_0x2e774f['name']+'\x20'+_0xb0e917+'级。','gold','20px');if(_0x2ad326==='physical'){const _0x12c1ef=Math[_0x3a3d1c(0x300)](Math[_0x3a3d1c(0x61a)]()*(0xc8-0x32+0x1)*_0xb0e917);battleAttributes[_0x3a3d1c(0x41f)]=Math['max'](0x0,battleAttributes['mana']-_0x12c1ef),showEffect(_0x3a3d1c(0x25a),_0x3a3d1c(0x4ad));}else _0x2ad326==='magical'&&showEffect(_0x3a3d1c(0x25a),'https://pic.imgdb.cn/item/66712ba3d9c307b7e9f2ab59.gif');}else{if(_0x2ad326==='physical')logBattleEvent(_0x3a3d1c(0x601),null,_0x3a3d1c(0x49e)),showEffect(_0x3a3d1c(0x25a),'https://pic.imgdb.cn/item/667123f9d9c307b7e9e34049.gif');else _0x2ad326==='magical'&&(logBattleEvent(_0x3a3d1c(0x342),null,'20px'),showEffect(_0x3a3d1c(0x25a),_0x3a3d1c(0x619)));}return{'skillMultiplier':_0x21bcd9,'isSkillUsed':_0x2642de,'selectedSkill':_0x2e774f};}function performAttack(_0xd7c7fb){const _0x4a9e05=_0x3ebdb0;if(!attributesFetched||!battleState||!battleState[_0x4a9e05(0x46d)]||!playerTurn)return;let _0x327754=battleState[_0x4a9e05(0x3aa)][_0x4a9e05(0x60a)]?_0x4a9e05(0x3f0):_0xd7c7fb;showSkillSelectionMenu(_0x327754,_0x5bbae2=>{const _0x2d2497=_0x4a9e05;if(_0x5bbae2===undefined)return;const {skillMultiplier:_0x2aaa2f,isSkillUsed:_0x38a387}=selectSkillAndCalculateMultiplier(_0x327754,_0x5bbae2);let _0x1e5fc3=0x0,_0x1923e9=![];if(_0x5bbae2&&(_0x5bbae2['type']===_0x2d2497(0x5ba)||_0x5bbae2[_0x2d2497(0x206)]===_0x2d2497(0x456)))applySpecialSkillEffects(_0x5bbae2);else{if(_0x327754===_0x2d2497(0x3f0))_0x1e5fc3=performPhysicalAttack(_0x2aaa2f,_0x38a387,_0x5bbae2),handlePostAttackEffects(_0x327754,_0x1e5fc3,{'selectedSkill':_0x5bbae2,'isCritical':checkCriticalHit(battleState[_0x2d2497(0x3aa)][_0x2d2497(0x2e5)]),'skillMultiplier':_0x2aaa2f});else{const _0x100c82=performMagicalAttack(_0x2aaa2f,_0x38a387,_0x5bbae2);if(_0x100c82[_0x2d2497(0x534)]){performAttack(_0x2d2497(0x3f0));return;}_0x1e5fc3=_0x100c82[_0x2d2497(0x2f1)],handlePostAttackEffects(_0x327754,_0x1e5fc3,{'selectedSkill':_0x5bbae2,'isCritical':checkCriticalHit(battleState[_0x2d2497(0x3aa)][_0x2d2497(0x2e5)]),'skillMultiplier':_0x2aaa2f});}}if(battleState[_0x2d2497(0x46d)][_0x2d2497(0x45e)]<=0x0){updateEnemyAttributes(),showNextBattlePrompt(!![]);return;}else{if(battleAttributes[_0x2d2497(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}}playerTurn=![],updateUI();});}function performPhysicalAttack(_0x339992,_0x80ad,_0x8dd2ed){const _0x33cac3=_0x3ebdb0,_0x3119db=Math[_0x33cac3(0x61a)]()*(1.2-0.8)+0.8,_0x46f8c6=battleState[_0x33cac3(0x46d)][_0x33cac3(0x54a)]*_0x3119db,_0x2fb955=f(_0x46f8c6),_0x20cda9=Math[_0x33cac3(0x420)](battleState['enemy'][_0x33cac3(0x54a)]*0.1);let _0xe9bfd6;_0x2fb955!==0x0?_0xe9bfd6=Math[_0x33cac3(0x389)](0x1,Math[_0x33cac3(0x300)](battleAttributes[_0x33cac3(0x2f3)]*_0x339992*(0x1-_0x2fb955))):_0xe9bfd6=Math[_0x33cac3(0x389)](0x1,Math['floor'](battleAttributes[_0x33cac3(0x2f3)]*_0x339992));if(battleState[_0x33cac3(0x3aa)][_0x33cac3(0x29a)])return logBattleEvent(_0x33cac3(0x35a),_0x33cac3(0x30e)),playerTurn=![],0x0;if(handleDodge(_0x33cac3(0x46d)))return playerTurn=![],0x0;(ascensionSkill['name']===_0x33cac3(0x5c7)||secondAscensionSkill['name']===_0x33cac3(0x5c7))&&battleState[_0x33cac3(0x46d)][_0x33cac3(0x45e)]/enemyMaxHealth>battleState['player']['whiteNightThreshold']&&(_0xe9bfd6=Math[_0x33cac3(0x300)](_0xe9bfd6*1.4));battleState[_0x33cac3(0x3aa)][_0x33cac3(0x60a)]&&(_0xe9bfd6=Math[_0x33cac3(0x300)](_0xe9bfd6*1.2),logBattleEvent(_0x33cac3(0x2a6),'red'));let _0x19833f=checkCriticalHit(battleState[_0x33cac3(0x3aa)][_0x33cac3(0x2e5)]),_0x2da6c0=calculateDamage(_0xe9bfd6,_0x19833f,battleState[_0x33cac3(0x3aa)][_0x33cac3(0x345)],!![]);const _0x41b317=applyWuxingEffects();let _0x4f33a7=0x0;if(_0x41b317[_0x33cac3(0x473)]&&_0x41b317[_0x33cac3(0x473)]>0x0){const _0x11aa9d=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x41b317[_0x33cac3(0x473)]];_0x4f33a7=Math[_0x33cac3(0x300)](_0x2da6c0*_0x11aa9d),_0x2da6c0=Math[_0x33cac3(0x300)](_0x2da6c0*(0x1+_0x11aa9d)),!isNaN(_0x4f33a7)&&_0x4f33a7>0x0&&logBattleEvent('🔴奥义·火之易伤！伤害增加了\x20'+_0x4f33a7+_0x33cac3(0x384),_0x33cac3(0x2db));}_0x2da6c0=Math[_0x33cac3(0x389)](0x1,_0x2da6c0-_0x20cda9);enemyRivival&&(_0x2da6c0=Math[_0x33cac3(0x300)](0.1*_0x2da6c0));battleState[_0x33cac3(0x46d)][_0x33cac3(0x45e)]=Math[_0x33cac3(0x389)](0x0,battleState['enemy'][_0x33cac3(0x45e)]-_0x2da6c0);_0x19833f?(logBattleEvent('⚔️【玩家攻击】暴击！！本次对敌方造成了\x20'+_0x2da6c0+_0x33cac3(0x504),_0x33cac3(0x24a)),updateDamageValue(_0x2da6c0,![],_0x33cac3(0x2f1),!![]),showEffect(_0x33cac3(0x25a),'https://pic.imgdb.cn/item/66a0d3e8d9c307b7e93a8108.gif')):(updateDamageValue(_0x2da6c0,![],_0x33cac3(0x2f1)),logBattleEvent(_0x33cac3(0x40e)+_0x2da6c0+_0x33cac3(0x41c),_0x33cac3(0x276)));waterAmuletTriggered&&updateDamageValue(_0x2da6c0,![],_0x33cac3(0x5ff));const _0x567051=applySuitEffects?applySuitEffects():0x0;if(_0x567051>=0x8&&_0x2da6c0>0x0){if(Math[_0x33cac3(0x61a)]()<0.2){const _0x806d1e=Math[_0x33cac3(0x296)](0x7a120,Math[_0x33cac3(0x300)](_0x2da6c0*0.005));battleAttributes[_0x33cac3(0x45e)]=Math['min'](maxHealth,battleAttributes['health']+_0x806d1e),updateDamageValue(-_0x806d1e,!![],_0x33cac3(0x5ff)),logBattleEvent('✨【套装效果】觉醒套装之力吸取了\x20'+_0x806d1e+_0x33cac3(0x593),_0x33cac3(0x2a4),'18px'),updateUI();}}if(ascensionSkill[_0x33cac3(0x621)]==='吸血魔刃'||secondAscensionSkill['name']===_0x33cac3(0x31e)){const _0x4ad478=(ascensionSkill['name']==='吸血魔刃'?ascensionSkill:secondAscensionSkill)['increment']((ascensionSkill[_0x33cac3(0x621)]===_0x33cac3(0x31e)?ascensionSkill:secondAscensionSkill)[_0x33cac3(0x1f2)])/0x64,_0x35a5f0=Math[_0x33cac3(0x300)](_0x2da6c0*_0x4ad478);battleAttributes[_0x33cac3(0x45e)]=Math[_0x33cac3(0x296)](maxHealth,battleAttributes[_0x33cac3(0x45e)]+_0x35a5f0),logBattleEvent(_0x33cac3(0x58d)+_0x35a5f0+_0x33cac3(0x593),_0x33cac3(0x24a)),updateUI();}return battleState['enemy'][_0x33cac3(0x57e)]&&handlePierced(),applyPhysicalAttackEffects(_0x80ad?_0x339992:0x1),_0x8dd2ed&&_0x8dd2ed[_0x33cac3(0x206)]===_0x33cac3(0x5ba)&&applySpecialSkillEffects(_0x8dd2ed),console[_0x33cac3(0x27a)](_0x8dd2ed),_0x2da6c0;}function performMagicalAttack(_0x5e16b9,_0x4af76b,_0x16ac9a){const _0x59a68f=_0x3ebdb0;let _0x3ee185=0x1;battleState[_0x59a68f(0x3aa)]['spellSlow']&&(_0x3ee185=0x1f4);if(battleAttributes[_0x59a68f(0x41f)]<0x32*_0x3ee185)return logBattleEvent(_0x59a68f(0x4e8)),{'damage':0x0,'retryPhysical':!![]};const _0x90954c=Math[_0x59a68f(0x61a)]()*(1.2-0.8)+0.8,_0x25580e=battleState[_0x59a68f(0x46d)]['magicDefense']*_0x90954c,_0x4aefb9=f(_0x25580e),_0x8661b4=Math['round'](battleState[_0x59a68f(0x46d)][_0x59a68f(0x34c)]*0.1);let _0x3155e2;_0x4aefb9!==0x0?_0x3155e2=Math[_0x59a68f(0x389)](0x1,Math[_0x59a68f(0x300)](battleAttributes[_0x59a68f(0x5dc)]*0.8*_0x5e16b9*(0x1-_0x4aefb9))):_0x3155e2=Math[_0x59a68f(0x389)](0x1,Math[_0x59a68f(0x300)](battleAttributes[_0x59a68f(0x5dc)]*0.8*_0x5e16b9));const _0x59fd3e=Math['floor'](Math['random']()*(0xc8-0x32+0x1)+0x32+battleRounds*0x14*_0x5e16b9)*_0x3ee185;battleAttributes[_0x59a68f(0x41f)]=Math['max'](0x0,battleAttributes['mana']-_0x59fd3e);if(handleMagicDodge(_0x59a68f(0x46d)))return playerTurn=![],0x0;let _0x4fa077=checkCriticalHit(battleState[_0x59a68f(0x3aa)][_0x59a68f(0x2e5)]),_0x2180b1=calculateDamage(_0x3155e2,_0x4fa077,battleState['player']['critDamage'],!![]);const _0x157d36=applyWuxingEffects();let _0x97a9af=0x0;if(_0x157d36[_0x59a68f(0x473)]&&_0x157d36[_0x59a68f(0x473)]>0x0){const _0x22c985=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x157d36[_0x59a68f(0x473)]];_0x97a9af=Math[_0x59a68f(0x300)](_0x2180b1*_0x22c985),_0x2180b1=Math[_0x59a68f(0x300)](_0x2180b1*(0x1+_0x22c985)),!isNaN(_0x97a9af)&&_0x97a9af>0x0&&logBattleEvent(_0x59a68f(0x567)+_0x97a9af+'\x20点。',_0x59a68f(0x2db));}_0x2180b1=Math[_0x59a68f(0x389)](0x1,_0x2180b1-_0x8661b4);enemyRivival&&(_0x2180b1=Math[_0x59a68f(0x300)](0.1*_0x2180b1));battleState['enemy'][_0x59a68f(0x45e)]=Math['max'](0x0,battleState['enemy'][_0x59a68f(0x45e)]-_0x2180b1);_0x4fa077?(logBattleEvent(_0x59a68f(0x2ca)+_0x2180b1+_0x59a68f(0x4e7)+_0x59fd3e+_0x59a68f(0x259),_0x59a68f(0x24a)),updateDamageValue(_0x2180b1,![],_0x59a68f(0x2f1),!![]),showEffect('playerEffect',_0x59a68f(0x2bf))):(logBattleEvent(_0x59a68f(0x2c9)+_0x2180b1+_0x59a68f(0x4e7)+_0x59fd3e+_0x59a68f(0x2f7),_0x59a68f(0x3c1)),updateDamageValue(_0x2180b1,![],_0x59a68f(0x2f1)),showEffect('playerEffect',_0x59a68f(0x2bf)));waterAmuletTriggered&&updateDamageValue(_0x2180b1,![],_0x59a68f(0x5ff));const _0x37781e=applySuitEffects?applySuitEffects():0x0;if(_0x37781e>=0x8&&_0x2180b1>0x0){if(Math[_0x59a68f(0x61a)]()<0.2){const _0x3e28d0=Math[_0x59a68f(0x296)](0x7a120,Math[_0x59a68f(0x300)](_0x2180b1*0.005));battleAttributes['health']=Math[_0x59a68f(0x296)](maxHealth,battleAttributes[_0x59a68f(0x45e)]+_0x3e28d0),updateDamageValue(-_0x3e28d0,!![],'extra-damage'),logBattleEvent(_0x59a68f(0x30d)+_0x3e28d0+_0x59a68f(0x593),'gold'),updateUI();}}return battleState['enemy']['pierced']&&handlePierced(),(ascensionSkill[_0x59a68f(0x621)]===_0x59a68f(0x38c)||secondAscensionSkill[_0x59a68f(0x621)]===_0x59a68f(0x38c))&&Math[_0x59a68f(0x61a)]()*0x64<battleState[_0x59a68f(0x3aa)]['spellMasteryChance']&&performIndependentMagicAttack(),applyMagicAttackEffects(_0x2180b1,_0x4af76b?_0x5e16b9:0x1),_0x16ac9a&&_0x16ac9a[_0x59a68f(0x206)]==='MAE'&&applySpecialSkillEffects(_0x16ac9a),{'damage':_0x2180b1,'retryPhysical':![]};}function handlePostAttackEffects(_0x4a7113,_0x1b9ea0,_0x5b0302){const _0x34ddb0=_0x3ebdb0,{selectedSkill:_0x426d92,isCritical:isCritical=![],skillMultiplier:skillMultiplier=0x1}=_0x5b0302||{};waterAmuletTriggered&&(updateDamageValue(_0x1b9ea0,![],_0x34ddb0(0x5ff)),waterAmuletTriggered=![]);battleState[_0x34ddb0(0x46d)][_0x34ddb0(0x57e)]&&handlePierced();if(_0x4a7113===_0x34ddb0(0x3f0)){if(ascensionSkill['name']===_0x34ddb0(0x31e)||secondAscensionSkill[_0x34ddb0(0x621)]===_0x34ddb0(0x31e)){const _0xb383cf=(ascensionSkill[_0x34ddb0(0x621)]===_0x34ddb0(0x31e)?ascensionSkill:secondAscensionSkill)[_0x34ddb0(0x624)]((ascensionSkill[_0x34ddb0(0x621)]===_0x34ddb0(0x31e)?ascensionSkill:secondAscensionSkill)[_0x34ddb0(0x1f2)])/0x64,_0x84b46a=Math[_0x34ddb0(0x300)](_0x1b9ea0*_0xb383cf);battleAttributes[_0x34ddb0(0x45e)]=Math[_0x34ddb0(0x296)](maxHealth,battleAttributes[_0x34ddb0(0x45e)]+_0x84b46a),logBattleEvent(_0x34ddb0(0x58d)+_0x84b46a+_0x34ddb0(0x593),'red');}_0x426d92&&applyPhysicalAttackEffects(skillMultiplier);}_0x4a7113===_0x34ddb0(0x35e)&&((ascensionSkill['name']===_0x34ddb0(0x38c)||secondAscensionSkill[_0x34ddb0(0x621)]===_0x34ddb0(0x38c))&&Math[_0x34ddb0(0x61a)]()*0x64<battleState[_0x34ddb0(0x3aa)][_0x34ddb0(0x46e)]&&performIndependentMagicAttack(),_0x426d92&&applyMagicAttackEffects(_0x1b9ea0,skillMultiplier)),handleShocked(),applyDefenseBonusEffect(),handleManaRecover(),applyAscensionEffects(),checkBattleState(_0x1b9ea0),updateUI(),updateEnemyStatusDisplay();}function checkBattleState(_0x252990){const _0x4abf3e=_0x3ebdb0;if(battleState[_0x4abf3e(0x46d)][_0x4abf3e(0x45e)]<=0x0)return updateEnemyAttributes(),showNextBattlePrompt(!![]),!![];if(battleAttributes[_0x4abf3e(0x45e)]<=0x0)return showNextBattlePrompt(![]),!![];return![];}function f(_0x4d5b2c){const _0x16ae60=_0x3ebdb0,_0x5317f2=_0x4d5b2c/(_0x4d5b2c+0x493e0)-0.1;return Math[_0x16ae60(0x389)](_0x5317f2,0x0);}function checkWaterAmuletChance(){const _0x3bcfa5=_0x3ebdb0,_0x4fbded=applyWuxingEffects();if(_0x4fbded[_0x3bcfa5(0x387)]&&_0x4fbded[_0x3bcfa5(0x387)]>0x0){const _0x57e139=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x4fbded[_0x3bcfa5(0x387)]];if(Math['random']()<_0x57e139)return!![];}return![];}function handleWaterAmuletEffect(_0x151af4,_0x5187ec){const _0x248799=_0x3ebdb0;logBattleEvent(_0x248799(0x2e0),_0x248799(0x282)),performAttack(_0x151af4);}const DamageDisplayManager={'damageContainers':{'player':null,'enemy':null},'formatNumber'(_0x2d06c5){const _0x314db5=_0x3ebdb0,_0x3e98f4=Math[_0x314db5(0x310)](_0x2d06c5);if(_0x3e98f4>=0x5f5e100){const _0x13893c=Math[_0x314db5(0x300)](_0x3e98f4/0x5f5e100),_0x4251a4=_0x3e98f4%0x5f5e100,_0xd4e6a2=Math['floor'](_0x4251a4/0x2710);return _0xd4e6a2===0x0?_0x13893c+'亿':_0x13893c+'亿'+_0xd4e6a2+'万';}else{if(_0x3e98f4>=0x2710){const _0x4364b7=Math[_0x314db5(0x300)](_0x3e98f4/0x2710),_0x3bed9d=_0x3e98f4%0x2710;return _0x3bed9d===0x0?_0x4364b7+'万':_0x4364b7+'万'+_0x3bed9d;}else return _0x3e98f4[_0x314db5(0x499)]();}},'initialize'(){const _0x45eccb=_0x3ebdb0,_0x4958ee=document[_0x45eccb(0x514)]('div');_0x4958ee['id']=_0x45eccb(0x523),_0x4958ee[_0x45eccb(0x604)][_0x45eccb(0x42a)]=_0x45eccb(0x400);const _0x3e5836=document['createElement']('div');_0x3e5836['id']='enemy-damage-container',_0x3e5836[_0x45eccb(0x604)][_0x45eccb(0x42a)]=_0x45eccb(0x2d5),document[_0x45eccb(0x2eb)][_0x45eccb(0x2b2)](_0x4958ee),document[_0x45eccb(0x2eb)][_0x45eccb(0x2b2)](_0x3e5836),this[_0x45eccb(0x5b8)][_0x45eccb(0x3aa)]=_0x4958ee,this[_0x45eccb(0x5b8)]['enemy']=_0x3e5836;},'createDamageElement'(_0x5d0d91,_0xdf0118,_0x2b2e43,_0x59e433){const _0x2a7457=_0x3ebdb0,_0x36b071=document[_0x2a7457(0x514)]('div');_0x36b071[_0x2a7457(0x604)]['position']=_0x2a7457(0x233);const _0x207eb5=_0x59e433?_0x2a7457(0x553):_0x2a7457(0x4fc);_0x36b071['style'][_0x2a7457(0x33c)]=_0x207eb5+_0x2a7457(0x3c2);const _0x3e41b8=this[_0x2a7457(0x3a3)](_0x5d0d91);return _0x5d0d91>=0x0?(_0x36b071[_0x2a7457(0x331)]='-'+_0x3e41b8,_0x2b2e43?_0x36b071['style'][_0x2a7457(0x42a)]+='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20red;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2028px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x20-2px\x20-2px\x200\x20#8a2e27,\x202px\x20-2px\x200\x20#8a2e27,\x20-2px\x202px\x200\x20#8a2e27,\x202px\x202px\x200\x20#8a2e27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bolder;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20'+(_0x59e433?_0x2a7457(0x263):'floatUpLeftCritical')+_0x2a7457(0x31c):_0x36b071[_0x2a7457(0x604)][_0x2a7457(0x42a)]+=_0x2a7457(0x284)):(_0x36b071[_0x2a7457(0x331)]='+'+_0x3e41b8,_0x36b071[_0x2a7457(0x604)][_0x2a7457(0x42a)]+=_0x2a7457(0x218)+(_0x59e433?_0x2a7457(0x263):'floatUpLeftCritical')+'\x201s\x20ease-out\x20forwards;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'),_0x36b071;}},battleStyle=document['createElement'](_0x3ebdb0(0x604));battleStyle[_0x3ebdb0(0x418)]=_0x3ebdb0(0x2e6),document[_0x3ebdb0(0x347)][_0x3ebdb0(0x2b2)](battleStyle);function updateDamageValue(_0x18f52b,_0x29d496=![],_0x26897e=_0x3ebdb0(0x2f1),_0x1d0ed9=![]){const _0x33024a=_0x3ebdb0;!DamageDisplayManager[_0x33024a(0x5b8)][_0x33024a(0x3aa)]&&DamageDisplayManager['initialize']();if(isNaN(_0x18f52b)){console[_0x33024a(0x1f6)]('Invalid\x20damage\x20value:\x20NaN.');return;}const _0x5e5b39=_0x29d496?DamageDisplayManager[_0x33024a(0x5b8)][_0x33024a(0x3aa)]:DamageDisplayManager[_0x33024a(0x5b8)][_0x33024a(0x46d)],_0x19e184=DamageDisplayManager[_0x33024a(0x480)](_0x18f52b,_0x26897e,_0x1d0ed9,_0x29d496);_0x5e5b39[_0x33024a(0x2b2)](_0x19e184),setTimeout(()=>{const _0x39ca8b=_0x33024a;_0x5e5b39[_0x39ca8b(0x5e1)](_0x19e184)&&_0x5e5b39['removeChild'](_0x19e184);},0x4b0);}function ensureCompatibility(){const _0x488a7e=_0x3ebdb0,_0x1f96be=[_0x488a7e(0x3b8),_0x488a7e(0x580),'enemy-damage-value',_0x488a7e(0x20f)];_0x1f96be[_0x488a7e(0x32f)](_0xb5b6ae=>{const _0x141c9a=_0x488a7e;if(!document[_0x141c9a(0x43e)](_0xb5b6ae)){const _0x24c24e=document[_0x141c9a(0x514)](_0x141c9a(0x463));_0x24c24e['id']=_0xb5b6ae,_0x24c24e[_0x141c9a(0x604)]['display']='none',document[_0x141c9a(0x2eb)][_0x141c9a(0x2b2)](_0x24c24e);}});}function checkTrumpCardState(){const _0x383393=_0x3ebdb0,_0x535978=[],_0x28360e=document[_0x383393(0x43e)](_0x383393(0x5cc));_0x28360e&&Array[_0x383393(0x2bc)](_0x28360e[_0x383393(0x4b9)])[_0x383393(0x32f)](_0x4c9db2=>{const _0x36fb33=_0x383393,_0x2b12ca=_0x4c9db2[_0x36fb33(0x331)][_0x36fb33(0x552)]('\x20')[0x0],_0x43239f=currentPet[_0x36fb33(0x5ca)][_0x36fb33(0x397)](_0x562a87=>_0x562a87['name']===_0x2b12ca&&_0x562a87[_0x36fb33(0x206)]==='TC');_0x43239f&&_0x535978[_0x36fb33(0x48f)](_0x43239f);});if(_0x535978[_0x383393(0x545)]===0x0)return{'exists':![],'skill':null};let _0x361145=_0x535978[0x0];if(_0x535978['length']>0x1){const _0x41b61f=Math['floor'](Math[_0x383393(0x61a)]()*_0x535978[_0x383393(0x545)]);_0x361145=_0x535978[_0x41b61f];}return{'exists':!![],'skill':_0x361145};}function checkLifeSpan(_0x26f45c){const _0x262aed=_0x3ebdb0,_0x27eeb4=currentLifeSpan-_0x26f45c;if(_0x27eeb4<0x0)return logBattleEvent(_0x262aed(0x320),_0x262aed(0x509)),![];return currentLifeSpan-=_0x26f45c,!![];}function recoverLifeSpan(_0x156637){const _0x4a4045=_0x3ebdb0;currentLifeSpan=Math[_0x4a4045(0x300)](Math[_0x4a4045(0x296)](maxLifeSpan,currentLifeSpan+_0x156637));}function performTrumpCard(){const _0x214bdf=_0x3ebdb0,_0x25b548=checkTrumpCardState();if(!_0x25b548[_0x214bdf(0x455)]){logBattleEvent(_0x214bdf(0x226),_0x214bdf(0x24a));return;}if(!playerTurn)return;const _0x1388d3=_0x25b548['skill'],_0xbf301a=calculateSkillLevelAndMultiplier(_0x1388d3);applySpecialSkillEffects(_0x1388d3);if(battleAttributes[_0x214bdf(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x214bdf(0x46d)][_0x214bdf(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![];}function performIndependentMagicAttack(){const _0x32d2c6=_0x3ebdb0,_0x55b32b=document[_0x32d2c6(0x43e)](_0x32d2c6(0x5cc)),_0x515935=Array[_0x32d2c6(0x2bc)](_0x55b32b[_0x32d2c6(0x4b9)]),_0x47ebe2=_0x515935[_0x32d2c6(0x4be)](_0x5228a8=>_0x5228a8[_0x32d2c6(0x331)]['split']('\x20')[0x0])['map'](_0x228cb8=>currentPet[_0x32d2c6(0x5ca)]['find'](_0x1dd9a9=>_0x1dd9a9[_0x32d2c6(0x621)]===_0x228cb8&&_0x1dd9a9[_0x32d2c6(0x206)]==='MA'||_0x228cb8&&_0x1dd9a9[_0x32d2c6(0x206)]===_0x32d2c6(0x456)))['filter'](_0x267ecf=>_0x267ecf);let _0x4355db=0x1,_0x1198a8=0x1;if(_0x47ebe2['length']>0x0){const _0x1d5964=Math[_0x32d2c6(0x300)](Math[_0x32d2c6(0x61a)]()*_0x47ebe2[_0x32d2c6(0x545)]),_0x85241f=_0x47ebe2[_0x1d5964],_0x446b6e=calculateSkillLevelAndMultiplier(_0x85241f);_0x1198a8=_0x446b6e[_0x32d2c6(0x2c0)],_0x4355db=_0x446b6e['skillMultiplier'],logBattleEvent(_0x32d2c6(0x2b4)+_0x85241f['name']+'\x20'+_0x1198a8+'级。','wheat');}else logBattleEvent(_0x32d2c6(0x51a),_0x32d2c6(0x3c1));let _0x50c294=0x1;battleState[_0x32d2c6(0x3aa)][_0x32d2c6(0x225)]&&(_0x50c294=0x1f4,logBattleEvent(_0x32d2c6(0x47d),_0x32d2c6(0x509)));const _0x11bda1=Math['random']()*(1.2-0.8)+0.8,_0x17af8e=battleState[_0x32d2c6(0x46d)][_0x32d2c6(0x34c)]*_0x11bda1,_0x448032=f(_0x17af8e),_0x458137=Math['round'](battleState[_0x32d2c6(0x46d)]['magicDefense']*0.1);let _0x2c406c;_0x448032!==0x0?_0x2c406c=Math[_0x32d2c6(0x389)](0x1,Math[_0x32d2c6(0x300)](battleAttributes[_0x32d2c6(0x5dc)]*0.8*_0x4355db*(0x1-_0x448032))):_0x2c406c=Math[_0x32d2c6(0x389)](0x1,Math[_0x32d2c6(0x300)](battleAttributes[_0x32d2c6(0x5dc)]*0.8*_0x4355db));let _0x163dfa=checkCriticalHit(battleState[_0x32d2c6(0x3aa)]['critRate']);if(handleMagicDodge('enemy'))return playerTurn=![],0x0;let _0x48d2cd=calculateDamage(_0x2c406c,_0x163dfa,battleState[_0x32d2c6(0x3aa)][_0x32d2c6(0x345)],!![]);const _0x2c7b2d=applyWuxingEffects();let _0x118344=0x0;if(_0x2c7b2d[_0x32d2c6(0x473)]&&_0x2c7b2d[_0x32d2c6(0x473)]>0x0){const _0x3668f2=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x2c7b2d[_0x32d2c6(0x473)]];_0x118344=Math['floor'](_0x48d2cd*_0x3668f2),_0x48d2cd=Math[_0x32d2c6(0x300)](_0x48d2cd*(0x1+_0x3668f2)),!isNaN(_0x118344)&&_0x118344>0x0&&logBattleEvent(_0x32d2c6(0x567)+_0x118344+_0x32d2c6(0x384),_0x32d2c6(0x2db));}_0x48d2cd=Math[_0x32d2c6(0x389)](0x1,_0x48d2cd-_0x458137);enemyRivival&&(_0x48d2cd=Math[_0x32d2c6(0x300)](0.1*_0x48d2cd));battleState[_0x32d2c6(0x46d)][_0x32d2c6(0x45e)]=Math[_0x32d2c6(0x389)](0x0,battleState[_0x32d2c6(0x46d)]['health']-_0x48d2cd);_0x163dfa?(logBattleEvent(_0x32d2c6(0x2ca)+_0x48d2cd+_0x32d2c6(0x2e1),'red'),showEffect(_0x32d2c6(0x25a),'https://pic.imgdb.cn/item/66a0d3e8d9c307b7e93a8108.gif')):logBattleEvent(_0x32d2c6(0x40e)+_0x48d2cd+_0x32d2c6(0x2e1),'wheat');updateDamageValue(_0x48d2cd,![],_0x32d2c6(0x5ff)),showEffect(_0x32d2c6(0x25a),_0x32d2c6(0x1f7)),applyMagicAttackEffects(_0x48d2cd,_0x4355db);battleState[_0x32d2c6(0x46d)][_0x32d2c6(0x57e)]&&handlePierced();if(battleState['player'][_0x32d2c6(0x461)]&&_0x48d2cd>0x0){const _0x9182d9=Math[_0x32d2c6(0x300)](_0x48d2cd*0.1);battleAttributes[_0x32d2c6(0x45e)]=Math[_0x32d2c6(0x389)](0x0,battleAttributes[_0x32d2c6(0x45e)]-_0x9182d9),logBattleEvent(_0x32d2c6(0x1f1)+_0x9182d9+_0x32d2c6(0x5e0),_0x32d2c6(0x4de));}}function performPoison(){const _0x5741c6=_0x3ebdb0;if(!attributesFetched){showInfoBox(_0x5741c6(0x5a9));return;}if(!battleState||!battleState['enemy']){console['error'](_0x5741c6(0x302));return;}if(!playerTurn)return;if(battleState[_0x5741c6(0x3aa)]['taunt']){performAttack(_0x5741c6(0x3f0));return;}if(!poisonSkillActivated){if(useItem(_0x5741c6(0x4fa)))poisonSkillActivated=!![],logBattleEvent(_0x5741c6(0x57c),_0x5741c6(0x375));else{logBattleEvent(_0x5741c6(0x590),'red');return;}}const _0x56234e=document['getElementById'](_0x5741c6(0x5cc)),_0x477ca4=Array['from'](_0x56234e[_0x5741c6(0x4b9)]),_0x4b4171=_0x477ca4[_0x5741c6(0x4be)](_0x1b619a=>_0x1b619a[_0x5741c6(0x331)][_0x5741c6(0x552)]('\x20')[0x0])[_0x5741c6(0x4be)](_0x2f6665=>currentPet[_0x5741c6(0x5ca)][_0x5741c6(0x397)](_0x2da97c=>_0x2da97c[_0x5741c6(0x621)]===_0x2f6665&&(_0x2da97c[_0x5741c6(0x206)]==='PP'||_0x2da97c['type']===_0x5741c6(0x2be))))['filter'](_0x524504=>_0x524504);let _0x209666=0x1,_0x32e478=0x1,_0x5dcdbe;if(_0x4b4171[_0x5741c6(0x545)]>0x0){const _0x785b02=Math[_0x5741c6(0x300)](Math[_0x5741c6(0x61a)]()*_0x4b4171['length']);_0x5dcdbe=_0x4b4171[_0x785b02];const _0x1c2b52=calculateSkillLevelAndMultiplier(_0x5dcdbe);_0x32e478=_0x1c2b52[_0x5741c6(0x2c0)],_0x209666=_0x1c2b52[_0x5741c6(0x40d)],logBattleEvent(_0x5741c6(0x53d)+_0x5dcdbe['name']+'\x20'+_0x32e478+_0x5741c6(0x4e2),_0x5741c6(0x375));}const _0x5017b7=Math[_0x5741c6(0x300)](maxMana*0.4);if(battleAttributes[_0x5741c6(0x41f)]<_0x5017b7){logBattleEvent(_0x5741c6(0x3f6),_0x5741c6(0x24a));return;}battleAttributes[_0x5741c6(0x41f)]=Math[_0x5741c6(0x389)](0x0,battleAttributes['mana']-_0x5017b7);if(handleMagicDodge(_0x5741c6(0x46d))){playerTurn=![];return;}let _0x3659df=0.3;useItem('poisonPowder')&&(_0x3659df=0.7,_0x209666+=0x1);const _0x2eed36=Math['floor'](battleAttributes[_0x5741c6(0x5dc)]*0.5*_0x209666*(Math[_0x5741c6(0x61a)]()*(1.1-0.9)+0.9));battleState[_0x5741c6(0x46d)][_0x5741c6(0x45e)]=Math[_0x5741c6(0x389)](0x0,battleState[_0x5741c6(0x46d)][_0x5741c6(0x45e)]-_0x2eed36),logBattleEvent(_0x5741c6(0x290)+_0x2eed36+_0x5741c6(0x299)+_0x5017b7+'\x20点法力值。',_0x5741c6(0x375));battleState['enemy'][_0x5741c6(0x57e)]&&handlePierced();showEffect(_0x5741c6(0x25a),_0x5741c6(0x208)),updateDamageValue(_0x2eed36,![],_0x5741c6(0x2f1));Math['random']()<_0x3659df&&!battleState[_0x5741c6(0x46d)]['poisoned']&&(battleState[_0x5741c6(0x46d)]['poisoned']=!![],handlePoison(_0x209666,_0x5dcdbe));handleShocked(),handleManaRecover(),applyAscensionEffects(),updateUI();if(battleAttributes[_0x5741c6(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x5741c6(0x46d)][_0x5741c6(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![];}function handlePoison(_0x476aed=0x1,_0x5e2147=null){const _0x51ac80=_0x3ebdb0,_0x597a72=0x3e8,_0x118845=Math[_0x51ac80(0x420)](playerCultivation/0x3a980)*0x3e8,_0x4acf1d=_0x597a72+_0x118845;let _0x1b3a9b=_0x4acf1d,_0x2685f8=0x0;const _0x5085e7=setInterval(()=>{const _0x1804f3=_0x51ac80;if(!battleState[_0x1804f3(0x46d)][_0x1804f3(0x351)]){clearInterval(_0x5085e7);return;}const _0x4aeb44=Math['floor'](battleAttributes['magicAttack']*0.5*_0x476aed*(Math[_0x1804f3(0x61a)]()*(1.1-0.9)+0.9)*(0x1+battleState[_0x1804f3(0x3aa)][_0x1804f3(0x345)]*0.1));battleState[_0x1804f3(0x46d)][_0x1804f3(0x45e)]=Math[_0x1804f3(0x389)](0x0,battleState['enemy']['health']-_0x4aeb44),_0x5e2147&&_0x5e2147['type']===_0x1804f3(0x2be)&&applySpecialSkillEffects(_0x5e2147,_0x4aeb44),_0x2685f8+=_0x4aeb44,_0x1b3a9b-=0x3e8,updateUI(),updateDamageValue(_0x4aeb44,![],'extra-damage'),updateEnemyStatusDisplay();},0xc8);if(battleState[_0x51ac80(0x46d)][_0x51ac80(0x45e)]<=0x0){clearInterval(_0x5085e7),showNextBattlePrompt(!![]),battleState[_0x51ac80(0x46d)][_0x51ac80(0x351)]=![];return;}battleState[_0x51ac80(0x46d)][_0x51ac80(0x494)]=setTimeout(()=>{const _0x1a6c26=_0x51ac80;battleState[_0x1a6c26(0x46d)][_0x1a6c26(0x351)]=![],clearInterval(_0x5085e7),updateEnemyStatusDisplay(),logBattleEvent(_0x1a6c26(0x4e5)+_0x2685f8+_0x1a6c26(0x2ea),_0x1a6c26(0x375));},_0x4acf1d);}function getCultivationBonusDuration(){const _0x2efd1e=_0x3ebdb0;if(playerCultivation<=0x1d4c0)return 0x0;return Math[_0x2efd1e(0x296)](0xa,(playerCultivation-0x1d4c0)/0x2710*0.1);}function applyPhysicalAttackEffects(){const _0x3369e7=_0x3ebdb0;if(!divineWeaponManager['lostBook'][_0x3369e7(0x2e4)])return;const _0x294c4b=divineWeaponManager['lostBook']['effects'],_0x448140=_0x294c4b[Math[_0x3369e7(0x300)](Math[_0x3369e7(0x61a)]()*_0x294c4b[_0x3369e7(0x545)])];let _0x12eb43=Math['min'](0x1,0.01+(divineWeaponManager[_0x3369e7(0x60e)][_0x3369e7(0x1f2)]-0x1)*0.006);const _0x36171d=playerCultivation-battleState['enemy']['cultivation'];if(_0x36171d<0x0){const _0x881f42=Math[_0x3369e7(0x300)](-_0x36171d/0x2710)*0.01;_0x12eb43=Math['max'](0.01,_0x12eb43-_0x881f42),console[_0x3369e7(0x27a)](_0x3369e7(0x373)+_0x12eb43);}if(Math[_0x3369e7(0x61a)]()>_0x12eb43)return;const _0x112b30=getCultivationBonusDuration();switch(_0x448140){case'破甲':const _0x3f9040=Math[_0x3369e7(0x300)](battleAttributes[_0x3369e7(0x2f3)]*(Math[_0x3369e7(0x61a)]()*(0.24-0.12)+0.12));battleState[_0x3369e7(0x46d)][_0x3369e7(0x54a)]-=_0x3f9040,battleState[_0x3369e7(0x46d)][_0x3369e7(0x1f9)]=!![],logBattleEvent(_0x3369e7(0x431)+_0x3f9040+_0x3369e7(0x384),_0x3369e7(0x276)),showEffect(_0x3369e7(0x25a),_0x3369e7(0x3fe)),updateEnemyStatusDisplay(),battleState['enemy'][_0x3369e7(0x436)]=setTimeout(()=>{const _0x315aab=_0x3369e7;battleState[_0x315aab(0x46d)][_0x315aab(0x54a)]+=_0x3f9040,battleState['enemy'][_0x315aab(0x1f9)]=![],updateEnemyStatusDisplay();},0xbb8+_0x112b30*0x3e8);break;case'眩晕':battleState['enemy'][_0x3369e7(0x261)]=!![],logBattleEvent('妖怪被眩晕，无法行动。',_0x3369e7(0x3c1)),showEffect(_0x3369e7(0x25a),_0x3369e7(0x311)),updateEnemyStatusDisplay(),battleState[_0x3369e7(0x46d)][_0x3369e7(0x2dc)]=setTimeout(()=>{const _0x2abb29=_0x3369e7;battleState[_0x2abb29(0x46d)][_0x2abb29(0x261)]=![],updateEnemyStatusDisplay();},0x3e8+_0x112b30*0x3e8);break;case'恐吓':battleState[_0x3369e7(0x46d)]['intimidated']=!![],logBattleEvent('妖怪被恐吓，无法暴击。','white'),updateEnemyStatusDisplay(),battleState['enemy'][_0x3369e7(0x2ab)]=setTimeout(()=>{const _0x2463eb=_0x3369e7;battleState[_0x2463eb(0x46d)][_0x2463eb(0x364)]=![],updateEnemyStatusDisplay();},0x3e8+_0x112b30*0x3e8);break;case'穿透':!battleState[_0x3369e7(0x46d)][_0x3369e7(0x57e)]?handlePiercedEffect(_0x112b30):console['log'](_0x3369e7(0x25c));break;case'惶恐':!battleState[_0x3369e7(0x46d)]['terrified']?handleTerrified(_0x112b30):console[_0x3369e7(0x27a)](_0x3369e7(0x594));break;case'麻痹':!battleState[_0x3369e7(0x46d)][_0x3369e7(0x5ef)]&&(battleState[_0x3369e7(0x46d)][_0x3369e7(0x5ef)]=!![],battleState[_0x3369e7(0x46d)][_0x3369e7(0x3f2)]=enemyMaxHealth,battleState[_0x3369e7(0x46d)][_0x3369e7(0x383)]=0x0);const _0x175388=Math[_0x3369e7(0x300)](battleState[_0x3369e7(0x46d)][_0x3369e7(0x3f2)]*0.03);enemyMaxHealth-=_0x175388,battleState[_0x3369e7(0x46d)]['benumbStack']+=_0x175388;battleState['enemy'][_0x3369e7(0x45e)]>enemyMaxHealth&&(battleState['enemy'][_0x3369e7(0x45e)]=enemyMaxHealth);logBattleEvent(_0x3369e7(0x260)+_0x175388+_0x3369e7(0x384),_0x3369e7(0x209)),showEffect(_0x3369e7(0x25a),_0x3369e7(0x596)),updateEnemyStatusDisplay(),battleState[_0x3369e7(0x46d)][_0x3369e7(0x349)]=setTimeout(()=>{const _0x155d02=_0x3369e7;battleState[_0x155d02(0x46d)][_0x155d02(0x3f2)]&&(battleState[_0x155d02(0x46d)]['benumbStack']-=_0x175388,battleState[_0x155d02(0x46d)][_0x155d02(0x383)]<=0x0?(enemyMaxHealth=battleState['enemy'][_0x155d02(0x3f2)],battleState[_0x155d02(0x46d)][_0x155d02(0x5ef)]=![]):enemyMaxHealth=battleState[_0x155d02(0x46d)]['originalMaxHealth']-battleState[_0x155d02(0x46d)][_0x155d02(0x383)]),updateEnemyStatusDisplay();},0xbb8+_0x112b30*0x3e8);break;}}function applyMagicAttackEffects(_0x5cafb8){const _0x390833=_0x3ebdb0;if(!divineWeaponManager[_0x390833(0x3b2)]['active'])return;const _0x544302=divineWeaponManager['fragmentedMap'][_0x390833(0x358)],_0x1780b7=_0x544302[Math[_0x390833(0x300)](Math['random']()*_0x544302[_0x390833(0x545)])];let _0x470c26=Math['min'](0x1,0.01+(divineWeaponManager[_0x390833(0x3b2)][_0x390833(0x1f2)]-0x1)*0.006);const _0x1ea09a=playerCultivation-battleState['enemy'][_0x390833(0x26f)];if(_0x1ea09a<0x0){const _0x55289e=Math['floor'](-_0x1ea09a/0x2710)*0.01;_0x470c26=Math[_0x390833(0x389)](0.01,_0x470c26-_0x55289e),console[_0x390833(0x27a)](_0x390833(0x285)+_0x470c26);}if(Math[_0x390833(0x61a)]()>_0x470c26)return;const _0x206c47=getCultivationBonusDuration();switch(_0x1780b7){case'沉默':battleState[_0x390833(0x46d)][_0x390833(0x258)]=!![],showEffect(_0x390833(0x25a),_0x390833(0x530)),updateEnemyStatusDisplay(),battleState[_0x390833(0x46d)]['silencedTimer']=setTimeout(()=>{const _0x3f7f8c=_0x390833;battleState[_0x3f7f8c(0x46d)][_0x3f7f8c(0x258)]=![],updateEnemyStatusDisplay();},0xbb8+_0x206c47*0x3e8);break;case'迟缓':handleSlow(_0x206c47);break;case'混乱':battleState[_0x390833(0x46d)][_0x390833(0x329)]=!![],showEffect(_0x390833(0x25a),'https://pic.imgdb.cn/item/66a63695d9c307b7e9d82c29.gif'),updateEnemyStatusDisplay(),battleState[_0x390833(0x46d)][_0x390833(0x5a1)]=setTimeout(()=>{const _0x5d2b93=_0x390833;battleState[_0x5d2b93(0x46d)][_0x5d2b93(0x329)]=![],updateEnemyStatusDisplay();},0xbb8+_0x206c47*0x3e8);break;case _0x390833(0x616):const _0x5c5518=Math['floor'](_0x5cafb8*0.8);let _0x3e3b25=0x0;battleState[_0x390833(0x46d)][_0x390833(0x41f)]<_0x5c5518&&(_0x3e3b25=_0x5c5518-battleState['enemy'][_0x390833(0x41f)]);battleState[_0x390833(0x46d)][_0x390833(0x41f)]=Math[_0x390833(0x389)](0x0,battleState[_0x390833(0x46d)][_0x390833(0x41f)]-_0x5c5518),battleState[_0x390833(0x46d)][_0x390833(0x45e)]=Math[_0x390833(0x389)](0x0,battleState[_0x390833(0x46d)][_0x390833(0x45e)]-_0x3e3b25);_0x3e3b25>0x0?logBattleEvent(_0x390833(0x609)+_0x3e3b25+_0x390833(0x593),_0x390833(0x58f)):logBattleEvent(_0x390833(0x60b)+_0x5c5518+_0x390833(0x2f7),_0x390833(0x1f8));showEffect(_0x390833(0x25a),_0x390833(0x40f));break;case _0x390833(0x22a):const _0x35ac79=Math[_0x390833(0x300)](_0x5cafb8*0.01);let _0x1fd4a3=Math[_0x390833(0x296)](_0x35ac79,battleState[_0x390833(0x46d)][_0x390833(0x41f)]);battleState['enemy'][_0x390833(0x41f)]=Math['max'](0x0,battleState[_0x390833(0x46d)][_0x390833(0x41f)]-_0x1fd4a3),battleAttributes[_0x390833(0x41f)]=Math[_0x390833(0x296)](maxMana,battleAttributes[_0x390833(0x41f)]+_0x1fd4a3),logBattleEvent(_0x390833(0x388)+_0x1fd4a3+_0x390833(0x2f7),_0x390833(0x1f8)),showEffect(_0x390833(0x25a),_0x390833(0x560));break;case'灼烧':battleState[_0x390833(0x46d)]['burnt']=!![],showEffect(_0x390833(0x25a),_0x390833(0x4c2)),updateEnemyStatusDisplay(),battleState['enemy'][_0x390833(0x2e9)]=setTimeout(()=>{const _0x2a59b0=_0x390833;battleState['enemy'][_0x2a59b0(0x29c)]=![],updateEnemyStatusDisplay();},0xbb8+_0x206c47*0x3e8);break;}}function handlePiercedEffect(_0x15cc2e){const _0x5baf4d=_0x3ebdb0;pierceDamageContainer[_0x5baf4d(0x489)]=0x0,battleState['enemy'][_0x5baf4d(0x57e)]=!![],logBattleEvent(_0x5baf4d(0x4f6),'#ADFF2F'),showEffect('playerEffect',_0x5baf4d(0x224)),updateEnemyStatusDisplay(),battleState[_0x5baf4d(0x46d)][_0x5baf4d(0x2c5)]=setTimeout(()=>{const _0x4df63d=_0x5baf4d;if(battleState['enemy'][_0x4df63d(0x57e)]){const _0x5288a1=Math[_0x4df63d(0x300)](pierceDamageContainer[_0x4df63d(0x489)]*(Math[_0x4df63d(0x61a)]()*(0.84-0.42)+0.24)*(0x1+playerCultivation/0x7a120));battleState[_0x4df63d(0x46d)]['health']=Math[_0x4df63d(0x389)](0x0,battleState[_0x4df63d(0x46d)][_0x4df63d(0x45e)]-_0x5288a1),logBattleEvent(_0x4df63d(0x5f2)+_0x5288a1+'\x20点穿透余波伤害。',_0x4df63d(0x5e3)),updateDamageValue(_0x5288a1,![],_0x4df63d(0x5ff)),showBattleOverlay(_0x4df63d(0x2a8),0x5dc,0.8),pierceDamageContainer[_0x4df63d(0x489)]=0x0,battleState[_0x4df63d(0x46d)][_0x4df63d(0x57e)]=![];}updateUI(),updateEnemyStatusDisplay();},0xbb8+_0x15cc2e*0x3e8);}function handlePierced(){const _0x3bdae9=_0x3ebdb0;if(!battleState['enemy'][_0x3bdae9(0x57e)])return;const _0x39b074=Math[_0x3bdae9(0x300)](battleAttributes['physicalAttack']*0x5);battleState[_0x3bdae9(0x46d)][_0x3bdae9(0x45e)]=Math[_0x3bdae9(0x389)](0x0,battleState['enemy']['health']-_0x39b074),logBattleEvent('敌人受到\x20'+_0x39b074+'\x20点穿透伤害。','#ADFF2F'),updateDamageValue(_0x39b074,![],_0x3bdae9(0x5ff)),pierceDamageContainer[_0x3bdae9(0x489)]+=_0x39b074,updateUI();if(battleState[_0x3bdae9(0x46d)][_0x3bdae9(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}}function handleStunned(){const _0x2e2071=_0x3ebdb0;if(battleState['enemy'][_0x2e2071(0x261)])return logBattleEvent(_0x2e2071(0x2cc),_0x2e2071(0x3c1)),playerTurn=!![],!![];return![];}function handleCriticalAndDrunken(_0x41b495){const _0x139dc7=_0x3ebdb0;let _0x49231f=checkCriticalHit(battleState[_0x139dc7(0x3aa)][_0x139dc7(0x2e5)]);if((ascensionSkill[_0x139dc7(0x621)]===_0x139dc7(0x379)||secondAscensionSkill[_0x139dc7(0x621)]==='灵魂穿刺')&&_0x49231f&&Math[_0x139dc7(0x61a)]()<battleState[_0x139dc7(0x3aa)][_0x139dc7(0x316)]){const _0x42538c=Math['floor'](battleAttributes['physicalAttack']*battleState[_0x139dc7(0x3aa)][_0x139dc7(0x45f)]);battleState[_0x139dc7(0x46d)][_0x139dc7(0x45e)]=Math[_0x139dc7(0x389)](0x0,battleState[_0x139dc7(0x46d)][_0x139dc7(0x45e)]-_0x42538c),updateDamageValue(_0x42538c,![],_0x139dc7(0x5ff)),logBattleEvent(_0x139dc7(0x5fe)+_0x42538c+_0x139dc7(0x2e1),_0x139dc7(0x24a));}handleDrunken(_0x41b495);}function handleSlow(_0x4aa33d){const _0x1501a5=_0x3ebdb0,_0x528b11=Math[_0x1501a5(0x300)](battleState[_0x1501a5(0x46d)][_0x1501a5(0x521)]*0.25);battleState[_0x1501a5(0x46d)][_0x1501a5(0x521)]-=_0x528b11,battleState[_0x1501a5(0x46d)][_0x1501a5(0x429)]=!![],showEffect(_0x1501a5(0x25a),'https://pic.imgdb.cn/item/66742c80d9c307b7e930b159.gif'),updateEnemyStatusDisplay(),battleState[_0x1501a5(0x46d)][_0x1501a5(0x529)]=setTimeout(()=>{const _0x18c3d6=_0x1501a5;battleState[_0x18c3d6(0x46d)][_0x18c3d6(0x521)]+=_0x528b11,battleState[_0x18c3d6(0x46d)][_0x18c3d6(0x429)]=![],updateEnemyStatusDisplay();},0xbb8+_0x4aa33d*0x3e8);}function handleTerrified(_0x2b7e0b){const _0x2972ab=_0x3ebdb0,_0xa18d21=Math[_0x2972ab(0x300)](battleAttributes[_0x2972ab(0x2f3)]*0x1);battleState['enemy'][_0x2972ab(0x2f3)]-_0xa18d21<0x0&&(_0xa18d21=battleState['enemy']['physicalAttack']),battleState[_0x2972ab(0x46d)][_0x2972ab(0x2f3)]-=_0xa18d21,battleState[_0x2972ab(0x46d)][_0x2972ab(0x220)]=!![],showEffect(_0x2972ab(0x25a),_0x2972ab(0x4d5)),updateEnemyStatusDisplay(),updateUI(),battleState[_0x2972ab(0x46d)][_0x2972ab(0x274)]=setTimeout(()=>{const _0x5a0825=_0x2972ab;battleState[_0x5a0825(0x46d)]['physicalAttack']+=_0xa18d21,battleState[_0x5a0825(0x46d)]['terrified']=![],updateEnemyStatusDisplay(),updateUI();},0xbb8+_0x2b7e0b*0x3e8);}function handleBurnt(){const _0x37ec8a=_0x3ebdb0;if(battleState[_0x37ec8a(0x46d)][_0x37ec8a(0x29c)]){let _0x679490=0x0;const _0x213ff3=battleState[_0x37ec8a(0x3aa)][_0x37ec8a(0x521)]-battleState[_0x37ec8a(0x46d)][_0x37ec8a(0x521)];_0x213ff3>0x0?_0x679490=0x7d0+_0x213ff3*0x32:_0x679490=0x3e8+Math[_0x37ec8a(0x310)](_0x213ff3)*0x19;battleState[_0x37ec8a(0x46d)][_0x37ec8a(0x45e)]=Math[_0x37ec8a(0x389)](0x0,battleState[_0x37ec8a(0x46d)][_0x37ec8a(0x45e)]-_0x679490),logBattleEvent(_0x37ec8a(0x5d2)+_0x679490+_0x37ec8a(0x3b1),_0x37ec8a(0x24a)),updateDamageValue(_0x679490,![],'extra-damage'),updateUI();if(battleState[_0x37ec8a(0x46d)]['health']<=0x0){showNextBattlePrompt(!![]);return;}}}function handleDazed(){const _0x80dfa3=_0x3ebdb0;if(battleState['enemy'][_0x80dfa3(0x329)]){if(Math[_0x80dfa3(0x61a)]()<0.5){const _0x3e6818=battleState[_0x80dfa3(0x46d)][_0x80dfa3(0x2f3)];return battleState['enemy']['health']=Math[_0x80dfa3(0x389)](0x0,battleState[_0x80dfa3(0x46d)][_0x80dfa3(0x45e)]-_0x3e6818),logBattleEvent('混乱状态下，敌人攻击了自己，造成了\x20'+_0x3e6818+'\x20点伤害。',_0x80dfa3(0x276)),updateDamageValue(_0x3e6818,![],'damage'),playerTurn=!![],!![];}}return![];}function _0x93b9(){const _0x18bded=['ascension-skill-button','太古魔魂会吸收你的暴击伤害作为己用','<p>开启后可能为法术技能附加如下效果：</p><p>迟缓、沉默、混乱、灼烧、法力燃烧、法力吸取</p>','成功炼制出了2个随机橙色品阶药品：','你至少需要3个同类药品才能进行合成！','refresh-second-ascension','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-size:\x2014px;\x20color:\x20#666;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20倍率:\x20','以牙还牙','https://pic.imgdb.cn/item/66b86c3ad9c307b7e93202e9.gif','rgba(0,\x200,\x200,\x200.8)','actionPerformed','被封锁的上古神器（物理）','\x20级！','白色品阶，恢复1000点生命值和法力值，收集3个可以合成1个绿色品阶的药品','正在战斗中或未知错误','exists','MAE','selected-skill','效果尚在冷却中，无法叠加使用。','https://pic.imgdb.cn/item/66742cffd9c307b7e931d5ee.gif','enemy-magic-dodge-rate','https://pic.imgdb.cn/item/666e9aeed9c307b7e9066a2f.png','fightingDrawer','color','health','extraCritDamageMultiplier','url','drunken','绿色品阶，恢复玩家20%的法力值','div','战斗精灵已达到最大等级！','有1个内丹元气已耗尽，请及时补充！','使用神器可以为你的技能附加各种强力效果，极大增强你的战斗能力。\x0a1.神器的开启和使用需要消耗大量经验值或特定的「钥匙」。\x20\x0a2.【升满】按钮会根据你当前经验值或所拥有的道具数量直接升至最大值，请知悉。\x0a3.不建议未满级（180级）前执行神器升级操作。','transition','物理防御力','spirit-physical-defense','🧚🏻Attack\x20from\x20your\x20best\x20teammate！敌人受到来自精灵的','join','position','enemy','spellMasteryChance','noGoldPenalty','你的无动于衷极大助长了妖怪的威压，它降下地狱之火焚尽了你的战斗能力。','displayName','焉知非福带来的仙气护体效果消失。','fireAmulet','rgba(255,\x20255,\x20255,\x200.2)','#92341C','goldCompensation','您的宠物未飞升，还没有掌握飞升之术！','#218838','🔮【玩家治疗】你恢复了\x20','妖怪共有两种形态：正常和狂暴','技能说明','rgba(255,\x20255,\x20255,\x200.3)','妖怪令你对法术的操控更迟钝了，你耗费了更多的法力值！','expEnemy','功夫不负有心人，你意外获得一份藏宝图！','createDamageElement','额外经验1600000点','enemy-crit-rate','magicPetAmulet','defenseBonusCount','https://pic.imgdb.cn/item/6672bf9fd9c307b7e9b189e0.png',',\x20最终伤害:\x20','.selected-skill','。\x0a2.精灵的各项数值为：\x0a\x20','totalPierceDamage','equippedPet','https://pic.imgdb.cn/item/66e6d194d9c307b7e9c131d3.png','珍贵药材','【提示】这里是战斗面板，测试当前宠物极限战斗能力，轮次越高，当前宠物越强悍。\x20\x0a\x0a\x20【清屏】点击上方战斗记录字样可清屏\x20\x0a\x0a\x20【兼容】如果你无法完整看到本文本框底部，请调整网页字体大小至适当值','敌人\x20','push','您的飞升之石不足！','你受到了醉酒效果，每次攻击都会受到额外伤害。','四倍经验药','open','poisonedTimer','\x20金子。','reenable-ascension','https://pic.imgdb.cn/item/669a6459d9c307b7e91b9003.png','使用神力仙丹，暴击伤害提高50%，持续20秒。','toString','焚灵之丸冷却结束。','jinghuashuiyue','status','\x20/\x20','20px','sleep','openDivineWeaponUI','你消耗了\x20','武尊秘露冷却结束。','reflecting','gold','warn','⚔️【敌人攻击】杀戮状态下由于修为差距，敌人在施放物理攻击时自身损失了\x20','每秒有','https://pic.imgdb.cn/item/66d5d91ad9c307b7e95066ac.gif','spirit-physical-attack',';\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2015px\x2020px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.3s;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20left;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x204px\x206px\x20rgba(0,\x200,\x200,\x200.1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20\x20\x20\x20\x20','getElementsByTagName','使用焚灵之丸，消耗20%生命值，提升50%物理攻击力、法术攻击、暴击率和暴击伤害，持续20秒。','https://pic.imgdb.cn/item/667269e9d9c307b7e915e15a.gif','hidden','https://pic.imgdb.cn/item/66d5dd07d9c307b7e953e4e1.png','https://pic.imgdb.cn/item/66a250dfd9c307b7e97f96eb.png','，但没有任何奖励。','三花丸','</span>个</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','穷奇擅长吸收敌人的生命之力转换为自己的护甲','https://pic.imgdb.cn/item/66bc6806d9c307b7e987b907.webp','filter','borderRadius','试炼之地开始！持续60秒，期间会自动开始战斗，请勿执行其他操作以免造成崩溃！','children','https://pic.imgdb.cn/item/666c1408d9c307b7e9cea328.png','space-between','https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0b38.png','https://pic.imgdb.cn/item/666d311dd9c307b7e996b5b7.png','map','\x20Lv','你花费','成功炼制出了1个','https://pic.imgdb.cn/item/66a647c5d9c307b7e9f3c332.gif','被封锁的上古神器（法术）','description','进度条更新出错:','\x27\x20not\x20found\x20in\x20enemyImages.','woodAmulet','未开启','transparent','enemy-pet-magic-attack','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.closeDivineWeaponUI()\x22\x20style=\x22background:\x20transparent;\x20border:\x20none;\x20color:\x20white;\x20font-size:\x2020px;\x20cursor:\x20pointer;\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2020px;\x20border:\x201px\x20solid\x20#F5F5F5;\x20border-radius:\x2010px;\x20padding:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','全部升级','fontSize','魔龙之力','点物理防御和','1px\x20solid\x20white','忘却之时','667068NcczkD','请输入目标精灵等级：','remove','https://pic.imgdb.cn/item/66c43d02d9c307b7e954d4f7.gif','宠物已达到最高等级，经验值上限被设为最大值。','点法力值。','化功散','使用天山雪莲，恢复了\x20','background-color\x200.3s','\x20的猛烈伤害！消耗了\x20','mao','级触发，成功解除敌人的控制效果！','#FF0088','宇宙之心数量不足，无法升级！','enemy-pet-health','个内丹元气已耗尽，请及时补充！','级\x20，毒性大大加强。',',\x20消耗寿命\x20','#17a2b8','持续时间内，敌人一共受到\x20','show','\x20点法术伤害，消耗了\x20','您的法力值不足！','睡眠时刻的敌人生命值为','\x20升级失败了！','Current\x20reflectPercentage\x20is\x20','点所受的伤害。','getWeaponData','setWeaponData','#FFDD55','，你想使用哪种方式升级？\x0a【宇宙之心】按钮：使用5个宇宙之心（必定成功）\x0a【技能书】按钮：使用1本技能书（20%成功）','❤️【敌人恢复】加强版树桩恢复了满状态生命值','速度条元素未找到','10px','absolute','second-ascension-level','妖怪被施加穿透效果，每次造成伤害时会附加真实伤害。穿透效果结束后会给予妖怪致命的余波伤害。','双倍经验药','gold-text','https://pic.imgdb.cn/item/666d311dd9c307b7e996b585.png','poisonSkillBook','repeat(4,\x201fr)','floatUpLeft','maxLevel','的战斗中失败了，没有获得任何奖励。','suppressed','1个珍贵的洪荒至尊仙葫。在这次艰难的对抗中，你的宠物与你并肩作战，好感大增，亲密度增加了600！','your-pet-mana','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','狂暴印记','\x20点物理伤害！','反弹伤害','wounded','drug-description','src','grey','475550CmaCax','\x22\x20alt=\x22残页的河图\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x20border:\x201px\x20solid\x20white;\x20border-radius:\x205px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x200;\x22>','焉知非福','挑战失败会受到惩罚。','举一反三','\x0a1.\x20二级属性主要由各一级属性（耐力、智力等）决定\x20\x0a2.\x20被动技能的数量和等级也会增加二级属性\x20\x0a3.药材、五行符可以提供额外属性\x20\x0a4.精灵和飞升技能提供的属性为战斗属性，脱离战斗状态时将会复位\x20\x0a5.\x20当前技能加成为：\x20\x0a\x0a\x20','upgradeDivineWeapon','\x20级。','display:\x20flex;color:\x20white;font-size:\x2014px;gap:\x2010px;padding:\x2020px;height:\x20110px;align-items:\x20center;border:\x201px\x20solid\x20#fff;margin-top:\x2010px;border-radius:\x202px;','升级说明','createElement','未知的敌人类型','击败白银之地怪物的嘉奖，收集一定数量可兑换宇宙之晶','your-pet-magic-attack','上善若水','removeEventListener','⚔️【玩家攻击】触发法术精通，但没有可用的法术攻击技能，使用普通法术攻击。','ascension-level','玩家已经处于杀戮状态，无法叠加。','\x20\x0a6.\x20生命值是玩家受到伤害时会扣除的值，战斗过程中玩家的血量会每秒按照上线比例进行减少\x20\x0a7.\x20法力值是玩家使用技能时的必要消耗数值\x20\x0a8.\x20物理攻击决定物理类技能的伤害基础\x20\x0a9.\x20物理防御决定玩家对敌人物理技能的减伤效果，请注意，减伤效果并不是线性增加的，当防御数值达到临界值后，减伤效果的增长将会变缓（下同法术防御）\x20\x0a10.\x20法术攻击决定玩家的法术伤害类技能的强度，同时决定了玩家的治疗能力和施毒能力\x20\x0a11.\x20法术防御决定了玩家抵抗敌人法术伤害的减伤效果\x20\x0a12.速度决定战斗开始时的出手先后顺序，同时也决定了物理闪避率（根据双方速度之差判断闪避概率）','https://pic.imgdb.cn/item/66cc940cd9c307b7e9cb752e.png','https://pic.imgdb.cn/item/66d4a22dd9c307b7e9f5faec.gif','enemy-pet-mana','speed','https://pic.imgdb.cn/item/66cc8f01d9c307b7e9c6d2e8.png','player-damage-container','潜藏于三界裂缝，以迷惑人心智、吸收人的恐惧而不断变强的邪祟。','级触发，减免了','焉知非福触发,战斗获得持续\x20','经验不足，无法使用魔术棱柱。','护盾抵挡了\x20','slowTimer','这是你第一次打开药品面板，附送至尊药品礼包一份！','enemy-level','⚔️【敌人攻击】妖怪施放物理技能·黑暗血刃，造成了\x20','%;\x20height:\x20100%;\x20background:\x20','https://pic.imgdb.cn/item/669e973ad9c307b7e9381309.gif','紫色品阶，临时增加35物理防御和法术防御，收集3个可以合成1个橙色品阶的药品','https://pic.imgdb.cn/item/66a63612d9c307b7e9d72d78.gif','battle-spirit-button','Damage\x20is\x20NaN,\x20setting\x20to\x200.','backgroundImage','retryPhysical','set','zIndex','damageReductionPercentage','仙气护体','https://pic.imgdb.cn/item/666c0afbd9c307b7e9beef97.png','生生不息','点伤害','消耗一本','你施放了\x20','\x20级，威力增加了！','绿色品阶，每1.5秒恢复1%生命值值，持续3秒，可叠加生效','天降甘霖','恭喜您升级了！',';\x20animation:\x20warning-blink\x201s\x20infinite;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','https://pic1.imgdb.cn/item/6791d204d0e0a243d4f7088b.gif','defensing','length','法力值\x20+\x20','spirit-level','universalAsh','力劈华山','physicalDefense','100px','，你最终受到了\x20','，成长系数为','使用慧心糖果，暴击伤害永久提高1%。','scrollTop','10px\x200','\x20点伤害，智慧守护抵挡','split','floatUpRight','https://pic.imgdb.cn/item/666e9aeed9c307b7e9066a29.png','残页的河图开启后，能够为你的法术技能附加专属效果，同时最多拥有3个效果。可以附加效果如下：\x0a1.迟缓：根据伤害量的比例降低敌人的当前速度\x20\x0a2.沉默：持续时间内禁止怪物施放法术技能及附加减益效果\x20\x0a3.混乱：持续时间内怪物可能会攻击自己\x20\x0a4.灼烧：造成伤害时会给敌人附加额外灼烧伤害，己方速度之于怪物越快，灼烧伤害越猛烈\x20\x0a5.法力燃烧：根据本次法术伤害减少怪物的当前法力值，敌人法力为空时，将转化为生命伤害。\x0a6.法力吸取：吸收敌人的法力为己用，吸收量与所造成法术伤害有关','向死而生','https://pic.imgdb.cn/item/666c0afbd9c307b7e9beef9c.png','你没有宇宙精华了！','被封印的技能','技能区域不存在','\x22\x20alt=\x22遗失的洛书\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x20border:\x201px\x20solid\x20white;\x20border-radius:\x205px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x200;\x22>','紫色品阶，使用后60秒内战斗获胜所得经验增加四倍','torn','transform','qiongQi','https://pic.imgdb.cn/item/66c44a29d9c307b7e967d02b.gif','自动战斗','\x22\x20alt=\x22定空的灵石\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x20border:\x201px\x20solid\x20white;\x20border-radius:\x205px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x200;\x22>','晗灵果','慧心糖果','紫色品阶，消耗自身生命值上限20%生命值，20秒内提升50%物理攻击力、法术攻击、暴击率和暴击伤害。生命值不足上限20%时无法使用。','drug-grid','🔴奥义·火之易伤！伤害增加了\x20','已有同系效果发挥作用或正在冷却中，无法叠加效果使用','display','practiceEnemy','enemy-image','\x20->\x20','agility','closeDivineWeaponUI','您的精灵增幅已经到了一个比较高的层次，确定继续吗？','lifeSpanBonus','敌人从沉睡中醒来了。','神品·定空的灵石\x20(Lv','暗黑大渊神','goldAmulet','你获得了','%的法力让自己血量变为1','height','14px','fireGiant','Invalid\x20reflectPercentage:','你至少需要5个同类药品才能进行合成！（橙色品阶需要3个）','你使用了施毒之术，现在可以对妖怪施毒了。','神品·遗失的洛书\x20(Lv','pierced','尝试合成，但没有产出任何事物','player-extra-damage-value','当前是第','equipped','您的法力值不足，无法治疗！','【被动技能】元素力量（宽容）\x20','\x20已经无法再触发复活。','目前召唤敌人和妖怪共享一套战斗系统，但它们通常具备特殊的战斗效果。','大渊神真身','borderColor','https://pic.imgdb.cn/item/666c0289d9c307b7e9ae8abd.png','每次提升技能需要消耗10个天地灵气，你的天地灵气数量不足！','divineProtectionChance','soulCapture','吸血魔刃触发,吸取了\x20','\x20点经验值，将\x20','#FF4500','你还没有获得施毒之术，请尝试通过武神仙葫获取！','玩家已经处于\x20','绿色品阶，恢复玩家20%的生命值','\x20点生命值。','惶恐效果持续中','spirit-speed','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718cb5.gif','Heal\x20amount\x20is\x20NaN,\x20setting\x20to\x200.','\x20的猛烈伤害！','defenseBonus','shocked','Enemy\x20revived\x20to\x20full\x20health.','🧚🏻对方在精灵的低语里陷入沉睡','元素力量（宽容）','realShape','Invalid\x20player\x20attribute\x20type','你没有宇宙之晶了！','dazedTimer','center','treasureMap','法力值','自动战斗已开始。','click','向死而生触发，生命值恢复至1，消耗大量法力值。','⚔️【敌人攻击】妖怪施放法术技能·嗜血魔咒，造成了\x20','请先从属性面板获取属性。','点寿命','你消耗了','survivalChance','级触发，复活并恢复\x20','enemyKey','600px','定空的灵石开启后，每秒有概率驱散减益效果，同时最多驱散5个效果。可以驱散效果如下：\x0a1.醉酒：法术效果，玩家攻击怪物时会受到10%的反弹溅射伤害\x20\x0a2.禁疗：法术效果，持续时间内禁止玩家使用治疗技能\x20\x0a3.摄魂：法术效果，持续时间内玩家物理和法术攻击减半\x20\x0a4.失明：法术效果，持续时间内玩家物理攻击会被怪物闪避\x20\x0a5.法术迟钝：法术效果，持续时间内玩家使用法术技能时法力消耗值增至100倍\x20\x0a6.撕裂：物理效果，持续时间内玩家会受到每0.5秒的持续掉血效果，掉血量与怪物物理攻击有关\x20\x0a7.嘲讽：物理效果，持续时间内玩家的所有战斗行为会强制指向物理攻击，且物理伤害增至120%\x20\x0a8.压制：物理效果，玩家若没有在3秒内做出战斗行为，血量会降至1\x20\x0a9.封印：物理效果，持续时间内玩家的飞升技能会被封印，使其无法生效\x20\x0a10.杀戮：物理效果，持续时间内会根据双方修为之差判断斩杀线，当一方血量低于双方修为差值的一定比例时，负值一方会被斩杀','rewardMessage','珍贵的神秘药材','silencedTimer','幸运金币','选择物理技能','healingBan','specialty','damageContainers','狂暴的心魔','PAE','永夜大帝の吸血魔刃，破坏了你的护甲且吸取了你','translateY(0)','焚灵之丸','enemy-name','https://pic.imgdb.cn/item/66bc6806d9c307b7e987b921.webp','普通防御','天空精华','宠物伤害加成应用失败:','https://pic.imgdb.cn/item/66cd61f8d9c307b7e9af46c0.png','被封锁的上古神器（庇护）','天山雪莲','<p>炽热明亮的金樽，开启后可为物理技能概率附加效果：</p><p>破甲、恐吓、眩晕、穿透、麻痹、惶恐</p>','斩龙一式','50%','endurance','skills','https://pic.imgdb.cn/item/665433e8d9c307b7e93ac758.gif','skills-area','神力仙丹','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background:\x20','attribute','5px','refreshDivineWeapon','妖怪受到了\x20','状态。','linear-gradient(to\x20bottom,\x20#477AD6,\x20#8FF1FD,\x20#477AD6)','金牌调解触发，未扣除金子并获得\x20','expMultiplier','宠物已达到最高等级，经验转化为普通经验书！','岩龙开始汲取雷电的力量，你被附加了触电效果，每次攻击岩龙将大幅削减你的物理防御和法术防御。','轮，当前是','12px','playerWon','magicAttack','⚔️【敌人攻击】妖怪施放法术技能·嗜血魔咒并发起暴击，造成了\x20','無班之魂','effect','\x20点溅射伤害。','contains','%的生命值','#ADFF2F','your-pet-max-mana','🧚🏻精灵为你祈福，恢复了⭐️','蓝色品阶，临时增加300点法力值（刷新游戏后失效）','金子不足，无法进行采集！','未开启飞升技能','24px','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','法术防御力','还没死，还得练，再给你上上强度','wealthyGemBag','固若金汤','benumbed','财源滚滚','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-evenly;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.activateDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>开启</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.refreshDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>刷新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升级</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeMaxDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升满</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.description(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>说明</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2020px;\x20border:\x201px\x20solid\x20#F5F5F5;\x20border-radius:\x2010px;\x20padding:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','穿心蚀骨之毒爆！敌人承受了\x20','护盾为','width','你将会召唤','invincibilityChance','聚灵丹数量不足，无法开启自动战斗！','上等药材','法术防御','残页的河图','3635716cRuxtm','close-spirit-modal','creditCard100','灵魂穿刺触发，额外造成了\x20','extra-damage','className','⚔️【玩家攻击】你用拳头平A了对方。','开启增益','https://pic.imgdb.cn/item/66cc940fd9c307b7e9cb77b1.png','style','现在无法使用，生效失败！','#66CDAA','\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin:\x200\x200\x2020px\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x202px\x202px\x204px\x20rgba(0,\x200,\x200,\x200.3);\x0a\x20\x20\x20\x20','img','敌人的法力已经燃烧殆尽，敌人开始燃烧生命之力！失去了\x20','taunt','法力燃烧！妖怪失去了\x20','当前反弹比例为','tornInterval','lostBook','blue','受到致命伤害时，消耗法力值上限','enable-ascension','Invalid\x20goldReflectPercentage:','魔术棱柱最高只能将所选技能等级提升至24级！','冰莲絮','⚔️【敌人攻击】道高一尺，魔高一丈，你低于敌人的修为，施法时损失','法力燃烧','parse','pet_interaction_','https://pic.imgdb.cn/item/6671343bd9c307b7e9031c3d.gif','random','https://pic.imgdb.cn/item/666e9aeed9c307b7e90669fa.png','点生命值。','settlement','\x20点伤害给妖怪。','usingBuff','药品不足！','name','点击技能可查看技能详细说明。','你可以消耗10个飞升之石为宠物开启第二个飞升之术，确认请继续','increment','pointer','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22margin:\x200;\x22>','tier','5px\x2010px','升级技能','jingmaiStates','醉酒状态下，你招式过猛误伤自身，受到\x20','level','https://pic.imgdb.cn/item/66cc999fd9c307b7e9d7ca2a.gif','%概率再次施放一次法术伤害','https://pic.imgdb.cn/item/666e9aeed9c307b7e9066a20.png','error','https://pic.imgdb.cn/item/66712ba3d9c307b7e9f2ab59.gif','#00BBFF','armorBreak','894Vpblgo','\x20的安慰金。','1px\x20solid\x20#000','铜墙铁壁','brown','即时性药品效果已被重置。','background','使用治疗时，触发仙气护体的概率增加至50%，并且仙气护体持续时间增加至','每10轮妖怪会进入狂暴状态，此时妖怪生命低于20%时将在2秒内加持霸体且触发复生。','☣【敌人中毒】妖怪中毒，失去了\x20','upgradeMaxDivineWeapon','toggle','type','padding','https://pic.imgdb.cn/item/66713185d9c307b7e9fe5fc6.gif','lightblue','使用法术技能时，有','https://pic1.imgdb.cn/item/6791d32dd0e0a243d4f708f4.gif','goldBonus','textAlign','linear-gradient(to\x20bottom,\x20#394F89,\x20#405CB2,\x20#5C81EE,\x20#5C81EE,\x20#405CB2,\x20#394F89)','enemy-extra-damage-value','延寿露','divineProtection','此次升级需要\x20','\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20margin-top:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2012px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20background:\x20rgba(255,\x20255,\x20255,\x200.2);\x0a\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bold;\x0a\x20\x20\x20\x20\x20\x20\x20\x20transition:\x20all\x200.3s;\x0a\x20\x20\x20\x20','你被附加了失明，施放物理技能时将无法对敌人造成伤害！',',\x20enemy\x20health:\x20','橙色品阶，临时增加15点物理攻击和法术攻击，收集2个可以炼制出随机药品','0\x204px\x206px\x20rgba(0,\x200,\x200,\x200.1)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20limegreen;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2028px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x200\x200\x208px\x20lime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bolder;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20','boxSizing','遗失的洛书','焚灵之丸效果无法触发，生命值不足20%。','無班之魂变得恼怒，等级提升了','spirit-mana','⚔️【敌人攻击】道高一尺，魔高一丈，敌人低于你的修为，施法时损失','toFixed','terrified','你的蓄力增益效果已应用：','lime','未找到该技能！','https://pic.imgdb.cn/item/66a647c5d9c307b7e9f3c43c.gif','spellSlow','你还没有解锁任何必杀技！','your-pet-magic-defense','\x20x1','四倍经验药效果消失。','法力吸取','multiplier','https://pic.imgdb.cn/item/66d071cbd9c307b7e9344927.png','marginRight','\x20点伤害，消耗了\x20','你已经开启此神器了，无法重复开启！','gemLuckyBag','举一反三触发，经验值增加了\x20','战斗失败后，下一轮获得持续','relative','#0066ff','试炼之地召唤卡数量不足，自动战斗已停止！','hailMonsterPill','nirvanaGem','\x20成功升至\x20','您的精灵觉醒石不足！','spirit-magic-defense','蓝色品阶，临时增加300点生命值（刷新游戏后失效）','金子打点进山凭证，采集到了','divineProtectionDuration','🧚🏻战斗精灵的赐福，你还额外获得了\x20','您已经开启过第二个飞升之术了！','baiyinOverlay','universalCrystal','持续回血','defending','add','onclick','你在与','魔术棱柱','https://pic.imgdb.cn/item/66d5d9a1d9c307b7e950d6b2.png','金牌调解','red','神器100级后，只能使用「钥匙」升级，你可以通过开启武神仙葫获取「钥匙」。','clear','backgroundColor','orange','getElementsByClassName','以牙还牙触发，反弹了\x20','上古传说中的仙葫，流传久远，极其稀有，打开可获得随机珍稀道具','level-up-spirit','等级:\x20','忘忧水','修为灵丹（橙）','请先选中要合成的药品。','weaken','silenced','\x20点法力值！','playerEffect','第二个飞升技能','穿透效果持续中','你的固元鼎或清心酿数量不足，无法回退！','enemy-max-mana','second-ascension-effect','妖怪被麻痹，最大生命值减少了\x20','stunned','永久增加了\x20','floatUpRightCritical','enemy-speed-container','你正在施放恢复技能\x20','onmouseover','silver','3000经验值','蓝色品阶，20秒内暴击伤害提高50%','battleRounds','，本回合抵抗了\x20','\x20的数量已更新，当前数量:\x20','生命值','绿色品阶，每1.5秒恢复2%法力值，持续3秒，可叠加生效','cultivation','选择法术技能','level-up-second-ascension','\x0a1.宠物在觉醒后可以开启战斗精灵\x20\x0a2.经过精心培养的精灵可以大幅增加战斗属性\x0a3.精灵会提供额外的战场胜利物资\x0a4.战斗中精灵有概率施加恢复、控制或强化\x20\x0a5.精灵等级和增幅越高，增益越明显','宠物等级每提升10级，所拥有的技能会自动提升1级。技能的等级很大程度上决定了它们的威力（被动技能会按一定比例增加各项属性值）。每个技能等级上限为20级，当技能等级到10级后，需要在本界面消耗一定经验值来升级技能。','terrifiedTimer','#fff','white','https://pic.imgdb.cn/item/66a0d3e8d9c307b7e93a8108.gif','你还没有打开第一个飞升技能！','，当前技能倍率为','log','https://pic.imgdb.cn/item/66bb115dd9c307b7e9a6c2d0.png','https://pic.imgdb.cn/item/66754252d9c307b7e9e67706.gif','橙色品阶，使用后将随机触发事件：让怪物血量变为1/获得50000经验/回退10轮','gap',',\x20enemyMaxHealth:\x20','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-evenly;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.activateDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>开启</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.refreshDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>刷新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升级</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeMaxDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升满</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.description(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>说明</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.closeDivineWeaponUI()\x22\x20style=\x22background:\x20transparent;\x20border:\x20none;\x20color:\x20white;\x20font-size:\x2020px;\x20cursor:\x20pointer;\x22></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','faith','aqua','player-magic-dodge-rate','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x200\x200\x202px\x20black;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','当前法术效果真实触发概率为：','中途退出会视为挑战失败哦。','universalHeart','width:\x2085%;max-height:\x2080%;background-color:\x20rgba(0,\x200,\x200,\x200.1);color:\x20white;border:\x201px\x20solid\x20rgb(221,\x20221,\x20221);padding:\x2020px;overflow-y:\x20scroll;position:\x20relative;display:\x20flex;flex-direction:\x20column;justify-content:\x20center;align-items:\x20stretch;','pow','marginTop','keys','Guolin·Li','寿命不足，无法触发上善若水','物理攻击','19594hApRWR','你对妖怪造成了\x20','seal','🥷【敌人偷窃】妖怪想窃取你的资源，但被你抓包打跑了，你没受到任何损失','https://pic.imgdb.cn/item/665aecc0d9c307b7e90a239e.png','物理防御','\x22\x20alt=\x22','min','skills-area\x20element\x20not\x20found.','%概率触发以下技能效果：','\x20点中毒伤害，消耗了\x20','blindfold','enemy-crit-damage','burnt','your-pet-image','hasOwnProperty','instant','🟤奥义·土之庇护！你减少了\x20','getRandomEffect','flex','fixed','crimson','点物理攻击力','怒意激发了你的斗志，嘲讽下你的物理伤害提升20%！','永夜大帝','https://pic.imgdb.cn/item/66a647c5d9c307b7e9f3c420.gif','ascension-skill-modal','经验不足200000或缺少对应的「钥匙」。神器的「钥匙」可以通过武神仙葫小概率获得。','intimidatedTimer','妖怪复生成功，生命值恢复到100%！','级触发，治疗了','\x20点生命值，本局战斗还能再生效','20px\x200','PHE','https://pic.imgdb.cn/item/666c1408d9c307b7e9cea34b.png','appendChild','margin','⚔️【玩家攻击】触发法术精通，你再次施放了\x20','attribute-exp-bar','earthlyEnergy','url(','点法力值','marginBottom','当玩家受击时，有','baseValue','from','querySelector','PPE','https://pic.imgdb.cn/item/668a30dbd9c307b7e9c54fff.gif','skillLevel','飞升之术技能已达最大等级！','的伤害加成:\x20+','使用沉檀凝香，恢复了\x20','额外提供','piercedTimer','经验值:\x20','reward','https://pic.imgdb.cn/item/666c0afbd9c307b7e9beefcb.png','⚔️【玩家攻击】你进行了法术攻击，造成了\x20','⚔️【玩家攻击】暴击！！本次对敌方造成了\x20','byLearned','妖怪眩晕，无法行动。','timer','https://pic.imgdb.cn/item/669a7ce3d9c307b7e9450f04.png','你击败了','%概率进入无我之境，免受一切伤害。持续时间5秒','https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0af3.png','無班之魂の法术穿透，损失','player-cultivation','https://pic.imgdb.cn/item/669c8a9ed9c307b7e94f5766.gif','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateX(50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x20200px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20','每回合恢复','\x20成功升级至\x20','level-up-ascension','双倍经验药效果消失。','undefined','pink','stunnedTimer','\x20级，保底\x20','normalExperienceBook','PDE','🔵奥义·水之再动！！','\x20点伤害。','timeoutId','你使用3个','active','critRate','\x0a\x20\x20\x20\x20@keyframes\x20floatUpLeft\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-50px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20floatUpRight\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0)\x20translateX(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-50px)\x20translateX(20px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20floatUpLeftCritical\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0)\x20scale(1)\x20translateX(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2020%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-10px)\x20scale(1.2)\x20translateX(-5px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-60px)\x20scale(1)\x20translateX(-20px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20floatUpRightCritical\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0)\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2020%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-10px)\x20scale(1.2);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-60px)\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a','getItem','enemy-pet-magic-defense','burntTimer','\x20点毒性伤害。','body','enemyCritRate','https://pic.imgdb.cn/item/6678135ed9c307b7e9060dd6.gif','🟢奥义·木之春意！治疗量增加了\x20','🥷【敌人偷窃】妖怪窥探了你的锦囊，吸收了一个来自你所拥有的延寿露的能量，恢复了','已关闭自动战斗！','damage','player-physical-dodge-rate','physicalAttack','当前仙气护体持续时间为：','狂暴印记冷却结束。','getEffectChineseName','\x20点法力值。','action','https://pic.imgdb.cn/item/666c1408d9c307b7e9cea2fd.png','enemy-pet-cultivation','，请检查你的背包！','10px\x2020px','removeChild','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-evenly;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.activateDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>开启</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.refreshDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>刷新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升级</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeMaxDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升满</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.description(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>说明</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2010px;\x20border:\x201px\x20solid\x20#F5F5F5;\x20border-radius:\x2010px;\x20padding:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','Invalid\x20damage\x20value:','floor','blue-text','战斗状态未初始化','shielded','#B94FFF','经验不足3000或缺少对应「钥匙」，无法升级神器。','defenseReduction','entries','紫色品阶，20秒内增加150%物理攻击力。','使用幸运金币，获得了50000点经验值。','没有技能需要升级或经验不足！','none','\x20点生命值，消耗了\x20','✨【8件套效果】觉醒套装之力吸取了\x20','yellow','scale(1.05)','abs','https://pic.imgdb.cn/item/66742c80d9c307b7e930b160.gif','定空的灵石','apply','drug-modal','https://pic.imgdb.cn/item/66a48e2cd9c307b7e9649085.png','extraCritDamageChance','vigor','enemy-speed-bar','%\x20伤害，溢出值已形成护盾。','当玩家使用物理攻击时，会吸收等同伤害值','divineWeaponUI','\x201s\x20ease-out\x20forwards;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','addEventListener','吸血魔刃','alignItems','你的宠物看起来起色很不好，多关心关心它吧！','🧚🏻Bless\x20from\x20your\x20best\x20teammate！战斗精灵带来全属性提升！','combat','includes','player-crit-rate','heartStone','button','ascensionStone','你获得了仙气护体状态，受到伤害时会恢复生命值。','dazed','无我之境','点生命值和','0.5','https://pic.imgdb.cn/item/6672bfa5d9c307b7e9b19753.webp','Invalid\x20damage\x20value\x20before\x20reduction:','forEach','化功散冷却结束。','innerText','战斗失败时不扣除金子，并获得','querySelectorAll','第二个飞升技能尚未开启，且当前没有技能名称可显示。','使用四倍经验药，60秒内战斗获胜所得经验变成四倍。','#28a745','\x20点伤害，土符抵挡了','enemy-status','洪荒至尊仙葫','enhanceBowl','https://pic.imgdb.cn/item/66726727d9c307b7e9118748.png','animation','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718c8f.gif','你获得一个盲盒宝石袋','hailMonsterAmulet','rampaged','该技能已达到目前阶段最高等级！请尝试使用药品系统中的“魔术棱柱”进行升级！','⚔️【玩家攻击】你操控小树枝击向了对方。','点伤害，目前护盾量为\x20','<p>开启后可能为物理技能附加如下效果：</p><p>破甲、恐吓、眩晕、穿透、麻痹、惶恐</p>','critDamage','https://pic.imgdb.cn/item/66d0b3f3d9c307b7e995a14c.png','head','你使用5个','benumbedTimer','妖怪一共有150轮，通关后可以继续挑战无尽Boss“深渊之神”。这是一个强大的怪物，能力多变。','\x22\x20width=\x2245\x22\x20height=\x2245\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>','magicDefense','position:\x20fixed;\x20top:\x2050%;\x20left:\x2050%;\x20transform:\x20translate(-50%,\x20-50%);\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x20border:\x201px\x20solid\x20#F5F5F5;\x20width:\x2090%;\x20padding:\x2010px;\x20color:\x20white;\x20z-index:\x209990;','baiYinCard','second-ascension-name','originalAscensionSkill','poisoned','129XwiIOE','drug-item','白银VIP怪','applied','https://pic.imgdb.cn/item/666d311dd9c307b7e996b52a.png','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','effects','反弹状态触发，反弹了\x20','处于短暂失明，敌人闪避了你的物理攻击。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20gap:\x2012px;\x0a\x20\x20\x20\x20','linear-gradient(135deg,\x20#ffd700\x200%,\x20#ffed4e\x20100%)','classList','magical','https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0b0c.png','whiteNightThreshold','太古魔魂','洗练失败！','ascension-icon','intimidated','试炼之地妖怪','linear-gradient(to\x20bottom,\x20#7E2723,\x20#9F322C,\x20#CB5D5A,\x20#CB5D5A,\x20#9F322C,\x20#7E2723)','#cc0000','refresh-ascension','您的心鉴之石不足！','player-status','%\x20暴击率和\x20','完美药材','quantity','开启神器后才能执行升级！','originalSecondAscensionSkill','使用延寿露，恢复了\x20','spirit-magic-attack','10000经验值','当前物理效果真实触发概率为：','slaughter','#C10066','https://pic.imgdb.cn/item/666aa7b6d9c307b7e9495e97.png','尚未开始战斗','Invalid\x20target\x20for\x20dodge\x20handling','灵魂穿刺','发现可用的','darkred','沉檀凝香','承受伤害降低','your-pet-health','金子打点进山凭证，采集到了1个','https://pic.imgdb.cn/item/66db2daed9c307b7e9c7508a.png','ascension-effect','由于妖怪被沉默，无法治疗','benumbStack','\x20点。','beiming','block','waterAmulet','你吸取了\x20','max','橙色品阶，长生不老之泉，饮用后临时增加1000生命值上限（刷新游戏后失效），且恢复至满状态','狂暴之魂','法术精通','your-pet-cultivation','玩家闪避概率为：','技能或寿命状态无效','left','https://pic.imgdb.cn/item/666d311dd9c307b7e996b522.png','https://pic.imgdb.cn/item/66e6d18fd9c307b7e9c12e52.gif','级消耗\x20','应用特殊效果时发生错误:','https://pic.imgdb.cn/item/66d07119d9c307b7e93234a9.gif','ancientEvil','find','exp-text','#138496','\x20升级失败！','https://pic.imgdb.cn/item/666d311dd9c307b7e996b4f5.png','<p>开启后可能解除如下减益效果：</p><p>醉酒、禁疗、摄魂、失明、法术迟钝、撕裂、压制、嘲讽、封印、杀戮</p>','妖怪被沉默，无法进行法术攻击。','当玩家暴击时,有','一个富贵宝石袋','你受到了禁疗效果，无法恢复生命值。','\x20Lv.','https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0b15.png','formatNumber','，格挡技能抵挡\x20','rarity','enemy-max-health','stringify','-bar\x22\x20style=\x22width:\x20','auto-level-up-spirit','player','intelligence','corrode','universalKernel','蓝色品阶，使用后60秒内战斗获胜所得经验增加两倍','你受到了压制效果，必须在3秒内进行有效操作。','protectionDuration','\x20点灼烧伤害。','fragmentedMap','https://pic.imgdb.cn/item/66a616f4d9c307b7e9b24c97.gif','妖怪极尽嬉笑怒骂之攻势,你未能压抑心中怒火,嘲讽时间内你只能对其使用物理攻击。','activateDivineWeapon','show-effect','点法术攻击力','player-damage-value','Invalid\x20target\x20for\x20magic\x20dodge\x20handling','right','practiceEnemyPlus','\x20点真实伤害给妖怪。','pet-select','法术迟钝','你获得一个宇宙之晶','你仓皇逃跑中，损失了20两金','wheat','\x200.8s\x20ease-out\x20forwards','法术攻击','url(\x27','%概率额外给妖怪附加等同于玩家物理攻击力1000%的伤害。','凤佑天下','沉檀凝香生效，但未能清除异常状态。','-warning\x22\x20style=\x22position:\x20absolute;\x20top:\x200;\x20left:\x200;\x20right:\x200;\x20bottom:\x200;\x20border:\x201px\x20solid\x20',';\x20text-align:\x20center;\x20color:\x20white;\x20font-size:\x2012px;\x20font-weight:\x20bold;\x20transition:\x20width\x200.5s\x20ease-in-out;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22text-stroke:\x201px\x20black;\x22>','top','cursor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2025px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20box-shadow:\x200\x2010px\x2040px\x20rgba(0,\x200,\x200,\x200.3);\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-width:\x20500px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20width:\x2090%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20max-height:\x2080vh;\x0a\x20\x20\x20\x20\x20\x20\x20\x20overflow-y:\x20auto;\x0a\x20\x20\x20\x20','black','ascension-name','\x20颗精灵精炼石，将精灵升至\x20','Status\x20\x27','second-ascension-icon','法术攻击力','translate(-50%,\x20-50%)','极品药材','🥷【敌人偷窃】妖怪窥探了你的锦囊，吸收了一个来自你所拥有的天山雪莲的能量，恢复了','玩家魔法闪避概率为：','second-ascension-skill','spiritPowerActive','heat','JKE','\x0a\x20\x20\x20\x20<div\x20style=\x22z-index:1000;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x20100%;\x20background-color:\x20#35472C;\x20overflow:\x20hidden;\x20position:\x20relative;\x20border:\x201px\x20solid\x20black;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','boxShadow','你可以使用100个固元鼎和100个清心酿回到第一轮','innerHTML','damageBonus','bloodSuckPercentage','上善若水触发:\x20HP\x20','enemy-pet-speed','damageLost','https://pic.imgdb.cn/item/66bc6806d9c307b7e987b8ec.webp','Enemy\x20is\x20rampaged.','🛡【敌人防御】敌人释放了能量场，双防得到了提升！','https://pic.imgdb.cn/item/666d311dd9c307b7e996b538.png','🥷【敌人偷窃】妖怪想窃取你的资源，但你识破了，没受到任何损失','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718ca1.gif','applyNirvanaGemEffects','8px','\x20点经验值，你的经验值不足，无法升级！','value','财源滚滚触发，额外增加了\x20','🛡【玩家防御】你施放了防御技能\x20','physical','使用物理技能时，有','originalMaxHealth','战斗胜利时获得的经验值增加','your-pet-physical-attack','#D3D3D3','您的法力值不足，无法使用施毒之法！','使用幸运金币，你成功回退至10轮之前。','宇宙之心','noWorkBoss','opacity','onmouseout','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22font-weight:\x20bold;\x20color:\x20#333;\x20margin-bottom:\x205px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','唤妖符数量不足，无法跳过轮次！','https://pic.imgdb.cn/item/66742a77d9c307b7e92c52b4.gif','stoneDragon','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x20200px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20','border','遗失的洛书开启后，能够为你的物理技能附加专属效果，同时最多拥有3个效果。可以附加效果如下：\x0a1.破甲：根据物理攻击扣除怪物的物理防御力\x20\x0a2.恐吓：持续时间内禁止怪物触发暴击\x20\x0a3.眩晕：持续时间内怪物无法动作\x20\x0a4.穿透：造成伤害时额外附加物理攻击1/10的穿透伤害，并在持续时间结束后基于穿透伤害总和的一定比例给予怪物余波收尾伤害\x20\x0a5.麻痹：根据本次物理伤害减少怪物的血量上限\x20\x0a6.惶恐：降低敌人物理攻击力，降低值为自身物理攻击','你已经成功挑战150轮！你的爱宠经受住了魔王的考验，恭喜你！继续挑战会进入无尽模式。','#ffc107','绿色品阶，临时增加20点速度，收集3个可以合成1个蓝色品阶的药品','attribute-exp-text','justifyContent','使用见手青，敌人的所有能力降至50%直至本轮战斗胜利。','9999','#003670','grid','handleRampaged\x20called.\x20battleRounds:\x20','skillMultiplier','⚔️【玩家攻击】你造成了\x20','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718c68.gif','杀戮状态已被解除。','spiritRefreshStone','6324633DHmKSy','1100XHRHAc','普通药材','%以上时，对妖怪的物理攻击伤害增加40%','enemyEffect','green','textContent','势如破竹','1487992kkZzEm','earthAmulet','\x20点物理伤害。','已成功开启！','https://pic.imgdb.cn/item/669a7ce2d9c307b7e9450ef4.png','mana','round','https://pic.imgdb.cn/item/66717584d9c307b7e98a90e6.gif','your-pet-max-health','Reflect\x20damage\x20is\x20NaN,\x20setting\x20to\x200.','startsWith','点伤害，宽容抵挡了','%的生命值，每级提升1%','橙色品阶，投喂敌人后敌人会中毒，能力下降50%，直至本轮胜利','baiYin','slow','cssText','strength','info','您耗费了\x20','\x0a1.当前你携带的精灵等级为','#f0f0f0','，但\x20','妖怪的护甲被破坏，物理防御减少了\x20','\x20点伤害！','https://pic.imgdb.cn/item/66cd62b1d9c307b7e9afcf5b.gif','spiritAwakenStone','background-color\x200.3s,\x20transform\x200.3s','armorBreakTimer','ignoranceWater','恭喜你战胜了第100轮妖怪，获得了1个灵兽符文！','练习树桩','secondary-attributes-panel','飞升之术增益已启用！','player-crit-damage','火焰巨人','getElementById','该技能已达到最大等级！','点生命值，被当即斩杀！','gray','【被动技能】凤佑天下\x20','100%','interval','武尊秘露'];_0x93b9=function(){return _0x18bded;};return _0x93b9();}let alreadyUseMushroom=![];function handleMushroom(){const _0x13c155=_0x3ebdb0;if(alreadyUseMushroom||summonEnemy){showInfoBox(_0x13c155(0x605),null,null,'red');return;}alreadyUseMushroom=!![];const _0x6f636b=JSON['parse'](JSON[_0x13c155(0x3a7)](enemyPet)),_0xc7a2b0={'health':Math[_0x13c155(0x420)](enemyPet[_0x13c155(0x45e)]*0.5),'mana':Math[_0x13c155(0x420)](enemyPet[_0x13c155(0x41f)]*0.5),'physicalAttack':Math[_0x13c155(0x420)](enemyPet[_0x13c155(0x2f3)]*0.5),'physicalDefense':Math[_0x13c155(0x420)](enemyPet[_0x13c155(0x54a)]*0.5),'magicAttack':Math['round'](enemyPet[_0x13c155(0x5dc)]*0.5),'magicDefense':Math[_0x13c155(0x420)](enemyPet['magicDefense']*0.5),'speed':Math[_0x13c155(0x420)](enemyPet[_0x13c155(0x521)]*0.5),'cultivation':Math[_0x13c155(0x420)](enemyPet[_0x13c155(0x26f)]*0x1)};enemyPet=_0xc7a2b0,enemyMaxHealth=enemyPet['health'],enemyMaxMana=enemyPet[_0x13c155(0x41f)],battleState[_0x13c155(0x46d)]={...enemyPet},logBattleEvent(_0x13c155(0x408),_0x13c155(0x267));function _0x49f2e8(){const _0x130caf=_0x13c155;battleState[_0x130caf(0x5db)]&&(enemyPet=_0x6f636b,enemyMaxHealth=enemyPet[_0x130caf(0x45e)],enemyMaxMana=enemyPet[_0x130caf(0x41f)],battleState[_0x130caf(0x46d)]={...enemyPet},updateEnemyAttributes());}const _0x34e8ac=showNextBattlePrompt;showNextBattlePrompt=function(_0x1e6b78){alreadyUseMushroom=![],_0x49f2e8(),_0x34e8ac(_0x1e6b78),showNextBattlePrompt=_0x34e8ac;};}function handleSleep(){const _0x43fa58=_0x3ebdb0;if(battleState[_0x43fa58(0x46d)]['sleep'])return;const _0x4f5719=battleState[_0x43fa58(0x46d)][_0x43fa58(0x45e)];console[_0x43fa58(0x27a)](_0x43fa58(0x4e9)+_0x4f5719),battleState[_0x43fa58(0x46d)]['sleep']=!![],logBattleEvent(_0x43fa58(0x59c),_0x43fa58(0x2db));const _0xa8347c=0x2710,_0x4103de=0x1f4,_0xf294e4=setInterval(()=>{const _0x4e81a1=_0x43fa58;if(!battleState[_0x4e81a1(0x46d)][_0x4e81a1(0x49f)]){clearInterval(_0xf294e4);return;}battleState[_0x4e81a1(0x46d)][_0x4e81a1(0x45e)]=Math[_0x4e81a1(0x296)](enemyMaxHealth,battleState[_0x4e81a1(0x46d)][_0x4e81a1(0x45e)]+Math[_0x4e81a1(0x420)](enemyMaxHealth*0.005)),updateUI();},_0x4103de),_0x2d5f9c=setTimeout(()=>{const _0x2586b7=_0x43fa58;clearInterval(_0xf294e4),battleState[_0x2586b7(0x46d)]['sleep']=![],logBattleEvent(_0x2586b7(0x571),'pink'),updateUI();},_0xa8347c),_0x26fe65=setInterval(()=>{const _0x3cd286=_0x43fa58;battleState[_0x3cd286(0x46d)]['health']<_0x4f5719&&(clearInterval(_0xf294e4),clearTimeout(_0x2d5f9c),clearInterval(_0x26fe65),battleState['enemy'][_0x3cd286(0x49f)]=![],logBattleEvent('敌人被攻击惊醒。',_0x3cd286(0x2db)),updateUI());},0x64);}function getShieldStatus(){const _0x48e5ad=_0x3ebdb0;extraShield!==0x0?battleState[_0x48e5ad(0x3aa)]['shielded']=!![]:battleState[_0x48e5ad(0x3aa)][_0x48e5ad(0x303)]=![];}function performHeal(){const _0x14b65=_0x3ebdb0;if(!attributesFetched){showInfoBox(_0x14b65(0x5a9));return;}if(!playerTurn)return;if(battleState[_0x14b65(0x3aa)][_0x14b65(0x60a)]){performAttack(_0x14b65(0x3f0));return;}let _0x233b13=0x1;battleState['player'][_0x14b65(0x225)]&&(_0x233b13=0x1f4,logBattleEvent(_0x14b65(0x47d),_0x14b65(0x60f)));const _0x514e88=document[_0x14b65(0x43e)](_0x14b65(0x5cc)),_0x10fb82=Array[_0x14b65(0x2bc)](_0x514e88[_0x14b65(0x4b9)]),_0x364373=_0x10fb82[_0x14b65(0x4be)](_0x20f71a=>_0x20f71a['innerText'][_0x14b65(0x552)]('\x20')[0x0])[_0x14b65(0x4be)](_0x4a71b9=>currentPet[_0x14b65(0x5ca)][_0x14b65(0x397)](_0xe8d24a=>_0xe8d24a[_0x14b65(0x621)]===_0x4a71b9&&(_0xe8d24a['type']==='PH'||_0xe8d24a[_0x14b65(0x206)]===_0x14b65(0x2b0))))[_0x14b65(0x4b6)](_0x4d9a00=>{return _0x4d9a00;});let _0x575e34=0x1,_0x706f38=0x1,_0x8e702c;if(_0x364373[_0x14b65(0x545)]>0x0){const _0x352790=Math[_0x14b65(0x300)](Math['random']()*_0x364373[_0x14b65(0x545)]);_0x8e702c=_0x364373[_0x352790];const _0x34aff2=calculateSkillLevelAndMultiplier(_0x8e702c);_0x706f38=_0x34aff2['skillLevel'],_0x575e34=_0x34aff2[_0x14b65(0x40d)],logBattleEvent(_0x14b65(0x265)+_0x8e702c[_0x14b65(0x621)]+'\x20'+_0x706f38+'级。',_0x14b65(0x282));}else{logBattleEvent('当前宠物没有学会任何治疗技能！',_0x14b65(0x24a));return;}const _0x1adbe6=handleHealingBan(_0x575e34);if(battleAttributes['health']+_0x1adbe6>maxHealth){const _0xb16f1=battleAttributes[_0x14b65(0x45e)]+_0x1adbe6-maxHealth,_0x41bdeb=Math[_0x14b65(0x300)](_0xb16f1*0.01);extraShield+=_0x41bdeb,console[_0x14b65(0x27a)](_0x14b65(0x5f3)+extraShield);}const _0x2b6acb=Math[_0x14b65(0x420)](0x184*battleRounds*_0x706f38*0.1)*_0x233b13;if(battleAttributes['mana']<_0x2b6acb){logBattleEvent(_0x14b65(0x583),_0x14b65(0x24a));return;}battleAttributes[_0x14b65(0x45e)]=Math[_0x14b65(0x296)](maxHealth,battleAttributes[_0x14b65(0x45e)]+_0x1adbe6),battleAttributes[_0x14b65(0x41f)]=Math[_0x14b65(0x389)](0x0,battleAttributes[_0x14b65(0x41f)]-_0x2b6acb),logBattleEvent(_0x14b65(0x479)+_0x1adbe6+_0x14b65(0x30c)+_0x2b6acb+_0x14b65(0x2f7),'aqua'),showEffect('enemyEffect',_0x14b65(0x33d)),updateDamageValue(-_0x1adbe6,!![],_0x14b65(0x2f1)),handleDivineProtection(_0x364373,_0x706f38);_0x8e702c&&_0x8e702c['type']===_0x14b65(0x2b0)&&applySpecialSkillEffects(_0x8e702c,_0x1adbe6);handleManaRecover(),applyAscensionEffects(),getShieldStatus(),updateUI();if(battleAttributes[_0x14b65(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x14b65(0x46d)][_0x14b65(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![],setTimeout(()=>enemyAttack(),0x15e);}function handleDivineProtection(_0x50c7bf,_0x3ad591){const _0x375c0a=_0x3ebdb0;let _0x10f9ed=0.05,_0x13bf23=0x0,_0x2fb31b=0x0;_0x50c7bf[_0x375c0a(0x545)]>0x0&&(_0x10f9ed+=_0x3ad591*0.01,_0x13bf23+=_0x3ad591*0.1);playerCultivation>=0xfa00&&(_0x2fb31b+=playerCultivation/0x2ee0*0.1);let _0x9bad26=0x3+_0x13bf23+_0x2fb31b;console[_0x375c0a(0x27a)](_0x375c0a(0x2f4)+_0x9bad26),(ascensionSkill[_0x375c0a(0x621)]===_0x375c0a(0x540)||secondAscensionSkill[_0x375c0a(0x621)]===_0x375c0a(0x540))&&(_0x10f9ed=battleState[_0x375c0a(0x3aa)][_0x375c0a(0x58b)]||0.5,_0x9bad26=battleState[_0x375c0a(0x3aa)][_0x375c0a(0x23d)]||0x5),Math['random']()<_0x10f9ed&&(battleState[_0x375c0a(0x3aa)][_0x375c0a(0x211)]=!![],logBattleEvent(_0x375c0a(0x328),_0x375c0a(0x282)),updatePlayerStatusDisplay(),setTimeout(()=>{const _0x561b3a=_0x375c0a;battleState[_0x561b3a(0x3aa)][_0x561b3a(0x211)]=![],updatePlayerStatusDisplay();},_0x9bad26*0x3e8));}let GQreflectPercentage;function handleReflectAndHeal(_0x14e4b4){const _0x436ab8=_0x3ebdb0;if(isNaN(_0x14e4b4)||_0x14e4b4<=0x0){console[_0x436ab8(0x1f6)](_0x436ab8(0x2ff),_0x14e4b4);return;}if(ascensionSkill[_0x436ab8(0x621)]===_0x436ab8(0x44d)||secondAscensionSkill[_0x436ab8(0x621)]===_0x436ab8(0x44d)){const _0x3c6b3d=(0x2d+0x2*ascensionSkill[_0x436ab8(0x1f2)])/0x64,_0x378989=Math[_0x436ab8(0x61a)]()*0xf,_0x5b01d9=_0x3c6b3d+_0x378989/0x64;if(!isNaN(_0x5b01d9)&&_0x5b01d9>0x0){let _0x308a80=Math[_0x436ab8(0x300)](_0x14e4b4*_0x5b01d9);isNaN(_0x308a80)&&(_0x308a80=0x0,console[_0x436ab8(0x1f6)](_0x436ab8(0x423)));const _0x54d35d=Math['round']((battleAttributes[_0x436ab8(0x2f3)]+battleAttributes['magicAttack'])*0x5);_0x308a80>_0x54d35d&&(_0x308a80=_0x54d35d),battleState['enemy']['health']=Math[_0x436ab8(0x389)](0x0,battleState[_0x436ab8(0x46d)][_0x436ab8(0x45e)]-_0x308a80),logBattleEvent(_0x436ab8(0x250)+_0x308a80+_0x436ab8(0x61e),_0x436ab8(0x24a)),console[_0x436ab8(0x27a)](_0x436ab8(0x4eb)+_0x5b01d9);}else console['error'](_0x436ab8(0x57a),_0x5b01d9);}if(battleState[_0x436ab8(0x3aa)][_0x436ab8(0x4a3)]&&GQreflectPercentage!==null){let _0x4add5c=GQreflectPercentage,_0x3fbe5c=Math['max'](0x3e8,Math[_0x436ab8(0x300)](_0x14e4b4*_0x4add5c));console[_0x436ab8(0x27a)](_0x436ab8(0x60c)+_0x4add5c),isNaN(_0x3fbe5c)&&(_0x3fbe5c=0x0,console[_0x436ab8(0x1f6)](_0x436ab8(0x423))),battleState[_0x436ab8(0x46d)][_0x436ab8(0x45e)]=Math[_0x436ab8(0x389)](0x0,battleState[_0x436ab8(0x46d)]['health']-_0x3fbe5c),logBattleEvent(_0x436ab8(0x359)+_0x3fbe5c+_0x436ab8(0x3bc));}const _0x1e3022=applyWuxingEffects();if(_0x1e3022[_0x436ab8(0x574)]&&_0x1e3022['goldAmulet']>0x0){const _0x2a24f5=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x1e3022[_0x436ab8(0x574)]];if(!isNaN(_0x2a24f5)&&_0x2a24f5>0x0){let _0x265bb1=Math[_0x436ab8(0x300)](_0x14e4b4*_0x2a24f5);isNaN(_0x265bb1)&&(_0x265bb1=0x0,console['error'](_0x436ab8(0x423))),battleState[_0x436ab8(0x46d)][_0x436ab8(0x45e)]=Math[_0x436ab8(0x389)](0x0,battleState[_0x436ab8(0x46d)][_0x436ab8(0x45e)]-_0x265bb1),logBattleEvent('🟡奥义·金之境界！反弹了\x20'+_0x265bb1+_0x436ab8(0x2e1),'gold');}else console[_0x436ab8(0x1f6)](_0x436ab8(0x612),_0x2a24f5);}if(battleState[_0x436ab8(0x3aa)][_0x436ab8(0x211)]){let _0x119f79=Math['floor'](0x3*battleAttributes[_0x436ab8(0x5dc)]*(Math[_0x436ab8(0x61a)]()*(0.12-0.08)+0.2));isNaN(_0x119f79)&&(_0x119f79=0x0,console[_0x436ab8(0x1f6)](_0x436ab8(0x597))),battleAttributes[_0x436ab8(0x45e)]=Math[_0x436ab8(0x296)](maxHealth,battleAttributes[_0x436ab8(0x45e)]+_0x119f79),updateDamageValue(-_0x119f79,!![],'extra-damage'),logBattleEvent('🔮【玩家治疗】仙气护体触发，恢复了\x20'+_0x119f79+'\x20点生命值。',_0x436ab8(0x282)),showEffect(_0x436ab8(0x416),'https://pic.imgdb.cn/item/66a5d698d9c307b7e9718c7d.gif');}}let resurrectionState=![],resurrectionTimesMap=new Map();function checkResurrectionState(_0x88c99b){resurrectionState=_0x88c99b>0x0;}function resetResurrectionState(){const _0xf9ea20=_0x3ebdb0;resurrectionTimesMap[_0xf9ea20(0x24c)](),checkResurrectionState(0x0);}function handleResurrection(_0x4d4f5c){const _0x29e336=_0x3ebdb0;if(battleAttributes[_0x29e336(0x45e)]>_0x4d4f5c)return;if(battleAttributes[_0x29e336(0x45e)]<=0x0&&(ascensionSkill[_0x29e336(0x621)]===_0x29e336(0x556)||secondAscensionSkill['name']==='向死而生')){let _0x2642cc=ascensionSkill[_0x29e336(0x621)]===_0x29e336(0x556)?ascensionSkill:secondAscensionSkill;const _0x38b7a3=_0x2642cc['baseValue']+_0x2642cc[_0x29e336(0x624)](_0x2642cc[_0x29e336(0x1f2)]),_0x1f0f48=Math[_0x29e336(0x300)](maxMana*(_0x38b7a3/0x64));battleAttributes[_0x29e336(0x41f)]>=_0x1f0f48&&(battleAttributes['health']=0x1,battleAttributes['mana']-=_0x1f0f48,logBattleEvent(_0x29e336(0x5a7),_0x29e336(0x24a)),updateUI());return;}const _0x1e49b5=[],_0x4c2d66=document[_0x29e336(0x43e)]('skills-area');_0x4c2d66&&Array[_0x29e336(0x2bc)](_0x4c2d66[_0x29e336(0x4b9)])[_0x29e336(0x32f)](_0x6dd9ee=>{const _0x324972=_0x29e336,_0x33f7b5=_0x6dd9ee[_0x324972(0x331)][_0x324972(0x552)]('\x20')[0x0],_0x4c0377=currentPet[_0x324972(0x5ca)]['find'](_0x3653f3=>_0x3653f3['name']===_0x33f7b5&&_0x3653f3['type']==='FH');_0x4c0377&&_0x1e49b5['push'](_0x4c0377);});if(_0x1e49b5[_0x29e336(0x545)]===0x0)return;for(const _0x31fc20 of _0x1e49b5){const _0xb0595f=_0x31fc20['level']||0x1,_0xb69a1b=_0x31fc20[_0x29e336(0x22b)]||0x1,_0x8c8d13=Math['ceil'](_0xb69a1b+_0xb0595f*0.01);!resurrectionTimesMap['has'](_0x31fc20[_0x29e336(0x621)])&&resurrectionTimesMap[_0x29e336(0x535)](_0x31fc20['name'],0x0);let _0x5f0aed=resurrectionTimesMap['get'](_0x31fc20[_0x29e336(0x621)]),_0x34dc4d=_0x8c8d13-_0x5f0aed;if(_0x5f0aed<_0x8c8d13&&battleAttributes[_0x29e336(0x45e)]<=0x0){const _0x115add=Math[_0x29e336(0x420)](maxHealth*(0.1*_0xb69a1b));battleAttributes[_0x29e336(0x45e)]+=_0x115add,_0x5f0aed++,resurrectionTimesMap[_0x29e336(0x535)](_0x31fc20[_0x29e336(0x621)],_0x5f0aed),updateDamageValue(-_0x115add,![],_0x29e336(0x2f1)),logBattleEvent(_0x31fc20[_0x29e336(0x621)]+'\x20'+_0xb0595f+_0x29e336(0x5ad)+_0x115add+_0x29e336(0x2ae)+_0x34dc4d+'次',_0x29e336(0x222)),checkResurrectionState(_0x34dc4d);}else _0x5f0aed>=_0x8c8d13&&(resurrectionState=![],logBattleEvent(_0x31fc20[_0x29e336(0x621)]+_0x29e336(0x585),_0x29e336(0x441)),showNextBattlePrompt(![]));updateUI();}}function handlePlayerPassiveSkills(_0x2596c7=null){const _0x1de1fd=_0x3ebdb0,_0x3a2f0d=[_0x1de1fd(0x518)],_0x2a0ed4=document[_0x1de1fd(0x43e)](_0x1de1fd(0x5cc));if(!_0x2a0ed4||!currentPet||!currentPet[_0x1de1fd(0x5ca)])return;const _0x3d11a6=Array['from'](_0x2a0ed4[_0x1de1fd(0x4b9)]);for(const _0x90b589 of _0x3d11a6){if(!_0x90b589||!_0x90b589[_0x1de1fd(0x331)])continue;const _0x3947ea=_0x90b589[_0x1de1fd(0x331)];for(const _0x6b495a of _0x3a2f0d){if(_0x3947ea[_0x1de1fd(0x323)](_0x6b495a)){const _0x20d128=_0x3947ea[_0x1de1fd(0x552)]('\x20')[0x0],_0x1abed3=currentPet[_0x1de1fd(0x5ca)][_0x1de1fd(0x397)](_0x84051e=>_0x84051e['name']===_0x20d128);if(!_0x1abed3)continue;switch(_0x6b495a){case _0x1de1fd(0x518):handleShanShuiSkill(_0x1abed3,_0x2596c7);break;}break;}}}}function handleShanShuiSkill(_0x24fc52,_0x19dba3){const _0x5262f5=_0x3ebdb0;if(!_0x24fc52||typeof currentLifeSpan===_0x5262f5(0x2da)){console[_0x5262f5(0x27a)](_0x5262f5(0x38f));return;}if(currentLifeSpan<_0x24fc52['level']){console[_0x5262f5(0x27a)](_0x5262f5(0x28d));return;}if(_0x19dba3>maxHealth)return;let _0x33cdaa=0x0;battleAttributes&&typeof battleAttributes[_0x5262f5(0x5dc)]!=='undefined'&&(_0x33cdaa=Math[_0x5262f5(0x300)](battleAttributes['magicAttack']*(_0x24fc52[_0x5262f5(0x22b)]||0x0)));if(_0x19dba3&&typeof _0x19dba3==='number'){const _0x53bf5c=Math[_0x5262f5(0x300)](_0x19dba3*(_0x24fc52[_0x5262f5(0x22b)]||0x0));_0x33cdaa=Math[_0x5262f5(0x389)](_0x33cdaa,_0x53bf5c);}if(_0x33cdaa<=0x0){console[_0x5262f5(0x27a)]('治疗量计算为0，不触发效果');return;}currentLifeSpan-=_0x24fc52[_0x5262f5(0x1f2)];if(typeof battleAttributes[_0x5262f5(0x45e)]!==_0x5262f5(0x2da)&&typeof maxHealth!==_0x5262f5(0x2da)){const _0x19d263=battleAttributes[_0x5262f5(0x45e)];battleAttributes[_0x5262f5(0x45e)]=Math[_0x5262f5(0x296)](battleAttributes[_0x5262f5(0x45e)]+_0x33cdaa,maxHealth),logBattleEvent('【被动技能】'+_0x24fc52[_0x5262f5(0x621)]+'\x20'+_0x24fc52['level']+_0x5262f5(0x2ad)+_0x33cdaa+'点生命值，消耗'+_0x24fc52['level']+_0x5262f5(0x5aa),_0x5262f5(0x222)),updateDamageValue(-_0x33cdaa,!![],'damage'),console[_0x5262f5(0x27a)](_0x5262f5(0x3e1)+_0x19d263+_0x5262f5(0x56c)+battleAttributes[_0x5262f5(0x45e)]+_0x5262f5(0x4e3)+_0x24fc52[_0x5262f5(0x1f2)]);}updateUI();}function handleRelieveEffects(){const _0x586003=_0x3ebdb0;try{const _0x4b21d1=[],_0x393785=document['getElementById'](_0x586003(0x5cc));if(!_0x393785){console[_0x586003(0x4a5)](_0x586003(0x55a));return;}Array[_0x586003(0x2bc)](_0x393785[_0x586003(0x4b9)])[_0x586003(0x32f)](_0x3f5841=>{const _0x262c81=_0x586003;if(!_0x3f5841||!_0x3f5841['innerText'])return;const _0x5d388c=_0x3f5841['innerText'][_0x262c81(0x552)]('\x20')[0x0];if(!_0x5d388c)return;const _0x71fb8e=currentPet?.[_0x262c81(0x5ca)]?.[_0x262c81(0x397)](_0xab7079=>_0xab7079[_0x262c81(0x621)]===_0x5d388c&&(_0xab7079[_0x262c81(0x206)]==='JK'||_0xab7079[_0x262c81(0x206)]===_0x262c81(0x3da)));_0x71fb8e&&_0x4b21d1[_0x262c81(0x48f)](_0x71fb8e);});if(_0x4b21d1[_0x586003(0x545)]===0x0)return;for(const _0x18275c of _0x4b21d1){const _0x330ebb=Number(_0x18275c[_0x586003(0x1f2)])||0x1,_0xf11b33=Number(_0x18275c['multiplier'])||0.01,_0x18b6ca=Math[_0x586003(0x296)](0.1,_0x330ebb*_0xf11b33);if(Math[_0x586003(0x61a)]()<_0x18b6ca){clearEnemyEffect(),logBattleEvent(_0x18275c[_0x586003(0x621)]+'\x20'+_0x330ebb+_0x586003(0x4dd),_0x586003(0x222));if(_0x18275c[_0x586003(0x206)]===_0x586003(0x3da))try{applySpecialSkillEffects(_0x18275c,null);}catch(_0x4f06b0){console[_0x586003(0x1f6)](_0x586003(0x394),_0x4f06b0);}}}}catch(_0x20c67d){console[_0x586003(0x1f6)]('处理解控效果时发生错误:',_0x20c67d);}finally{updateUI();}}function performDefense(){const _0x483843=_0x3ebdb0;if(!attributesFetched){showInfoBox(_0x483843(0x5a9));return;}if(!battleState||!battleState['enemy']){console['error'](_0x483843(0x302));return;}if(!playerTurn)return;if(battleState[_0x483843(0x3aa)][_0x483843(0x60a)]){performAttack(_0x483843(0x3f0));return;}const _0x4c84ad=document[_0x483843(0x43e)](_0x483843(0x5cc)),_0x2eb1ca=Array[_0x483843(0x2bc)](_0x4c84ad['children']),_0x3bafb9=_0x2eb1ca[_0x483843(0x4be)](_0x46bc1c=>_0x46bc1c[_0x483843(0x331)]['split']('\x20')[0x0])[_0x483843(0x4be)](_0x1c98ab=>currentPet[_0x483843(0x5ca)][_0x483843(0x397)](_0x3d2288=>_0x3d2288[_0x483843(0x621)]===_0x1c98ab&&(_0x3d2288['type']==='PD'||_0x3d2288['type']===_0x483843(0x2df))))['filter'](_0x2bcc28=>_0x2bcc28);let _0x33fa7e=0x1,_0x5b861c=_0x483843(0x5c0),_0x575fcc;if(_0x3bafb9['length']>0x0){const _0x3f1f5c=Math['floor'](Math[_0x483843(0x61a)]()*_0x3bafb9['length']);_0x575fcc=_0x3bafb9[_0x3f1f5c],_0x33fa7e=_0x575fcc[_0x483843(0x22b)],_0x5b861c=_0x575fcc[_0x483843(0x621)];}let _0x55b62e=(Math[_0x483843(0x61a)]()*(0.99-0.8)+0.8)*_0x33fa7e;battleState[_0x483843(0x3aa)][_0x483843(0x243)]=!![],battleState[_0x483843(0x3aa)][_0x483843(0x306)]=_0x55b62e;_0x55b62e<0x1?logBattleEvent(_0x483843(0x3ef)+_0x5b861c+_0x483843(0x26b)+Math[_0x483843(0x300)](_0x55b62e*0x64)+'%\x20伤害。',_0x483843(0x24e)):logBattleEvent(_0x483843(0x3ef)+_0x5b861c+_0x483843(0x26b)+Math[_0x483843(0x300)](_0x55b62e*0x64)+_0x483843(0x319),'orange');showEffect(_0x483843(0x416),_0x483843(0x3e9));_0x575fcc&&_0x575fcc[_0x483843(0x206)]==='PDE'&&applySpecialSkillEffects(_0x575fcc,value=null);applyDefenseBonus(_0x5b861c),handleManaRecover(),getShieldStatus(),applyAscensionEffects(),updateUI();if(battleAttributes['health']<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x483843(0x46d)][_0x483843(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![];}function handleDamageReduction(_0x9c881,_0x35b007=![]){const _0x3d928f=_0x3ebdb0;let _0x1af705=_0x9c881,_0xc8520b=0x0,_0x283953=0x0,_0x38f551=0x0,_0xeebc69=_0x9c881,_0xb207a=0x0;const _0x1e4be0=applyWuxingEffects();_0xeebc69=handleWiseDefense(_0xeebc69);const _0x44c657=document[_0x3d928f(0x43e)](_0x3d928f(0x5cc));if(_0x44c657&&currentPet&&currentPet[_0x3d928f(0x5ca)]){const _0x263c07=currentPet[_0x3d928f(0x5ca)][_0x3d928f(0x397)](_0x396624=>_0x396624[_0x3d928f(0x621)]===_0x3d928f(0x59d));if(_0x263c07){let _0x2089ac;_0x263c07[_0x3d928f(0x1f2)]<=0x14?_0x2089ac=_0x263c07[_0x3d928f(0x1f2)]*0.005:_0x2089ac=0x14*0.005+(_0x263c07[_0x3d928f(0x1f2)]-0x14)*0.01,_0xb207a=Math[_0x3d928f(0x300)](_0xeebc69*_0x2089ac),_0xb207a>0x0&&(_0xeebc69-=_0xb207a,_0xc8520b+=_0xb207a,logBattleEvent(_0x3d928f(0x584)+_0x263c07[_0x3d928f(0x1f2)]+_0x3d928f(0x525)+_0xb207a+_0x3d928f(0x53b),_0x3d928f(0x222)));}}const _0x1aa1c4=currentPet[_0x3d928f(0x5ca)][_0x3d928f(0x397)](_0x8593f3=>_0x8593f3['name']===_0x3d928f(0x3c6));if(_0x1aa1c4){let _0x33dbbb;if(_0x1aa1c4[_0x3d928f(0x1f2)]<=0x14)_0x33dbbb=_0x1aa1c4['level']*0.04;else _0x1aa1c4[_0x3d928f(0x1f2)]<=0x1e&&(_0x33dbbb=0x14*0.04+(_0x1aa1c4[_0x3d928f(0x1f2)]-0x14)*0.01);const _0x2c9066=Math[_0x3d928f(0x300)](_0xeebc69*_0x33dbbb);_0x2c9066>0x0&&(_0xeebc69-=_0x2c9066,_0xc8520b+=_0x2c9066,logBattleEvent(_0x3d928f(0x442)+_0x1aa1c4[_0x3d928f(0x1f2)]+_0x3d928f(0x525)+_0x2c9066+_0x3d928f(0x53b),'orange'));}if((ascensionSkill[_0x3d928f(0x621)]===_0x3d928f(0x32a)||secondAscensionSkill['name']==='无我之境')&&Math[_0x3d928f(0x61a)]()<battleState[_0x3d928f(0x3aa)][_0x3d928f(0x5f6)]){_0xeebc69=0x0,logBattleEvent('遁入无我之境！',_0x3d928f(0x267)),showBattleOverlay(_0x3d928f(0x44e),0xbb8,0.8);return;}isNaN(_0xeebc69)&&(_0xeebc69=0x0,console[_0x3d928f(0x1f6)](_0x3d928f(0x532)));if(extraShield>0x0){const _0x1edc5e=extraShield;_0xeebc69-=extraShield,_0xeebc69<0x0?(extraShield=-_0xeebc69,_0xeebc69=0x0):extraShield=0x0,_0x283953=_0x1edc5e-extraShield;}const _0x5d8ae2=battleState['player']['damageReductionPercentage']/0x64;if(_0x5d8ae2>0x0){const _0x4a3d20=Math[_0x3d928f(0x300)](_0xeebc69*_0x5d8ae2);_0xeebc69-=_0x4a3d20,_0xc8520b+=_0x4a3d20;}if(battleState[_0x3d928f(0x3aa)]['defending']){const _0x14d9f4=battleState[_0x3d928f(0x3aa)][_0x3d928f(0x306)],_0x513ffd=Math['floor'](_0xeebc69*_0x14d9f4);_0x14d9f4>0x1&&(extraShield+=Math[_0x3d928f(0x300)](_0xeebc69*(_0x14d9f4-0x1))),_0xeebc69-=_0x513ffd,_0x38f551+=_0x513ffd,battleState[_0x3d928f(0x3aa)][_0x3d928f(0x243)]=![];}if(_0x1e4be0[_0x3d928f(0x41b)]&&_0x1e4be0[_0x3d928f(0x41b)]>0x0){const _0x177ed0=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x1e4be0[_0x3d928f(0x41b)]],_0x567b32=Math[_0x3d928f(0x300)](_0xeebc69*_0x177ed0);_0xeebc69-=_0x567b32,_0xc8520b+=_0x567b32,logBattleEvent(_0x3d928f(0x2a0)+_0x567b32+_0x3d928f(0x4ec),_0x3d928f(0x1fe));}const _0x4215f5=battleAttributes['health'];battleAttributes[_0x3d928f(0x45e)]=Math['max'](0x0,battleAttributes[_0x3d928f(0x45e)]-_0xeebc69);battleAttributes[_0x3d928f(0x45e)]>_0x4215f5&&(battleAttributes[_0x3d928f(0x45e)]=_0x4215f5);const _0x1f4a15=_0x283953+_0x38f551+_0xc8520b+(isNaN(wiseDefense)?0x0:wiseDefense),_0x3fbf8b=isNaN(_0x1f4a15)?0x0:_0x1f4a15,_0x4969a1=isNaN(_0xeebc69)?0x0:_0xeebc69,_0x5d70ec=isNaN(extraShield)?0x0:extraShield;wiseDefenseManaCost=0x0,handleReflectAndHeal(_0x4969a1),_0x35b007?updateDamageValue(_0x4969a1,!![],'damage',!![]):updateDamageValue(_0x4969a1,!![],'damage'),console[_0x3d928f(0x27a)](_0x3d928f(0x528)+_0x283953+_0x3d928f(0x337)+_0xc8520b+_0x3d928f(0x3a4)+_0x38f551+_0x3d928f(0x551)+(isNaN(wiseDefense)?0x0:wiseDefense)+_0x3d928f(0x425)+_0xb207a+_0x3d928f(0x343)+_0x5d70ec+_0x3d928f(0x54c)+_0x4969a1+_0x3d928f(0x2e1)),getShieldStatus();}function handleWiseDefense(_0x3c34db){const _0x381bd1=_0x3ebdb0,_0x34ed59=[],_0x204852=document[_0x381bd1(0x43e)](_0x381bd1(0x5cc));_0x204852&&Array[_0x381bd1(0x2bc)](_0x204852[_0x381bd1(0x4b9)])['forEach'](_0x4a1675=>{const _0x4b8222=_0x381bd1,_0xce40b7=_0x4a1675['innerText'][_0x4b8222(0x552)]('\x20')[0x0],_0x357687=currentPet[_0x4b8222(0x5ca)]['find'](_0x4945fd=>_0x4945fd['name']===_0xce40b7&&_0x4945fd[_0x4b8222(0x206)]==='SH');_0x357687&&_0x34ed59[_0x4b8222(0x48f)](_0x357687);});if(_0x34ed59['length']===0x0)return _0x3c34db;let _0x3d1dc4=_0x3c34db;for(const _0x3dd347 of _0x34ed59){const {skillLevel:_0x8105ab,skillMultiplier:_0x9f4772}=calculateSkillLevelAndMultiplier(_0x3dd347),_0x177263=Math['min'](0.6,0.4+_0x8105ab*0.01),_0x452c7a=0x1+0.05*(_0x8105ab-0x1),_0x3e0955=Math[_0x381bd1(0x389)](0x0,0.19-0.01*(_0x8105ab-0x1)),_0x22fbeb=Math[_0x381bd1(0x300)](battleAttributes[_0x381bd1(0x41f)]*(0x1-_0x3e0955)),_0x310bba=Math[_0x381bd1(0x420)](_0x3d1dc4*_0x177263),_0x244af9=Math[_0x381bd1(0x296)](_0x310bba,_0x22fbeb*_0x452c7a),_0x5ed1ee=Math[_0x381bd1(0x296)](_0x22fbeb,Math['ceil'](_0x244af9/_0x452c7a));battleAttributes[_0x381bd1(0x41f)]-=_0x5ed1ee,_0x3d1dc4-=Math['round'](_0x5ed1ee*_0x452c7a),wiseDefense=Math[_0x381bd1(0x420)](_0x5ed1ee*_0x452c7a),wiseDefenseManaCost=_0x5ed1ee,console[_0x381bd1(0x27a)](_0x3dd347['name']+'\x20'+_0x8105ab+_0x381bd1(0x393)+_0x5ed1ee+'\x20点法力值。');}return _0x3d1dc4;}function applyDefenseBonus(_0x65bb6a){const _0x5f3252=_0x3ebdb0;!battleState['player'][_0x5f3252(0x484)]&&(battleState['player'][_0x5f3252(0x484)]=0x0);if(battleState['player'][_0x5f3252(0x484)]<0x5){battleState[_0x5f3252(0x3aa)][_0x5f3252(0x484)]+=0x1;const _0xd0bb37=0.06,_0x1353f8=0.09;battleState[_0x5f3252(0x3aa)][_0x5f3252(0x2e5)]+=_0xd0bb37,battleState['player'][_0x5f3252(0x345)]+=_0x1353f8,!battleState[_0x5f3252(0x3aa)][_0x5f3252(0x599)]&&(battleState[_0x5f3252(0x3aa)]['defenseBonus']={'critRate':0x0,'critDamage':0x0}),battleState[_0x5f3252(0x3aa)][_0x5f3252(0x599)][_0x5f3252(0x2e5)]+=_0xd0bb37,battleState[_0x5f3252(0x3aa)][_0x5f3252(0x599)][_0x5f3252(0x345)]+=_0x1353f8,battleState[_0x5f3252(0x3aa)][_0x5f3252(0x544)]=!![],updatePlayerStatusDisplay();}else logBattleEvent('防御增益已达到最大值，无法再增加。',_0x5f3252(0x30e));}function applyDefenseBonusEffect(){const _0x5f1ff7=_0x3ebdb0;if(battleState[_0x5f1ff7(0x3aa)][_0x5f1ff7(0x599)]){const {critRate:_0x3b2c2f,critDamage:_0x3b36af}=battleState[_0x5f1ff7(0x3aa)][_0x5f1ff7(0x599)];battleState[_0x5f1ff7(0x3aa)][_0x5f1ff7(0x2e5)]-=_0x3b2c2f,battleState[_0x5f1ff7(0x3aa)][_0x5f1ff7(0x345)]-=_0x3b36af,logBattleEvent(_0x5f1ff7(0x221)+Math[_0x5f1ff7(0x420)](_0x3b2c2f*0x64)+_0x5f1ff7(0x36b)+Math[_0x5f1ff7(0x420)](_0x3b36af*0x64)+'%\x20暴击伤害。',_0x5f1ff7(0x30e)),battleState[_0x5f1ff7(0x3aa)][_0x5f1ff7(0x484)]=0x0,battleState['player']['defenseBonus']=null,battleState[_0x5f1ff7(0x3aa)][_0x5f1ff7(0x544)]=![];}}function handleManaRecover(){const _0x3940fb=_0x3ebdb0,_0x8ff6aa=[],_0x421a62=document['getElementById'](_0x3940fb(0x5cc));_0x421a62&&Array[_0x3940fb(0x2bc)](_0x421a62[_0x3940fb(0x4b9)])[_0x3940fb(0x32f)](_0xe06569=>{const _0x19ab53=_0x3940fb,_0x243ece=_0xe06569[_0x19ab53(0x331)][_0x19ab53(0x552)]('\x20')[0x0],_0xed411d=currentPet[_0x19ab53(0x5ca)]['find'](_0x4a243e=>_0x4a243e[_0x19ab53(0x621)]===_0x243ece&&_0x4a243e['type']==='HL');_0xed411d&&_0x8ff6aa['push'](_0xed411d);});if(_0x8ff6aa[_0x3940fb(0x545)]===0x0)return;for(const _0x314922 of _0x8ff6aa){const _0x1b4299=_0x314922[_0x3940fb(0x1f2)]||0x1,_0x3717e8=_0x314922['multiplier']||0x1,_0x32c2e3=_0x3717e8+_0x1b4299*0.01,_0x2f1558=Math[_0x3940fb(0x420)](maxMana*_0x32c2e3);battleAttributes[_0x3940fb(0x41f)]=Math[_0x3940fb(0x296)](maxMana,battleAttributes[_0x3940fb(0x41f)]+_0x2f1558),logBattleEvent(_0x314922[_0x3940fb(0x621)]+'\x20'+_0x1b4299+'级为你恢复了\x20'+_0x2f1558+_0x3940fb(0x2f7),'lightblue');}}let enemyActionInterval;function decideEnemyCanPerform(){const _0x528184=_0x3ebdb0;if(!battleState?.['enemy']||!battleAttributes){console[_0x528184(0x1f6)](_0x528184(0x302));return;}const _0x29e9d8=document['getElementById'](_0x528184(0x318));if(!_0x29e9d8){console[_0x528184(0x1f6)](_0x528184(0x4f2));return;}enemyActionInterval&&(clearInterval(enemyActionInterval),enemyActionInterval=null);_0x29e9d8[_0x528184(0x604)]['width']='0%';let _0x399d37=![];enemyActionInterval=setInterval(()=>{const _0x272c2e=_0x528184;if(!onBattleState){clearInterval(enemyActionInterval),enemyActionInterval=null;return;}if(playerTurn)try{const _0x21ea6b=battleState[_0x272c2e(0x46d)]['speed']||0x0,_0xb88e30=Math['max'](0x0,_0x21ea6b/(_0x21ea6b+0x2710)*battleRounds*0.1),_0x56973b=parseFloat(_0x29e9d8[_0x272c2e(0x604)][_0x272c2e(0x5f4)])||0x0,_0x92d574=Math[_0x272c2e(0x296)](0x64,_0x56973b+_0xb88e30);_0x29e9d8[_0x272c2e(0x604)][_0x272c2e(0x5f4)]=_0x92d574+'%',_0x92d574>=0x64&&(_0x29e9d8[_0x272c2e(0x604)][_0x272c2e(0x5f4)]='0%',playerTurn=![],enemyAttack()),updateUI();}catch(_0x3181d4){console['error'](_0x272c2e(0x4c5),_0x3181d4);}else!_0x399d37&&(_0x399d37=!![],setTimeout(()=>{onBattleState&&!playerTurn&&enemyAttack(),_0x399d37=![];},0x1f4));},0x15e);}document['getElementById'](_0x3ebdb0(0x264))['addEventListener'](_0x3ebdb0(0x5a6),()=>{showInfoBox('这是敌人的行动条，当轮到玩家回合但玩家未行动时，此行动条积满敌人将会行动。行动条的积累速度与敌人的当前速度有关。关闭战斗界面会停止积累。');});function stopEnemyAction(){enemyActionInterval&&(clearInterval(enemyActionInterval),enemyActionInterval=null);}function enemyAttack(){const _0xe6d97b=_0x3ebdb0;if(!battleState||!battleAttributes||!battleState[_0xe6d97b(0x46d)]){console[_0xe6d97b(0x1f6)](_0xe6d97b(0x302));return;}!summonEnemy&&handleRampaged();if(playerTurn)return;if(handleDazed())return;if(handleStunned())return;if(battleState['enemy']['sleep']){playerTurn=!![];return;}playerTurn=!![];const _0x2b3249=battleState[_0xe6d97b(0x46d)][_0xe6d97b(0x45e)]/enemyMaxHealth,_0xe4e6c9=battleState[_0xe6d97b(0x46d)][_0xe6d97b(0x41f)]/enemyMaxMana,_0x29f661=_0x2b3249<0.3?0.7:0.1;if(Math[_0xe6d97b(0x61a)]()<_0x29f661){enemyHeal();return;}const _0x2856d9=getRandomInt(0x0,0x64),_0x4e8391=enemyMaxHealth*0.5;if(battleState['enemy'][_0xe6d97b(0x45e)]<=_0x4e8391&&_0x2856d9<=0x32){enemyDefense();return;}if(handleEnemySteal(_0x2b3249,_0xe4e6c9)){updateUI();return;}let _0x33e156=0x0,_0x3e9008=checkCriticalHit(enemyCritRate);battleState[_0xe6d97b(0x46d)][_0xe6d97b(0x364)]&&(_0x3e9008=![]);const _0xcd3086=Math[_0xe6d97b(0x61a)]()<0.5?_0xe6d97b(0x3f0):_0xe6d97b(0x35e);if(_0xcd3086===_0xe6d97b(0x3f0))_0x33e156=performEnemyPhysicalAttack(_0x3e9008);else _0xcd3086===_0xe6d97b(0x35e)&&!battleState['enemy'][_0xe6d97b(0x258)]?_0x33e156=performEnemyMagicalAttack(_0x3e9008):logBattleEvent(_0xe6d97b(0x39d),'white');handleBurnt();(isNaN(_0x33e156)||_0x33e156<=0x0)&&(console['error'](_0xe6d97b(0x32e),_0x33e156),_0x33e156=0x0);_0x33e156=handleDamageReduction(_0x33e156,_0x3e9008),handleResurrection(_0x33e156),handlePlayerPassiveSkills(_0x33e156),handleRelieveEffects();if(battleAttributes[_0xe6d97b(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState['enemy']['health']<=0x0){showNextBattlePrompt(!![]);return;}else updateUI();}}function performEnemyPhysicalAttack(_0x12b59c){const _0x4f450e=_0x3ebdb0;if(handleDodge(_0x4f450e(0x3aa)))return 0x0;const _0x487cb8=Math[_0x4f450e(0x61a)]()*(1.2-0.8)+0.8,_0x5e3067=parseInt(document[_0x4f450e(0x43e)](_0x4f450e(0x52b))['innerText'],0xa)||0x0,_0x263221=0x1+_0x5e3067/0x64,_0x1889b9=battleAttributes[_0x4f450e(0x54a)]*_0x487cb8,_0x3a8e79=f(_0x1889b9),_0x572a6e=Math[_0x4f450e(0x420)](battleAttributes['physicalDefense']*0.1);let _0x4c8959;_0x3a8e79!==0x0?_0x4c8959=Math['max'](0x1,Math[_0x4f450e(0x300)](battleState[_0x4f450e(0x46d)][_0x4f450e(0x2f3)]*1.2*_0x263221*(0x1-_0x3a8e79))):_0x4c8959=Math[_0x4f450e(0x389)](0x1,Math['floor'](battleState[_0x4f450e(0x46d)][_0x4f450e(0x2f3)]*1.2*_0x263221));_0x4c8959=calculateDamage(_0x4c8959,_0x12b59c,enemyCritDamage),_0x4c8959=Math[_0x4f450e(0x389)](0x1,_0x4c8959-_0x572a6e);_0x12b59c?logBattleEvent('⚔️【敌人攻击】妖怪施放物理技能·黑暗血刃并发起暴击，造成了\x20'+_0x4c8959+_0x4f450e(0x598),_0x4f450e(0x24a)):logBattleEvent(_0x4f450e(0x52c)+_0x4c8959+'\x20点伤害。','white');showEffect(_0x4f450e(0x416),_0x4f450e(0x277));if(battleState[_0x4f450e(0x3aa)][_0x4f450e(0x374)]){const _0x1ce9db=playerCultivation-enemyPetCultivation;let _0x2a905f=0x0;if(_0x1ce9db<0x0){const _0x17e554=Math[_0x4f450e(0x310)](_0x1ce9db);enemyPhysicalAttackCount++,_0x2a905f=_0x17e554*enemyPhysicalAttackCount,logBattleEvent('⚔️【敌人攻击】杀戮状态下由于修为差距，敌人本次物理攻击额外造成了\x20'+_0x2a905f+_0x4f450e(0x432),_0x4f450e(0x509)),updateDamageValue(_0x2a905f,!![],_0x4f450e(0x5ff));}else{if(_0x1ce9db>0x0){const _0x4fdde7=_0x1ce9db;battleState[_0x4f450e(0x46d)][_0x4f450e(0x45e)]-=_0x4fdde7,logBattleEvent(_0x4f450e(0x4a6)+_0x4fdde7+'\x20点生命值！','grey'),updateDamageValue(_0x2a905f,![],_0x4f450e(0x5ff));}}_0x4c8959+=_0x2a905f;}return(!battleState[_0x4f450e(0x46d)]['silenced']||_0x4c8959!==0x0)&&applyEnemyPhysicalEffects(_0x4c8959),_0x4c8959;}function performEnemyMagicalAttack(_0x5b74cc){const _0x4e82db=_0x3ebdb0;if(battleState['enemy'][_0x4e82db(0x41f)]<0x32)return enemyAttack(_0x4e82db(0x3f0)),0x0;const _0x22339d=parseInt(document[_0x4e82db(0x43e)](_0x4e82db(0x52b))[_0x4e82db(0x331)],0xa)||0x0,_0x16eb17=0x1+_0x22339d/0x64,_0x6c6e4c=Math[_0x4e82db(0x61a)]()*(1.2-0.8)+0.8,_0x531733=battleAttributes[_0x4e82db(0x34c)]*_0x6c6e4c,_0x4afff4=f(_0x531733),_0x302b33=Math[_0x4e82db(0x420)](battleAttributes[_0x4e82db(0x34c)]*0.1);let _0x4ce681;_0x4afff4!==0x0?_0x4ce681=Math[_0x4e82db(0x389)](0x1,Math[_0x4e82db(0x300)](battleState[_0x4e82db(0x46d)]['magicAttack']*_0x16eb17*(0x1-_0x4afff4))-_0x302b33):_0x4ce681=Math[_0x4e82db(0x389)](0x1,Math[_0x4e82db(0x300)](battleState[_0x4e82db(0x46d)][_0x4e82db(0x5dc)]*_0x16eb17)-_0x302b33);_0x4ce681=calculateDamage(_0x4ce681,_0x5b74cc,enemyCritDamage),_0x4ce681=Math[_0x4e82db(0x389)](0x1,_0x4ce681-_0x302b33);if(handleMagicDodge(_0x4e82db(0x3aa)))return 0x0;const _0x501450=Math[_0x4e82db(0x300)](Math[_0x4e82db(0x61a)]()*(0x64-0x32+0x1))+0x1f4;return battleState['enemy']['mana']=Math[_0x4e82db(0x389)](0x0,battleState[_0x4e82db(0x46d)]['mana']-_0x501450),_0x5b74cc?(logBattleEvent(_0x4e82db(0x5dd)+_0x4ce681+_0x4e82db(0x4db)+_0x501450+'\x20点法力值。',_0x4e82db(0x24a)),showEffect(_0x4e82db(0x416),_0x4e82db(0x277))):logBattleEvent(_0x4e82db(0x5a8)+_0x4ce681+_0x4e82db(0x22e)+_0x501450+_0x4e82db(0x2f7),_0x4e82db(0x3c1)),showEffect(_0x4e82db(0x416),_0x4e82db(0x421)),applyEnemyMagicEffects(_0x4ce681),_0x4ce681;}function enemyHeal(){const _0x237cf9=_0x3ebdb0;if(enemyHealCount>=0x14){enemyAttack();return;}if(battleState[_0x237cf9(0x46d)][_0x237cf9(0x49f)])return;const _0x5da748=0x120*battleRounds;if(battleState[_0x237cf9(0x46d)][_0x237cf9(0x41f)]<_0x5da748){performEnemyPhysicalAttack(![]);return;}if(battleState[_0x237cf9(0x46d)][_0x237cf9(0x258)]){logBattleEvent(_0x237cf9(0x382),'#FFC8B4'),performEnemyPhysicalAttack(![]);return;}const _0x9fdcfd=Math['floor'](0x3*battleState[_0x237cf9(0x46d)]['magicAttack']*(Math[_0x237cf9(0x61a)]()*(1.2-0.8)+0.8));battleState[_0x237cf9(0x46d)]['health']=Math[_0x237cf9(0x296)](enemyMaxHealth,battleState['enemy']['health']+_0x9fdcfd),battleState[_0x237cf9(0x46d)][_0x237cf9(0x41f)]=Math[_0x237cf9(0x389)](0x0,battleState[_0x237cf9(0x46d)][_0x237cf9(0x41f)]-_0x5da748),enemyHealCount+=0x1,logBattleEvent('🔮【敌人治疗】妖怪施放魔王之力，恢复了\x20'+_0x9fdcfd+_0x237cf9(0x30c)+_0x5da748+_0x237cf9(0x2f7),_0x237cf9(0x282)),showEffect(_0x237cf9(0x25a),_0x237cf9(0x27c)),updateDamageValue(-_0x9fdcfd,![],_0x237cf9(0x2f1));if(battleState['enemy'][_0x237cf9(0x351)]){const _0x1800ba=Math['floor'](battleAttributes[_0x237cf9(0x5dc)]*battleRounds*(Math['random']()*(0.06-0.03)+0.03));battleState['enemy'][_0x237cf9(0x45e)]=Math[_0x237cf9(0x389)](0x0,battleState[_0x237cf9(0x46d)]['health']-_0x1800ba),logBattleEvent(_0x237cf9(0x203)+_0x1800ba+'\x20点生命值。',_0x237cf9(0x375)),updateDamageValue(_0x1800ba,![],_0x237cf9(0x5ff));}handleBurnt(),showEffect(_0x237cf9(0x416)),updateUI();}function enemyDefense(){const _0x593704=_0x3ebdb0;if(battleState[_0x593704(0x46d)]['sleep'])return;if(battleState[_0x593704(0x46d)]['defensing']){enemyAttack();return;}battleState['enemy'][_0x593704(0x544)]=!![];const _0xd3d820=battleState[_0x593704(0x46d)][_0x593704(0x54a)],_0x2a23a3=battleState['enemy'][_0x593704(0x34c)],_0x1d9165=Math[_0x593704(0x420)]((_0xd3d820+_0x2a23a3)*0.5);battleState['enemy'][_0x593704(0x54a)]+=_0x1d9165,battleState[_0x593704(0x46d)][_0x593704(0x34c)]+=_0x1d9165,setTimeout(()=>{const _0x203651=_0x593704;battleState[_0x203651(0x46d)][_0x203651(0x544)]=![],battleState[_0x203651(0x46d)]['physicalDefense']=_0xd3d820,battleState[_0x203651(0x46d)][_0x203651(0x34c)]=_0x2a23a3,updateUI();},0x7d0),logBattleEvent(_0x593704(0x3e6),_0x593704(0x24e)),showEffect(_0x593704(0x25a),_0x593704(0x51f));}function applyEnemyPhysicalEffects(_0x4dbc37){const _0x5befdd=_0x3ebdb0,_0x45a33f=[_0x5befdd(0x55d),'suppressed','taunt',_0x5befdd(0x291),_0x5befdd(0x374)],_0x347e8f=enemyPetCultivation-playerCultivation,_0x1980d2=_0x347e8f/0x2710*0.01,_0x3a28e9=[];_0x45a33f['forEach'](_0x4bde3c=>{const _0x5a5410=_0x5befdd,_0x443ea4=0.2,_0x3ba293=Math['max'](0.01,_0x443ea4+_0x1980d2),_0xb2adbc=Math['random']();if(battleState[_0x5a5410(0x3aa)][_0x4bde3c]){console[_0x5a5410(0x27a)](_0x5a5410(0x591)+_0x4bde3c+'\x20状态，无法叠加。');return;}_0xb2adbc<_0x3ba293&&_0x3a28e9[_0x5a5410(0x48f)](_0x4bde3c);});if(_0x3a28e9['length']>0x0){const _0x273b58=_0x3a28e9[Math[_0x5befdd(0x300)](Math[_0x5befdd(0x61a)]()*_0x3a28e9[_0x5befdd(0x545)])];switch(_0x273b58){case _0x5befdd(0x55d):!effectCooldowns['torn']&&handleTorn();break;case _0x5befdd(0x4ff):!effectCooldowns[_0x5befdd(0x4ff)]&&handleSuppressed();break;case _0x5befdd(0x60a):!battleState['player'][_0x5befdd(0x60a)]&&handleTaunt();break;case _0x5befdd(0x374):!battleState['player'][_0x5befdd(0x374)]&&handleSlaughter();break;case'seal':!battleState[_0x5befdd(0x3aa)][_0x5befdd(0x291)]&&handleSeal();break;}}}function applyEnemyMagicEffects(_0x423936){const _0x1e4294=_0x3ebdb0,_0x8f12fd=[_0x1e4294(0x461),_0x1e4294(0x5b6),_0x1e4294(0x58c),_0x1e4294(0x29a),'spellSlow'],_0x449fc6=enemyPetCultivation-playerCultivation,_0x466b97=_0x449fc6/0x2710*0.01,_0x31e44f=[];_0x8f12fd[_0x1e4294(0x32f)](_0x5420f2=>{const _0x5bd3cf=_0x1e4294,_0x39eb69=0.2,_0x1a4991=Math[_0x5bd3cf(0x389)](0.01,_0x39eb69+_0x466b97),_0xea8a17=Math[_0x5bd3cf(0x61a)]();_0xea8a17<_0x1a4991&&_0x31e44f[_0x5bd3cf(0x48f)](_0x5420f2);});if(_0x31e44f[_0x1e4294(0x545)]>0x0){const _0x3fc1a4=_0x31e44f[Math['floor'](Math['random']()*_0x31e44f['length'])];switch(_0x3fc1a4){case'drunken':!effectCooldowns[_0x1e4294(0x461)]&&(battleState['player']['drunken']=!![],logBattleEvent(_0x1e4294(0x491),_0x1e4294(0x4de)),showEffect(_0x1e4294(0x416),_0x1e4294(0x459)),effectCooldowns['drunken']=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x4d64ed=_0x1e4294;battleState[_0x4d64ed(0x3aa)][_0x4d64ed(0x461)]=![],effectCooldowns[_0x4d64ed(0x461)]=![],updatePlayerStatusDisplay();},0x1388));break;case _0x1e4294(0x5b6):!effectCooldowns['healingBan']&&(battleState[_0x1e4294(0x3aa)][_0x1e4294(0x5b6)]=!![],logBattleEvent(_0x1e4294(0x3a0),_0x1e4294(0x304)),showEffect('enemyEffect',_0x1e4294(0x459)),effectCooldowns[_0x1e4294(0x5b6)]=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x2989f7=_0x1e4294;battleState[_0x2989f7(0x3aa)][_0x2989f7(0x5b6)]=![],effectCooldowns[_0x2989f7(0x5b6)]=![],updatePlayerStatusDisplay();},0x1388));break;case _0x1e4294(0x58c):!effectCooldowns['soulCapture']&&handleSoulCapture();break;case'spellSlow':!effectCooldowns[_0x1e4294(0x225)]&&(battleState[_0x1e4294(0x3aa)][_0x1e4294(0x225)]=!![],showEffect('enemyEffect','https://pic.imgdb.cn/item/66742cffd9c307b7e931d5ee.gif'),effectCooldowns[_0x1e4294(0x225)]=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x36b675=_0x1e4294;battleState[_0x36b675(0x3aa)]['spellSlow']=![],effectCooldowns[_0x36b675(0x225)]=![],updatePlayerStatusDisplay();},0x1388));break;case _0x1e4294(0x29a):!effectCooldowns[_0x1e4294(0x29a)]&&(battleState[_0x1e4294(0x3aa)][_0x1e4294(0x29a)]=!![],logBattleEvent(_0x1e4294(0x214),_0x1e4294(0x30e)),showEffect(_0x1e4294(0x416),_0x1e4294(0x459)),effectCooldowns[_0x1e4294(0x29a)]=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x2c7481=_0x1e4294;battleState[_0x2c7481(0x3aa)]['blindfold']=![],effectCooldowns[_0x2c7481(0x29a)]=![],updatePlayerStatusDisplay();},0x1388));break;}}}function handleEnemySteal(_0x4e2d31,_0x442eb5){const _0x54ff42=_0x3ebdb0;if(_0x4e2d31<0.05&&Math[_0x54ff42(0x61a)]()<0.5&&drugInventory['延寿露']&&drugInventory[_0x54ff42(0x210)][_0x54ff42(0x36d)]>0x0){if(Math['random']()<0.8){const _0x4d29c0=Math[_0x54ff42(0x296)](0x1e8480,Math[_0x54ff42(0x300)](enemyMaxHealth*0.2));battleState[_0x54ff42(0x46d)][_0x54ff42(0x45e)]=Math['min'](enemyMaxHealth,battleState[_0x54ff42(0x46d)][_0x54ff42(0x45e)]+_0x4d29c0),drugInventory['延寿露'][_0x54ff42(0x36d)]-=0x1,logBattleEvent(_0x54ff42(0x2ef)+_0x4d29c0+_0x54ff42(0x61c),_0x54ff42(0x606)),updateDamageValue(-_0x4d29c0,![],'damage'),showEffect(_0x54ff42(0x416),'https://pic.imgdb.cn/item/66a250dfd9c307b7e97f96eb.png');}else logBattleEvent(_0x54ff42(0x292),_0x54ff42(0x606)),handleSlow();return!![];}else{if(_0x442eb5<0.05&&Math[_0x54ff42(0x61a)]()<0.5&&drugInventory[_0x54ff42(0x5c5)]&&drugInventory[_0x54ff42(0x5c5)]['quantity']>0x0){if(Math[_0x54ff42(0x61a)]()<0.8){const _0x20da1f=Math[_0x54ff42(0x296)](0x1e8480,Math['floor'](enemyMaxMana*0.2));battleState[_0x54ff42(0x46d)][_0x54ff42(0x41f)]=Math[_0x54ff42(0x296)](enemyMaxMana,battleState['enemy']['mana']+_0x20da1f),drugInventory[_0x54ff42(0x5c5)][_0x54ff42(0x36d)]-=0x1,logBattleEvent(_0x54ff42(0x3d5)+_0x20da1f+_0x54ff42(0x4d7),_0x54ff42(0x606)),showEffect(_0x54ff42(0x416),_0x54ff42(0x4b0));}else logBattleEvent(_0x54ff42(0x3e8),'#66CDAA'),handleSlow();return!![];}}return![];}function handleSlaughter(){const _0x2cffdd=_0x3ebdb0;if(battleState[_0x2cffdd(0x3aa)]['slaughter']){console[_0x2cffdd(0x27a)](_0x2cffdd(0x51c));return;}battleState[_0x2cffdd(0x3aa)][_0x2cffdd(0x374)]=!![],effectCooldowns[_0x2cffdd(0x374)]=!![],showEffect(_0x2cffdd(0x416),'https://pic.imgdb.cn/item/66a33f39d9c307b7e942c36c.gif'),updatePlayerStatusDisplay();const _0x4baf3e=setInterval(()=>{const _0x15ff6e=_0x2cffdd;if(!battleState['player']['slaughter']){clearInterval(_0x4baf3e);return;}const _0x27e0c2=playerCultivation-enemyPetCultivation;if(_0x27e0c2>0x0&&battleState[_0x15ff6e(0x46d)][_0x15ff6e(0x45e)]<=_0x27e0c2*0x96)battleState['enemy'][_0x15ff6e(0x45e)]=0x0,logBattleEvent(_0x15ff6e(0x21e)+battleState[_0x15ff6e(0x46d)][_0x15ff6e(0x45e)]+_0x15ff6e(0x440),'#FFDD55'),updateDamageValue(battleState['enemy'][_0x15ff6e(0x45e)],![],_0x15ff6e(0x2f1)),updateUI(),updatePlayerStatusDisplay();else _0x27e0c2<0x0&&battleAttributes[_0x15ff6e(0x45e)]<=Math[_0x15ff6e(0x310)](_0x27e0c2)&&(battleAttributes[_0x15ff6e(0x45e)]=0x0,logBattleEvent(_0x15ff6e(0x615)+battleAttributes[_0x15ff6e(0x45e)]+_0x15ff6e(0x440),_0x15ff6e(0x4ef)),updateDamageValue(battleState[_0x15ff6e(0x46d)]['health'],!![],'damage'),updateUI(),updatePlayerStatusDisplay());},0x1f4);if(battleAttributes[_0x2cffdd(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState['enemy']['health']<=0x0){showNextBattlePrompt(!![]);return;}}setTimeout(()=>{const _0x234ee1=_0x2cffdd;battleState[_0x234ee1(0x3aa)][_0x234ee1(0x374)]=![],effectCooldowns[_0x234ee1(0x374)]=![],enemyPhysicalAttackCount=0x0,clearInterval(_0x4baf3e),updatePlayerStatusDisplay();},0x2710);}function handleShocked(){const _0x366056=_0x3ebdb0;battleState[_0x366056(0x3aa)]['shocked']&&(battleAttributes['physicalDefense']=Math[_0x366056(0x389)](0x0,Math[_0x366056(0x300)](battleAttributes[_0x366056(0x54a)]*0.8)),battleAttributes[_0x366056(0x34c)]=Math[_0x366056(0x389)](0x0,Math[_0x366056(0x300)](battleAttributes[_0x366056(0x54a)]*0.8)));}function handleSeal(){const _0x15d358=_0x3ebdb0;if(battleState[_0x15d358(0x3aa)][_0x15d358(0x291)])return;battleState[_0x15d358(0x3aa)]['seal']=!![],battleState['player'][_0x15d358(0x350)]=ascensionSkill[_0x15d358(0x621)],battleState[_0x15d358(0x3aa)][_0x15d358(0x36f)]=secondAscensionSkill['name'],ascensionSkill[_0x15d358(0x621)]=_0x15d358(0x559),secondAscensionSkill['name']=_0x15d358(0x559),updateAscensionDisplay(),updateSecondAscensionDisplay(),logBattleEvent('远古魔神的低吟充满离散心智的声量，令你短暂被封印了飞升技能带来的战斗增益。','aqua'),setTimeout(()=>{const _0x24e59e=_0x15d358;battleState[_0x24e59e(0x3aa)]['seal']=![],ascensionSkill[_0x24e59e(0x621)]=battleState['player']['originalAscensionSkill'],secondAscensionSkill['name']=battleState[_0x24e59e(0x3aa)][_0x24e59e(0x36f)],logBattleEvent('封印解除，飞升技能可以发挥作用了。',_0x24e59e(0x282)),updateAscensionDisplay(),updateSecondAscensionDisplay(),updateUI();},0x2710);}function handleTorn(){const _0x32d0c0=_0x3ebdb0;battleState[_0x32d0c0(0x3aa)]['torn']=!![],showEffect('enemyEffect','https://pic.imgdb.cn/item/669c8a9ed9c307b7e94f5766.gif'),effectCooldowns[_0x32d0c0(0x55d)]=!![],updatePlayerStatusDisplay();const _0x51e258=setInterval(()=>{const _0x1350c6=_0x32d0c0;if(!battleState[_0x1350c6(0x3aa)][_0x1350c6(0x55d)]){clearInterval(_0x51e258);return;}const _0x2df6b1=Math[_0x1350c6(0x300)](battleState[_0x1350c6(0x46d)]['physicalAttack']*0.1);battleAttributes[_0x1350c6(0x45e)]=Math[_0x1350c6(0x389)](0x0,battleAttributes[_0x1350c6(0x45e)]-_0x2df6b1),updateDamageValue(_0x2df6b1,!![],_0x1350c6(0x5ff)),updateUI(),updatePlayerStatusDisplay();},0x1f4);if(battleAttributes[_0x32d0c0(0x45e)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState['enemy'][_0x32d0c0(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}}setTimeout(()=>{const _0xe62830=_0x32d0c0;battleState['player'][_0xe62830(0x55d)]=![],effectCooldowns[_0xe62830(0x55d)]=![],clearInterval(_0x51e258),updatePlayerStatusDisplay();},0x2710);}const suppressionState={'actionPerformed':![],'timeoutId':null};function handleSuppressed(){const _0x56825e=_0x3ebdb0;if(battleState[_0x56825e(0x3aa)]['suppressed'])return;battleState[_0x56825e(0x3aa)][_0x56825e(0x4ff)]=!![],logBattleEvent(_0x56825e(0x3af),_0x56825e(0x58f)),showEffect(_0x56825e(0x416),_0x56825e(0x2d4)),effectCooldowns[_0x56825e(0x4ff)]=!![],updatePlayerStatusDisplay(),suppressionState['actionPerformed']=![];const _0x22b894=performPhysicalAttack,_0x419431=performMagicalAttack,_0x59e390=performHeal,_0x46d8ef=performPoison,_0x2309ea=performDefense,_0x56e6b2=_0x1e4384=>{return function(..._0x4ed513){const _0x4a1f0c=_0xdc19;return suppressionState['actionPerformed']=!![],_0x1e4384[_0x4a1f0c(0x313)](this,_0x4ed513);};};performPhysicalAttack=_0x56e6b2(performPhysicalAttack),performMagicalAttack=_0x56e6b2(performMagicalAttack),performHeal=_0x56e6b2(performHeal),performPoison=_0x56e6b2(performPoison),performDefense=_0x56e6b2(performDefense),suppressionState[_0x56825e(0x2e2)]=setTimeout(()=>{cleanSuppressed();},0xbb8);}let tauntTimeout;function handleTaunt(){const _0x285662=_0x3ebdb0;if(battleState[_0x285662(0x3aa)][_0x285662(0x60a)]){logBattleEvent('你已经被嘲讽,不能使用其他技能。',_0x285662(0x58f));return;}clearTimeout(tauntTimeout),battleState[_0x285662(0x3aa)][_0x285662(0x60a)]=!![],logBattleEvent(_0x285662(0x3b4),_0x285662(0x58f)),showEffect(_0x285662(0x416),_0x285662(0x2d4)),effectCooldowns['taunt']=!![],updatePlayerStatusDisplay(),updateUI(),tauntTimeout=setTimeout(()=>{const _0x2ded02=_0x285662;battleState[_0x2ded02(0x3aa)][_0x2ded02(0x60a)]=![],effectCooldowns[_0x2ded02(0x60a)]=![],updatePlayerStatusDisplay(),updateUI();},0x2710);}function handleHealingBan(_0x28f693){const _0x1c9667=_0x3ebdb0;if(battleState['player'][_0x1c9667(0x5b6)])return 0x0;let _0x303cc1=Math[_0x1c9667(0x300)](0x3*battleAttributes[_0x1c9667(0x5dc)]*(Math['random']()*(0.12-0.08)+0.08)*_0x28f693),_0x2ca8a1;const _0x2b4540=applyWuxingEffects();if(_0x2b4540[_0x1c9667(0x4c7)]&&_0x2b4540[_0x1c9667(0x4c7)]>0x0){const _0x21851a=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x2b4540[_0x1c9667(0x4c7)]],_0x3e234c=Math[_0x1c9667(0x300)](_0x303cc1*_0x21851a);_0x303cc1=Math[_0x1c9667(0x300)](_0x303cc1*(0x1+_0x21851a)),logBattleEvent(_0x1c9667(0x2ee)+_0x3e234c+'。','aqua');}return _0x303cc1;}function handleSoulCapture(){const _0x21d857=_0x3ebdb0;if(battleState[_0x21d857(0x3aa)][_0x21d857(0x58c)])return;battleState[_0x21d857(0x3aa)][_0x21d857(0x58c)]=!![],battleAttributes[_0x21d857(0x2f3)]*=0.5,battleAttributes[_0x21d857(0x5dc)]*=0.5,logBattleEvent('你受到了摄魂效果，攻击力大幅下降。',_0x21d857(0x304)),showEffect(_0x21d857(0x416),_0x21d857(0x459)),updatePlayerStatusDisplay(),setTimeout(()=>{const _0x37769c=_0x21d857;battleState['player'][_0x37769c(0x58c)]=![],battleAttributes[_0x37769c(0x2f3)]=battleState[_0x37769c(0x3aa)][_0x37769c(0x2f3)],battleAttributes['magicAttack']=battleState[_0x37769c(0x3aa)]['magicAttack'],updateUI(),updatePlayerStatusDisplay();},0x1388);}function handleDrunken(_0x3ce166){const _0xa95ab9=_0x3ebdb0;if(battleState[_0xa95ab9(0x3aa)][_0xa95ab9(0x461)]&&_0x3ce166>0x0){const _0x9526cc=Math['floor'](_0x3ce166*0.05);battleAttributes[_0xa95ab9(0x45e)]=Math[_0xa95ab9(0x389)](0x0,battleAttributes[_0xa95ab9(0x45e)]-_0x9526cc),logBattleEvent('⚔️【敌人反弹】醉酒状态下，你招式过猛误伤自身，受到\x20'+_0x9526cc+_0xa95ab9(0x5e0),_0xa95ab9(0x4de)),updateDamageValue(_0x9526cc,!![],_0xa95ab9(0x5ff));}}let enemyRivival=![],enemyRivivalCount=0x0;function handleRampaged(){const _0x156a93=_0x3ebdb0;console[_0x156a93(0x27a)](_0x156a93(0x40c)+battleRounds+_0x156a93(0x215)+battleState['enemy']['health']+_0x156a93(0x27f)+enemyMaxHealth);if(summonEnemy)return;enemyRivival&&(enemyRivival=![]);if(battleRounds===0x96)enemyCritRate=0x1,enemyCritDamage=3.5,battleState[_0x156a93(0x46d)][_0x156a93(0x340)]=!![],changeEnemyImage(_0x156a93(0x4dc)),setBackgroundImage('https://pic.imgdb.cn/item/66bc6806d9c307b7e987b921.webp'),console[_0x156a93(0x27a)](_0x156a93(0x3e5));else{if(battleRounds>0x96&&battleRounds%0xa===0x0)enemyCritRate=0x1,enemyCritDamage=3.5,battleState[_0x156a93(0x46d)][_0x156a93(0x340)]=!![],changeEnemyImage('darkShape'),setBackgroundImage(_0x156a93(0x3e4)),console[_0x156a93(0x27a)](_0x156a93(0x3e5));else battleRounds<=0x96&&battleRounds%0xa===0x0?(enemyCritRate=0x1,enemyCritDamage=2.5,battleState[_0x156a93(0x46d)][_0x156a93(0x340)]=!![],changeEnemyImage(_0x156a93(0x340)),setBackgroundImage(_0x156a93(0x5bf)),console['log'](_0x156a93(0x3e5))):(battleState[_0x156a93(0x46d)][_0x156a93(0x340)]=![],changeEnemyImage(battleRounds>0x96?_0x156a93(0x59e):'default'),setBackgroundImage(battleRounds>0x96?_0x156a93(0x4b5):'https://pic.imgdb.cn/item/66bc6806d9c307b7e987b92d.webp'),console[_0x156a93(0x27a)]('Enemy\x20is\x20not\x20rampaged.'));}battleState[_0x156a93(0x46d)][_0x156a93(0x340)]&&battleState[_0x156a93(0x46d)][_0x156a93(0x45e)]<enemyMaxHealth*0.2&&enemyRivivalCount<=(battleRounds===0x96?0x3:0x1)&&(enemyRivivalCount+=0x1,logBattleEvent('妖怪的生命力正在复苏，请在2秒内击杀它，否则它将复活！','red'),enemyRivival=!![],console[_0x156a93(0x27a)]('Revival\x20triggered.\x20revivalCount:\x20'+enemyRivivalCount),setTimeout(()=>{const _0x3ae39e=_0x156a93;enemyRivival&&battleState[_0x3ae39e(0x46d)][_0x3ae39e(0x45e)]<enemyMaxHealth*0.2&&(battleState[_0x3ae39e(0x46d)][_0x3ae39e(0x45e)]=enemyMaxHealth,logBattleEvent(_0x3ae39e(0x2ac),_0x3ae39e(0x24a)),updateDamageValue(-enemyMaxHealth,![],_0x3ae39e(0x2f1)),enemyRivival=![],updateUI(),console[_0x3ae39e(0x27a)](_0x3ae39e(0x59b)));},0x7d0));}function useDrug(){const _0x3a7e5f=_0x3ebdb0;!alreadyUseDrug&&(showInfoBox(_0x3a7e5f(0x52a)),alreadyUseDrug=!![]);if(battleState[_0x3a7e5f(0x3aa)][_0x3a7e5f(0x60a)]){performAttack(_0x3a7e5f(0x3f0));return;}document[_0x3a7e5f(0x43e)](_0x3a7e5f(0x314))[_0x3a7e5f(0x604)][_0x3a7e5f(0x569)]='block',updateDrugGrid();}function updateDrugGrid(){const _0x521b02=_0x3ebdb0,_0x17f0ab=document[_0x521b02(0x43e)](_0x521b02(0x566));_0x17f0ab[_0x521b02(0x3de)]='';for(let _0x20bd62 in drugInventory){if(drugInventory[_0x20bd62][_0x521b02(0x36d)]>0x0){const _0x3225a8=document['createElement'](_0x521b02(0x463));_0x3225a8[_0x521b02(0x600)]=_0x521b02(0x353),_0x3225a8[_0x521b02(0x3de)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+drugInventory[_0x20bd62][_0x521b02(0x460)]+_0x521b02(0x295)+_0x20bd62+_0x521b02(0x34b)+_0x20bd62+'\x20<span>'+drugInventory[_0x20bd62]['quantity']+_0x521b02(0x4b3),_0x3225a8[_0x521b02(0x245)]=()=>selectDrug(_0x20bd62),_0x17f0ab[_0x521b02(0x2b2)](_0x3225a8);}}if(selectedDrug){const _0x1eeafa=Array[_0x521b02(0x2bc)](_0x17f0ab[_0x521b02(0x24f)](_0x521b02(0x353)))[_0x521b02(0x397)](_0x2d39bd=>_0x2d39bd['querySelector'](_0x521b02(0x463))['innerText'][_0x521b02(0x424)](selectedDrug));_0x1eeafa&&(_0x1eeafa[_0x521b02(0x604)][_0x521b02(0x401)]='2px\x20solid\x20white',_0x1eeafa['style'][_0x521b02(0x4b7)]=_0x521b02(0x4f3),_0x1eeafa[_0x521b02(0x604)][_0x521b02(0x207)]='5px');}}function addDrugToInventory(_0x27da87,_0x343130=0x1){const _0x461237=_0x3ebdb0;drugInventory[_0x27da87]?drugInventory[_0x27da87][_0x461237(0x36d)]+=_0x343130:drugInventory[_0x27da87]={'quantity':_0x343130,'url':_0x461237(0x603),'tier':0x0,'description':_0x461237(0x5b2)},updateDrugGrid(),console['log'](_0x27da87+_0x461237(0x26c)+drugInventory[_0x27da87][_0x461237(0x36d)]);}function closeDrugModal(){const _0x1697d5=_0x3ebdb0;document[_0x1697d5(0x43e)](_0x1697d5(0x314))[_0x1697d5(0x604)][_0x1697d5(0x569)]=_0x1697d5(0x30b),selectedDrug=null,document['getElementById'](_0x1697d5(0x507))[_0x1697d5(0x331)]='选中药品后可直接使用，低品阶药品可合成更高品阶的药品。采集会花费金子，采集所得的原始药材只能用于合成。战斗精灵成长后，每次战斗胜利会有额外的掉落奖励。';}function selectDrug(_0x1c0193){const _0x13e143=_0x3ebdb0,_0x47e050=document['getElementById'](_0x13e143(0x507));selectedDrug=_0x1c0193,_0x47e050&&(_0x47e050[_0x13e143(0x331)]=drugInventory[_0x1c0193]['description']),updateDrugGrid();}function useSelectedDrug(){const _0x1ba4de=_0x3ebdb0;if(!selectedDrug){showInfoBox('请选择一种药品！');return;}if(activeBuffs[selectedDrug]){showInfoBox(selectedDrug+'效果尚在冷却中，无法叠加使用。');return;}if(checkConflictingBuffs(selectedDrug))return;const _0x2e2946=drugInventory[selectedDrug];if(_0x2e2946[_0x1ba4de(0x36d)]>0x0){_0x2e2946['quantity']-=0x1,updateDrugGrid();switch(selectedDrug){case'长生泉':tempBonus[_0x1ba4de(0x45e)]+=0x3e8,updatePetInfo(),logBattleEvent('使用长生泉，你如获新生。',_0x1ba4de(0x4a4));break;case _0x1ba4de(0x4b2):const _0xc428d2=0x3*0x3e8,_0x2abd85=1.5*0x3e8,_0x1d8a11=Math['floor'](maxMana*0.01);let _0x580348=0x0;const _0x37498c=setInterval(()=>{const _0x3bdef5=_0x1ba4de;_0x580348>=_0xc428d2?clearInterval(_0x37498c):(battleAttributes[_0x3bdef5(0x41f)]=Math[_0x3bdef5(0x296)](maxMana,battleAttributes[_0x3bdef5(0x41f)]+_0x1d8a11),logBattleEvent(_0x3bdef5(0x546)+_0x1d8a11+'点。',_0x3bdef5(0x4a4)),updateUI(),_0x580348+=_0x2abd85);},_0x2abd85);break;case _0x1ba4de(0x254):const _0x45c28c=0x3*0x3e8,_0x364941=1.5*0x3e8,_0xb0b5ea=Math[_0x1ba4de(0x300)](maxHealth*0.02);let _0x6d03f9=0x0;const _0x4ed171=setInterval(()=>{const _0x44f35e=_0x1ba4de;_0x6d03f9>=_0x45c28c?clearInterval(_0x4ed171):(battleAttributes[_0x44f35e(0x45e)]=Math[_0x44f35e(0x296)](maxHealth,battleAttributes[_0x44f35e(0x45e)]+_0xb0b5ea),updateDamageValue(-_0xb0b5ea,!![],_0x44f35e(0x2f1)),updateUI(),_0x6d03f9+=_0x364941);},_0x364941);break;case _0x1ba4de(0x247):const _0x385147=document[_0x1ba4de(0x43e)]('skills-area'),_0x18637b=Array['from'](_0x385147[_0x1ba4de(0x4b9)])[_0x1ba4de(0x4be)](_0x277fc8=>{const _0x4d23f4=_0x1ba4de,_0x47e525=_0x277fc8[_0x4d23f4(0x331)][_0x4d23f4(0x552)]('\x20')[0x0],_0x135459=currentPet[_0x4d23f4(0x5ca)][_0x4d23f4(0x397)](_0x555258=>_0x555258[_0x4d23f4(0x621)]===_0x47e525);return _0x135459;})['filter'](_0x51072b=>_0x51072b[_0x1ba4de(0x1f2)]<0x18&&_0x51072b!==null&&!_0x51072b[_0x1ba4de(0x2cb)]);if(_0x18637b[_0x1ba4de(0x545)]===0x0){showInfoBox(_0x1ba4de(0x613));break;}let _0x3945c6=_0x18637b[Math[_0x1ba4de(0x300)](Math['random']()*_0x18637b[_0x1ba4de(0x545)])];const _0x21e9f9=(_0x3945c6[_0x1ba4de(0x1f2)]+0x1)*0x2710;currentExp>=_0x21e9f9?(currentExp-=_0x21e9f9,_0x3945c6[_0x1ba4de(0x1f2)]>=0x18&&(_0x3945c6=_0x18637b[_0x1ba4de(0x397)](_0x21a5e9=>_0x21a5e9[_0x1ba4de(0x1f2)]<0x18)),_0x3945c6&&Math[_0x1ba4de(0x61a)]()<0.4?(_0x3945c6['level']+=0x1,showInfoBox(_0x1ba4de(0x5ab)+_0x21e9f9+'点经验值，将'+_0x3945c6[_0x1ba4de(0x621)]+'\x20成功升至\x20'+_0x3945c6[_0x1ba4de(0x1f2)]+_0x1ba4de(0x53e))):showInfoBox(_0x1ba4de(0x5ab)+_0x21e9f9+'点经验值，升级技能失败！'),updateExpBar(currentExp,maxExp),updateUI()):(addDrugToInventory(_0x1ba4de(0x247),0x1),showInfoBox(_0x1ba4de(0x527)));break;case _0x1ba4de(0x5b4):if(Math['random']()<0.1&&battleRounds>0xa){const _0x572a4f=battleRounds-0xa;initializeEnemyPet(),battleRounds=_0x572a4f,updateEnemyAttributes(),logBattleEvent(_0x1ba4de(0x3f7),'gold');}else Math[_0x1ba4de(0x61a)]()<0.8?(gainExp(0xc350),logBattleEvent(_0x1ba4de(0x309),_0x1ba4de(0x4a4))):(battleState['enemy'][_0x1ba4de(0x45e)]=0x1,logBattleEvent('使用幸运金币，怪物血量变为1。',_0x1ba4de(0x4a4)));updateUI(),updateExpBar(currentExp,maxExp);break;case _0x1ba4de(0x4f7):applyTimedBuff(selectedDrug,()=>{const _0x228319=_0x1ba4de;return battleState[_0x228319(0x3aa)]['expMultiplier']=0x2,logBattleEvent('使用双倍经验药，60秒内战斗获胜所得经验变成两倍。',_0x228319(0x4a4)),()=>{const _0x1b3dd7=_0x228319;battleState[_0x1b3dd7(0x3aa)][_0x1b3dd7(0x5d6)]=0x1,logBattleEvent(_0x1b3dd7(0x2d9),_0x1b3dd7(0x24a));};},0xea60);break;case _0x1ba4de(0x492):applyTimedBuff(selectedDrug,()=>{const _0x421777=_0x1ba4de;return battleState['player'][_0x421777(0x5d6)]=0x4,logBattleEvent(_0x421777(0x335),_0x421777(0x4a4)),()=>{const _0xae6db4=_0x421777;battleState[_0xae6db4(0x3aa)][_0xae6db4(0x5d6)]=0x1,logBattleEvent(_0xae6db4(0x229),_0xae6db4(0x24a));};},0xea60);break;case _0x1ba4de(0x445):case'神力仙丹':case'狂暴印记':case _0x1ba4de(0x4d8):case'沉檀凝香':case _0x1ba4de(0x5bd):if(!activeBuffs[selectedDrug])applyBuff(selectedDrug);else{showInfoBox(selectedDrug+_0x1ba4de(0x458));return;}break;case'见手青':handleMushroom();break;case _0x1ba4de(0x38b):playerCritRate=Math['min'](0x1,playerCritRate+0.01),logBattleEvent('使用狂暴之魂，暴击率永久提高1%。','gold');break;case _0x1ba4de(0x564):playerCritDamage=Math['min'](0x1e,playerCritDamage+0.01),logBattleEvent(_0x1ba4de(0x54e),_0x1ba4de(0x4a4));break;case _0x1ba4de(0x210):battleAttributes[_0x1ba4de(0x45e)]=Math[_0x1ba4de(0x296)](maxHealth,battleAttributes[_0x1ba4de(0x45e)]+Math[_0x1ba4de(0x300)](maxHealth*0.2)),updateDamageValue(-Math[_0x1ba4de(0x300)](maxHealth*0.2),!![],_0x1ba4de(0x2f1)),logBattleEvent(_0x1ba4de(0x370)+Math[_0x1ba4de(0x300)](maxHealth*0.2)+_0x1ba4de(0x593),_0x1ba4de(0x4a4));break;case _0x1ba4de(0x5c5):battleAttributes[_0x1ba4de(0x41f)]=Math['min'](maxMana,battleAttributes[_0x1ba4de(0x41f)]+Math[_0x1ba4de(0x300)](maxMana*0.2)),logBattleEvent(_0x1ba4de(0x4d9)+Math[_0x1ba4de(0x300)](maxMana*0.2)+_0x1ba4de(0x2f7),_0x1ba4de(0x4a4));break;case _0x1ba4de(0x414):battleAttributes[_0x1ba4de(0x45e)]=Math[_0x1ba4de(0x296)](maxHealth,battleAttributes[_0x1ba4de(0x45e)]+0x3e8),updateDamageValue(-(battleAttributes['health']+0x3e8),!![],_0x1ba4de(0x2f1)),battleAttributes['mana']=Math[_0x1ba4de(0x296)](maxMana,battleAttributes[_0x1ba4de(0x41f)]+0x3e8);break;case'上等药材':tempBonus[_0x1ba4de(0x521)]+=0x14;break;case'极品药材':tempBonus['health']+=0x32,tempBonus['mana']+=0x32;break;case _0x1ba4de(0x48c):tempBonus['physicalDefense']+=0x23,tempBonus[_0x1ba4de(0x34c)]+=0x23;break;case _0x1ba4de(0x36c):tempBonus[_0x1ba4de(0x2f3)]+=0xf,tempBonus['magicAttack']+=0xf;break;case _0x1ba4de(0x614):tempBonus[_0x1ba4de(0x45e)]+=0x12c;break;case _0x1ba4de(0x563):tempBonus[_0x1ba4de(0x41f)]+=0x12c;break;}updateUI();}else showInfoBox(_0x1ba4de(0x620),_0x1ba4de(0x24a));}function checkConflictingBuffs(_0x2e76e8){const _0x3c11a1=_0x3ebdb0,_0x3ee1e5=[_0x3c11a1(0x5cd),_0x3c11a1(0x503),_0x3c11a1(0x5bd)];if(_0x3ee1e5[_0x3c11a1(0x323)](_0x2e76e8))for(const _0x49ab80 of _0x3ee1e5){if(activeBuffs[_0x49ab80])return showInfoBox(_0x3c11a1(0x568)),!![];}return![];}function applyBuff(_0x4f2c17){const _0x2f6f9d=_0x3ebdb0;switch(_0x4f2c17){case _0x2f6f9d(0x445):applyTimedBuff(_0x4f2c17,()=>{const _0x4b0f1e=_0x2f6f9d,_0x660635=battleAttributes['physicalAttack'];return battleAttributes[_0x4b0f1e(0x2f3)]=Math[_0x4b0f1e(0x300)](battleAttributes[_0x4b0f1e(0x2f3)]*1.5),logBattleEvent('使用武尊秘露，物理攻击力提升150%，持续20秒。',_0x4b0f1e(0x4a4)),()=>{const _0x2bda57=_0x4b0f1e;battleAttributes[_0x2bda57(0x2f3)]=_0x660635,logBattleEvent(_0x2bda57(0x4a2),_0x2bda57(0x24a));};},0x4e20);break;case _0x2f6f9d(0x5cd):applyTimedBuff(_0x4f2c17,()=>{const _0xfa240=_0x2f6f9d;return battleState[_0xfa240(0x3aa)][_0xfa240(0x345)]=Math[_0xfa240(0x296)](0x1e,playerCritDamage+0.5),logBattleEvent(_0xfa240(0x498),_0xfa240(0x4a4)),()=>{const _0x2aa7fa=_0xfa240;battleState[_0x2aa7fa(0x3aa)][_0x2aa7fa(0x345)]=playerCritDamage-0.5,logBattleEvent('神力仙丹冷却结束。',_0x2aa7fa(0x24a));};},0x4e20);break;case _0x2f6f9d(0x503):applyTimedBuff(_0x4f2c17,()=>{const _0x4a918d=_0x2f6f9d;return battleState[_0x4a918d(0x3aa)][_0x4a918d(0x2e5)]=Math['min'](0xa,playerCritRate+0.5),logBattleEvent('使用狂暴印记，暴击率提高50%，持续20秒。','gold'),()=>{const _0x1d1119=_0x4a918d;battleState[_0x1d1119(0x3aa)][_0x1d1119(0x2e5)]=playerCritRate-0.5,logBattleEvent(_0x1d1119(0x2f5),_0x1d1119(0x24a));};},0x4e20);break;case _0x2f6f9d(0x4d8):applyTimedBuff(_0x4f2c17,()=>{const _0x183f59=enemyCritRate;return enemyCritRate=0x0,logBattleEvent('使用化功散，妖怪暴击率降低至0%，持续30秒。','gold'),()=>{const _0x2185b0=_0xdc19;enemyCritRate=_0x183f59,logBattleEvent(_0x2185b0(0x330),_0x2185b0(0x24a));};},0x7530);break;case _0x2f6f9d(0x37c):const _0x3f8580=Math[_0x2f6f9d(0x300)](maxHealth*0.1);battleAttributes[_0x2f6f9d(0x45e)]=Math[_0x2f6f9d(0x296)](maxHealth,battleAttributes['health']+_0x3f8580),logBattleEvent(_0x2f6f9d(0x2c3)+_0x3f8580+_0x2f6f9d(0x593),_0x2f6f9d(0x4a4));Math[_0x2f6f9d(0x61a)]()<0.8?(clearEnemyEffect(),logBattleEvent('沉檀凝香生效，清除了异常状态。',_0x2f6f9d(0x4a4))):logBattleEvent(_0x2f6f9d(0x3c7),_0x2f6f9d(0x24a));break;case'焚灵之丸':battleAttributes[_0x2f6f9d(0x45e)]>=maxHealth*0.2?applyTimedBuff(_0x4f2c17,()=>{const _0x3ccb9c=_0x2f6f9d,_0x58290e=battleAttributes[_0x3ccb9c(0x2f3)],_0x5eebe7=battleAttributes[_0x3ccb9c(0x5dc)];return battleAttributes[_0x3ccb9c(0x45e)]-=Math['floor'](maxHealth*0.2),battleAttributes[_0x3ccb9c(0x2f3)]=Math[_0x3ccb9c(0x300)](battleAttributes[_0x3ccb9c(0x2f3)]*1.5),battleAttributes['magicAttack']=Math['floor'](battleAttributes[_0x3ccb9c(0x5dc)]*1.5),battleState[_0x3ccb9c(0x3aa)]['critRate']=Math['min'](0xa,playerCritRate+0.5),battleState[_0x3ccb9c(0x3aa)]['critDamage']=Math[_0x3ccb9c(0x296)](0x1e,playerCritDamage+0.5),logBattleEvent(_0x3ccb9c(0x4ac),_0x3ccb9c(0x4a4)),()=>{const _0x5cf8a6=_0x3ccb9c;battleAttributes[_0x5cf8a6(0x2f3)]=_0x58290e,battleAttributes['magicAttack']=_0x5eebe7,battleState[_0x5cf8a6(0x3aa)][_0x5cf8a6(0x2e5)]-=0.5,battleState['player'][_0x5cf8a6(0x345)]-=0.5,logBattleEvent(_0x5cf8a6(0x49a),_0x5cf8a6(0x24a));};},0x4e20):showInfoBox(_0x2f6f9d(0x21b));break;}}function applyTimedBuff(_0x5598f4,_0x15e34c,_0x379e19){if(activeBuffs[_0x5598f4])return;const _0x1f9664=_0x15e34c();activeBuffs[_0x5598f4]=setTimeout(()=>{_0x1f9664(),delete activeBuffs[_0x5598f4],updateUI();},_0x379e19);}function applyDrugBonus0(_0x4283ce,_0x3d4bdb){const _0x484b2d=_0x3ebdb0;if(!battleState||!battleState['player']){console[_0x484b2d(0x1f6)]('Battle\x20state\x20or\x20player\x20state\x20is\x20not\x20initialized');return;}if(drugBonus0[_0x484b2d(0x29e)](_0x4283ce))drugBonus0[_0x4283ce]+=_0x3d4bdb;else{console[_0x484b2d(0x1f6)]('Invalid\x20drug\x20type');return;}battleState['player'][_0x484b2d(0x29e)](_0x4283ce)?battleState[_0x484b2d(0x3aa)][_0x4283ce]+=_0x3d4bdb:console[_0x484b2d(0x1f6)](_0x484b2d(0x59f));if(_0x4283ce==='health')maxHealth=battleState[_0x484b2d(0x3aa)][_0x484b2d(0x45e)];else _0x4283ce===_0x484b2d(0x41f)&&(maxMana=battleState[_0x484b2d(0x3aa)]['mana']);['physicalAttack','physicalDefense','magicAttack',_0x484b2d(0x34c),_0x484b2d(0x521)]['includes'](_0x4283ce)&&updatePetInfo();const _0x80a3b8={'health':'生命值','mana':_0x484b2d(0x5a4),'physicalAttack':'物理攻击力','physicalDefense':_0x484b2d(0x468),'magicAttack':_0x484b2d(0x3d2),'magicDefense':_0x484b2d(0x5eb),'speed':'速度'};logBattleEvent(_0x484b2d(0x262)+_0x3d4bdb+'\x20点'+_0x80a3b8[_0x4283ce]+'。',_0x484b2d(0x4a4)),updateUI();}function collectDrug(){const _0x27c731=_0x3ebdb0;if(goldAmount<collectCost){showInfoBox(_0x27c731(0x5e7));return;}goldAmount-=collectCost,updateGoldDisplay(goldAmount),collectCost+=0x64;const _0x44b955=Math[_0x27c731(0x61a)]()*0x64;let _0x611db9;if(_0x44b955<0x32)_0x611db9=_0x27c731(0x414),drugInventory[_0x27c731(0x414)]['quantity']+=0x1;else{if(_0x44b955<0x50)_0x611db9=_0x27c731(0x5f8),drugInventory[_0x27c731(0x5f8)][_0x27c731(0x36d)]+=0x1;else{if(_0x44b955<0x5f)_0x611db9=_0x27c731(0x3d4),drugInventory[_0x27c731(0x3d4)][_0x27c731(0x36d)]+=0x1;else _0x44b955<0x62?(_0x611db9='珍贵药材',drugInventory[_0x27c731(0x48c)][_0x27c731(0x36d)]+=0x1):(_0x611db9=_0x27c731(0x36c),drugInventory['完美药材'][_0x27c731(0x36d)]+=0x1,addItemToJinnang(_0x27c731(0x5a3),0x1),showInfoBox(_0x27c731(0x47f)));}}const _0x1a7679=Math[_0x27c731(0x61a)]()*0x64;let _0x51b911=0x1;if(_0x1a7679<0x1)_0x51b911=0x3;else _0x1a7679<0x3&&(_0x51b911=0x2);_0x51b911>0x1?(drugInventory[_0x611db9]['quantity']+=_0x51b911-0x1,document['getElementById'](_0x27c731(0x507))[_0x27c731(0x331)]=_0x27c731(0x4c0)+convertPrice(collectCost-0x64)+_0x27c731(0x23c)+_0x51b911+'个'+_0x611db9+'！'):document[_0x27c731(0x43e)](_0x27c731(0x507))[_0x27c731(0x331)]=_0x27c731(0x4c0)+convertPrice(collectCost-0x64)+_0x27c731(0x37f)+_0x611db9+'！',updateDrugGrid();}function mergeDrug(){const _0x432c44=_0x3ebdb0;if(!selectedDrug){showInfoBox(_0x432c44(0x256));return;}const _0xc340aa=drugInventory[selectedDrug],_0x1236d2=_0xc340aa[_0x432c44(0x627)];if(_0x1236d2===0x0){const _0x36ea0e=0x3;if(_0xc340aa['quantity']<_0x36ea0e){showInfoBox(_0x432c44(0x44a));return;}_0xc340aa['quantity']-=_0x36ea0e;const _0x544747=Math[_0x432c44(0x61a)]();let _0x136dc6='';if(_0x544747<0.1)_0x136dc6=_0x432c44(0x2e3)+selectedDrug+_0x432c44(0x57f);else{if(_0x544747<0.2)drugInventory[selectedDrug][_0x432c44(0x36d)]+=0x1,_0x136dc6='你使用3个'+selectedDrug+'进行炼制，但只得到了1个'+selectedDrug;else{if(_0x544747<0.5){const _0x55aee9=Object[_0x432c44(0x28b)](drugInventory)['filter'](_0x2882fa=>drugInventory[_0x2882fa]['tier']===0x1),_0x383528=[];for(let _0x3aef91=0x0;_0x3aef91<0x3;_0x3aef91++){const _0x1cfd0d=_0x55aee9[Math['floor'](Math[_0x432c44(0x61a)]()*_0x55aee9[_0x432c44(0x545)])];drugInventory[_0x1cfd0d][_0x432c44(0x36d)]+=0x1,_0x383528[_0x432c44(0x48f)](_0x1cfd0d);}_0x136dc6=_0x432c44(0x2e3)+selectedDrug+'成功炼制出了3个随机紫色品阶药品：'+_0x383528[_0x432c44(0x46b)](',\x20');}else{const _0x5e9f46=Object[_0x432c44(0x28b)](drugInventory)[_0x432c44(0x4b6)](_0x251d06=>drugInventory[_0x251d06][_0x432c44(0x627)]===0x0),_0x26eaa6=[];for(let _0x522a40=0x0;_0x522a40<0x2;_0x522a40++){const _0x48c624=_0x5e9f46[Math['floor'](Math[_0x432c44(0x61a)]()*_0x5e9f46[_0x432c44(0x545)])];drugInventory[_0x48c624][_0x432c44(0x36d)]+=0x1,_0x26eaa6[_0x432c44(0x48f)](_0x48c624);}_0x136dc6=_0x432c44(0x2e3)+selectedDrug+_0x432c44(0x449)+_0x26eaa6['join'](',\x20');}}}document[_0x432c44(0x43e)](_0x432c44(0x507))[_0x432c44(0x331)]=_0x136dc6;}else{const _0xb76719=0x5;if(_0xc340aa['quantity']<_0xb76719){showInfoBox(_0x432c44(0x57b));return;}_0xc340aa[_0x432c44(0x36d)]-=_0xb76719;const _0x2f67d8=_0x1236d2-0x1,_0x52f0c3=Object[_0x432c44(0x28b)](drugInventory)[_0x432c44(0x4b6)](_0x225975=>drugInventory[_0x225975][_0x432c44(0x627)]===_0x2f67d8),_0x246376=_0x52f0c3[Math['floor'](Math[_0x432c44(0x61a)]()*_0x52f0c3[_0x432c44(0x545)])];drugInventory[_0x246376][_0x432c44(0x36d)]+=0x1,document[_0x432c44(0x43e)](_0x432c44(0x507))[_0x432c44(0x331)]=_0x432c44(0x348)+selectedDrug+_0x432c44(0x4c1)+_0x246376;}updateDrugGrid();}document['getElementById'](_0x3ebdb0(0x531))[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{const _0x1fcc66=_0x3ebdb0;if(battleState[_0x1fcc66(0x3aa)]['taunt']){performAttack(_0x1fcc66(0x3f0));return;}!awakened?showInfoBox(_0x1fcc66(0x272)):(document[_0x1fcc66(0x43e)]('battle-spirit-modal')[_0x1fcc66(0x604)]['display']=_0x1fcc66(0x386),updateSpiritDisplay());});function checkAwakening(){const _0x24ea68=_0x3ebdb0;awakened?document['getElementById'](_0x24ea68(0x531))[_0x24ea68(0x604)]['display']=_0x24ea68(0x386):document[_0x24ea68(0x43e)](_0x24ea68(0x531))[_0x24ea68(0x604)][_0x24ea68(0x569)]=_0x24ea68(0x386);}function getBaseSpiritAttributes(){return!awakened?{'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0}:{'health':0x7,'mana':0x6,'physicalAttack':0x2,'physicalDefense':2.1,'magicAttack':1.9,'magicDefense':2.05,'speed':0x1};}function displayInBottle(){const _0x245f00=_0x3ebdb0,_0xd7a85f=getCurrentSpiritAttributes(),_0x420ce6=new Map([[_0x245f00(0x45e),'生命值'],[_0x245f00(0x5dc),_0x245f00(0x3c3)],[_0x245f00(0x34c),_0x245f00(0x5f9)],[_0x245f00(0x41f),_0x245f00(0x5a4)],[_0x245f00(0x2f3),_0x245f00(0x28e)],[_0x245f00(0x54a),_0x245f00(0x294)],[_0x245f00(0x521),'速度']]);let _0x453a84='';for(const [_0x5ccb46,_0x3c665b]of Object['entries'](_0xd7a85f)){const _0x5f398b=_0x420ce6['get'](_0x5ccb46)||_0x5ccb46;_0x453a84+=_0x5f398b+':\x20'+_0x3c665b+'\x0a';}showInfoBox(_0x245f00(0x42e)+spiritLevel+_0x245f00(0x54d)+spiritMultiplier+_0x245f00(0x488)+_0x453a84);}function updateSpiritDisplay(){const _0x141bbe=_0x3ebdb0,_0x2dcefe=getCurrentSpiritAttributes();document[_0x141bbe(0x43e)](_0x141bbe(0x547))[_0x141bbe(0x331)]=spiritLevel,document[_0x141bbe(0x43e)]('spirit-multiplier')[_0x141bbe(0x331)]=Math['round'](spiritMultiplier*0x64)+'%',document[_0x141bbe(0x43e)]('spirit-health')[_0x141bbe(0x331)]=_0x2dcefe['health'],document[_0x141bbe(0x43e)](_0x141bbe(0x21d))['innerText']=_0x2dcefe[_0x141bbe(0x41f)],document[_0x141bbe(0x43e)](_0x141bbe(0x4a9))['innerText']=_0x2dcefe['physicalAttack'],document[_0x141bbe(0x43e)](_0x141bbe(0x469))['innerText']=_0x2dcefe[_0x141bbe(0x54a)],document[_0x141bbe(0x43e)](_0x141bbe(0x371))[_0x141bbe(0x331)]=_0x2dcefe[_0x141bbe(0x5dc)],document['getElementById'](_0x141bbe(0x23a))[_0x141bbe(0x331)]=_0x2dcefe[_0x141bbe(0x34c)],document[_0x141bbe(0x43e)](_0x141bbe(0x595))[_0x141bbe(0x331)]=_0x2dcefe[_0x141bbe(0x521)];}document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x5fc))['addEventListener']('click',()=>{const _0x5182b2=_0x3ebdb0;document[_0x5182b2(0x43e)]('battle-spirit-modal')[_0x5182b2(0x604)][_0x5182b2(0x569)]=_0x5182b2(0x30b);}),document['getElementById'](_0x3ebdb0(0x252))['addEventListener'](_0x3ebdb0(0x5a6),()=>{const _0x21da11=_0x3ebdb0;if(spiritLevel>=0x64){showMessage(_0x21da11(0x464),'error');return;}if(useItem(_0x21da11(0x411),0x1)){let _0xf3e7db,_0x3d6fc3=0x0,_0x2f791e;if(spiritLevel<=0x14)_0xf3e7db=0x1,_0x2f791e=0x1;else{if(spiritLevel<=0x1e)_0xf3e7db=0.95,_0x2f791e=0x15;else{if(spiritLevel<=0x28)_0xf3e7db=0.9,_0x3d6fc3=0x1,_0x2f791e=0x1f;else{if(spiritLevel<=0x32)_0xf3e7db=0.85,_0x3d6fc3=0x1,_0x2f791e=0x29;else{if(spiritLevel<=0x3c)_0xf3e7db=0.8,_0x3d6fc3=0x1,_0x2f791e=0x33;else{if(spiritLevel<=0x46)_0xf3e7db=0.85,_0x3d6fc3=0x2,_0x2f791e=0x3d;else{if(spiritLevel<=0x50)_0xf3e7db=0.8,_0x3d6fc3=0x2,_0x2f791e=0x47;else{if(spiritLevel<=0x5a)_0xf3e7db=0.75,_0x3d6fc3=0x2,_0x2f791e=0x51;else spiritLevel<=0x63&&(_0xf3e7db=0.7,_0x3d6fc3=0x2,_0x2f791e=0x5b);}}}}}}}const _0x3978ca=Math[_0x21da11(0x61a)]();_0x3978ca<_0xf3e7db?(spiritLevel+=0x1,updateSpiritDisplay(),updatePetInfo()):(_0x3d6fc3>0x0?(spiritLevel=Math[_0x21da11(0x389)](_0x2f791e,spiritLevel-_0x3d6fc3),showMessage('洗练失败，等级下降了\x20'+_0x3d6fc3+_0x21da11(0x2dd)+_0x2f791e+_0x21da11(0x452),_0x21da11(0x1f6))):showMessage(_0x21da11(0x362),_0x21da11(0x1f6)),updateSpiritDisplay(),updatePetInfo());}else showMessage('您的精灵精炼石不足！',_0x21da11(0x1f6));}),document['getElementById'](_0x3ebdb0(0x3a9))['addEventListener'](_0x3ebdb0(0x5a6),()=>{const _0x25d1ef=_0x3ebdb0,_0x319bc4=parseInt(prompt(_0x25d1ef(0x4d3)),0xa);if(isNaN(_0x319bc4)||_0x319bc4<=spiritLevel||_0x319bc4>maxSpiritLevel){showMessage('无效的目标等级！',_0x25d1ef(0x1f6));return;}let _0x522a90=spiritLevel,_0x531e9d=0x0;while(spiritLevel<_0x319bc4&&useItem(_0x25d1ef(0x411),0x1)){_0x531e9d++;let _0x8d0699,_0x5cf01a=0x0,_0x72a4f8;if(spiritLevel<=0x14)_0x8d0699=0x1,_0x72a4f8=0x1;else{if(spiritLevel<=0x1e)_0x8d0699=0.95,_0x72a4f8=0x15;else{if(spiritLevel<=0x28)_0x8d0699=0.9,_0x5cf01a=0x1,_0x72a4f8=0x1f;else{if(spiritLevel<=0x32)_0x8d0699=0.85,_0x5cf01a=0x1,_0x72a4f8=0x29;else{if(spiritLevel<=0x3c)_0x8d0699=0.8,_0x5cf01a=0x1,_0x72a4f8=0x33;else{if(spiritLevel<=0x46)_0x8d0699=0.85,_0x5cf01a=0x2,_0x72a4f8=0x3d;else{if(spiritLevel<=0x50)_0x8d0699=0.8,_0x5cf01a=0x2,_0x72a4f8=0x47;else{if(spiritLevel<=0x5a)_0x8d0699=0.75,_0x5cf01a=0x2,_0x72a4f8=0x51;else spiritLevel<=0x63&&(_0x8d0699=0.7,_0x5cf01a=0x2,_0x72a4f8=0x5b);}}}}}}}const _0x1e508b=Math['random']();_0x1e508b<_0x8d0699?(spiritLevel+=0x1,updateSpiritDisplay(),updatePetInfo()):(_0x5cf01a>0x0&&(spiritLevel=Math[_0x25d1ef(0x389)](_0x72a4f8,spiritLevel-_0x5cf01a)),updateSpiritDisplay(),updatePetInfo());}showMessage(_0x25d1ef(0x42d)+_0x531e9d+_0x25d1ef(0x3cf)+spiritLevel+_0x25d1ef(0x511),_0x25d1ef(0x42c));});function getCurrentSpiritAttributes(){const _0x250ef5=_0x3ebdb0,_0x129607=getBaseSpiritAttributes();return{'health':Math[_0x250ef5(0x300)](_0x129607[_0x250ef5(0x45e)]*Math['pow'](1.08,spiritLevel)*spiritMultiplier),'mana':Math[_0x250ef5(0x300)](_0x129607['mana']*Math['pow'](1.08,spiritLevel)*spiritMultiplier),'physicalAttack':Math[_0x250ef5(0x300)](_0x129607['physicalAttack']*Math['pow'](1.07,spiritLevel)*spiritMultiplier),'physicalDefense':Math[_0x250ef5(0x300)](_0x129607[_0x250ef5(0x54a)]*Math['pow'](1.08,spiritLevel)*spiritMultiplier),'magicAttack':Math[_0x250ef5(0x300)](_0x129607[_0x250ef5(0x5dc)]*Math[_0x250ef5(0x289)](1.07,spiritLevel)*spiritMultiplier),'magicDefense':Math[_0x250ef5(0x300)](_0x129607[_0x250ef5(0x34c)]*Math['pow'](1.08,spiritLevel)*spiritMultiplier),'speed':Math[_0x250ef5(0x300)](_0x129607[_0x250ef5(0x521)]*Math[_0x250ef5(0x289)](1.07,spiritLevel)*spiritMultiplier)};}document[_0x3ebdb0(0x43e)]('enhance-spirit')['addEventListener']('click',()=>{const _0xec1c85=_0x3ebdb0;if(useItem(_0xec1c85(0x434),0x1)){let _0x55c98b;const _0x1a5917=Math[_0xec1c85(0x61a)]();if(_0x1a5917<0.95)_0x55c98b=(Math[_0xec1c85(0x61a)]()*(0x3-0.01)+0.01)['toFixed'](0x2);else{if(_0x1a5917<0.98)_0x55c98b=(Math['random']()*(3.99-3.01)+3.01)[_0xec1c85(0x21f)](0x2);else _0x1a5917<0.99?_0x55c98b=(Math['random']()*(4.1-0x4)+0x4)[_0xec1c85(0x21f)](0x2):_0x55c98b=(Math[_0xec1c85(0x61a)]()*(4.15-4.11)+4.11)[_0xec1c85(0x21f)](0x2);}if(parseFloat(_0x55c98b)>3.9){const _0x4bc977=_0xec1c85(0x56f);showInfoBox(_0x4bc977,()=>{spiritMultiplier=parseFloat(_0x55c98b),updateSpiritDisplay(),updatePetInfo();});}else spiritMultiplier=parseFloat(_0x55c98b),updateSpiritDisplay(),updatePetInfo();}else showInfoBox(_0xec1c85(0x239));});function handleSpiritHeal(){const _0x1d9262=_0x3ebdb0;if(!awakened)return;if(summonEnemy)return;const _0x1c3fa0=0.01,_0x112bb1=_0x1c3fa0+spiritMultiplier/0x190,_0x422047=Math[_0x1d9262(0x420)](_0x112bb1*0x64);if(Math['random']()*0x64<_0x422047){const _0x388386=getCurrentSpiritAttributes(),_0x496d4f=Math[_0x1d9262(0x420)]((Math['random']()*(1.8-0.9)+0.9)*_0x388386[_0x1d9262(0x5dc)]*spiritMultiplier*2.5);battleState[_0x1d9262(0x3aa)]['health']=Math['min'](battleState['player'][_0x1d9262(0x45e)]+_0x496d4f,maxHealth),logBattleEvent(_0x1d9262(0x5e5)+_0x496d4f+'⭐️生命值','pink'),updateDamageValue(-_0x496d4f,!![],'extra-damage'),updateUI();}}function handleSpiritPower(){const _0x22efe3=_0x3ebdb0;if(!awakened)return;if(summonEnemy)return;const _0x9af069=0.01,_0x1613e9=_0x9af069+spiritMultiplier/0x190,_0x294690=Math['round'](_0x1613e9*0x64);if(Math['random']()*0x64<_0x294690&&!spiritPowerActive){spiritPowerActive=!![],battleState[_0x22efe3(0x3aa)][_0x22efe3(0x3d8)]=!![];const _0x698178=getCurrentSpiritAttributes(),_0x31f26a={'health':Math[_0x22efe3(0x420)](_0x698178['health']/0x2),'mana':Math[_0x22efe3(0x420)](_0x698178[_0x22efe3(0x41f)]/1.5),'physicalAttack':Math[_0x22efe3(0x420)](_0x698178['physicalAttack']/1.5),'physicalDefense':Math[_0x22efe3(0x420)](_0x698178[_0x22efe3(0x54a)]/1.2),'magicAttack':Math[_0x22efe3(0x420)](_0x698178['magicAttack']/1.5),'magicDefense':Math[_0x22efe3(0x420)](_0x698178[_0x22efe3(0x34c)]/1.3),'speed':Math['round'](_0x698178[_0x22efe3(0x521)]/1.3)};Object[_0x22efe3(0x28b)](_0x31f26a)[_0x22efe3(0x32f)](_0x3b9220=>{battleAttributes[_0x3b9220]+=_0x31f26a[_0x3b9220];}),logBattleEvent(_0x22efe3(0x321),_0x22efe3(0x2db)),updateUI(),setTimeout(()=>{const _0x3d717d=_0x22efe3;Object[_0x3d717d(0x28b)](_0x31f26a)[_0x3d717d(0x32f)](_0x19ea77=>{battleAttributes[_0x19ea77]-=_0x31f26a[_0x19ea77];}),spiritPowerActive=![],battleState[_0x3d717d(0x3aa)][_0x3d717d(0x3d8)]=![],updateUI();},0x1388);}}function handleSpiritAttack(){const _0x23a106=_0x3ebdb0;if(!awakened)return;if(summonEnemy)return;const _0x41e8dc=0.01,_0x2a76b8=_0x41e8dc+spiritMultiplier/0x190,_0x313a86=Math[_0x23a106(0x420)](_0x2a76b8*0x64);if(Math[_0x23a106(0x61a)]()*0x64<_0x313a86){const _0x13d941=getCurrentSpiritAttributes(),_0x1b31a9=Math[_0x23a106(0x420)]((Math[_0x23a106(0x61a)]()*(2.4-1.8)+1.8)*_0x13d941[_0x23a106(0x5dc)]*spiritMultiplier*battleState[_0x23a106(0x3aa)]['critDamage']);battleState['enemy']['health']=Math[_0x23a106(0x389)](battleState[_0x23a106(0x46d)][_0x23a106(0x45e)]-_0x1b31a9,0x0),logBattleEvent(_0x23a106(0x46a)+_0x1b31a9+'点助攻伤害！',_0x23a106(0x2db));if(battleState[_0x23a106(0x46d)][_0x23a106(0x45e)]<=0x0){showNextBattlePrompt(!![]);return;}Math[_0x23a106(0x61a)]()<0.4+_0x2a76b8&&handleSleep(),updateUI();}}document[_0x3ebdb0(0x43e)]('enable-ascension')[_0x3ebdb0(0x31d)]('click',handleAscensionButtonClick);function handleAscensionButtonClick(){const _0x255cef=_0x3ebdb0;if(!ascend){showInfoBox('您的宠物没有飞升，无法开启飞升增益！');return;}ascensionEnabled?ascensionSkillDescription():useItem(_0x255cef(0x325),0x1)?(showInfoBox(_0x255cef(0x43b)),refreshAscensionSkill(),applyAscensionBonus(),ascensionEnabled=!![]):showInfoBox(_0x255cef(0x369)),updateAscensionButton();}document['getElementById']('close-ascension-modal')[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{const _0x1dc744=_0x3ebdb0;document[_0x1dc744(0x43e)](_0x1dc744(0x2a9))[_0x1dc744(0x604)][_0x1dc744(0x569)]='none';});function checkAscensionEnabled(){if(!ascensionEnabled)return showInfoBox('请先开启飞升之术增益！'),![];return!![];}function updateAscensionButton(){const _0x221ca4=_0x3ebdb0,_0x509a58=document[_0x221ca4(0x43e)](_0x221ca4(0x611));ascensionEnabled?(_0x509a58['innerText']=_0x221ca4(0x47b),_0x509a58['style'][_0x221ca4(0x24d)]=_0x221ca4(0x37b),_0x509a58[_0x221ca4(0x519)](_0x221ca4(0x5a6),handleAscensionButtonClick),_0x509a58[_0x221ca4(0x31d)](_0x221ca4(0x5a6),ascensionSkillDescription)):(_0x509a58[_0x221ca4(0x331)]=_0x221ca4(0x602),_0x509a58[_0x221ca4(0x604)][_0x221ca4(0x24d)]='',_0x509a58[_0x221ca4(0x519)](_0x221ca4(0x5a6),ascensionSkillDescription),_0x509a58[_0x221ca4(0x31d)](_0x221ca4(0x5a6),handleAscensionButtonClick));}function ascensionSkillDescription(){const _0x590ec0=_0x3ebdb0;let _0x5880bc=[],_0x5c378a=0x1;for(const _0x5e9063 in ascensionSkills){ascensionSkills['hasOwnProperty'](_0x5e9063)&&ascensionSkills[_0x5e9063][_0x590ec0(0x32f)](_0x37ab3c=>{const _0x179cf2=_0x590ec0;_0x5880bc[_0x179cf2(0x48f)](_0x5c378a+'.\x20'+_0x37ab3c['name']+'：'+_0x37ab3c[_0x179cf2(0x5df)](0x1)),_0x5c378a++;});}const _0x53de42=_0x5880bc[_0x590ec0(0x46b)]('\x0a');showInfoBox(_0x53de42);}document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x446))[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{const _0x4353fd=_0x3ebdb0;if(!petAscended)showInfoBox(_0x4353fd(0x477));else{if(battleState[_0x4353fd(0x3aa)][_0x4353fd(0x60a)]){performAttack(_0x4353fd(0x3f0));return;}else document['getElementById'](_0x4353fd(0x2a9))[_0x4353fd(0x604)]['display']=_0x4353fd(0x386),updateAscensionDisplay();}}),document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x368))[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{if(!checkAscensionEnabled())return;useItem('heartStone',0x1)?(refreshAscensionSkill(),applyAscensionBonus()):showInfoBox('您的心鉴之石不足！');});function refreshAscensionSkill(){const _0x2430ab=_0x3ebdb0;let _0x1d7417;do{const _0x4d94d0=[...ascensionSkills[_0x2430ab(0x5cf)],...ascensionSkills['combat'],...ascensionSkills['settlement']];_0x1d7417=_0x4d94d0[Math[_0x2430ab(0x300)](Math['random']()*_0x4d94d0['length'])];}while(_0x1d7417[_0x2430ab(0x621)]===secondAscensionSkill[_0x2430ab(0x621)]||_0x1d7417[_0x2430ab(0x621)]===_0x2430ab(0x4c8)||_0x1d7417['name']===_0x2430ab(0x559));ascensionSkill={..._0x1d7417,'level':0x1},updateAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects(),updatePetInfo();}document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x2d8))[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{const _0x3de513=_0x3ebdb0;if(!checkAscensionEnabled())return;useItem('earthlyEnergy',0xa)?levelUpAscensionSkill():showInfoBox(_0x3de513(0x58a));});function levelUpAscensionSkill(){const _0xec76d0=_0x3ebdb0;ascensionSkill[_0xec76d0(0x1f2)]<0x14?(ascensionSkill[_0xec76d0(0x1f2)]+=0x1,updateAscensionDisplay(),applyAscensionBonus()):showInfoBox(_0xec76d0(0x2c1));}function updateAscensionDisplay(){const _0x5f35e0=_0x3ebdb0;document[_0x5f35e0(0x43e)](_0x5f35e0(0x363))[_0x5f35e0(0x508)]=_0x5f35e0(0x376),document[_0x5f35e0(0x43e)](_0x5f35e0(0x3ce))[_0x5f35e0(0x331)]=ascensionSkill['name'],document[_0x5f35e0(0x43e)](_0x5f35e0(0x51b))[_0x5f35e0(0x331)]=_0x5f35e0(0x253)+ascensionSkill[_0x5f35e0(0x1f2)],document[_0x5f35e0(0x43e)](_0x5f35e0(0x381))[_0x5f35e0(0x331)]='';const _0x37ad9a=ascensionSkills[_0x5f35e0(0x322)][_0x5f35e0(0x397)](_0x49fe6a=>_0x49fe6a[_0x5f35e0(0x621)]===ascensionSkill['name'])||ascensionSkills[_0x5f35e0(0x5cf)][_0x5f35e0(0x397)](_0x56141a=>_0x56141a[_0x5f35e0(0x621)]===ascensionSkill[_0x5f35e0(0x621)])||ascensionSkills[_0x5f35e0(0x61d)][_0x5f35e0(0x397)](_0x7e2e4a=>_0x7e2e4a[_0x5f35e0(0x621)]===ascensionSkill['name']);_0x37ad9a&&(document[_0x5f35e0(0x43e)]('ascension-effect')[_0x5f35e0(0x331)]=_0x37ad9a[_0x5f35e0(0x5df)](ascensionSkill['level']));}function checkSecondAscensionEnabled(){const _0x5aa609=_0x3ebdb0,_0x59841d=document[_0x5aa609(0x43e)](_0x5aa609(0x3d7));if(!reenableAscension||!ascensionEnabled){const _0x475969=secondAscensionSkill?secondAscensionSkill['name']:null;return _0x59841d[_0x5aa609(0x604)][_0x5aa609(0x569)]=_0x5aa609(0x30b),_0x475969?console[_0x5aa609(0x27a)](_0x5aa609(0x25b)+_0x475969+'尚未开启！'):console[_0x5aa609(0x27a)](_0x5aa609(0x334)),![];}else return _0x59841d[_0x5aa609(0x604)][_0x5aa609(0x569)]='block',!![];}document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x496))[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{const _0x5b8890=_0x3ebdb0;if(!ascensionSkill['name']&&!ascensionEnabled){showInfoBox(_0x5b8890(0x278));return;}const _0x41db92=document['getElementById'](_0x5b8890(0x3d7));_0x41db92[_0x5b8890(0x604)]['display']===_0x5b8890(0x30b)?confirm(_0x5b8890(0x623))&&(useItem(_0x5b8890(0x327),0xa)?(_0x41db92[_0x5b8890(0x604)][_0x5b8890(0x569)]='block',refreshSecondAscensionSkill(),reenableAscension=!![]):showInfoBox(_0x5b8890(0x490))):showInfoBox(_0x5b8890(0x23f)),checkSecondAscensionEnabled();}),document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x44b))[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{const _0x1d9ef0=_0x3ebdb0;if(!checkSecondAscensionEnabled())return;useItem(_0x1d9ef0(0x325),0x1)?refreshSecondAscensionSkill():showInfoBox(_0x1d9ef0(0x369));});function refreshSecondAscensionSkill(){const _0x3043d6=_0x3ebdb0;let _0x5527d6;do{const _0x1b5204=[...ascensionSkills[_0x3043d6(0x5cf)],...ascensionSkills['combat'],...ascensionSkills[_0x3043d6(0x61d)]];_0x5527d6=_0x1b5204[Math[_0x3043d6(0x300)](Math[_0x3043d6(0x61a)]()*_0x1b5204[_0x3043d6(0x545)])];}while(_0x5527d6[_0x3043d6(0x621)]===ascensionSkill[_0x3043d6(0x621)]||_0x5527d6['name']===_0x3043d6(0x4c8)||_0x5527d6[_0x3043d6(0x621)]==='被封印的技能');secondAscensionSkill={..._0x5527d6,'level':0x1},updateSecondAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects(),updatePetInfo();}document[_0x3ebdb0(0x43e)](_0x3ebdb0(0x271))[_0x3ebdb0(0x31d)](_0x3ebdb0(0x5a6),()=>{const _0x396c5c=_0x3ebdb0;if(!checkSecondAscensionEnabled())return;useItem(_0x396c5c(0x2b6),0xa)?levelUpSecondAscensionSkill():showInfoBox(_0x396c5c(0x58a));});function levelUpSecondAscensionSkill(){const _0x42e905=_0x3ebdb0;secondAscensionSkill[_0x42e905(0x1f2)]<0x14?(secondAscensionSkill['level']+=0x1,updateSecondAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects()):showInfoBox(_0x42e905(0x2c1));}function updateSecondAscensionSkill(){updateSecondAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects(),updatePetInfo();}function updateSecondAscensionDisplay(){const _0x47dad1=_0x3ebdb0;if(!checkSecondAscensionEnabled())return;const _0x5f4fb0=document[_0x47dad1(0x43e)](_0x47dad1(0x3d7));document[_0x47dad1(0x43e)](_0x47dad1(0x3d1))[_0x47dad1(0x508)]=_0x47dad1(0x33b),document[_0x47dad1(0x43e)](_0x47dad1(0x34f))[_0x47dad1(0x331)]=secondAscensionSkill[_0x47dad1(0x621)],document[_0x47dad1(0x43e)](_0x47dad1(0x4f5))[_0x47dad1(0x331)]=_0x47dad1(0x253)+secondAscensionSkill[_0x47dad1(0x1f2)];const _0x41f198=ascensionSkills[_0x47dad1(0x322)][_0x47dad1(0x397)](_0x14548d=>_0x14548d[_0x47dad1(0x621)]===secondAscensionSkill['name'])||ascensionSkills[_0x47dad1(0x5cf)][_0x47dad1(0x397)](_0x302fcf=>_0x302fcf['name']===secondAscensionSkill[_0x47dad1(0x621)])||ascensionSkills[_0x47dad1(0x61d)][_0x47dad1(0x397)](_0x54a803=>_0x54a803['name']===secondAscensionSkill[_0x47dad1(0x621)]);_0x41f198&&(document['getElementById'](_0x47dad1(0x25f))[_0x47dad1(0x331)]=_0x41f198[_0x47dad1(0x5df)](secondAscensionSkill[_0x47dad1(0x1f2)]));}function applyAscensionBonus(){const _0x4e720e=_0x3ebdb0;let _0x28bcc6={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0};_0x28bcc6=applySingleAscensionBonus(ascensionSkill,_0x28bcc6),secondAscensionSkill[_0x4e720e(0x621)]&&checkSecondAscensionEnabled()&&(_0x28bcc6=applySingleAscensionBonus(secondAscensionSkill,_0x28bcc6)),ascensionAttributes=_0x28bcc6,updatePetInfo();}function applySingleAscensionBonus(_0x14b4da,_0x191230){const _0x27c881=_0x3ebdb0;switch(_0x14b4da['name']){case _0x27c881(0x549):_0x191230[_0x27c881(0x2f3)]+=_0x14b4da['baseValue']+_0x14b4da[_0x27c881(0x624)](_0x14b4da[_0x27c881(0x1f2)]);break;case'慈悲心怀':_0x191230[_0x27c881(0x45e)]+=_0x14b4da[_0x27c881(0x2bb)]+_0x14b4da[_0x27c881(0x624)](_0x14b4da['level']),_0x191230['mana']+=0x2710+_0x14b4da['increment'](_0x14b4da['level']);break;case _0x27c881(0x419):_0x191230['speed']+=_0x14b4da[_0x27c881(0x2bb)]+_0x14b4da[_0x27c881(0x624)](_0x14b4da['level']),_0x191230[_0x27c881(0x5dc)]+=0xbb8+_0x14b4da[_0x27c881(0x624)](_0x14b4da['level']);break;case _0x27c881(0x5ee):_0x191230['physicalDefense']+=_0x14b4da['baseValue']+_0x14b4da[_0x27c881(0x624)](_0x14b4da[_0x27c881(0x1f2)]),_0x191230[_0x27c881(0x34c)]+=0x186a0+_0x14b4da[_0x27c881(0x624)](_0x14b4da[_0x27c881(0x1f2)]);break;}return _0x191230;}function applyAscensionEffects(){const _0x57ae33=_0x3ebdb0;resetBattleStateEffects(),applySingleAscensionEffect(ascensionSkill),secondAscensionSkill[_0x57ae33(0x621)]&&checkSecondAscensionEnabled()&&applySingleAscensionEffect(secondAscensionSkill);}function applySingleAscensionEffect(_0xf54264){const _0x29829a=_0x3ebdb0;switch(_0xf54264[_0x29829a(0x621)]){case _0x29829a(0x4ce):const _0x39272b=(_0xf54264[_0x29829a(0x2bb)]+_0xf54264['increment'](_0xf54264[_0x29829a(0x1f2)]))/0x64,_0x37dbb8=Math[_0x29829a(0x300)](maxHealth*_0x39272b);battleAttributes[_0x29829a(0x45e)]=Math['min'](maxHealth,battleAttributes['health']+_0x37dbb8),logBattleEvent('发动魔龙之力恢复了\x20'+_0x37dbb8+_0x29829a(0x593),_0x29829a(0x1fe)),updateUI();break;case _0x29829a(0x540):battleState[_0x29829a(0x3aa)][_0x29829a(0x58b)]=0.5,battleState['player']['divineProtectionDuration']=0x5+_0xf54264[_0x29829a(0x624)](_0xf54264[_0x29829a(0x1f2)]);break;case _0x29829a(0x5c7):battleState[_0x29829a(0x3aa)][_0x29829a(0x360)]=_0xf54264[_0x29829a(0x624)](_0xf54264['level'])/0x64;break;case _0x29829a(0x379):battleState[_0x29829a(0x3aa)][_0x29829a(0x316)]=_0xf54264['increment'](_0xf54264[_0x29829a(0x1f2)])/0x64,battleState[_0x29829a(0x3aa)]['extraCritDamageMultiplier']=0xa;break;case _0x29829a(0x31e):battleState[_0x29829a(0x3aa)][_0x29829a(0x3e0)]=_0xf54264[_0x29829a(0x624)](_0xf54264['level'])/0x64;break;case _0x29829a(0x32a):battleState[_0x29829a(0x3aa)][_0x29829a(0x5f6)]=_0xf54264[_0x29829a(0x624)](_0xf54264[_0x29829a(0x1f2)])/0x64;break;case _0x29829a(0x1fd):battleState['player'][_0x29829a(0x537)]+=_0xf54264['baseValue']+_0xf54264[_0x29829a(0x624)](_0xf54264['level']);break;case _0x29829a(0x38c):battleState[_0x29829a(0x3aa)][_0x29829a(0x46e)]=_0xf54264[_0x29829a(0x2bb)]+_0xf54264['increment'](_0xf54264[_0x29829a(0x1f2)]);break;case'财源滚滚':battleState[_0x29829a(0x3aa)][_0x29829a(0x20c)]=_0xf54264[_0x29829a(0x624)](_0xf54264[_0x29829a(0x1f2)]);break;case _0x29829a(0x249):battleState['player']['noGoldPenalty']=!![],battleState[_0x29829a(0x3aa)][_0x29829a(0x476)]=_0xf54264[_0x29829a(0x624)](_0xf54264['level']);break;case'焉知非福':battleState[_0x29829a(0x3aa)][_0x29829a(0x3b0)]=_0xf54264[_0x29829a(0x624)](_0xf54264[_0x29829a(0x1f2)]);break;case _0x29829a(0x556):battleState[_0x29829a(0x3aa)][_0x29829a(0x5ac)]=_0xf54264['increment'](_0xf54264[_0x29829a(0x1f2)]);break;case'举一反三':battleState[_0x29829a(0x3aa)]['expBonus']=_0xf54264[_0x29829a(0x624)](_0xf54264[_0x29829a(0x1f2)]);break;}}function resetBattleStateEffects(){const _0x5ca93d=_0x3ebdb0;battleState[_0x5ca93d(0x3aa)][_0x5ca93d(0x46e)]=0x0,battleState[_0x5ca93d(0x3aa)][_0x5ca93d(0x58b)]=0x0,battleState[_0x5ca93d(0x3aa)]['reflectPercentage']=0x0,battleState[_0x5ca93d(0x3aa)][_0x5ca93d(0x3e0)]=0x0,battleState[_0x5ca93d(0x3aa)][_0x5ca93d(0x5f6)]=0x0,battleState[_0x5ca93d(0x3aa)]['extraCritDamageChance']=0x0,battleState[_0x5ca93d(0x3aa)][_0x5ca93d(0x45f)]=0x0,battleState[_0x5ca93d(0x3aa)]['whiteNightThreshold']=0x0,battleState[_0x5ca93d(0x3aa)]['damageReductionPercentage']=0x0,battleState['player'][_0x5ca93d(0x20c)]=0x0,battleState[_0x5ca93d(0x3aa)][_0x5ca93d(0x46f)]=![],battleState['player'][_0x5ca93d(0x476)]=0x0,battleState[_0x5ca93d(0x3aa)][_0x5ca93d(0x3b0)]=0x0,battleState['player']['survivalChance']=0x0,battleState[_0x5ca93d(0x3aa)]['expBonus']=0x0;}function enemyInfo(){const _0x4b9652=_0x3ebdb0,_0x45eceb=document[_0x4b9652(0x514)](_0x4b9652(0x463));_0x45eceb[_0x4b9652(0x604)][_0x4b9652(0x46c)]=_0x4b9652(0x2a3),_0x45eceb[_0x4b9652(0x604)]['top']=_0x4b9652(0x5c8),_0x45eceb['style'][_0x4b9652(0x390)]=_0x4b9652(0x5c8),_0x45eceb[_0x4b9652(0x604)][_0x4b9652(0x55e)]=_0x4b9652(0x3d3),_0x45eceb[_0x4b9652(0x604)][_0x4b9652(0x24d)]=_0x4b9652(0x44f),_0x45eceb[_0x4b9652(0x604)][_0x4b9652(0x45d)]=_0x4b9652(0x276),_0x45eceb[_0x4b9652(0x604)]['padding']='20px',_0x45eceb['style'][_0x4b9652(0x401)]=_0x4b9652(0x4d0),_0x45eceb[_0x4b9652(0x604)][_0x4b9652(0x4b7)]='10px',_0x45eceb['style'][_0x4b9652(0x536)]=_0x4b9652(0x409),_0x45eceb['style'][_0x4b9652(0x5f4)]='80%',_0x45eceb[_0x4b9652(0x604)]['maxWidth']=_0x4b9652(0x5af),_0x45eceb[_0x4b9652(0x604)][_0x4b9652(0x219)]='border-box',_0x45eceb['style'][_0x4b9652(0x4cd)]=_0x4b9652(0x578);const _0x43ee7c=document['createElement'](_0x4b9652(0x326));_0x43ee7c[_0x4b9652(0x331)]='X',_0x43ee7c[_0x4b9652(0x604)][_0x4b9652(0x46c)]='absolute',_0x43ee7c['style'][_0x4b9652(0x3ca)]=_0x4b9652(0x4f3),_0x43ee7c[_0x4b9652(0x604)]['right']='10px',_0x43ee7c[_0x4b9652(0x604)][_0x4b9652(0x24d)]=_0x4b9652(0x4c9),_0x43ee7c[_0x4b9652(0x604)]['color']=_0x4b9652(0x276),_0x43ee7c['style'][_0x4b9652(0x401)]='none',_0x43ee7c[_0x4b9652(0x604)][_0x4b9652(0x3cb)]=_0x4b9652(0x625),_0x43ee7c['addEventListener']('click',()=>{const _0x37d24c=_0x4b9652;document[_0x37d24c(0x2eb)][_0x37d24c(0x2fd)](_0x45eceb);});const _0x50bfed=document[_0x4b9652(0x514)](_0x4b9652(0x463));_0x50bfed[_0x4b9652(0x604)]['display']=_0x4b9652(0x2a2),_0x50bfed[_0x4b9652(0x604)][_0x4b9652(0x31f)]=_0x4b9652(0x5a2),_0x50bfed[_0x4b9652(0x604)][_0x4b9652(0x2b9)]=_0x4b9652(0x49e);const _0x4f2d68=enemyImages[_0x4b9652(0x397)](_0x3b6812=>_0x3b6812[_0x4b9652(0x621)]===battleState[_0x4b9652(0x46d)][_0x4b9652(0x621)]),_0x5e1c4f=document[_0x4b9652(0x514)](_0x4b9652(0x608));_0x4f2d68?_0x5e1c4f[_0x4b9652(0x508)]=_0x4f2d68[_0x4b9652(0x460)]:_0x5e1c4f[_0x4b9652(0x508)]=_0x4b9652(0x2ed);_0x5e1c4f[_0x4b9652(0x604)][_0x4b9652(0x5f4)]=_0x4b9652(0x54b),_0x5e1c4f[_0x4b9652(0x604)][_0x4b9652(0x577)]=_0x4b9652(0x54b),_0x5e1c4f[_0x4b9652(0x604)][_0x4b9652(0x22d)]='20px';const _0x2b2aaf=document['createElement'](_0x4b9652(0x463)),_0x4b07e1=document[_0x4b9652(0x514)]('h2');!summonEnemy?_0x4b07e1[_0x4b9652(0x331)]='妖怪(精英)':_0x4b07e1['innerText']=''+battleState[_0x4b9652(0x46d)][_0x4b9652(0x621)];_0x4b07e1[_0x4b9652(0x604)][_0x4b9652(0x2b3)]='0',_0x4b07e1[_0x4b9652(0x604)]['marginBottom']=_0x4b9652(0x4f3);const _0x222603=document[_0x4b9652(0x514)]('p');!summonEnemy?_0x222603[_0x4b9652(0x331)]=_0x4b9652(0x524):_0x222603[_0x4b9652(0x331)]='这是一个召唤得来的怪物。';_0x222603[_0x4b9652(0x604)]['margin']='0',_0x2b2aaf[_0x4b9652(0x2b2)](_0x4b07e1),_0x2b2aaf['appendChild'](_0x222603),_0x50bfed[_0x4b9652(0x2b2)](_0x5e1c4f),_0x50bfed['appendChild'](_0x2b2aaf);const _0x188ba2=document[_0x4b9652(0x514)]('hr');_0x188ba2['style'][_0x4b9652(0x588)]=_0x4b9652(0x276),_0x188ba2[_0x4b9652(0x604)][_0x4b9652(0x2b3)]=_0x4b9652(0x2af);const _0x35188e=document['createElement']('div');let _0x104fe5;!summonEnemy?_0x104fe5=[_0x4b9652(0x47a),'正常形态下，它会交替使用物理和法术技能攻击妖怪。妖怪精通人心操纵之术,若玩家被施加\x22醉酒\x22、\x22摄魂\x22等效果，战局风险会极大提高。',_0x4b9652(0x202),_0x4b9652(0x34a)]:_0x104fe5=['挑战召唤的敌人往往会获得更丰富的奖励',_0x4b9652(0x586),_0x4b9652(0x50d),_0x4b9652(0x286)];_0x104fe5[_0x4b9652(0x32f)](_0x2c2f27=>{const _0x510f72=_0x4b9652,_0x21a23c=document['createElement']('p');_0x21a23c[_0x510f72(0x331)]=_0x2c2f27,_0x21a23c['style'][_0x510f72(0x2b3)]=_0x510f72(0x550),_0x35188e[_0x510f72(0x2b2)](_0x21a23c);});const _0x2d385a=document[_0x4b9652(0x514)](_0x4b9652(0x463));_0x2d385a[_0x4b9652(0x604)][_0x4b9652(0x569)]=_0x4b9652(0x2a2),_0x2d385a[_0x4b9652(0x604)][_0x4b9652(0x407)]=_0x4b9652(0x4bb),_0x2d385a['style'][_0x4b9652(0x5f4)]=_0x4b9652(0x443),_0x2d385a[_0x4b9652(0x604)][_0x4b9652(0x28a)]=_0x4b9652(0x49e);const _0x42fa79=document[_0x4b9652(0x514)](_0x4b9652(0x326));_0x42fa79[_0x4b9652(0x331)]='跳过十轮',_0x42fa79[_0x4b9652(0x604)][_0x4b9652(0x207)]=_0x4b9652(0x628),_0x42fa79[_0x4b9652(0x604)][_0x4b9652(0x24d)]=_0x4b9652(0x40a),_0x42fa79[_0x4b9652(0x604)][_0x4b9652(0x45d)]=_0x4b9652(0x276),_0x42fa79['style'][_0x4b9652(0x401)]=_0x4b9652(0x30b),_0x42fa79[_0x4b9652(0x604)]['borderRadius']=_0x4b9652(0x5d0),_0x42fa79[_0x4b9652(0x604)][_0x4b9652(0x3cb)]=_0x4b9652(0x625),_0x42fa79['addEventListener'](_0x4b9652(0x5a6),()=>{jumpByTenRounds();});const _0x2f3f0d=document[_0x4b9652(0x514)](_0x4b9652(0x326));_0x2f3f0d[_0x4b9652(0x331)]=_0x4b9652(0x561),_0x2f3f0d[_0x4b9652(0x604)][_0x4b9652(0x207)]=_0x4b9652(0x628),_0x2f3f0d['style'][_0x4b9652(0x24d)]='#003670',_0x2f3f0d['style'][_0x4b9652(0x45d)]=_0x4b9652(0x276),_0x2f3f0d[_0x4b9652(0x604)][_0x4b9652(0x401)]='none',_0x2f3f0d[_0x4b9652(0x604)][_0x4b9652(0x4b7)]=_0x4b9652(0x5d0),_0x2f3f0d[_0x4b9652(0x604)][_0x4b9652(0x3cb)]='pointer',_0x2f3f0d[_0x4b9652(0x31d)](_0x4b9652(0x5a6),()=>{const _0x407ff5=_0x4b9652;autoBattle(),document[_0x407ff5(0x2eb)][_0x407ff5(0x2fd)](_0x45eceb);});const _0x3a95b0=document[_0x4b9652(0x514)](_0x4b9652(0x326));_0x3a95b0[_0x4b9652(0x331)]=_0x4b9652(0x4d1),_0x3a95b0[_0x4b9652(0x604)][_0x4b9652(0x207)]=_0x4b9652(0x628),_0x3a95b0['style'][_0x4b9652(0x24d)]=_0x4b9652(0x40a),_0x3a95b0['style'][_0x4b9652(0x45d)]=_0x4b9652(0x276),_0x3a95b0[_0x4b9652(0x604)]['border']='none',_0x3a95b0[_0x4b9652(0x604)][_0x4b9652(0x4b7)]=_0x4b9652(0x5d0),_0x3a95b0[_0x4b9652(0x604)]['cursor']=_0x4b9652(0x625),_0x3a95b0[_0x4b9652(0x31d)](_0x4b9652(0x5a6),()=>{backToRoundOne();}),_0x2d385a[_0x4b9652(0x2b2)](_0x42fa79),_0x2d385a['appendChild'](_0x2f3f0d),_0x2d385a[_0x4b9652(0x2b2)](_0x3a95b0),_0x45eceb[_0x4b9652(0x2b2)](_0x43ee7c),_0x45eceb['appendChild'](_0x50bfed),_0x45eceb['appendChild'](_0x188ba2),_0x45eceb[_0x4b9652(0x2b2)](_0x35188e),_0x45eceb['appendChild'](_0x2d385a),document[_0x4b9652(0x2eb)][_0x4b9652(0x2b2)](_0x45eceb),_0x45eceb['addEventListener'](_0x4b9652(0x5a6),_0x430418=>{const _0x4a9f69=_0x4b9652;_0x430418['target']===_0x45eceb&&document[_0x4a9f69(0x2eb)]['removeChild'](_0x45eceb);});}let playerSkillPreference={'physical':null,'magical':null};function autoBattle(){const _0x3f2476=_0x3ebdb0;if(!battleState||!battleState[_0x3f2476(0x46d)]){console[_0x3f2476(0x1f6)](_0x3f2476(0x302)),clearAutoBattle();return;}if(autoBattleInterval!==null){clearAutoBattle(),showInfoBox(_0x3f2476(0x2f0));return;}useItem(_0x3f2476(0x236),0x1)?(logBattleEvent(_0x3f2476(0x5a5),'lightgreen'),autoBattleInterval=setInterval(()=>{const _0x2684d9=_0x3f2476;if(!battleState||!battleState['enemy']){console['error'](_0x2684d9(0x302)),clearAutoBattle();return;}if(!playerTurn)return;if(battleAttributes['health']/maxHealth<0.5&&playerTurn){Math[_0x2684d9(0x61a)]()<0.5?performDefense():performHeal();return;}const _0x5a4ea7=[battleState[_0x2684d9(0x3aa)][_0x2684d9(0x461)],battleState[_0x2684d9(0x3aa)][_0x2684d9(0x5b6)],battleState[_0x2684d9(0x3aa)]['soulCapture'],battleState[_0x2684d9(0x3aa)][_0x2684d9(0x29a)],battleState[_0x2684d9(0x3aa)][_0x2684d9(0x291)],battleState[_0x2684d9(0x3aa)][_0x2684d9(0x55d)],battleState[_0x2684d9(0x3aa)][_0x2684d9(0x60a)],battleState[_0x2684d9(0x3aa)][_0x2684d9(0x225)],battleState['player'][_0x2684d9(0x4ff)],battleState[_0x2684d9(0x3aa)]['slaughter']],_0x147dbb=_0x5a4ea7[_0x2684d9(0x4b6)](Boolean)[_0x2684d9(0x545)];if(_0x147dbb>=0x2){const _0x35b56f=_0x2684d9(0x37c),_0x223106=drugInventory[_0x35b56f];if(_0x223106&&_0x223106[_0x2684d9(0x36d)]>0x0){selectDrug(_0x35b56f),useSelectedDrug();return;}}battleState[_0x2684d9(0x3aa)][_0x2684d9(0x29a)]?performAutoAttack(_0x2684d9(0x35e)):battleAttributes[_0x2684d9(0x5dc)]>0.8*battleAttributes[_0x2684d9(0x2f3)]&&!battleState[_0x2684d9(0x3aa)][_0x2684d9(0x60a)]?Math[_0x2684d9(0x61a)]()<0.99?performAutoAttack('magical'):performAutoAttack('physical'):performAutoAttack(_0x2684d9(0x3f0));},0x15e)):showInfoBox(_0x3f2476(0x5f7),null,null,'red');}function clearAutoBattle(){autoBattleInterval!==null&&(clearInterval(autoBattleInterval),autoBattleInterval=null,logBattleEvent('自动战斗已停止。','red'));}function jumpByTenRounds(){const _0x505b8f=_0x3ebdb0;if(battleState[_0x505b8f(0x3aa)][_0x505b8f(0x60a)]){performAttack(_0x505b8f(0x3f0));return;}const _0x1d9e67=0x3e8,_0x3827cd=_0x1d9e67-battleRounds,_0x56b614=Math['min'](0xa,_0x3827cd);if(battleRounds>=_0x1d9e67){showInfoBox(_0x505b8f(0x581)+battleRounds+'轮，无法再继续跳过！');return;}if(useItem(_0x505b8f(0x33f),0x1)){let _0x325314=currentExp;battleRounds+=_0x56b614;for(let _0x5e270d=0x0;_0x5e270d<_0x56b614;_0x5e270d++){updateEnemyAttributes(),gainExp(),currentExp=_0x325314,updateExpBar(currentExp,maxExp),logBattleEvent('你跳过了'+_0x56b614+_0x505b8f(0x5d9)+battleRounds+'轮',_0x505b8f(0x2db)),updatePetInfo(),updateUI();}}else{showInfoBox(_0x505b8f(0x3fd),null,null,'red');return;}}function backToRoundOne(){const _0xc72e43=_0x3ebdb0;showInfoBox(_0xc72e43(0x3dd),()=>{const _0x342ab1=_0xc72e43,_0x220db4=jinnangItems[_0x342ab1(0x397)](_0x28023f=>_0x28023f[_0x342ab1(0x621)]==='enhanceBowl'),_0x126b80=jinnangItems[_0x342ab1(0x397)](_0x2d0a18=>_0x2d0a18['name']===_0x342ab1(0x437));if(!_0x220db4||_0x220db4[_0x342ab1(0x36d)]<0x64||!_0x126b80||_0x126b80[_0x342ab1(0x36d)]<0x64){showInfoBox(_0x342ab1(0x25d));return;}useItem(_0x342ab1(0x33a),0x64),useItem('ignoranceWater',0x64),battleRounds=0x1,initializeEnemyPet(),updateEnemyAttributes(),updateUI(),showInfoBox('时钟空转，你已进入忘却之时……');});}function divinedWeapon(){const _0x19125d=_0x3ebdb0;!divinedWeaponStatus&&(showInfoBox(_0x19125d(0x466)),divinedWeaponStatus=!![]),divineWeaponManager[_0x19125d(0x4a0)]();}class DivineWeaponManager{constructor(){const _0x320a13=_0x3ebdb0;this[_0x320a13(0x60e)]={'active':![],'level':0x1,'effects':[]},this[_0x320a13(0x3b2)]={'active':![],'level':0x1,'effects':[]},this['nirvanaGem']={'active':![],'level':0x1,'effects':[]},this['divineWeaponUI']=null;}[_0x3ebdb0(0x4ed)](){const _0x1e7571=_0x3ebdb0;return{'lostBook':this[_0x1e7571(0x60e)],'fragmentedMap':this[_0x1e7571(0x3b2)],'nirvanaGem':this[_0x1e7571(0x237)]};}[_0x3ebdb0(0x4ee)](_0x1500e6){const _0x5b1d90=_0x3ebdb0;if(_0x1500e6['lostBook'])this[_0x5b1d90(0x60e)]=_0x1500e6[_0x5b1d90(0x60e)];if(_0x1500e6[_0x5b1d90(0x3b2)])this[_0x5b1d90(0x3b2)]=_0x1500e6[_0x5b1d90(0x3b2)];if(_0x1500e6[_0x5b1d90(0x237)])this[_0x5b1d90(0x237)]=_0x1500e6[_0x5b1d90(0x237)];}[_0x3ebdb0(0x4a0)](){const _0x13ec17=_0x3ebdb0;this['divineWeaponUI']&&this[_0x13ec17(0x31b)][_0x13ec17(0x4d4)]();if(battleState['player'][_0x13ec17(0x60a)]){performAttack('physical');return;}this[_0x13ec17(0x31b)]=document['createElement'](_0x13ec17(0x463)),this['divineWeaponUI'][_0x13ec17(0x604)]=_0x13ec17(0x34d);const _0x25a2de=this['lostBook'][_0x13ec17(0x2e4)]?_0x13ec17(0x57d)+this['lostBook']['level']+')':_0x13ec17(0x451),_0x3c561a=this['lostBook'][_0x13ec17(0x2e4)]?this[_0x13ec17(0x60e)][_0x13ec17(0x358)]['length']>0x0?_0x13ec17(0x3f1)+(this[_0x13ec17(0x60e)][_0x13ec17(0x1f2)]*0.6+0x1)['toFixed'](0x1)+_0x13ec17(0x298)+this[_0x13ec17(0x60e)][_0x13ec17(0x358)][_0x13ec17(0x4be)](this[_0x13ec17(0x2f6)])[_0x13ec17(0x46b)](',\x20'):_0x13ec17(0x344):_0x13ec17(0x5c6),_0x21ea37=this[_0x13ec17(0x3b2)][_0x13ec17(0x2e4)]?'神品·残页的河图\x20(Lv'+this[_0x13ec17(0x3b2)][_0x13ec17(0x1f2)]+')':_0x13ec17(0x4c3),_0x2b4912=this[_0x13ec17(0x3b2)]['active']?this[_0x13ec17(0x3b2)][_0x13ec17(0x358)][_0x13ec17(0x545)]>0x0?_0x13ec17(0x20a)+(this[_0x13ec17(0x3b2)][_0x13ec17(0x1f2)]*0.6+0x1)[_0x13ec17(0x21f)](0x1)+_0x13ec17(0x298)+this[_0x13ec17(0x3b2)]['effects'][_0x13ec17(0x4be)](this[_0x13ec17(0x2f6)])[_0x13ec17(0x46b)](',\x20'):_0x13ec17(0x448):'<p>闪烁星光的宝盒，开启后可为法术技能概率附加效果：</p><p>迟缓、沉默、混乱、灼烧、法力燃烧、法力吸取</p>',_0x44ea17=this[_0x13ec17(0x237)][_0x13ec17(0x2e4)]?_0x13ec17(0x572)+this[_0x13ec17(0x237)][_0x13ec17(0x1f2)]+')':_0x13ec17(0x5c4),_0x427bfe=this[_0x13ec17(0x237)][_0x13ec17(0x2e4)]?this[_0x13ec17(0x237)][_0x13ec17(0x358)][_0x13ec17(0x545)]>0x0?_0x13ec17(0x4a7)+(this['nirvanaGem'][_0x13ec17(0x1f2)]*0.3+0.5)['toFixed'](0x1)+'%概率驱散以下减益效果：'+this[_0x13ec17(0x237)][_0x13ec17(0x358)][_0x13ec17(0x4be)](this[_0x13ec17(0x2f6)])[_0x13ec17(0x46b)](',\x20'):_0x13ec17(0x39c):'<p>流光溢彩的锦囊，开启后每秒有一定概率驱散敌人的减益效果，成功概率与等级有关。</p>';this['divineWeaponUI'][_0x13ec17(0x3de)]=_0x13ec17(0x4cb)+(this[_0x13ec17(0x60e)][_0x13ec17(0x2e4)]?_0x13ec17(0x2ce):_0x13ec17(0x293))+_0x13ec17(0x55b)+_0x25a2de+_0x13ec17(0x626)+_0x3c561a+_0x13ec17(0x5f1)+(this['fragmentedMap']['active']?_0x13ec17(0x41e):_0x13ec17(0x293))+_0x13ec17(0x50b)+_0x21ea37+_0x13ec17(0x626)+_0x2b4912+_0x13ec17(0x2fe)+(this[_0x13ec17(0x237)][_0x13ec17(0x2e4)]?_0x13ec17(0x315):'https://pic.imgdb.cn/item/665aecc0d9c307b7e90a239e.png')+_0x13ec17(0x562)+_0x44ea17+'</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22margin:\x200;\x22>'+_0x427bfe+_0x13ec17(0x280),document[_0x13ec17(0x2eb)][_0x13ec17(0x2b2)](this[_0x13ec17(0x31b)]);}[_0x3ebdb0(0x56e)](){const _0x3e3c7d=_0x3ebdb0;this[_0x3e3c7d(0x31b)]&&(this['divineWeaponUI'][_0x3e3c7d(0x4d4)](),this[_0x3e3c7d(0x31b)]=null);}[_0x3ebdb0(0x3b5)](_0x28bfd2){const _0x263545=_0x3ebdb0;if(this[_0x28bfd2][_0x263545(0x2e4)]){showInfoBox(_0x263545(0x22f));return;}const _0x6dbb13=_0x28bfd2===_0x263545(0x60e)?'lostBook':_0x28bfd2===_0x263545(0x3b2)?_0x263545(0x3b2):_0x263545(0x237);if(useItem(_0x6dbb13)){this[_0x28bfd2][_0x263545(0x2e4)]=!![],this[_0x28bfd2][_0x263545(0x358)]=[this[_0x263545(0x2a1)](_0x28bfd2)],showInfoBox((_0x28bfd2===_0x263545(0x60e)?_0x263545(0x21a):_0x28bfd2===_0x263545(0x3b2)?_0x263545(0x5fa):_0x263545(0x312))+_0x263545(0x41d)),this[_0x263545(0x4a0)]();return;}if(currentExp<0x30d40){showInfoBox(_0x263545(0x2aa));return;}currentExp-=0x30d40,updateExpBar(currentExp,maxExp),this[_0x28bfd2][_0x263545(0x2e4)]=!![],this[_0x28bfd2][_0x263545(0x358)]=[this[_0x263545(0x2a1)](_0x28bfd2)],showInfoBox((_0x28bfd2===_0x263545(0x60e)?'遗失的洛书':_0x28bfd2===_0x263545(0x3b2)?_0x263545(0x5fa):_0x263545(0x312))+_0x263545(0x41d)),this[_0x263545(0x4a0)]();}['description'](_0x10fd36){const _0x263116=_0x3ebdb0,_0x304d4b=_0x10fd36===_0x263116(0x60e)?_0x263116(0x60e):_0x10fd36===_0x263116(0x3b2)?'fragmentedMap':_0x263116(0x237);showInfoBox(weaponDescriptions[_0x304d4b]),this[_0x263116(0x4a0)]();}[_0x3ebdb0(0x5d1)](_0x22f812){const _0x5f37af=_0x3ebdb0;if(!this[_0x22f812][_0x5f37af(0x2e4)]){showInfoBox('开启神器后才能执行刷新！');return;}const _0x264533=_0x22f812===_0x5f37af(0x60e)?_0x5f37af(0x60e):_0x22f812===_0x5f37af(0x3b2)?_0x5f37af(0x3b2):'nirvanaGem';if(useItem(_0x264533)){const _0x4b5cf0=Math[_0x5f37af(0x61a)]();if(_0x22f812===_0x5f37af(0x237)){if(_0x4b5cf0<0.05)this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)];else{if(_0x4b5cf0<0.15)this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)];else{if(_0x4b5cf0<0.3)this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this['getRandomEffect'](_0x22f812)];else _0x4b5cf0<0.6?this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)]:this[_0x22f812][_0x5f37af(0x358)]=[this['getRandomEffect'](_0x22f812)];}}}else{if(_0x4b5cf0<0.05)this[_0x22f812][_0x5f37af(0x358)]=[this['getRandomEffect'](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)];else _0x4b5cf0<0.2?this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)]:this[_0x22f812][_0x5f37af(0x358)]=[this['getRandomEffect'](_0x22f812)];}this[_0x5f37af(0x4a0)]();return;}if(currentExp<0x186a0){showInfoBox('经验不足100000或没有对应钥匙，无法刷新效果。（如果你拥有钥匙，将会优先自动使用钥匙刷新）');return;}currentExp-=0x186a0,updateExpBar(currentExp,maxExp);const _0x34adf3=Math['random']();if(_0x22f812===_0x5f37af(0x237)){if(_0x34adf3<0.05)this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)];else{if(_0x34adf3<0.15)this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)];else{if(_0x34adf3<0.3)this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this['getRandomEffect'](_0x22f812),this['getRandomEffect'](_0x22f812)];else _0x34adf3<0.6?this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812),this['getRandomEffect'](_0x22f812)]:this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812)];}}}else{if(_0x34adf3<0.05)this[_0x22f812]['effects']=[this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)];else _0x34adf3<0.2?this[_0x22f812][_0x5f37af(0x358)]=[this['getRandomEffect'](_0x22f812),this[_0x5f37af(0x2a1)](_0x22f812)]:this[_0x22f812][_0x5f37af(0x358)]=[this[_0x5f37af(0x2a1)](_0x22f812)];}showInfoBox((_0x22f812==='lostBook'?'遗失的洛书':_0x22f812==='fragmentedMap'?_0x5f37af(0x5fa):_0x5f37af(0x312))+'已通过经验刷新。'),this[_0x5f37af(0x4a0)]();}[_0x3ebdb0(0x510)](_0x4977a4){const _0x2f4c27=_0x3ebdb0;if(!this[_0x4977a4][_0x2f4c27(0x2e4)]){showInfoBox(_0x2f4c27(0x36e));return;}if(this[_0x4977a4]['level']>=0xa5){showInfoBox('神器等级已达到上限。');return;}const _0x5e22ae=_0x4977a4==='lostBook'?_0x2f4c27(0x60e):_0x4977a4===_0x2f4c27(0x3b2)?'fragmentedMap':'nirvanaGem';if(this[_0x4977a4][_0x2f4c27(0x1f2)]>=0x64||useItem(_0x5e22ae)){if(this[_0x4977a4][_0x2f4c27(0x1f2)]>=0x64&&!useItem(_0x5e22ae)){showInfoBox(_0x2f4c27(0x24b));return;}this[_0x4977a4]['level']+=0x1,this[_0x2f4c27(0x4a0)]();return;}if(currentExp<0xbb8){showInfoBox(_0x2f4c27(0x305));return;}currentExp-=0xbb8,updateExpBar(currentExp,maxExp),this[_0x4977a4][_0x2f4c27(0x1f2)]+=0x1,this['openDivineWeaponUI']();}[_0x3ebdb0(0x204)](_0x351a1d){const _0x27f742=_0x3ebdb0;while(this[_0x351a1d][_0x27f742(0x1f2)]<0xa5){const _0x164ebc=this[_0x351a1d][_0x27f742(0x1f2)];this['upgradeDivineWeapon'](_0x351a1d);if(this[_0x351a1d][_0x27f742(0x1f2)]===_0x164ebc)break;}}['getRandomEffect'](_0x2c7fdc){const _0x3be9b5=_0x3ebdb0;if(_0x2c7fdc===_0x3be9b5(0x60e)){const _0x17c199=['破甲','眩晕','恐吓','麻痹','穿透','惶恐'];return _0x17c199[Math['floor'](Math[_0x3be9b5(0x61a)]()*_0x17c199[_0x3be9b5(0x545)])];}else{if(_0x2c7fdc===_0x3be9b5(0x3b2)){const _0x314103=['沉默','迟缓','混乱','法力燃烧','灼烧',_0x3be9b5(0x22a)];return _0x314103[Math['floor'](Math['random']()*_0x314103[_0x3be9b5(0x545)])];}else{if(_0x2c7fdc==='nirvanaGem'){const _0xfe6644=[_0x3be9b5(0x461),'healingBan',_0x3be9b5(0x58c),'blindfold','spellSlow',_0x3be9b5(0x55d),_0x3be9b5(0x4ff),'taunt','seal',_0x3be9b5(0x374)];return _0xfe6644[Math['floor'](Math[_0x3be9b5(0x61a)]()*_0xfe6644[_0x3be9b5(0x545)])];}}}}[_0x3ebdb0(0x2f6)](_0x156faf){const _0x2c9763=_0x3ebdb0,_0x213e5c={'破甲':'破甲','眩晕':'眩晕','恐吓':'恐吓','麻痹':'麻痹','穿透':'穿透','惶恐':'惶恐','沉默':'沉默','迟缓':'迟缓','混乱':'混乱','法力燃烧':_0x2c9763(0x616),'法力吸取':_0x2c9763(0x22a),'灼烧':'灼烧','drunken':'醉酒','healingBan':'禁疗','soulCapture':'摄魂','blindfold':'失明','spellSlow':_0x2c9763(0x3be),'torn':'撕裂','suppressed':'压制','taunt':'嘲讽','seal':'封印','slaughter':'杀戮'};return _0x213e5c[_0x156faf]||_0x156faf;}[_0x3ebdb0(0x3ea)](){const _0x17291a=_0x3ebdb0;if(!this['nirvanaGem'][_0x17291a(0x2e4)])return;const _0x2979ed=Math[_0x17291a(0x296)](0x1,0.005+(this['nirvanaGem'][_0x17291a(0x1f2)]-0x1)*0.003);if(Math['random']()>_0x2979ed)return;const _0x578a98=['drunken',_0x17291a(0x5b6),_0x17291a(0x58c),_0x17291a(0x29a),_0x17291a(0x225),_0x17291a(0x55d),_0x17291a(0x4ff),'taunt','seal',_0x17291a(0x374)],_0x46f230=_0x578a98[_0x17291a(0x4b6)](_0x18538c=>battleState['player'][_0x18538c]),_0xd2b608=this[_0x17291a(0x237)][_0x17291a(0x358)]['filter'](_0x5192e5=>_0x578a98[_0x17291a(0x323)](_0x5192e5)),_0xa2fb35=_0x46f230[_0x17291a(0x4b6)](_0x396b48=>_0xd2b608['includes'](_0x396b48));if(_0xa2fb35[_0x17291a(0x545)]>0x0){const _0x460b63=_0xa2fb35[Math['floor'](Math[_0x17291a(0x61a)]()*_0xa2fb35[_0x17291a(0x545)])];battleState[_0x17291a(0x3aa)][_0x460b63]=![];switch(_0x460b63){case _0x17291a(0x461):break;case _0x17291a(0x5b6):break;case _0x17291a(0x225):break;case _0x17291a(0x58c):battleAttributes[_0x17291a(0x2f3)]=battleState[_0x17291a(0x3aa)][_0x17291a(0x2f3)],battleAttributes[_0x17291a(0x5dc)]=battleState[_0x17291a(0x3aa)][_0x17291a(0x5dc)],updateUI(),updatePlayerStatusDisplay();break;case _0x17291a(0x55d):clearInterval(battleState[_0x17291a(0x3aa)][_0x17291a(0x60d)]),effectCooldowns[_0x17291a(0x55d)]=![];break;case _0x17291a(0x4ff):cleanSuppressed();break;case _0x17291a(0x60a):clearTaunt();break;case'slaughter':cleanSlaughter();break;case'blindFold':break;case _0x17291a(0x291):ascensionSkill[_0x17291a(0x621)]=battleState['player'][_0x17291a(0x350)],secondAscensionSkill[_0x17291a(0x621)]=battleState[_0x17291a(0x3aa)]['originalSecondAscensionSkill'],updateAscensionDisplay(),updateSecondAscensionDisplay(),effectCooldowns[_0x17291a(0x291)]=![],updateUI();break;}logBattleEvent('定空的灵石解除了你的'+this['getEffectChineseName'](_0x460b63)+_0x17291a(0x5d3),_0x17291a(0x3f5)),showBattleOverlay('https://pic.imgdb.cn/item/66a33f3ad9c307b7e942c38c.gif',0x3e8,0x1,0x3e8),updatePlayerStatusDisplay(),updateUI();}}}function cleanSlaughter(){const _0x50534b=_0x3ebdb0;battleState[_0x50534b(0x3aa)]['slaughter']=![],effectCooldowns['slaughter']=![],enemyPhysicalAttackCount=0x0,updatePlayerStatusDisplay(),console[_0x50534b(0x27a)](_0x50534b(0x410));}function cleanSuppressed(){const _0x3007ec=_0x3ebdb0;if(battleState[_0x3007ec(0x3aa)][_0x3007ec(0x4ff)]){clearTimeout(suppressionState[_0x3007ec(0x2e2)]);const _0x140d12=performPhysicalAttack,_0x58d7b6=performMagicalAttack,_0x36f106=performHeal,_0x3f3026=performPoison,_0x23c7df=performDefense;battleState[_0x3007ec(0x3aa)][_0x3007ec(0x4ff)]=![],effectCooldowns[_0x3007ec(0x4ff)]=![],(!suppressionState[_0x3007ec(0x450)]||battleState['player'][_0x3007ec(0x4ff)])&&(battleAttributes[_0x3007ec(0x45e)]=0x1,battleAttributes[_0x3007ec(0x41f)]=0x1,battleAttributes[_0x3007ec(0x2f3)]=0x1,battleAttributes[_0x3007ec(0x5dc)]=0x1,logBattleEvent(_0x3007ec(0x470),'#FF4500'),showBattleOverlay('https://pic.imgdb.cn/item/66a484fcd9c307b7e95c2645.gif',0x5dc,0.8)),performPhysicalAttack=_0x140d12,performMagicalAttack=_0x58d7b6,performHeal=_0x36f106,performPoison=_0x3f3026,performDefense=_0x23c7df,updatePlayerStatusDisplay();}updateUI();}function clearTaunt(){const _0x3a509a=_0x3ebdb0;battleState['player'][_0x3a509a(0x60a)]=![],effectCooldowns[_0x3a509a(0x60a)]=![],clearTimeout(tauntTimeout),updatePlayerStatusDisplay(),updateUI();}function clearEnemyEffect(){const _0x5d05d4=_0x3ebdb0,_0x559b5e=[_0x5d05d4(0x461),'healingBan',_0x5d05d4(0x58c),_0x5d05d4(0x29a),_0x5d05d4(0x225),'torn',_0x5d05d4(0x4ff),_0x5d05d4(0x60a),'seal',_0x5d05d4(0x374),_0x5d05d4(0x59a),'heat'];_0x559b5e['forEach'](_0x4b5b80=>{const _0x218560=_0x5d05d4;if(battleState[_0x218560(0x3aa)][_0x4b5b80]){switch(_0x4b5b80){case _0x218560(0x461):break;case _0x218560(0x5b6):break;case'soulCapture':battleAttributes[_0x218560(0x2f3)]=battleState['player'][_0x218560(0x2f3)],battleAttributes[_0x218560(0x5dc)]=battleState[_0x218560(0x3aa)][_0x218560(0x5dc)],updateUI(),updatePlayerStatusDisplay();break;case _0x218560(0x55d):clearInterval(battleState['player'][_0x218560(0x60d)]);break;case _0x218560(0x4ff):cleanSuppressed();break;case'taunt':clearTaunt();break;case _0x218560(0x374):cleanSlaughter();break;case _0x218560(0x291):ascensionSkill['name']=battleState[_0x218560(0x3aa)]['originalAscensionSkill'],secondAscensionSkill[_0x218560(0x621)]=battleState[_0x218560(0x3aa)]['originalSecondAscensionSkill'],updateAscensionDisplay(),updateSecondAscensionDisplay(),updateUI();break;case _0x218560(0x59a):break;case _0x218560(0x3d9):handleCleanHeat();break;}battleState['player'][_0x4b5b80]=![],effectCooldowns[_0x4b5b80]=![];}}),updatePlayerStatusDisplay();}function clearPlayerEffect(){const _0x470aa5=_0x3ebdb0,_0x318d2a=[{'name':'armorBreak','timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x436)]},{'name':_0x470aa5(0x57e),'timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x2c5)]},{'name':_0x470aa5(0x258),'timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x5b3)]},{'name':_0x470aa5(0x351),'timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x494)]},{'name':_0x470aa5(0x261),'timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x2dc)]},{'name':'intimidated','timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x2ab)]},{'name':'benumbed','timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x349)]},{'name':_0x470aa5(0x329),'timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x5a1)]},{'name':'burnt','timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x2e9)]},{'name':_0x470aa5(0x429),'timer':battleState['enemy'][_0x470aa5(0x529)]},{'name':_0x470aa5(0x220),'timer':battleState[_0x470aa5(0x46d)][_0x470aa5(0x274)]}];_0x318d2a[_0x470aa5(0x32f)](_0x1f438b=>{const _0x734bb8=_0x470aa5;battleState[_0x734bb8(0x46d)][_0x1f438b[_0x734bb8(0x621)]]=![],_0x1f438b[_0x734bb8(0x2cd)]&&(clearTimeout(_0x1f438b[_0x734bb8(0x2cd)]),_0x1f438b[_0x734bb8(0x2cd)]=null);}),updateEnemyStatusDisplay();}const divineWeaponManager=new DivineWeaponManager();
