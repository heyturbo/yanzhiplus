const _0x38c76e=_0x6e96;(function(_0x43ae55,_0x4f1031){const _0x21cc6a=_0x6e96,_0x1550e6=_0x43ae55();while(!![]){try{const _0x4cfc78=parseInt(_0x21cc6a(0x541))/0x1+parseInt(_0x21cc6a(0x2e3))/0x2+-parseInt(_0x21cc6a(0x3b8))/0x3*(-parseInt(_0x21cc6a(0x375))/0x4)+parseInt(_0x21cc6a(0x3f5))/0x5*(-parseInt(_0x21cc6a(0x345))/0x6)+-parseInt(_0x21cc6a(0x2ec))/0x7*(-parseInt(_0x21cc6a(0x54c))/0x8)+-parseInt(_0x21cc6a(0x247))/0x9+-parseInt(_0x21cc6a(0x4f2))/0xa*(parseInt(_0x21cc6a(0x59b))/0xb);if(_0x4cfc78===_0x4f1031)break;else _0x1550e6['push'](_0x1550e6['shift']());}catch(_0x2f0fb9){_0x1550e6['push'](_0x1550e6['shift']());}}}(_0x48cc,0x472a0));let selectedDrug=null,alreadyUseDrug=![],drugInventory={'长生泉':{'quantity':0x2,'url':'https://pic.imgdb.cn/item/666c0289d9c307b7e9ae8abd.png','tier':0x0,'description':'橙色品阶，长生不老之泉，饮用后临时增加1000生命值上限（刷新游戏后失效），且恢复至满状态'},'忘忧水':{'quantity':0x5,'url':_0x38c76e(0x4c8),'tier':0x3,'description':_0x38c76e(0x47f)},'三花丸':{'quantity':0x5,'url':_0x38c76e(0x310),'tier':0x3,'description':_0x38c76e(0x21f)},'狂暴之魂':{'quantity':0x0,'url':_0x38c76e(0x3ba),'tier':0x0,'description':'橙色品阶，永久提高1%暴击率'},'神力仙丹':{'quantity':0x0,'url':_0x38c76e(0x50a),'tier':0x2,'description':_0x38c76e(0x2c6)},'慧心糖果':{'quantity':0x0,'url':_0x38c76e(0x38e),'tier':0x0,'description':_0x38c76e(0x22c)},'狂暴印记':{'quantity':0x0,'url':_0x38c76e(0x268),'tier':0x2,'description':_0x38c76e(0x4a8)},'武尊秘露':{'quantity':0x1,'url':_0x38c76e(0x222),'tier':0x1,'description':_0x38c76e(0x1b0)},'延寿露':{'quantity':0x0,'url':_0x38c76e(0x225),'tier':0x3,'description':'绿色品阶，恢复玩家20%的生命值'},'天山雪莲':{'quantity':0x0,'url':'https://pic.imgdb.cn/item/666d311dd9c307b7e996b5a8.png','tier':0x3,'description':'绿色品阶，恢复玩家20%的法力值'},'化功散':{'quantity':0x0,'url':_0x38c76e(0x365),'tier':0x2,'description':_0x38c76e(0x240)},'见手青':{'quantity':0x0,'url':_0x38c76e(0x332),'tier':0x0,'description':_0x38c76e(0x35a)},'沉檀凝香':{'quantity':0x5,'url':_0x38c76e(0x30f),'tier':0x1,'description':_0x38c76e(0x577)},'焚灵之丸':{'quantity':0x0,'url':_0x38c76e(0x245),'tier':0x1,'description':_0x38c76e(0x51b)},'冰莲絮':{'quantity':0x2,'url':_0x38c76e(0x2f9),'tier':0x2,'description':_0x38c76e(0x542)},'晗灵果':{'quantity':0x2,'url':_0x38c76e(0x581),'tier':0x2,'description':_0x38c76e(0x486)},'魔术棱柱':{'quantity':0x0,'url':_0x38c76e(0x4d8),'tier':0x1,'description':'紫色品阶，消耗300000当前经验升级一个随机技能，通过该道具最多可让技能升至24级'},'幸运金币':{'quantity':0x0,'url':_0x38c76e(0x554),'tier':0x0,'description':'橙色品阶，使用后将随机触发事件：让怪物血量变为1/获得50000经验/回退10轮'},'双倍经验药':{'quantity':0x1,'url':'https://pic.imgdb.cn/item/666e9aeed9c307b7e9066a2f.png','tier':0x2,'description':'蓝色品阶，使用后60秒内战斗获胜所得经验增加两倍'},'四倍经验药':{'quantity':0x1,'url':_0x38c76e(0x58f),'tier':0x1,'description':_0x38c76e(0x494)},'普通药材':{'quantity':0x0,'url':_0x38c76e(0x3cf),'tier':0x4,'description':_0x38c76e(0x21b)},'上等药材':{'quantity':0x0,'url':_0x38c76e(0x37e),'tier':0x3,'description':_0x38c76e(0x563)},'极品药材':{'quantity':0x0,'url':'https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0b0c.png','tier':0x2,'description':_0x38c76e(0x1b1)},'珍贵药材':{'quantity':0x0,'url':'https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0af3.png','tier':0x1,'description':_0x38c76e(0x3b1)},'完美药材':{'quantity':0x0,'url':'https://pic.imgdb.cn/item/669a6459d9c307b7e91b9003.png','tier':0x0,'description':'橙色品阶，临时增加15点物理攻击和法术攻击，收集2个可以炼制出随机药品'}},collectCost=0x64,activeBuffs={},tempBonus={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0},drugBonus0={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0},drugBonus={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0},ascensionSkill={'name':_0x38c76e(0x564),'level':0x1,'effect':_0x38c76e(0x1e9)},secondAscensionSkill={'name':'未开启','level':0x1,'effect':_0x38c76e(0x1e9)},ascensionAttributes={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0};const ascensionSkills={'attribute':[{'name':_0x38c76e(0x22f),'effect':_0x431861=>_0x38c76e(0x5ac)+(0xbb8+_0x431861*0x15e)+'点物理攻击力','baseValue':0xbb8,'increment':_0x20ad86=>_0x20ad86*0x15e},{'name':'慈悲心怀','effect':_0x53b1c5=>'额外提供'+(0x186a0+_0x53b1c5*0x1f40)+_0x38c76e(0x4b0)+(0x186a0+_0x53b1c5*0x1f40)+_0x38c76e(0x209),'baseValue':0x186a0,'increment':_0x4c7c60=>0x1f40*_0x4c7c60},{'name':_0x38c76e(0x248),'effect':_0x190f7d=>_0x38c76e(0x5ac)+(0xbb8+0x12c*_0x190f7d)+_0x38c76e(0x1f7)+(0xbb8+0x12c*_0x190f7d)+_0x38c76e(0x360),'baseValue':0xbb8,'increment':_0xbf7434=>0x12c*_0xbf7434},{'name':_0x38c76e(0x2b8),'effect':_0x666a47=>_0x38c76e(0x5ac)+(0x186a0+0x1388*_0x666a47)+'点物理防御和'+(0x186a0+0x1388*_0x666a47)+'点法术防御','baseValue':0x186a0,'increment':_0x59275a=>0x1388*_0x59275a},{'name':_0x38c76e(0x564),'effect':_0x2a31c1=>_0x38c76e(0x1e9),'baseValue':0x0,'increment':_0x355866=>_0x355866*0x0},{'name':_0x38c76e(0x436),'effect':_0x45dfdc=>_0x38c76e(0x1e9),'baseValue':0x0,'increment':_0x2ba41e=>_0x2ba41e*0x0}],'combat':[{'name':'魔龙之力','effect':_0x14f20a=>_0x38c76e(0x572)+(0xa+0x1*_0x14f20a)+_0x38c76e(0x333),'baseValue':0xa,'increment':_0x4ab2eb=>0x1*_0x4ab2eb},{'name':'斩龙一式','effect':_0x2b072c=>_0x38c76e(0x4c9)+(0x57-0x3*(_0x2b072c-0x1))+_0x38c76e(0x452),'baseValue':0x5a,'increment':_0x300679=>0x5a-0x3*(_0x300679-0x1)},{'name':_0x38c76e(0x478),'effect':_0x5996c8=>_0x38c76e(0x4ea)+(0xa+1.5*_0x5996c8)+'%概率额外给妖怪附加等同于玩家物理攻击力1000%的伤害。','baseValue':0xa,'increment':_0x378a2d=>0xa+1.5*_0x378a2d},{'name':_0x38c76e(0x578),'effect':_0x968cef=>'当玩家使用物理攻击时，会吸收等同伤害值'+(0xb+0x1*(_0x968cef-0x1))+_0x38c76e(0x2a5),'baseValue':0xb,'increment':_0x58185d=>0xb+0x1*(_0x58185d-0x1)},{'name':'无我之境','effect':_0x828623=>_0x38c76e(0x26e)+(0x15+0x1*(_0x828623-0x1))+_0x38c76e(0x290),'baseValue':0x14,'increment':_0x228bf7=>0x14+0x1*(_0x228bf7-0x1)},{'name':'向死而生','effect':_0x315fe6=>_0x38c76e(0x501)+(0x64-0x1*_0x315fe6)+_0x38c76e(0x3a3),'baseValue':0x64,'increment':_0x338981=>-0x2*_0x338981},{'name':'以牙还牙','effect':_0x3573c7=>_0x38c76e(0x201)+(0x2d+0x2*_0x3573c7)+'%~'+(0x3c+0x2*_0x3573c7)+'%','baseValue':0x2d,'increment':_0x1ec4e0=>0x2*_0x1ec4e0},{'name':_0x38c76e(0x428),'effect':_0x1439e6=>'承受伤害降低'+(0x14+1.5*_0x1439e6)+'%','baseValue':0x14,'increment':_0xbc2d01=>1.5*_0xbc2d01},{'name':_0x38c76e(0x3a2),'effect':_0x55ca31=>'每次使用法术攻击时，有'+(0x1e+0x2*_0x55ca31)+'%概率再次施放一次法术伤害','baseValue':0x1e,'increment':_0x33b26c=>0x2*_0x33b26c},{'name':'天降甘霖','effect':_0xdf6ac5=>'使用治疗时，触发仙气护体的概率增加至50%，并且仙气护体持续时间增加至'+(0x6+0.1*_0xdf6ac5)+'秒','baseValue':0x6,'increment':_0x218091=>0.1*_0x218091}],'settlement':[{'name':_0x38c76e(0x561),'effect':_0xe45d57=>_0x38c76e(0x376)+convertPrice(0x2710+0x9c4*_0xe45d57)+'文','baseValue':0x2710,'increment':_0x2db318=>0x9c4*_0x2db318},{'name':_0x38c76e(0x26c),'effect':_0x50d691=>_0x38c76e(0x2b3)+(0x3+0x1*_0x50d691)+_0x38c76e(0x559),'baseValue':0x3,'increment':_0xcb9f1d=>0x1*_0xcb9f1d},{'name':_0x38c76e(0x4cd),'effect':_0x2b85b8=>_0x38c76e(0x382)+(0x12c+0x32*_0x2b85b8)+'%','baseValue':0x12c,'increment':_0x399d36=>0x32*_0x399d36},{'name':_0x38c76e(0x1dd),'effect':_0x1f8c1a=>_0x38c76e(0x28b)+convertPrice(0x1f4+0x1f4*_0x1f8c1a)+'文金子的安慰金','baseValue':0x1f4,'increment':_0x1daf22=>0x1f4*_0x1daf22}]};let reenableAscension=![],ascensionEnabled=![],spiritLevel=0x1,spiritMultiplier=0x1;const maxSpiritLevel=0x78,minSpiritMultiplier=0.01,maxSpiritMultiplier=4.15;let playerTurn=![];const obj={get 'enemyTurn'(){return!playerTurn;}};let spiritPowerActive=![],attributesFetched=![],battleState,battleInterval,battleAttributes,maxHealth,maxMana,battleRounds=0x1,currentExp=0x0,maxExp=0xd0,enemyHealCount=0x0,enemyPetCultivation,playerCultivation,additionalPlayerCultivation=0x0,enemyPet={'health':0x12,'mana':0xd,'physicalAttack':0x2,'physicalDefense':0x1,'magicAttack':0x2,'magicDefense':0x3,'speed':0x6,'cultivation':0x0},enemyMaxHealth=enemyPet['health'],enemyMaxMana=enemyPet[_0x38c76e(0x5a5)],enemyInitialState=null,originalPerformAttack=performAttack,originalPerformPhysicalAttack=performPhysicalAttack,originalPerformMagicalAttack=performMagicalAttack,originalPerformHeal=performHeal,originalPerformPoison=performPoison,originalPerformDefense=performDefense,autoBattleInterval=null,playerCritRate=0.1,playerCritDamage=1.5,enemyCritRate=0.6,enemyCritDamage=1.8,pierceDamageContainer={'totalPierceDamage':0x0},poisonSkillActivated=![],enemyPhysicalAttackCount=0x0,extraShield=0x0,wiseDefense=0x0,wiseDefenseManaCost,firstStartBattle=![],onBattleState,divinedWeaponStatus=![],waterAmuletTriggered=![];const weaponDescriptions={'lostBook':_0x38c76e(0x4f4),'fragmentedMap':'残页的河图开启后，能够为你的法术技能附加专属效果，同时最多拥有3个效果。可以附加效果如下：\x0a1.迟缓：根据伤害量的比例降低敌人的当前速度\x20\x0a2.沉默：持续时间内禁止怪物施放法术技能及附加减益效果\x20\x0a3.混乱：持续时间内怪物可能会攻击自己\x20\x0a4.灼烧：造成伤害时会给敌人附加额外灼烧伤害，己方速度之于怪物越快，灼烧伤害越猛烈\x20\x0a5.法力燃烧：根据本次法术伤害减少怪物的当前法力值，敌人法力为空时，将转化为生命伤害。\x0a6.法力吸取：吸收敌人的法力为己用，吸收量与所造成法术伤害有关','nirvanaGem':'定空的灵石开启后，每秒有概率驱散减益效果，同时最多驱散5个效果。可以驱散效果如下：\x0a1.醉酒：法术效果，玩家攻击怪物时会受到10%的反弹溅射伤害\x20\x0a2.禁疗：法术效果，持续时间内禁止玩家使用治疗技能\x20\x0a3.摄魂：法术效果，持续时间内玩家物理和法术攻击减半\x20\x0a4.失明：法术效果，持续时间内玩家物理攻击会被怪物闪避\x20\x0a5.法术迟钝：法术效果，持续时间内玩家使用法术技能时法力消耗值增至100倍\x20\x0a6.撕裂：物理效果，持续时间内玩家会受到每0.5秒的持续掉血效果，掉血量与怪物物理攻击有关\x20\x0a7.嘲讽：物理效果，持续时间内玩家的所有战斗行为会强制指向物理攻击，且物理伤害增至120%\x20\x0a8.压制：物理效果，玩家若没有在3秒内做出战斗行为，血量会降至1\x20\x0a9.封印：物理效果，持续时间内玩家的飞升技能会被封印，使其无法生效\x20\x0a10.杀戮：物理效果，持续时间内会根据双方修为之差判断斩杀线，当一方血量低于双方修为差值的一定比例时，负值一方会被斩杀'},effectCooldowns={'drunken':![],'healingBan':![],'soulCapture':![],'blindfold':![],'spellSlow':![],'torn':![],'suppressed':![],'taunt':![],'seal':![],'slaughter':![]};function startBattle(){const _0x189536=_0x38c76e;if(!attributesFetched){showInfoBox('请先从属性面板获取属性。');return;}onBattleState=!![],!firstStartBattle&&(logBattleEvent(_0x189536(0x3bf),_0x189536(0x4d0),_0x189536(0x281)),firstStartBattle=!![]),battleInterval=setInterval(()=>{const _0x4a4e74=_0x189536;if(onBattleState){if(battleAttributes[_0x4a4e74(0x5ad)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState['enemy'][_0x4a4e74(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}}if(summonEnemy){const _0x330a09=battleState['enemy']['specialty'],_0x1117ba=specificAttackByEnemy[_0x330a09];_0x1117ba&&_0x1117ba['type']===_0x4a4e74(0x28c)&&_0x1117ba[_0x4a4e74(0x368)]();}updateUI(),divineWeaponManager[_0x4a4e74(0x597)](),handleSpiritHeal(),handleSpiritPower(),handleSpiritAttack();}else console['log'](_0x4a4e74(0x3fe));},0x3e8),playerTurn=battleAttributes[_0x189536(0x495)]>=battleState[_0x189536(0x25b)][_0x189536(0x495)],updateUI(),updatePetColor(),updatePetName(),decideEnemyCanPerform(),!playerTurn&&setTimeout(enemyAttack,0x1f4);}function stopBattle(){const _0x23b649=_0x38c76e;onBattleState=![],stopEnemyAction(),clearInterval(battleInterval),summonEnemy&&handleBattleWithSummonEnemy(![]),logBattleEvent(_0x23b649(0x350));}let defeatedPets=[],usedPets=[];function decreaseElixirVigor(_0x42b310=!![]){const _0x3d265a=_0x38c76e,_0x6235c3=elixirStates[_0x3d265a(0x367)](_0x23f3a6=>_0x23f3a6[_0x3d265a(0x525)]&&_0x23f3a6[_0x3d265a(0x53e)]&&_0x23f3a6['equippedPet']===currentPet[_0x3d265a(0x33b)]&&_0x23f3a6[_0x3d265a(0x57f)]>0x0);if(_0x6235c3['length']===0x0)return;_0x6235c3[_0x3d265a(0x284)](_0x4673fa=>{const _0x4c4dbe=_0x3d265a;let _0x3ef769;_0x42b310?_0x3ef769=Math[_0x4c4dbe(0x265)](0x14+Math[_0x4c4dbe(0x207)]()*0xb):_0x3ef769=Math['floor'](0x32+Math[_0x4c4dbe(0x207)]()*0x1f),_0x4673fa[_0x4c4dbe(0x57f)]=Math['max'](0x0,_0x4673fa[_0x4c4dbe(0x57f)]-_0x3ef769),_0x4673fa[_0x4c4dbe(0x57f)]===0x0&&(updateElixirDisplay(),updateQualityDisplayWithBonuses(),updateAttributePanel());});}let elixirExpDoubleState=![];function showNextBattlePrompt(_0x3efbc0){const _0x36404c=_0x38c76e;if(_0x3efbc0){const _0x582078=Math[_0x36404c(0x265)](0x0+Math[_0x36404c(0x207)]()*0x2),_0x2f1939=elixirExpDoubleState?Math[_0x36404c(0x265)](0x508*Math['max'](0x1,Math[_0x36404c(0x207)]()*battleRounds))*0x2:Math['floor'](0x508*Math['max'](0x1,Math[_0x36404c(0x207)]()*battleRounds));decreaseArmsEndurance(key=null,_0x582078),decreaseElixirVigor(!![]),increaseEachElixirExp(_0x2f1939),currentLifeSpan=Math['max'](0x0,currentLifeSpan-_0x582078);if(!summonEnemy){handleVictory();return;}else{toggleFightingDrawer(),handleBattleWithSummonEnemy(_0x3efbc0),summonEnemy=![];return;}}else{const _0xcae00=Math[_0x36404c(0x265)](0x5+Math['random']()*0x5);decreaseArmsEndurance(key=null,_0xcae00),decreaseElixirVigor(![]),currentLifeSpan=Math['max'](0x0,currentLifeSpan-_0xcae00);if(!summonEnemy){handlePetDefeat();return;}else{toggleFightingDrawer(),handleBattleWithSummonEnemy(![]),summonEnemy=![];return;}}}function checkElixirVigorStatus(){const _0x5c9df0=_0x38c76e,_0x2028c7=elixirStates[_0x5c9df0(0x367)](_0x532010=>_0x532010['applied']&&_0x532010['equipped']&&_0x532010['equippedPet']===currentPet[_0x5c9df0(0x33b)]&&_0x532010[_0x5c9df0(0x57f)]===0x0);if(_0x2028c7['length']>0x0){const _0x56d076=_0x2028c7[_0x5c9df0(0x1f0)]===0x1?'有1个内丹元气已耗尽，请及时补充！':'有'+_0x2028c7[_0x5c9df0(0x1f0)]+_0x5c9df0(0x586);showInfoBox(_0x56d076);}}function handleVictory(){const _0x54ef5f=_0x38c76e,_0x11b430=0.35,_0x5d838e=1.75,_0x3b48e8=Math[_0x54ef5f(0x207)]()*(_0x5d838e-_0x11b430)+_0x11b430;let _0x531d64=Math[_0x54ef5f(0x265)](0x120*battleRounds*_0x3b48e8);_0x531d64=Math[_0x54ef5f(0x275)](_0x531d64,0x120);(ascensionSkill[_0x54ef5f(0x33b)]==='财源滚滚'||secondAscensionSkill[_0x54ef5f(0x33b)]===_0x54ef5f(0x561))&&(_0x531d64+=calculateExtraReward());if(Math[_0x54ef5f(0x207)]()<0.5)addItemToJinnang(_0x54ef5f(0x423),0x1);goldAmount+=_0x531d64,updateGoldDisplay(goldAmount),updateTitle(),showBattleOverlay('https://pic.imgdb.cn/item/6672bf9fd9c307b7e9b189e0.png',0x1f4,0x1,0x3e8),increaseCurrentPetIntimacy(0x1e),increaseCurrentPetAttention(0x1),increaseCurrentPetLearningValue(0xc8),defeatedPets=[],usedPets=[],battleRounds++,updateEnemyAttributes(),gainExp(),resetBattleState(!![]),resetBuffState(!![]),extraShield=0x0,battleAttributes[_0x54ef5f(0x495)]>=battleState[_0x54ef5f(0x25b)][_0x54ef5f(0x495)]?playerTurn=!![]:playerTurn=![];}function handlePetDefeat(){const _0x44d4ba=_0x38c76e,_0x39a0a2=document[_0x44d4ba(0x4e9)]('pet-select'),_0x4ce774=_0x39a0a2[_0x44d4ba(0x3c1)],_0x2ad626=Object['keys'](pets)[_0x44d4ba(0x2c5)](_0x29ac7b=>pets[_0x29ac7b][_0x44d4ba(0x33b)]===currentPet['name']);defeatedPets[_0x44d4ba(0x3e2)]({'key':_0x2ad626,'name':currentPet[_0x44d4ba(0x33b)]});if(defeatedPets['length']===_0x39a0a2['options'][_0x44d4ba(0x1f0)]){applyDefeatPenalty(),logBattleEvent('所有宠物都已阵亡，本次战斗已失败！');return;}_0x39a0a2[_0x44d4ba(0x278)]['length']>0x1?promptPetSwitch(_0x39a0a2,_0x4ce774):(applyDefeatPenalty(),logBattleEvent(_0x44d4ba(0x1ef)));}let switchPetMood=!![];function promptPetSwitch(_0x46249a,_0x7563ce){const _0x339613=_0x38c76e;switchPetMood?showInfoBox(currentPet['name']+'已阵亡,\x20是否更换至其他宠物继续战斗？点击取消不再显示此提示',()=>{const _0x247c56=_0x6e96;let _0x3f7186,_0x36c4dc=Array[_0x247c56(0x200)](_0x46249a[_0x247c56(0x278)])['map'](_0x1f8d60=>{const _0x1b0ca0=_0x247c56,_0x5f4460=Object[_0x1b0ca0(0x386)](pets)[_0x1b0ca0(0x2c5)](_0x59176d=>pets[_0x59176d][_0x1b0ca0(0x33b)]===_0x1f8d60[_0x1b0ca0(0x3c1)]);return{'key':_0x5f4460,'name':_0x1f8d60[_0x1b0ca0(0x3c1)]};})[_0x247c56(0x367)](_0x1c5f97=>!usedPets[_0x247c56(0x4a1)](_0x349fbc=>_0x349fbc[_0x247c56(0x489)]===_0x1c5f97['key']));if(_0x36c4dc[_0x247c56(0x1f0)]===0x0){applyDefeatPenalty(),logBattleEvent(_0x247c56(0x300));return;}do{const _0x4186b8=Math[_0x247c56(0x265)](Math[_0x247c56(0x207)]()*_0x36c4dc[_0x247c56(0x1f0)]);_0x3f7186=_0x36c4dc[_0x4186b8];}while(_0x3f7186[_0x247c56(0x489)]===_0x7563ce);_0x46249a['value']=_0x3f7186[_0x247c56(0x33b)],usedPets['push'](_0x3f7186),changePet();},()=>{const _0xb2482c=_0x6e96;switchPetMood=![],applyDefeatPenalty(),logBattleEvent(_0xb2482c(0x346),'red','20px');}):(applyDefeatPenalty(),logBattleEvent(_0x339613(0x346),_0x339613(0x48d),_0x339613(0x281)));}function applyDefeatPenalty(){const _0x2897f9=_0x38c76e;let _0x1c8d31=0x184*battleRounds;ascensionSkill[_0x2897f9(0x33b)]===_0x2897f9(0x1dd)||secondAscensionSkill[_0x2897f9(0x33b)]===_0x2897f9(0x1dd)?(_0x1c8d31=0x0,goldAmount+=calculateCompensation()):goldAmount=Math[_0x2897f9(0x275)](0x0,goldAmount-_0x1c8d31),showBattleOverlay(_0x2897f9(0x456),0x1f4,0x1,0x3e8),increaseCurrentPetIntimacy(-0x5),onBattleState=![],showInfoBox(_0x2897f9(0x349)+convertPrice(_0x1c8d31)+_0x2897f9(0x355),()=>{startBattle(),updatePetInfo();},()=>{const _0x1c3181=_0x2897f9;stopBattle();const _0x1401e8=document['getElementById'](_0x1c3181(0x2a2)),_0x42d645=_0x1401e8[_0x1c3181(0x3ae)]['toggle'](_0x1c3181(0x1fd));_0x1401e8['style']['display']=_0x1c3181(0x2c0);}),updateGoldDisplay(goldAmount),clearAutoBattle(),defeatedPets=[],usedPets=[],resetBattleState(![]),resetBuffState(![]),extraShield=0x0;}function calculateExtraReward(){const _0x1653fa=_0x38c76e;let _0x5b4dc9=0x0;return ascensionSkill[_0x1653fa(0x33b)]===_0x1653fa(0x561)&&(_0x5b4dc9+=ascensionSkill[_0x1653fa(0x37b)]+ascensionSkill[_0x1653fa(0x358)](ascensionSkill[_0x1653fa(0x533)])),secondAscensionSkill['name']===_0x1653fa(0x561)&&(_0x5b4dc9+=secondAscensionSkill[_0x1653fa(0x37b)]+secondAscensionSkill[_0x1653fa(0x358)](secondAscensionSkill['level'])),logBattleEvent('财源滚滚触发，额外增加了\x20'+convertPrice(_0x5b4dc9)+_0x1653fa(0x1d0),_0x1653fa(0x4db)),_0x5b4dc9;}function calculateCompensation(){const _0x36f56b=_0x38c76e;let _0x1c0990=0x0;return ascensionSkill['name']===_0x36f56b(0x1dd)&&(_0x1c0990+=ascensionSkill[_0x36f56b(0x37b)]+ascensionSkill[_0x36f56b(0x358)](ascensionSkill[_0x36f56b(0x533)])),secondAscensionSkill['name']==='金牌调解'&&(_0x1c0990+=secondAscensionSkill[_0x36f56b(0x37b)]+secondAscensionSkill[_0x36f56b(0x358)](secondAscensionSkill[_0x36f56b(0x533)])),logBattleEvent(_0x36f56b(0x26a)+convertPrice(_0x1c0990)+_0x36f56b(0x1d7),_0x36f56b(0x4db)),_0x1c0990;}function resetBuffState(_0x2bd844){const _0x221161=_0x38c76e;battleState['player'][_0x221161(0x566)]&&(battleState['player']['usingBuff']=![],logBattleEvent(_0x221161(0x2e9),_0x221161(0x2cf)),updateUI());if(_0x2bd844){const _0x5864ef=[],_0x41643c=Math[_0x221161(0x207)]();let _0x2187b6;if(_0x41643c<0.1)_0x2187b6=0x0;else{if(_0x41643c<0.29)_0x2187b6=0x1;else _0x41643c<0.6?_0x2187b6=0x2:_0x2187b6=0x3;}const _0x4521a3=Object[_0x221161(0x386)](drugInventory)[_0x221161(0x367)](_0x4ebe78=>drugInventory[_0x4ebe78][_0x221161(0x3c7)]===_0x2187b6),_0xe8ba29=_0x4521a3[Math[_0x221161(0x265)](Math[_0x221161(0x207)]()*_0x4521a3[_0x221161(0x1f0)])];drugInventory[_0xe8ba29]['quantity']+=0x1,_0x5864ef[_0x221161(0x3e2)](_0xe8ba29+_0x221161(0x2c9));if(battleRounds>=0x64)for(let _0xec0ad8=0x0;_0xec0ad8<0x2;_0xec0ad8++){const _0x494af5=Math['random']();let _0x10b89b;if(_0x494af5<0.1)_0x10b89b=0x0;else{if(_0x494af5<0.29)_0x10b89b=0x1;else _0x494af5<0.6?_0x10b89b=0x2:_0x10b89b=0x3;}const _0x3e4a37=Object[_0x221161(0x386)](drugInventory)['filter'](_0x10afad=>drugInventory[_0x10afad][_0x221161(0x3c7)]===_0x10b89b),_0x59866d=_0x3e4a37[Math['floor'](Math['random']()*_0x3e4a37[_0x221161(0x1f0)])];drugInventory[_0x59866d][_0x221161(0x4b6)]+=0x1,_0x5864ef['push'](_0x59866d+_0x221161(0x2c9));}if(spiritLevel>=0x51){let _0x28c0c1=(spiritLevel-0x50)*0.05;_0x28c0c1>0x1&&(_0x28c0c1=0x1);if(Math[_0x221161(0x207)]()<_0x28c0c1){const _0x4a0288=Object[_0x221161(0x386)](drugInventory),_0x11ce53=_0x4a0288[Math[_0x221161(0x265)](Math[_0x221161(0x207)]()*_0x4a0288[_0x221161(0x1f0)])];drugInventory[_0x11ce53][_0x221161(0x4b6)]+=0x1,_0x5864ef[_0x221161(0x3e2)]('🧚🏻战斗精灵的赐福，你还额外获得了\x20'+_0x11ce53+_0x221161(0x2c9));}}if(_0x5864ef['length']>0x0){const _0x207366=_0x5864ef[_0x221161(0x450)]('，\x20');logBattleEvent('本轮战斗胜利获得了:\x20'+_0x207366,_0x221161(0x4db));}updateDrugGrid();}}function gainExp(_0x578da3=0x0){const _0x52cf6e=_0x38c76e,_0x35c993=document[_0x52cf6e(0x4e9)](_0x52cf6e(0x50f)),_0x193a3c=parseInt(_0x35c993[_0x52cf6e(0x341)],0xa);let _0x5b53b3=battleState[_0x52cf6e(0x498)][_0x52cf6e(0x453)]||0x1;if(ascensionSkill['name']==='举一反三'||secondAscensionSkill[_0x52cf6e(0x33b)]===_0x52cf6e(0x4cd)){let _0x468165=0x0;ascensionSkill[_0x52cf6e(0x33b)]===_0x52cf6e(0x4cd)&&(_0x468165+=(ascensionSkill[_0x52cf6e(0x37b)]+ascensionSkill[_0x52cf6e(0x358)](ascensionSkill[_0x52cf6e(0x533)]))/0x64),secondAscensionSkill[_0x52cf6e(0x33b)]===_0x52cf6e(0x4cd)&&(_0x468165+=(secondAscensionSkill['baseValue']+secondAscensionSkill[_0x52cf6e(0x358)](secondAscensionSkill[_0x52cf6e(0x533)]))/0x64),_0x5b53b3+=_0x468165,logBattleEvent(_0x52cf6e(0x40f)+_0x468165*0x64+'%。',_0x52cf6e(0x4db));}const _0x17d55b=_0x578da3>0x0?_0x578da3:petLevel>=0xb4?Math[_0x52cf6e(0x265)](Math['random']()*(0x8f0-0x508+0x1)*_0x5b53b3)+0x508:Math[_0x52cf6e(0x265)](0x64+Math[_0x52cf6e(0x4f3)](_0x193a3c,1.1)*0.85*_0x193a3c*_0x5b53b3);let _0x2a6d74=currentExp+_0x17d55b;while(_0x2a6d74>=maxExp){_0x2a6d74-=maxExp;if(petLevel===0xb4){maxExp=0x56bc75e2d63100000,logBattleEvent(_0x52cf6e(0x402),_0x52cf6e(0x4db));break;}let _0x19f03e;if(petLevel<0x64&&_0x193a3c<0x64)_0x19f03e=Math[_0x52cf6e(0x265)](Math['random']()*(0x3e8-0x258+0x1))+0x258;else{if(petLevel>=0x65&&petLevel<=0xb4&&_0x193a3c>=0x65&&_0x193a3c<=0x8c)_0x19f03e=Math[_0x52cf6e(0x265)](Math['random']()*(0x708-0x4b0+0x1))+0x4b0;else petLevel>=0xb5&&petLevel<=0xc8&&_0x193a3c>=0x8d&&_0x193a3c<=0x96?_0x19f03e=Math['floor'](Math[_0x52cf6e(0x207)]()*(0xe10-0x7d0+0x1))+0x7d0:_0x19f03e=Math[_0x52cf6e(0x265)](Math[_0x52cf6e(0x207)]()*(0xe10-0x258+0x1))+0x258;}maxExp+=_0x19f03e,petLevel<0xc8?(logBattleEvent(_0x52cf6e(0x1df),'pink'),increasePetLevel(0x1)):(logBattleEvent(_0x52cf6e(0x1ed),_0x52cf6e(0x4db)),addItemToJinnang(_0x52cf6e(0x424)),updateJinnangItems());}currentExp=_0x2a6d74,updateExpBar(currentExp,maxExp);}function updateExpBar(_0xb60468,_0x39572b){const _0x29ad6a=_0x38c76e,_0x5e0da4=document[_0x29ad6a(0x4e9)](_0x29ad6a(0x1d8)),_0x49addf=document[_0x29ad6a(0x4e9)](_0x29ad6a(0x457)),_0x557ccb=document[_0x29ad6a(0x4e9)]('exp-text'),_0x2b976c=document[_0x29ad6a(0x4e9)](_0x29ad6a(0x27f));if(_0x5e0da4&&_0x557ccb){const _0x15990f=_0xb60468/_0x39572b*0x64;_0x5e0da4[_0x29ad6a(0x352)][_0x29ad6a(0x30b)]=_0x15990f+'%',_0x557ccb[_0x29ad6a(0x1c4)]=_0x29ad6a(0x568)+_0xb60468+_0x29ad6a(0x28e)+_0x39572b;}if(_0x49addf&&_0x2b976c){const _0x4cc0ed=_0xb60468/_0x39572b*0x64;_0x49addf[_0x29ad6a(0x352)][_0x29ad6a(0x30b)]=_0x4cc0ed+'%',_0x2b976c[_0x29ad6a(0x1c4)]=_0x29ad6a(0x568)+_0xb60468+'\x20/\x20'+_0x39572b;}}let OneHundredOne=![],OneHundredFiftyOne=![];function resetBattleState(_0x1b0849){const _0x10bdb6=_0x38c76e;if(!_0x1b0849){restoreEnemyState();if(ascensionSkill[_0x10bdb6(0x33b)]==='焉知非福'||secondAscensionSkill[_0x10bdb6(0x33b)]===_0x10bdb6(0x26c)){battleState[_0x10bdb6(0x498)][_0x10bdb6(0x293)]=!![];const _0x3472a6=(ascensionSkill[_0x10bdb6(0x33b)]===_0x10bdb6(0x26c)?ascensionSkill['baseValue']+ascensionSkill[_0x10bdb6(0x358)](ascensionSkill[_0x10bdb6(0x533)]):0x0)+(secondAscensionSkill[_0x10bdb6(0x33b)]===_0x10bdb6(0x26c)?secondAscensionSkill[_0x10bdb6(0x37b)]+secondAscensionSkill[_0x10bdb6(0x358)](secondAscensionSkill['level']):0x0);logBattleEvent(_0x10bdb6(0x22e)+_0x3472a6+_0x10bdb6(0x42b),_0x10bdb6(0x2f4)),setTimeout(()=>{const _0x54f9b5=_0x10bdb6;battleState['player'][_0x54f9b5(0x293)]=![],logBattleEvent(_0x54f9b5(0x1c7),'aqua');},_0x3472a6*0x3e8);}}_0x1b0849&&battleRounds===0x65&&!OneHundredOne&&(OneHundredOne=!![],addItemToJinnang(_0x10bdb6(0x339),0x1),showInfoBox(_0x10bdb6(0x46d))),_0x1b0849&&battleRounds===0x97&&!OneHundredFiftyOne&&(OneHundredFiftyOne=!![],changeEnemyImage(_0x10bdb6(0x2d5)),autoBattleInterval!==null&&clearAutoBattle,showInfoBox('你已经成功挑战150轮！你的爱宠经受住了魔王的考验，恭喜你！继续挑战会进入无尽模式。')),battleState[_0x10bdb6(0x25b)][_0x10bdb6(0x32b)]&&(enemyMaxHealth=battleState[_0x10bdb6(0x25b)][_0x10bdb6(0x467)]||enemyMaxHealth,battleState['enemy']['benumbed']=![],battleState[_0x10bdb6(0x25b)]['benumbStack']=0x0,battleState[_0x10bdb6(0x25b)][_0x10bdb6(0x467)]=undefined),updateUI(),storeEnemyInitialState(),clearEnemyEffect(),clearPlayerEffect(),enemyHealCount=0x0,updatePetInfo(),resetResurrectionState();}function setBackgroundImage(_0x58dcef){const _0x3e16cc=_0x38c76e,_0x62cfab=document[_0x3e16cc(0x3d6)](_0x3e16cc(0x536));_0x62cfab&&(_0x62cfab[_0x3e16cc(0x352)]['backgroundImage']=_0x3e16cc(0x262)+_0x58dcef+'\x27)');}function logBattleEvent(_0x420708,_0x2f4e88=_0x38c76e(0x516),_0x483314=_0x38c76e(0x33f)){const _0x18a66d=_0x38c76e,_0x4ee61f=document[_0x18a66d(0x4e9)](_0x18a66d(0x397));if(_0x4ee61f){const _0x29d6b2=document[_0x18a66d(0x598)]('p');_0x29d6b2[_0x18a66d(0x341)]=_0x420708,_0x29d6b2[_0x18a66d(0x352)][_0x18a66d(0x51f)]=_0x2f4e88,_0x29d6b2[_0x18a66d(0x352)][_0x18a66d(0x351)]=_0x483314,_0x4ee61f['appendChild'](_0x29d6b2);const _0x47fd27=_0x4ee61f[_0x18a66d(0x519)]('p');while(_0x47fd27[_0x18a66d(0x1f0)]>0x64){_0x4ee61f[_0x18a66d(0x4e5)](_0x47fd27[0x0]);}_0x4ee61f['scrollTop']=_0x4ee61f['scrollHeight'];}else console[_0x18a66d(0x1b6)](_0x18a66d(0x272));}function clearBattleLog(){const _0x51d0f8=_0x38c76e,_0x590fd2=document['getElementById'](_0x51d0f8(0x397));_0x590fd2?_0x590fd2[_0x51d0f8(0x4d5)]='':console[_0x51d0f8(0x1b6)](_0x51d0f8(0x272));}document[_0x38c76e(0x4e9)](_0x38c76e(0x2e8))[_0x38c76e(0x36c)](_0x38c76e(0x54e),()=>clearBattleLog());function toggleFightingDrawer(){const _0x5bbe86=_0x38c76e;if(!attributesFetched){showInfoBox('请先从属性面板获取属性。');return;}if(battleState['player']['taunt']&&!summonEnemy){performAttack(_0x5bbe86(0x1f6));return;}const _0x3b15c0=document[_0x5bbe86(0x4e9)](_0x5bbe86(0x2a2)),_0x4b75f2=_0x3b15c0[_0x5bbe86(0x3ae)][_0x5bbe86(0x1ce)]('open');_0x3b15c0[_0x5bbe86(0x3ae)][_0x5bbe86(0x45d)](_0x5bbe86(0x404));if(_0x4b75f2){_0x3b15c0[_0x5bbe86(0x352)][_0x5bbe86(0x3f1)]='flex',startBattle();if(!summonEnemy){}else updatePetInfo();}else _0x3b15c0['style']['display']=_0x5bbe86(0x2c0),stopBattle();document[_0x5bbe86(0x4e9)](_0x5bbe86(0x353))['innerText']=battleRounds,syncBattlePetSelect();}function calculateSkillAttributes(){const _0x8dd298=_0x38c76e,_0x3c9c45=document[_0x8dd298(0x4e9)](_0x8dd298(0x3ff));let _0x1ea6ff={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0};maxLifeSpan=0x1388;if(_0x3c9c45&&currentPet[_0x8dd298(0x3bd)]){const _0x46075e=Array[_0x8dd298(0x200)](_0x3c9c45[_0x8dd298(0x4a5)]);_0x46075e[_0x8dd298(0x284)](_0x289b9b=>{const _0x31e23f=_0x8dd298,_0x3310ca=_0x289b9b[_0x31e23f(0x341)][_0x31e23f(0x252)]('\x20')[0x0],_0x38fc78=currentPet[_0x31e23f(0x3bd)]['find'](_0x3d43ca=>_0x3d43ca['name']===_0x3310ca&&(_0x3d43ca['type']==='N'||_0x3d43ca['type']==='NE'));if(_0x38fc78){const _0x14c6f7=_0x38fc78[_0x31e23f(0x533)]||0x1,_0x2b211b=Math['max'](0x1,_0x38fc78['multiplier']),_0x3e97ae=0.1*_0x14c6f7*_0x2b211b;if(_0x38fc78[_0x31e23f(0x2aa)]==='N'&&_0x38fc78[_0x31e23f(0x33b)]==='长寿'){const _0x504984=Math[_0x31e23f(0x53b)](0xa8*_0x3e97ae*_0x14c6f7);maxLifeSpan+=_0x504984;}const _0x373f39={'天神祝福':{'health':0x7d0,'speed':0xc8,'maxLevel':0x6},'天王护卫':{'physicalDefense':0x1f4,'magicDefense':0x1f4,'maxLevel':0x6},'姐就是女王':{'health':0x2710,'maxLevel':0x6},'生生不息':{'lifeSpanBonus':0x2710,'maxLevel':0x6}};if(_0x38fc78['type']==='N')_0x1ea6ff[_0x31e23f(0x5ad)]+=Math[_0x31e23f(0x53b)](0xa8*_0x3e97ae),_0x1ea6ff['mana']+=Math['round'](0x62*_0x3e97ae),_0x1ea6ff[_0x31e23f(0x3f0)]+=Math[_0x31e23f(0x53b)](0x40*_0x3e97ae),_0x1ea6ff['physicalDefense']+=Math[_0x31e23f(0x53b)](0x20*_0x3e97ae),_0x1ea6ff[_0x31e23f(0x2b4)]+=Math['round'](0x3f*_0x3e97ae),_0x1ea6ff[_0x31e23f(0x4d3)]+=Math[_0x31e23f(0x53b)](0x1f*_0x3e97ae),_0x1ea6ff[_0x31e23f(0x495)]+=Math[_0x31e23f(0x53b)](0x9*_0x3e97ae);else{if(_0x38fc78[_0x31e23f(0x2aa)]==='NE'){const _0x40e44f=_0x373f39[_0x3310ca];if(_0x40e44f){const _0x5e25cd=_0x40e44f[_0x31e23f(0x5ae)]||_0x14c6f7,_0x50b6ff=Math['min'](_0x5e25cd,_0x14c6f7);_0x3310ca===_0x31e23f(0x470)?maxLifeSpan+=_0x40e44f['lifeSpanBonus']*_0x50b6ff:Object[_0x31e23f(0x3c2)](_0x40e44f)['forEach'](([_0x46887b,_0x3e4f46])=>{const _0x31051d=_0x31e23f;_0x46887b!==_0x31051d(0x5ae)&&_0x46887b!==_0x31051d(0x3a4)&&_0x1ea6ff[_0x31051d(0x59a)](_0x46887b)&&(_0x1ea6ff[_0x46887b]+=_0x3e4f46*_0x50b6ff);});}}}}});}return _0x1ea6ff;}function updatePetInfo(){const _0x47ad8c=_0x38c76e;if(!currentPet){console[_0x47ad8c(0x1b6)](_0x47ad8c(0x45c));return;}const _0x56a247=calculateCurrentAttributes(),_0x115416={'endurance':_0x56a247[_0x47ad8c(0x593)],'intelligence':_0x56a247[_0x47ad8c(0x4b9)],'strength':_0x56a247[_0x47ad8c(0x2f5)],'agility':_0x56a247[_0x47ad8c(0x1d6)],'faith':_0x56a247[_0x47ad8c(0x482)]},_0x350631=calculateSecondaryAttributes(_0x115416,currentWisdom),_0x45170d=getCurrentSpiritAttributes(),_0x316084=playerCritRate,_0x58bb82=playerCritDamage;!battleState?(battleState={'player':{'health':_0x350631[_0x47ad8c(0x5ad)]+_0x45170d['health']+ascensionAttributes[_0x47ad8c(0x5ad)],'mana':_0x350631[_0x47ad8c(0x5a5)]+_0x45170d[_0x47ad8c(0x5a5)]+ascensionAttributes[_0x47ad8c(0x5a5)],'physicalAttack':_0x350631[_0x47ad8c(0x3f0)]+_0x45170d['physicalAttack']+ascensionAttributes[_0x47ad8c(0x3f0)],'physicalDefense':_0x350631['physicalDefense']+_0x45170d[_0x47ad8c(0x263)]+ascensionAttributes['physicalDefense'],'magicAttack':_0x350631[_0x47ad8c(0x2b4)]+_0x45170d[_0x47ad8c(0x2b4)]+ascensionAttributes[_0x47ad8c(0x2b4)],'magicDefense':_0x350631[_0x47ad8c(0x4d3)]+_0x45170d[_0x47ad8c(0x4d3)]+ascensionAttributes[_0x47ad8c(0x4d3)],'speed':_0x350631[_0x47ad8c(0x495)]+_0x45170d[_0x47ad8c(0x495)]+ascensionAttributes[_0x47ad8c(0x495)],'critRate':playerCritRate,'critDamage':playerCritDamage},'enemy':{...enemyPet}},ascensionSkill['name']&&ascensionEnabled&&ascensionSkill['name']!=='被封印的技能'&&(battleState[_0x47ad8c(0x498)][_0x47ad8c(0x425)]=ascensionSkill['name']),secondAscensionSkill[_0x47ad8c(0x33b)]&&reenableAscension&&secondAscensionSkill[_0x47ad8c(0x33b)]!=='被封印的技能'&&(battleState['player'][_0x47ad8c(0x38b)]=secondAscensionSkill[_0x47ad8c(0x33b)])):(battleState[_0x47ad8c(0x498)]['health']=_0x350631[_0x47ad8c(0x5ad)]+_0x45170d['health']+ascensionAttributes['health'],battleState[_0x47ad8c(0x498)][_0x47ad8c(0x5a5)]=_0x350631[_0x47ad8c(0x5a5)]+_0x45170d[_0x47ad8c(0x5a5)]+ascensionAttributes['mana'],battleState[_0x47ad8c(0x498)][_0x47ad8c(0x3f0)]=_0x350631[_0x47ad8c(0x3f0)]+_0x45170d[_0x47ad8c(0x3f0)]+ascensionAttributes['physicalAttack'],battleState[_0x47ad8c(0x498)][_0x47ad8c(0x263)]=_0x350631[_0x47ad8c(0x263)]+_0x45170d[_0x47ad8c(0x263)]+ascensionAttributes[_0x47ad8c(0x263)],battleState[_0x47ad8c(0x498)][_0x47ad8c(0x2b4)]=_0x350631[_0x47ad8c(0x2b4)]+_0x45170d[_0x47ad8c(0x2b4)]+ascensionAttributes[_0x47ad8c(0x2b4)],battleState[_0x47ad8c(0x498)][_0x47ad8c(0x4d3)]=_0x350631[_0x47ad8c(0x4d3)]+_0x45170d[_0x47ad8c(0x4d3)]+ascensionAttributes[_0x47ad8c(0x4d3)],battleState['player'][_0x47ad8c(0x495)]=_0x350631[_0x47ad8c(0x495)]+_0x45170d[_0x47ad8c(0x495)]+ascensionAttributes[_0x47ad8c(0x495)],battleState[_0x47ad8c(0x498)][_0x47ad8c(0x4d2)]=playerCritRate,battleState['player'][_0x47ad8c(0x4e8)]=playerCritDamage,ascensionSkill[_0x47ad8c(0x33b)]&&ascensionEnabled&&ascensionSkill[_0x47ad8c(0x33b)]!=='被封印的技能'&&(battleState['player'][_0x47ad8c(0x425)]=ascensionSkill['name']),secondAscensionSkill[_0x47ad8c(0x33b)]&&reenableAscension&&ascensionSkill['name']!==_0x47ad8c(0x436)&&(battleState['player'][_0x47ad8c(0x38b)]=secondAscensionSkill[_0x47ad8c(0x33b)])),battleAttributes={...battleState[_0x47ad8c(0x498)]},maxHealth=battleAttributes[_0x47ad8c(0x5ad)],maxMana=battleAttributes[_0x47ad8c(0x5a5)],updateUI(),attributesFetched=!![];}let summonEnemy=![];const enemyImages=[{'status':_0x38c76e(0x356),'name':'妖怪','url':_0x38c76e(0x2ca)},{'status':_0x38c76e(0x466),'name':_0x38c76e(0x395),'url':'https://pic.imgdb.cn/item/669e973ad9c307b7e9381309.gif'},{'status':_0x38c76e(0x286),'name':_0x38c76e(0x412),'url':_0x38c76e(0x305)},{'status':'realShape','name':_0x38c76e(0x548),'url':'https://pic.imgdb.cn/item/66a616f4d9c307b7e9b24c97.gif'},{'status':_0x38c76e(0x29f),'name':_0x38c76e(0x1c5),'url':'https://pic.imgdb.cn/item/66a61b8cd9c307b7e9b71e30.gif'},{'status':_0x38c76e(0x510),'name':_0x38c76e(0x273),'url':_0x38c76e(0x253)},{'status':'practiceEnemyPlus','name':'高级树桩','url':_0x38c76e(0x253)},{'status':_0x38c76e(0x393),'name':_0x38c76e(0x2dc),'url':_0x38c76e(0x435)},{'status':'expEnemy','name':_0x38c76e(0x4de),'url':'https://pic.imgdb.cn/item/66cd62b1d9c307b7e9afcf5b.gif'},{'status':_0x38c76e(0x4cb),'name':_0x38c76e(0x4e0),'url':'https://pic.imgdb.cn/item/66cdda7cd9c307b7e941d522.gif'},{'status':'qiongQi','name':'穷奇','url':'https://pic.imgdb.cn/item/66d07119d9c307b7e93234a9.gif'},{'status':'baiYin','name':_0x38c76e(0x22a),'url':_0x38c76e(0x502)},{'status':_0x38c76e(0x387),'name':'岩龙','url':_0x38c76e(0x271)},{'status':'fireGiant','name':'火焰巨人','url':_0x38c76e(0x56c)}];function changeEnemyImage(_0x394b84){const _0x420aeb=_0x38c76e,_0x4470bc=enemyImages['find'](_0x1efcaa=>_0x1efcaa['status']===_0x394b84);_0x4470bc?(document[_0x420aeb(0x4e9)](_0x420aeb(0x55a))[_0x420aeb(0x49a)]=_0x4470bc['url'],document[_0x420aeb(0x4e9)](_0x420aeb(0x2d9))[_0x420aeb(0x341)]=_0x4470bc[_0x420aeb(0x33b)]):console[_0x420aeb(0x1b6)](_0x420aeb(0x390)+_0x394b84+'\x27\x20not\x20found\x20in\x20enemyImages.');}const enemies={'practiceEnemy':{'name':_0x38c76e(0x273),'level':0x64,'health':0x12a05f200,'mana':0x12a05f200,'physicalAttack':0x64,'physicalDefense':0x0,'magicAttack':0x64,'magicDefense':0x0,'speed':0x64,'cultivation':0x400,'enemyCritRate':0.8,'enemyCritDamage':2.5,'backgroundImage':_0x38c76e(0x592),'reward':()=>gainExp(0xbb8),'rewardMessage':_0x38c76e(0x406),'specialty':_0x38c76e(0x510)},'practiceEnemyPlus':{'name':'高级练习树桩','level':0xc8,'health':0x12a05f200,'mana':0x12a05f200,'physicalAttack':0x3e8,'physicalDefense':0x186a0,'magicAttack':0x3e8,'magicDefense':0x186a0,'speed':0xea60,'cultivation':0x7ef40,'enemyCritRate':0.8,'enemyCritDamage':2.5,'backgroundImage':_0x38c76e(0x592),'reward':()=>gainExp(0x2710),'rewardMessage':_0x38c76e(0x3f4),'specialty':'practiceEnemyPlus'},'ancientEvil':{'name':_0x38c76e(0x4bf),'level':0x64,'health':0x400c7c0,'mana':0x249f00,'physicalAttack':0x29040,'physicalDefense':0xf423f,'magicAttack':0x13ec,'magicDefense':0xf423f,'speed':0xbb8,'cultivation':0x250f8,'enemyCritRate':0.01,'enemyCritDamage':0x3e8,'backgroundImage':_0x38c76e(0x592),'reward':()=>{const _0x1b2d93=_0x38c76e,_0x462b56=[_0x1b2d93(0x236),_0x1b2d93(0x270),_0x1b2d93(0x3f2)],_0x42411d=_0x462b56[Math['floor'](Math[_0x1b2d93(0x207)]()*_0x462b56[_0x1b2d93(0x1f0)])],_0x286974=Math[_0x1b2d93(0x265)](Math[_0x1b2d93(0x207)]()*0x4)+0x2,_0xed1a58={'cultivationPill500':_0x1b2d93(0x4ce),'universalCrystal':_0x1b2d93(0x316),'universalKernel':_0x1b2d93(0x414)};addItemToJinnang(_0x42411d,_0x286974),showInfoBox('你获得了'+_0x286974+'个'+_0xed1a58[_0x42411d]+_0x1b2d93(0x31c));},'rewardMessage':'无','specialty':_0x38c76e(0x393)},'expEnemy':{'name':_0x38c76e(0x4de),'level':0xc8,'health':0x7944ec0,'mana':0x249f00,'physicalAttack':0x445c0,'physicalDefense':0x3a980,'magicAttack':0x4da30,'magicDefense':0x21408,'speed':0x46118,'cultivation':0x49ae8,'enemyCritRate':0.15,'enemyCritDamage':1.8,'backgroundImage':_0x38c76e(0x3b4),'reward':()=>gainExp(0x186a00),'rewardMessage':_0x38c76e(0x2fd),'specialty':'expEnemy'},'noWorkBoss':{'name':_0x38c76e(0x4e0),'level':0xc8,'health':0x258,'mana':0x2ab980,'physicalAttack':0x992,'physicalDefense':0x4b0,'magicAttack':0x992,'magicDefense':0x4b0,'speed':0xf423f,'cultivation':0x98967f,'enemyCritRate':0x1,'enemyCritDamage':2.5,'backgroundImage':_0x38c76e(0x3b4),'reward':()=>addItemToJinnang(_0x38c76e(0x4bd),0x1),'rewardMessage':'天使之翼','specialty':_0x38c76e(0x4cb)},'qiongQi':{'name':'穷奇','level':0xa0,'health':0x9470,'mana':0x2ee0,'physicalAttack':0xd7a,'physicalDefense':0xf870,'magicAttack':0x468,'magicDefense':0x7a12,'speed':0x4e200,'cultivation':0x249f0,'enemyCritRate':0x0,'enemyCritDamage':0x0,'backgroundImage':_0x38c76e(0x39c),'reward':()=>addItemToJinnang('wealthyGemBag',0x1),'rewardMessage':_0x38c76e(0x43b),'specialty':'qiongQi'},'baiYin':{'name':_0x38c76e(0x2ed),'level':0xb4,'health':0x186a0,'mana':0x4e20,'physicalAttack':0x5dc,'physicalDefense':0x12c,'magicAttack':0x514,'magicDefense':0x118,'speed':0x7e8,'cultivation':0x400,'enemyCritRate':0.5,'enemyCritDamage':1.5,'backgroundImage':_0x38c76e(0x3d7),'reward':()=>{const _0x177605=_0x38c76e,_0x1c5c7b=Math[_0x177605(0x53b)](petLevel*(0x5+Math['random']()*0x5));petLevel<=0xb4&&gainExp(_0x1c5c7b),handleBaiYinReward();},'rewardMessage':'无','specialty':'baiYin'},'stoneDragon':{'name':'岩龙','level':0xb4,'health':0xe27f6600,'mana':0x1e848,'physicalAttack':0xd7a,'physicalDefense':0xea60,'magicAttack':0x468,'magicDefense':0xea60,'speed':0x960,'cultivation':0x730a0,'enemyCritRate':0.65,'enemyCritDamage':3.8,'backgroundImage':_0x38c76e(0x285),'reward':()=>{const _0x20ef45=_0x38c76e;generateItemToJinnang(_0x20ef45(0x59d),_0x20ef45(0x3ac),_0x20ef45(0x2ef),price=0x1f40,quantity=0x1,description=_0x20ef45(0x51d)),increaseCurrentPetIntimacy(0x258);},'rewardMessage':'1个珍贵的洪荒至尊仙葫。在这次艰难的对抗中，你的宠物与你并肩作战，好感大增，亲密度增加了600！','specialty':_0x38c76e(0x387)},'fireGiant':{'name':_0x38c76e(0x389),'level':0xb4,'health':0x3b9aca00,'mana':0x2faf080,'physicalAttack':0xa5a,'physicalDefense':0xbb8,'magicAttack':0x1978,'magicDefense':0xa8c,'speed':0xea60,'cultivation':0x1f40,'enemyCritRate':0.35,'enemyCritDamage':2.15,'backgroundImage':_0x38c76e(0x285),'reward':()=>{increaseCurrentPetLearningValue(0x3e8),increaseCurrentPetIntimacy(0x258);},'rewardMessage':'在法术精英怪物训练下的珍贵成果：1000学习度和600亲密度，可用于训练技能加成','specialty':'fireGiant'}},specificAttackByEnemy={'expEnemy':{'type':'interval','action':()=>handleExpEnemySkill()},'noWorkBoss':{'type':_0x38c76e(0x28c),'action':()=>{const _0x3cf039=_0x38c76e,_0x27f7e9=Math[_0x3cf039(0x53b)](battleAttributes[_0x3cf039(0x5a5)]*0.15);battleAttributes[_0x3cf039(0x5a5)]-=_0x27f7e9,battleState[_0x3cf039(0x25b)][_0x3cf039(0x4d3)]=Math[_0x3cf039(0x53b)](battleAttributes[_0x3cf039(0x2b4)]*battleState[_0x3cf039(0x498)]['critDamage']),battleState[_0x3cf039(0x25b)][_0x3cf039(0x263)]=Math['round'](battleAttributes[_0x3cf039(0x263)]*battleState['player'][_0x3cf039(0x4e8)]),logBattleEvent(_0x3cf039(0x2ce)+_0x27f7e9+_0x3cf039(0x24d),_0x3cf039(0x4dd)),handleNoWorkBossSkill();}},'ancientEvil':{'type':_0x38c76e(0x28c),'action':()=>handleAncientEvilSkill()},'qiongQi':{'type':_0x38c76e(0x3c3),'action':()=>{handleQiongQiSkill(),handleTaunt();}},'practiceEnemy':{'type':_0x38c76e(0x3c3),'action':()=>{let _0x142f4f;_0x142f4f=setTimeout(()=>{const _0x493e6f=_0x6e96;summonEnemy&&battleState[_0x493e6f(0x25b)]['specialty']===_0x493e6f(0x510)&&onBattleState?(battleState[_0x493e6f(0x25b)][_0x493e6f(0x3f0)]+=0x2dc6c0,battleState['enemy']['magicAttack']+=0x2dc6c0,updateUI(),showInfoBox(_0x493e6f(0x2d2))):clearTimeout(_0x142f4f);},0x927c0);}},'practiceEnemyPlus':{'type':'instant','action':()=>{let _0x3f0f80;_0x3f0f80=setTimeout(()=>{const _0x4777cb=_0x6e96;summonEnemy&&battleState[_0x4777cb(0x25b)][_0x4777cb(0x405)]==='practiceEnemyPlus'&&onBattleState?(battleState[_0x4777cb(0x25b)][_0x4777cb(0x5ad)]=enemyMaxHealth,updateUI(),logBattleEvent('❤️【敌人恢复】加强版树桩恢复了满状态生命值')):clearTimeout(_0x3f0f80);},0x7530);}},'baiYin':{'type':_0x38c76e(0x3c3),'action':()=>{const _0x541434=_0x38c76e;logBattleEvent(_0x541434(0x24b),'gold');}},'stoneDragon':{'type':_0x38c76e(0x28c),'action':()=>{const _0x371f54=_0x38c76e;if(summonEnemy&&battleState[_0x371f54(0x25b)]['name']==='岩龙'&&onBattleState){if(battleState[_0x371f54(0x25b)]['health']>=enemyMaxHealth*0.2)battleState[_0x371f54(0x25b)]['physicalDefense']+=0xea60,battleState[_0x371f54(0x25b)]['magicDefense']+=0xea60,updateUI();else{battleState[_0x371f54(0x25b)][_0x371f54(0x3f0)]+=Math[_0x371f54(0x265)](Math['random']()*0x5dc+0x5dc);if(battleState['player']['shocked'])return;else battleState['player']['shocked']=!![],logBattleEvent(_0x371f54(0x575),_0x371f54(0x562));}}}},'fireGiant':{'type':_0x38c76e(0x3c3),'action':()=>{const _0x54246d=_0x38c76e;typeof battleState['player']['heat']==='undefined'&&(battleState['player'][_0x54246d(0x4d4)]=![]);if(battleState[_0x54246d(0x498)][_0x54246d(0x4d4)])return;const _0x28fdc6=playerCritDamage,_0x4c2e2d=playerCritRate;battleState['player'][_0x54246d(0x4e8)]=Math['max'](1.5,_0x28fdc6*0x2),battleState[_0x54246d(0x498)]['critRate']=Math[_0x54246d(0x275)](0.1,Math['min'](0.5,Math[_0x54246d(0x265)](_0x4c2e2d*0x32)*0.01)),battleState[_0x54246d(0x498)][_0x54246d(0x4d4)]=!![],showEffect(_0x54246d(0x567),_0x54246d(0x276)),updateUI();}}};function handleCleanHeat(){const _0x3d091d=_0x38c76e;battleState[_0x3d091d(0x498)][_0x3d091d(0x4d4)]=![],battleState[_0x3d091d(0x498)][_0x3d091d(0x4e8)]=Math[_0x3d091d(0x275)](1.5,playerCritDamage*0.5),battleState[_0x3d091d(0x498)]['critRate']=Math[_0x3d091d(0x275)](0.1,playerCritRate*0x2),updateUI();}function applySpecificAttackByEnemy(_0x230ab5){const _0x3f2df1=_0x38c76e,_0x5a5180=specificAttackByEnemy[_0x230ab5];if(_0x5a5180){if(_0x5a5180[_0x3f2df1(0x2aa)]===_0x3f2df1(0x28c))_0x5a5180['action']();else _0x5a5180[_0x3f2df1(0x2aa)]===_0x3f2df1(0x3c3)&&_0x5a5180[_0x3f2df1(0x368)]();}else console[_0x3f2df1(0x397)](_0x3f2df1(0x2dd)+_0x230ab5+_0x3f2df1(0x3ec));}function handleBattleWithSummonEnemy(_0x17d98b){const _0x5108d1=_0x38c76e;if(!battleState['enemyKey']||!enemies[battleState[_0x5108d1(0x256)]])return;const _0x502af0=enemies[battleState[_0x5108d1(0x256)]];_0x17d98b?_0x502af0['reward']?(_0x502af0[_0x5108d1(0x4ab)](),_0x502af0[_0x5108d1(0x570)]!=='无'&&showInfoBox(_0x5108d1(0x32a)+_0x502af0[_0x5108d1(0x33b)]+_0x5108d1(0x399)+_0x502af0[_0x5108d1(0x570)]+'！',null,null,_0x5108d1(0x520))):showInfoBox(_0x5108d1(0x32a)+_0x502af0[_0x5108d1(0x33b)]+_0x5108d1(0x1cc),null,null,_0x5108d1(0x218)):showInfoBox(_0x5108d1(0x1b7)+_0x502af0[_0x5108d1(0x33b)]+_0x5108d1(0x553),null,null,_0x5108d1(0x2cf)),resetBattleState(!![]),resetBuffState(![]),clearEnemyEffect(),clearPlayerEffect(),clearAutoBattle(),restoreEnemyState(),summonEnemy=![],updateUI();}function summonEnemyByType(_0xdaa4b2,_0x2831f5=!![]){const _0xcc4166=_0x38c76e;if(!summonEnemy&&attributesFetched){const _0x5dc099=enemies[_0xdaa4b2];if(_0x5dc099){const _0x58e311=()=>{const _0x481330=_0x6e96;summonEnemy=!![],toggleFightingDrawer(),battleState['enemy']={..._0x5dc099},battleState[_0x481330(0x256)]=_0xdaa4b2,enemyMaxHealth=_0x5dc099[_0x481330(0x5ad)],enemyMaxMana=_0x5dc099[_0x481330(0x5a5)],enemyPetCultivation=_0x5dc099[_0x481330(0x5a6)],enemyCritRate=_0x5dc099[_0x481330(0x47e)],enemyCritDamage=_0x5dc099[_0x481330(0x477)],changeEnemyImage(_0xdaa4b2),setBackgroundImage(_0x5dc099[_0x481330(0x3b7)]),document['getElementById'](_0x481330(0x50f))[_0x481330(0x341)]=_0x5dc099[_0x481330(0x533)],updateUI(),storeSummonEnemyInitialState();const _0x45c7c8=specificAttackByEnemy[_0x5dc099['specialty']];_0x45c7c8&&_0x45c7c8[_0x481330(0x2aa)]===_0x481330(0x3c3)&&_0x45c7c8[_0x481330(0x368)]();};_0x2831f5?showInfoBox('你将会召唤'+_0x5dc099[_0xcc4166(0x33b)]+_0xcc4166(0x2c1),_0x58e311,()=>{const _0x524969=_0xcc4166;summonEnemy=![],goldAmount-=0x4e20,updateGoldDisplay(goldAmount),showInfoBox(_0x524969(0x2ab),null,null,_0x524969(0x2cf));return;}):_0x58e311();}else showInfoBox(_0xcc4166(0x5ab),null,null,'red');}else showInfoBox(_0xcc4166(0x36f),null,null,_0xcc4166(0x2cf));}function handleBaiYinReward(){const _0x289c1c=_0x38c76e,_0x54db4d=getRandomInt(0x1,0x64);if(_0x54db4d<=0x32)generateItemToJinnang(_0x289c1c(0x517),'宇宙之尘',_0x289c1c(0x336),price=0xa,quantity=0x1,description=_0x289c1c(0x3e8)),showInfoBox(_0x289c1c(0x297),null,null,null,_0x289c1c(0x336));else _0x54db4d<=0x5a?(addItemToJinnang(_0x289c1c(0x417),0x1),showInfoBox('你获得一个盲盒宝石袋',null,null,null,_0x289c1c(0x288))):(addItemToJinnang('universalCrystal',0x1),showInfoBox(_0x289c1c(0x37d),null,null,null,_0x289c1c(0x3a1)));}let baiYinInterval=null;function handleBattleWithBaiYin(){const _0x2e5c74=_0x38c76e;if(baiYinInterval!==null){showInfoBox(_0x2e5c74(0x330),null,null,_0x2e5c74(0x2cf));return;}showInfoBox(_0x2e5c74(0x250),null,null,_0x2e5c74(0x2cf)),!onBattleState&&!summonEnemy?baiYinInterval=setInterval(()=>{const _0x182059=_0x2e5c74;useItem(_0x182059(0x3eb),0x1)?(summonEnemyByType(_0x182059(0x315),![]),addItemToJinnang(_0x182059(0x3bb),0x1),autoBattle()):(clearInterval(baiYinInterval),baiYinInterval=null,showInfoBox(_0x182059(0x497)),document[_0x182059(0x4e9)](_0x182059(0x373))[_0x182059(0x352)][_0x182059(0x3f1)]='none');},0x3e8):(clearInterval(baiYinInterval),baiYinInterval=null);}function handleExpEnemySkill(){const _0x8ff57b=_0x38c76e,_0x3ad8ac=Math['round'](battleAttributes['health']*0.1);battleAttributes[_0x8ff57b(0x5ad)]-=_0x3ad8ac,battleState[_0x8ff57b(0x25b)][_0x8ff57b(0x5ad)]+=_0x3ad8ac*0xa,battleAttributes['physicalDefense']=0x1,battleAttributes[_0x8ff57b(0x4d3)]=0x1,logBattleEvent(_0x8ff57b(0x52b)+_0x3ad8ac+_0x8ff57b(0x260),'red'),updateUI();}let qiongQi=null;function handleQiongQiSkill(){const _0x314802=_0x38c76e,_0x41ffc8=battleState[_0x314802(0x25b)][_0x314802(0x405)]==='qiongQi',_0x56d91d=Math[_0x314802(0x53b)](battleAttributes['health']*(0.01+Math[_0x314802(0x207)]()*0.02));let _0x95ba6c=Math[_0x314802(0x53b)](_0x56d91d*playerCritDamage);battleAttributes[_0x314802(0x3f0)]*=0.01,battleAttributes[_0x314802(0x2b4)]*=0.01,qiongQi!==null&&(clearInterval(qiongQi),qiongQi=null),summonEnemy&&_0x41ffc8?(battleState['enemy'][_0x314802(0x263)]=0xe8d4a50fff,battleState[_0x314802(0x25b)][_0x314802(0x4d3)]=0xe8d4a50fff,setTimeout(()=>{const _0x428b6c=_0x314802;battleState[_0x428b6c(0x25b)]['physicalDefense']=battleAttributes[_0x428b6c(0x3f0)]*0x64,battleState['enemy']['magicDefense']=battleAttributes[_0x428b6c(0x2b4)]*0x64,qiongQi=setInterval(()=>{const _0x29599a=_0x428b6c;battleAttributes[_0x29599a(0x5ad)]-=_0x56d91d,enemyMaxHealth+=_0x56d91d,battleState[_0x29599a(0x25b)][_0x29599a(0x5ad)]+=_0x56d91d,battleState[_0x29599a(0x25b)][_0x29599a(0x263)]+=_0x95ba6c,battleState[_0x29599a(0x25b)]['magicDefense']+=_0x95ba6c,enemyPetCultivation=playerCultivation+0x5dc0,battleState[_0x29599a(0x25b)]['speed']=battleAttributes[_0x29599a(0x495)]+0x960,updateUI(),(battleAttributes[_0x29599a(0x5ad)]<=0x0||battleState['enemy']['health']<=0x0||!summonEnemy)&&(clearInterval(qiongQi),qiongQi=null);},0x3e8);},0xbb8),logBattleEvent(_0x314802(0x244),_0x314802(0x4d0))):qiongQi!==null&&(clearInterval(qiongQi),qiongQi=null);}function handleNoWorkBossSkill(){const _0xcd1a89=_0x38c76e;if(Math['random']()<0.8)return;const _0xb913ea=document[_0xcd1a89(0x4e9)](_0xcd1a89(0x50f)),_0x285042=parseInt(_0xb913ea[_0xcd1a89(0x341)],0xa),_0x5333ec=_0x285042+0xc8;_0xb913ea[_0xcd1a89(0x341)]=_0x5333ec,logBattleEvent('無班之魂变得恼怒，等级提升了',_0xcd1a89(0x2cf));}function handleAncientEvilSkill(){const _0x2e8ed9=_0x38c76e;typeof battleState['player'][_0x2e8ed9(0x2f6)]===_0x2e8ed9(0x377)&&(battleState[_0x2e8ed9(0x498)][_0x2e8ed9(0x2f6)]=![]);if(battleState[_0x2e8ed9(0x498)][_0x2e8ed9(0x2f6)])return;const _0x1052c8=playerCritDamage,_0x3bca10=enemyCritDamage;battleState['player']['critDamage']=_0x1052c8*0.5,enemyCritDamage+=_0x1052c8*0.5,battleState['player'][_0x2e8ed9(0x2f6)]=!![],setTimeout(()=>{const _0x2718f3=_0x2e8ed9;battleState[_0x2718f3(0x498)]['damageLost']=![],battleState[_0x2718f3(0x498)][_0x2718f3(0x4e8)]=_0x1052c8,enemyCritDamage=_0x3bca10,updateUI();},0x2710),logBattleEvent('太古魔魂会吸收你的暴击伤害作为己用',_0x2e8ed9(0x4dd));}function initializeEnemyPet(){const _0x74dcd=_0x38c76e;enemyPet={'health':0xd,'mana':0x7,'physicalAttack':0x9,'physicalDefense':0x3,'magicAttack':0x5,'magicDefense':0x1,'speed':0x7,'cultivation':0xc},enemyMaxHealth=enemyPet['health'],enemyMaxMana=enemyPet[_0x74dcd(0x5a5)],enemyPetCultivation=enemyPet[_0x74dcd(0x5a6)],battleState&&(battleState[_0x74dcd(0x25b)]={...enemyPet}),storeEnemyInitialState();}function updateEnemyAttributes(){const _0x1291f7=_0x38c76e,_0x527e3d={'health':0x11e1a300,'mana':0x8f0d180,'physicalAttack':0x53020,'physicalDefense':0x38270,'magicAttack':0x41eb0,'magicDefense':0x38270,'speed':0xfa00,'cultivation':0x7ef40},_0x45d2ee={'health':0xc350,'mana':0x7d00,'physicalAttack':0x1e,'physicalDefense':0x96,'magicAttack':0x19,'magicDefense':0x78,'speed':0x14,'cultivation':0x23};function _0x429de6(_0x5a2907,_0x595bb0){const _0x5802f9=_0x6e96;let _0x39e56b=0x0;if(battleRounds<=0x2d){const _0x5b475e=Math[_0x5802f9(0x265)](Math['random']()*0x32)+0x1+battleRounds;_0x39e56b=_0x595bb0+0x7*_0x5b475e;}else{if(battleRounds<=0x46){const _0x37d4cb=Math[_0x5802f9(0x265)](Math[_0x5802f9(0x207)]()*0x3c)+0x1+battleRounds;_0x39e56b=_0x595bb0+0x8*_0x37d4cb;}else{if(battleRounds<=0x50){const _0x30952c=Math[_0x5802f9(0x265)](Math[_0x5802f9(0x207)]()*0x64)+0x1+battleRounds;_0x39e56b=_0x595bb0+0x10*_0x30952c;}else{if(battleRounds<=0x5a){const _0x42734a=0.0003+Math[_0x5802f9(0x207)]()*0.0006;_0x39e56b=_0x595bb0+_0x527e3d[_0x5a2907]*_0x42734a;}else{if(battleRounds<=0x63){const _0x1c8567=0.0006+Math[_0x5802f9(0x207)]()*0.0012;_0x39e56b=_0x595bb0+_0x527e3d[_0x5a2907]*_0x1c8567;}else{if(battleRounds===0x64)_0x39e56b=_0x527e3d[_0x5a2907]*0.1;else{if(battleRounds<=0x95){const _0x1e15d1=_0x527e3d[_0x5a2907]*0.1,_0x3d52fb=(_0x527e3d[_0x5a2907]-_0x1e15d1)/0x96;_0x39e56b=_0x3d52fb*battleRounds;}else{if(battleRounds===0x96)_0x39e56b=_0x527e3d[_0x5a2907];else{const _0x1e3254=_0x527e3d[_0x5a2907],_0x107937=battleRounds-0x96,_0x14f89a=Math[_0x5802f9(0x265)](Math['random']()*(0x96-0x2+0x1))+0x2,_0xf29599=_0x107937*(_0x45d2ee[_0x5a2907]*_0x14f89a);_0x39e56b=_0x1e3254+_0xf29599;}}}}}}}}return battleRounds<=0x96&&(_0x39e56b=Math['min'](_0x39e56b,_0x527e3d[_0x5a2907])),_0x39e56b;}!battleState[_0x1291f7(0x25b)]['rampaged']&&(enemyCritRate=Math[_0x1291f7(0x207)]()*0.99+0.01,enemyCritDamage=Math[_0x1291f7(0x207)]()*1.5+1.5),enemyPet[_0x1291f7(0x5ad)]=Math[_0x1291f7(0x53b)](_0x429de6(_0x1291f7(0x5ad),enemyPet['health'])),enemyPet['mana']=Math['round'](_0x429de6(_0x1291f7(0x5a5),enemyPet[_0x1291f7(0x5a5)])),enemyPet[_0x1291f7(0x3f0)]=Math['round'](_0x429de6(_0x1291f7(0x3f0),enemyPet[_0x1291f7(0x3f0)])),enemyPet[_0x1291f7(0x263)]=Math['round'](_0x429de6('physicalDefense',enemyPet[_0x1291f7(0x263)])),enemyPet[_0x1291f7(0x2b4)]=Math['round'](_0x429de6('magicAttack',enemyPet[_0x1291f7(0x2b4)])),enemyPet['magicDefense']=Math[_0x1291f7(0x53b)](_0x429de6('magicDefense',enemyPet[_0x1291f7(0x4d3)])),enemyPet[_0x1291f7(0x495)]=Math[_0x1291f7(0x53b)](_0x429de6(_0x1291f7(0x495),enemyPet[_0x1291f7(0x495)])),enemyPet[_0x1291f7(0x5a6)]=Math[_0x1291f7(0x53b)](_0x429de6(_0x1291f7(0x5a6),enemyPet[_0x1291f7(0x5a6)])),enemyMaxHealth=enemyPet[_0x1291f7(0x5ad)],enemyMaxMana=enemyPet[_0x1291f7(0x5a5)],enemyPetCultivation=enemyPet[_0x1291f7(0x5a6)],battleState[_0x1291f7(0x25b)]={...enemyPet},storeEnemyInitialState(),enemyLevel=battleRounds,document[_0x1291f7(0x4e9)](_0x1291f7(0x50f))[_0x1291f7(0x341)]=enemyLevel,handleRampaged();}function storeEnemyInitialState(){const _0x4086bd=_0x38c76e;enemyInitialState=JSON[_0x4086bd(0x514)](JSON[_0x4086bd(0x2c4)](enemyPet));}function restoreEnemyState(){const _0x1f8510=_0x38c76e;enemyInitialState&&(enemyPet=JSON['parse'](JSON[_0x1f8510(0x2c4)](enemyInitialState)),enemyMaxHealth=enemyPet['health'],enemyMaxMana=enemyPet[_0x1f8510(0x5a5)],enemyPetCultivation=enemyPet[_0x1f8510(0x5a6)],battleState['enemy']={...enemyPet},clearPlayerEffect(),enemyLevel=battleRounds,document[_0x1f8510(0x4e9)]('enemy-level')[_0x1f8510(0x341)]=enemyLevel);}function storeSummonEnemyInitialState(){const _0x2f55b1=_0x38c76e;if(summonEnemy)summonEnemyInitialState=JSON[_0x2f55b1(0x514)](JSON[_0x2f55b1(0x2c4)](battleState[_0x2f55b1(0x25b)]));}function restoreSummonEnemyState(){const _0x60588d=_0x38c76e;summonEnemyInitialState&&(enemyPet=JSON[_0x60588d(0x514)](JSON[_0x60588d(0x2c4)](enemyInitialState)),enemyMaxHealth=enemyPet[_0x60588d(0x5ad)],enemyMaxMana=enemyPet['mana'],enemyPetCultivation=enemyPet[_0x60588d(0x5a6)],battleState[_0x60588d(0x25b)]={...enemyPet},clearPlayerEffect(),enemyLevel=battleRounds,document[_0x60588d(0x4e9)](_0x60588d(0x50f))['innerText']=enemyLevel);}function getEnemyStatus(){const _0x258cfb=_0x38c76e;let _0x5ed0b7=[];if(!playerTurn)_0x5ed0b7[_0x258cfb(0x3e2)]('⚔️');if(battleState[_0x258cfb(0x25b)]['rampaged'])_0x5ed0b7['push']('狂暴');if(enemyRivival)_0x5ed0b7[_0x258cfb(0x3e2)](_0x258cfb(0x599));if(battleState[_0x258cfb(0x25b)]['armorBreak'])_0x5ed0b7[_0x258cfb(0x3e2)]('破甲');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x359)])_0x5ed0b7[_0x258cfb(0x3e2)]('虚弱');if(battleState[_0x258cfb(0x25b)]['wounded'])_0x5ed0b7[_0x258cfb(0x3e2)]('重伤');if(battleState[_0x258cfb(0x25b)]['bleeding'])_0x5ed0b7['push']('流血');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x379)])_0x5ed0b7['push']('腐蚀');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x325)])_0x5ed0b7[_0x258cfb(0x3e2)]('沉睡');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x266)])_0x5ed0b7[_0x258cfb(0x3e2)]('穿透');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x1e8)])_0x5ed0b7[_0x258cfb(0x3e2)]('沉默');if(battleState['enemy'][_0x258cfb(0x307)])_0x5ed0b7[_0x258cfb(0x3e2)]('中毒');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x411)])_0x5ed0b7[_0x258cfb(0x3e2)]('眩晕');if(battleState[_0x258cfb(0x25b)]['intimidated'])_0x5ed0b7['push']('恐吓');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x40d)])_0x5ed0b7[_0x258cfb(0x3e2)]('惶恐');if(battleState['enemy'][_0x258cfb(0x32b)])_0x5ed0b7[_0x258cfb(0x3e2)]('麻痹');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x41c)])_0x5ed0b7['push']('混乱');if(battleState[_0x258cfb(0x25b)][_0x258cfb(0x42c)])_0x5ed0b7['push']('灼烧');if(battleState[_0x258cfb(0x25b)]['slow'])_0x5ed0b7[_0x258cfb(0x3e2)]('迟缓');return _0x5ed0b7['join'](',\x20');}function updateEnemyStatusDisplay(){const _0x1972c4=_0x38c76e,_0x1ed3d9=document['getElementById'](_0x1972c4(0x513));_0x1ed3d9&&(_0x1ed3d9[_0x1972c4(0x341)]=getEnemyStatus());}function getPlayerStatus(){const _0xb6d3c4=_0x38c76e;let _0x2332e2=[];if(playerTurn)_0x2332e2[_0xb6d3c4(0x3e2)]('⚔️');if(lifeBoxMode)_0x2332e2['push']('肉盾模式');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x58c)])_0x2332e2[_0xb6d3c4(0x3e2)](_0xb6d3c4(0x2d6));if(battleState['player'][_0xb6d3c4(0x2ac)])_0x2332e2[_0xb6d3c4(0x3e2)]('触电');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x4d4)])_0x2332e2['push']('高温');if(battleState[_0xb6d3c4(0x498)]['shielded'])_0x2332e2[_0xb6d3c4(0x3e2)]('护盾');if(battleState[_0xb6d3c4(0x498)]['hidden'])_0x2332e2[_0xb6d3c4(0x3e2)]('隐身');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x204)])_0x2332e2[_0xb6d3c4(0x3e2)](_0xb6d3c4(0x29b));if(battleState[_0xb6d3c4(0x498)]['healing'])_0x2332e2[_0xb6d3c4(0x3e2)]('持续回血');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x1f8)])_0x2332e2[_0xb6d3c4(0x3e2)]('北冥');if(battleState[_0xb6d3c4(0x498)]['spiritPowerActive'])_0x2332e2[_0xb6d3c4(0x3e2)](_0xb6d3c4(0x2ad));if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x293)])_0x2332e2['push'](_0xb6d3c4(0x36a));if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x3a9)])_0x2332e2[_0xb6d3c4(0x3e2)]('醉酒');if(battleState['player']['torn'])_0x2332e2[_0xb6d3c4(0x3e2)]('撕裂');if(battleState['player'][_0xb6d3c4(0x2d7)])_0x2332e2[_0xb6d3c4(0x3e2)]('压制');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x34b)])_0x2332e2[_0xb6d3c4(0x3e2)]('嘲讽');if(battleState['player'][_0xb6d3c4(0x318)])_0x2332e2[_0xb6d3c4(0x3e2)]('封印');if(battleState['player'][_0xb6d3c4(0x54d)])_0x2332e2[_0xb6d3c4(0x3e2)]('杀戮');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x3e4)])_0x2332e2[_0xb6d3c4(0x3e2)]('禁疗');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x509)])_0x2332e2['push']('摄魂');if(battleState[_0xb6d3c4(0x498)]['blindfold'])_0x2332e2[_0xb6d3c4(0x3e2)]('失明');if(battleState[_0xb6d3c4(0x498)][_0xb6d3c4(0x20f)])_0x2332e2[_0xb6d3c4(0x3e2)](_0xb6d3c4(0x282));return _0x2332e2[_0xb6d3c4(0x450)](',\x20');}function updatePlayerStatusDisplay(){const _0x3de52f=_0x38c76e,_0x2ceff7=document[_0x3de52f(0x4e9)]('player-status');_0x2ceff7&&(_0x2ceff7[_0x3de52f(0x341)]=getPlayerStatus());}function showEffect(_0xf9dd9e,_0x519b97){const _0x1e74cb=_0x38c76e,_0x4f12da=document[_0x1e74cb(0x4e9)](_0xf9dd9e);_0x4f12da[_0x1e74cb(0x352)]['backgroundImage']=_0x1e74cb(0x1bd)+_0x519b97+')',_0x4f12da[_0x1e74cb(0x3ae)][_0x1e74cb(0x45d)](_0x1e74cb(0x4bb)),setTimeout(()=>{const _0x582e68=_0x1e74cb;_0x4f12da[_0x582e68(0x3ae)][_0x582e68(0x3a5)]('show-effect'),_0x4f12da[_0x582e68(0x352)]['backgroundImage']='';},0x15e);}function updateUI(){const _0x2e96de=_0x38c76e,_0x556f70=document[_0x2e96de(0x4e9)](_0x2e96de(0x454)),_0x8084a8=document['getElementById'](_0x2e96de(0x2a9)),_0x3915c8=document['getElementById'](_0x2e96de(0x294)),_0x9f1076=document[_0x2e96de(0x4e9)](_0x2e96de(0x4dc));_0x556f70[_0x2e96de(0x341)]=battleAttributes[_0x2e96de(0x5ad)],_0x8084a8[_0x2e96de(0x341)]=maxHealth,_0x3915c8[_0x2e96de(0x341)]=battleAttributes['mana'],_0x9f1076[_0x2e96de(0x341)]=maxMana,_0x556f70['classList']['add'](_0x2e96de(0x4ad)),_0x8084a8[_0x2e96de(0x3ae)]['add'](_0x2e96de(0x4ad)),_0x3915c8[_0x2e96de(0x3ae)][_0x2e96de(0x45d)]('blue-text'),_0x9f1076[_0x2e96de(0x3ae)][_0x2e96de(0x45d)](_0x2e96de(0x264));const _0x453eaa=document[_0x2e96de(0x4e9)](_0x2e96de(0x1ba)),_0x2f0249=document['getElementById'](_0x2e96de(0x3d8)),_0x21cc1d=document[_0x2e96de(0x4e9)]('enemy-pet-mana'),_0x285113=document[_0x2e96de(0x4e9)]('enemy-max-mana');_0x453eaa['innerText']=battleState['enemy'][_0x2e96de(0x5ad)],_0x2f0249['innerText']=enemyMaxHealth,_0x21cc1d[_0x2e96de(0x341)]=battleState[_0x2e96de(0x25b)][_0x2e96de(0x5a5)],_0x285113['innerText']=enemyMaxMana,_0x453eaa[_0x2e96de(0x3ae)][_0x2e96de(0x45d)]('gold-text'),_0x2f0249[_0x2e96de(0x3ae)][_0x2e96de(0x45d)](_0x2e96de(0x4ad)),_0x21cc1d[_0x2e96de(0x3ae)][_0x2e96de(0x45d)](_0x2e96de(0x264)),_0x285113[_0x2e96de(0x3ae)]['add'](_0x2e96de(0x264)),document['getElementById'](_0x2e96de(0x3f3))[_0x2e96de(0x341)]=battleAttributes['physicalAttack'],document[_0x2e96de(0x4e9)](_0x2e96de(0x31e))[_0x2e96de(0x341)]=battleAttributes[_0x2e96de(0x263)],document[_0x2e96de(0x4e9)](_0x2e96de(0x493))[_0x2e96de(0x341)]=battleAttributes['magicAttack'],document[_0x2e96de(0x4e9)](_0x2e96de(0x2c2))[_0x2e96de(0x341)]=battleAttributes[_0x2e96de(0x4d3)],document[_0x2e96de(0x4e9)](_0x2e96de(0x43d))[_0x2e96de(0x341)]=battleAttributes[_0x2e96de(0x495)],document['getElementById'](_0x2e96de(0x2d0))[_0x2e96de(0x341)]=playerCultivation,document[_0x2e96de(0x4e9)](_0x2e96de(0x4f6))['innerText']=playerCultivation,document[_0x2e96de(0x4e9)]('enemy-pet-physical-attack')[_0x2e96de(0x341)]=battleState[_0x2e96de(0x25b)][_0x2e96de(0x3f0)],document[_0x2e96de(0x4e9)](_0x2e96de(0x2fb))[_0x2e96de(0x341)]=battleState['enemy'][_0x2e96de(0x263)],document[_0x2e96de(0x4e9)]('enemy-pet-magic-attack')[_0x2e96de(0x341)]=battleState[_0x2e96de(0x25b)][_0x2e96de(0x2b4)],document[_0x2e96de(0x4e9)](_0x2e96de(0x2a8))[_0x2e96de(0x341)]=battleState[_0x2e96de(0x25b)]['magicDefense'],document[_0x2e96de(0x4e9)]('enemy-pet-speed')[_0x2e96de(0x341)]=battleState[_0x2e96de(0x25b)][_0x2e96de(0x495)];const _0x2f3050=document['getElementById'](_0x2e96de(0x1fc));_0x2f3050[_0x2e96de(0x341)]=battleState[_0x2e96de(0x25b)][_0x2e96de(0x5a6)],document[_0x2e96de(0x4e9)](_0x2e96de(0x2a3))[_0x2e96de(0x341)]=Math[_0x2e96de(0x53b)](battleAttributes['critRate']*0x64)+'%',document[_0x2e96de(0x4e9)](_0x2e96de(0x3ef))[_0x2e96de(0x341)]=Math['round'](battleAttributes[_0x2e96de(0x4e8)]*0x64)+'%',document[_0x2e96de(0x4e9)]('enemy-crit-rate')[_0x2e96de(0x341)]=Math[_0x2e96de(0x53b)](enemyCritRate*0x64)+'%',document[_0x2e96de(0x4e9)](_0x2e96de(0x5a4))[_0x2e96de(0x341)]=Math[_0x2e96de(0x53b)](enemyCritDamage*0x64)+'%',updatePlayerStatusDisplay(),updateEnemyStatusDisplay(),updatePetLevel(),getShieldStatus(),updateHealthAndManaDisplay(),calculateAndDisplayDodgeRate(),document[_0x2e96de(0x4e9)]('battleRounds')[_0x2e96de(0x341)]=battleRounds;}document['getElementById'](_0x38c76e(0x50d))['addEventListener']('click',()=>{const _0x29c296=_0x38c76e;if(!attributesFetched){showInfoBox(_0x29c296(0x4e3));return;}const _0x322b20=calculateSkillAttributes(),_0x1aae1f=new Map([[_0x29c296(0x5ad),_0x29c296(0x260)],['magicAttack',_0x29c296(0x21a)],[_0x29c296(0x4d3),_0x29c296(0x468)],[_0x29c296(0x5a5),_0x29c296(0x24d)],[_0x29c296(0x3f0),_0x29c296(0x4fa)],[_0x29c296(0x263),_0x29c296(0x3fa)],['speed','速度']]);let _0x706f72='';for(const [_0x89d818,_0xf4f461]of Object['entries'](_0x322b20)){const _0xbc7be0=_0x1aae1f[_0x29c296(0x444)](_0x89d818)||_0x89d818;_0x706f72+=_0xbc7be0+':\x20'+_0xf4f461+'\x0a';}showInfoBox('\x0a1.\x20二级属性主要由各一级属性（耐力、智力等）决定\x20\x0a2.\x20被动技能的数量和等级也会增加二级属性\x20\x0a3.药材、五行符可以提供额外属性\x20\x0a4.精灵和飞升技能提供的属性为战斗属性，脱离战斗状态时将会复位\x20\x0a5.\x20当前技能加成为：\x20\x0a\x0a\x20'+_0x706f72+'\x20\x0a6.\x20生命值是玩家受到伤害时会扣除的值，战斗过程中玩家的血量会每秒按照上线比例进行减少\x20\x0a7.\x20法力值是玩家使用技能时的必要消耗数值\x20\x0a8.\x20物理攻击决定物理类技能的伤害基础\x20\x0a9.\x20物理防御决定玩家对敌人物理技能的减伤效果，请注意，减伤效果并不是线性增加的，当防御数值达到临界值后，减伤效果的增长将会变缓（下同法术防御）\x20\x0a10.\x20法术攻击决定玩家的法术伤害类技能的强度，同时决定了玩家的治疗能力和施毒能力\x20\x0a11.\x20法术防御决定了玩家抵抗敌人法术伤害的减伤效果\x20\x0a12.速度决定战斗开始时的出手先后顺序，同时也决定了物理闪避率（根据双方速度之差判断闪避概率）');});function updateHealthAndManaDisplay(){const _0x5a5b79=_0x38c76e;updateDisplay(_0x5a5b79(0x454),_0x5a5b79(0x2a9),_0x5a5b79(0x5ad),0x14,'#cc0000'),updateDisplay(_0x5a5b79(0x294),_0x5a5b79(0x4dc),_0x5a5b79(0x5a5),0xa,_0x5a5b79(0x302)),updateDisplay(_0x5a5b79(0x1ba),_0x5a5b79(0x3d8),_0x5a5b79(0x5ad),0x14,_0x5a5b79(0x1b9)),updateDisplay(_0x5a5b79(0x35e),'enemy-max-mana',_0x5a5b79(0x5a5),0xa,'#0066ff');}function updateDisplay(_0x38dd50,_0x46d12f,_0x152c04,_0x3b1f0c,_0x4afa82){const _0x27f620=_0x38c76e,_0x2b4f03=document[_0x27f620(0x4e9)](_0x38dd50),_0xed2009=document['getElementById'](_0x46d12f),_0x276305=parseInt(_0x2b4f03[_0x27f620(0x341)]),_0x24bb39=parseInt(_0xed2009[_0x27f620(0x341)]),_0x490c28=_0x276305/_0x24bb39*0x64;let _0x2e7431;if(_0x152c04===_0x27f620(0x5ad))_0x38dd50===_0x27f620(0x454)&&extraShield!==0x0?_0x2e7431=_0x27f620(0x215):_0x2e7431='linear-gradient(to\x20bottom,\x20#7E2723,\x20#9F322C,\x20#CB5D5A,\x20#CB5D5A,\x20#9F322C,\x20#7E2723)';else _0x152c04==='mana'&&(_0x2e7431='linear-gradient(to\x20bottom,\x20#394F89,\x20#405CB2,\x20#5C81EE,\x20#5C81EE,\x20#405CB2,\x20#394F89)');_0x2b4f03[_0x27f620(0x4d5)]=_0x27f620(0x546)+_0x38dd50+_0x27f620(0x1bb)+_0x490c28+_0x27f620(0x58d)+_0x2e7431+_0x27f620(0x27d)+_0x276305+'/'+_0x24bb39+_0x27f620(0x2fa)+(_0x490c28<_0x3b1f0c?_0x27f620(0x434)+_0x38dd50+_0x27f620(0x2b5)+_0x4afa82+_0x27f620(0x31b):'')+_0x27f620(0x55d),_0xed2009[_0x27f620(0x352)][_0x27f620(0x3f1)]=_0x27f620(0x2c0);}let damageRatio=0x1;function calculateDamage(_0x28239d,_0x2a212c,_0x3f1192,_0x50cae2=![]){const _0x30358=_0x38c76e;_0x2a212c&&(_0x28239d=Math['floor'](_0x28239d*_0x3f1192));_0x50cae2&&(_0x28239d*=Math[_0x30358(0x265)](Math[_0x30358(0x275)](0x0,damageRatio)));try{const _0x58a397=getCurrentJingmaiState();if(_0x58a397&&_0x58a397[_0x30358(0x34e)]){const _0x49f380=_0x58a397['jingmaiStates'][_0x30358(0x41f)]||0x0,_0xb91386=getStageNumber(_0x49f380);if(_0xb91386>0x1){const _0x468f3c=0x1+_0xb91386*0.02;_0x28239d=Math['floor'](_0x28239d*_0x468f3c);const _0x135ac5=Math['random']();let _0x448f66=0x1;if(_0xb91386>=0x2&&_0xb91386<=0xa)_0x135ac5<0.1&&(_0x448f66=1.2);else{if(_0xb91386>=0xb&&_0xb91386<=0x14)_0x135ac5<0.2&&(_0x448f66=1.4);else{if(_0xb91386>=0x15&&_0xb91386<=0x1e)_0x135ac5<0.3&&(_0x448f66=1.6);else{if(_0xb91386>=0x1f&&_0xb91386<=0x28)_0x135ac5<0.4&&(_0x448f66=1.8);else _0xb91386>=0x29&&(_0x135ac5<0.5&&(_0x448f66=0x2));}}}_0x448f66>0x1&&(_0x28239d=Math[_0x30358(0x265)](_0x28239d*_0x448f66));}}}catch(_0x4540fa){console[_0x30358(0x35c)](_0x30358(0x2d8),_0x4540fa);}return _0x28239d;}function checkCriticalHit(_0x42a90d){const _0x5d8774=_0x38c76e;return Math[_0x5d8774(0x207)]()<_0x42a90d;}function calculateAndDisplayDodgeRate(){const _0x4370dc=_0x38c76e;let _0x56f8b0,_0x3e4b48,_0x535715=document[_0x4370dc(0x4e9)](_0x4370dc(0x458)),_0xe6b54a=document[_0x4370dc(0x4e9)]('player-magic-dodge-rate'),_0x3fb1c8=document[_0x4370dc(0x4e9)](_0x4370dc(0x3dc)),_0x5dca3b=document[_0x4370dc(0x4e9)](_0x4370dc(0x47a)),_0xc7aa62=0x0;if(battleState[_0x4370dc(0x498)][_0x4370dc(0x1ee)])_0xc7aa62=0.2;_0x56f8b0=battleAttributes['speed']-battleState['enemy'][_0x4370dc(0x495)],_0x56f8b0>0x0?(_0x535715['innerText']=(Math['min'](Math['abs'](_0x56f8b0)/0x9c4*0.01+_0xc7aa62,0.8)*0x64)[_0x4370dc(0x4ac)](0x2)+'%',_0x3fb1c8[_0x4370dc(0x341)]='0%'):(_0x3fb1c8[_0x4370dc(0x341)]=(Math[_0x4370dc(0x206)](Math[_0x4370dc(0x29d)](_0x56f8b0)/0x9c4*0.01,0.8)*0x64)[_0x4370dc(0x4ac)](0x2)+'%',_0x535715['innerText']='0%'),_0x3e4b48=playerCultivation-enemyPetCultivation,_0x3e4b48>0x0?(_0xe6b54a[_0x4370dc(0x341)]=(Math[_0x4370dc(0x206)](Math[_0x4370dc(0x29d)](_0x3e4b48)/0x88b8*0.01+_0xc7aa62,0.8)*0x64)['toFixed'](0x2)+'%',_0x5dca3b[_0x4370dc(0x341)]='0%'):(_0x5dca3b[_0x4370dc(0x341)]=(Math[_0x4370dc(0x206)](Math['abs'](_0x3e4b48)/0x88b8*0.01,0.8)*0x64)[_0x4370dc(0x4ac)](0x2)+'%',_0xe6b54a['innerText']='0%');}function handleDodge(_0x178cc0){const _0x2c798a=_0x38c76e;let _0x5ecba0,_0x17afdc=0x0,_0x1f7681,_0xdd1a5d=0x0;if(battleState[_0x2c798a(0x498)][_0x2c798a(0x1ee)])_0xdd1a5d=0.2;if(_0x178cc0===_0x2c798a(0x498))_0x5ecba0=battleAttributes[_0x2c798a(0x495)]-battleState['enemy']['speed'],_0x5ecba0>0x0&&(_0x17afdc=Math[_0x2c798a(0x206)](Math[_0x2c798a(0x29d)](_0x5ecba0)/0x9c4*0.01+_0xdd1a5d,0.8)),_0x1f7681=document['getElementById'](_0x2c798a(0x4e4)),console['log'](_0x2c798a(0x230)+_0x17afdc);else{if(_0x178cc0===_0x2c798a(0x25b))_0x5ecba0=battleState['enemy'][_0x2c798a(0x495)]-battleAttributes[_0x2c798a(0x495)],_0x5ecba0>0x0&&(_0x17afdc=Math['min'](Math['abs'](_0x5ecba0)/0x9c4*0.01,0.8)),_0x1f7681=document[_0x2c798a(0x4e9)](_0x2c798a(0x55a)),console[_0x2c798a(0x397)](_0x2c798a(0x30d)+_0x17afdc);else return console[_0x2c798a(0x1b6)](_0x2c798a(0x24e)),![];}const _0x4b0eef=Math[_0x2c798a(0x207)](),_0x5293b4=_0x4b0eef<_0x17afdc;console[_0x2c798a(0x397)]('闪避随机数为：'+_0x4b0eef);if(_0x5293b4)return _0x178cc0===_0x2c798a(0x498)?(_0x1f7681[_0x2c798a(0x352)][_0x2c798a(0x58b)]=_0x2c798a(0x314),showEffect(_0x2c798a(0x567),_0x2c798a(0x3cc))):(_0x1f7681[_0x2c798a(0x352)][_0x2c798a(0x58b)]=_0x2c798a(0x314),showEffect(_0x2c798a(0x432),_0x2c798a(0x3cc))),setTimeout(()=>{const _0x144929=_0x2c798a;_0x1f7681['style'][_0x144929(0x58b)]='';},0x64),!![];return![];}function handleMagicDodge(_0x181119){const _0x236758=_0x38c76e;let _0x11090e,_0x1d5f4e=0x0,_0x523184,_0x1e72c2=0x0;if(battleState[_0x236758(0x498)][_0x236758(0x1ee)])_0x1e72c2=0.2;if(_0x181119==='player')_0x11090e=playerCultivation-enemyPetCultivation,_0x11090e>0x0&&(_0x1d5f4e=Math[_0x236758(0x206)](Math[_0x236758(0x29d)](_0x11090e)/0x88b8*0.01+_0x1e72c2,0.8)),battleState['player'][_0x236758(0x1ee)]&&(_0x1d5f4e=Math['min'](0.8,_0x1d5f4e+0.2)),_0x523184=document[_0x236758(0x4e9)](_0x236758(0x4e4)),console[_0x236758(0x397)](_0x236758(0x421)+_0x1d5f4e);else{if(_0x181119===_0x236758(0x25b))_0x11090e=enemyPetCultivation-playerCultivation,_0x11090e>0x0&&(_0x1d5f4e=Math['min'](Math[_0x236758(0x29d)](_0x11090e)/0x88b8*0.01,0.8)),_0x523184=document[_0x236758(0x4e9)](_0x236758(0x55a)),console[_0x236758(0x397)]('敌人魔法闪避概率为：'+_0x1d5f4e);else return console[_0x236758(0x1b6)](_0x236758(0x267)),![];}const _0xc103aa=Math[_0x236758(0x207)](),_0x35c109=_0xc103aa<_0x1d5f4e;console[_0x236758(0x397)]('魔法闪避随机数为：'+_0xc103aa);if(_0x35c109)return _0x181119===_0x236758(0x498)?(_0x523184[_0x236758(0x352)][_0x236758(0x58b)]=_0x236758(0x314),showEffect(_0x236758(0x567),_0x236758(0x3cc))):(_0x523184[_0x236758(0x352)][_0x236758(0x58b)]=_0x236758(0x314),showEffect('playerEffect','https://pic.imgdb.cn/item/66bb115dd9c307b7e9a6c2d0.png')),setTimeout(()=>{const _0x4ac3c0=_0x236758;_0x523184[_0x4ac3c0(0x352)][_0x4ac3c0(0x58b)]='';},0x64),!![];return![];}function levelUpSkill(){const _0x16df9d=_0x38c76e;if(battleState[_0x16df9d(0x498)][_0x16df9d(0x34b)]){performAttack('physical');return;}const _0x52e5de=document[_0x16df9d(0x598)](_0x16df9d(0x3a8));_0x52e5de[_0x16df9d(0x352)][_0x16df9d(0x25f)]='fixed',_0x52e5de[_0x16df9d(0x352)][_0x16df9d(0x5b0)]='0',_0x52e5de[_0x16df9d(0x352)][_0x16df9d(0x34c)]='0',_0x52e5de[_0x16df9d(0x352)][_0x16df9d(0x30b)]=_0x16df9d(0x59f),_0x52e5de[_0x16df9d(0x352)][_0x16df9d(0x537)]=_0x16df9d(0x59f),_0x52e5de[_0x16df9d(0x352)]['backgroundColor']=_0x16df9d(0x418),_0x52e5de['style'][_0x16df9d(0x3f1)]=_0x16df9d(0x4f9),_0x52e5de[_0x16df9d(0x352)]['justifyContent']=_0x16df9d(0x549),_0x52e5de[_0x16df9d(0x352)]['alignItems']=_0x16df9d(0x549),_0x52e5de[_0x16df9d(0x352)]['zIndex']=_0x16df9d(0x42a);const _0x55c646=document[_0x16df9d(0x598)](_0x16df9d(0x3a8));_0x55c646['style']=_0x16df9d(0x49e);const _0x458a96=document[_0x16df9d(0x598)]('h2');_0x458a96[_0x16df9d(0x341)]='升级技能',_0x458a96[_0x16df9d(0x352)][_0x16df9d(0x4b3)]=_0x16df9d(0x549),_0x55c646['appendChild'](_0x458a96);const _0x596ec9=document[_0x16df9d(0x598)]('span');_0x596ec9[_0x16df9d(0x341)]='X',_0x596ec9['style'][_0x16df9d(0x25f)]=_0x16df9d(0x5aa),_0x596ec9[_0x16df9d(0x352)]['top']=_0x16df9d(0x23d),_0x596ec9['style']['right']=_0x16df9d(0x23d),_0x596ec9[_0x16df9d(0x352)][_0x16df9d(0x2a0)]=_0x16df9d(0x2e4),_0x596ec9[_0x16df9d(0x352)][_0x16df9d(0x351)]=_0x16df9d(0x550),_0x596ec9[_0x16df9d(0x352)]['color']=_0x16df9d(0x516),_0x596ec9[_0x16df9d(0x4b7)]=()=>document[_0x16df9d(0x2a4)][_0x16df9d(0x4e5)](_0x52e5de),_0x55c646['appendChild'](_0x596ec9);const _0x2f3692=document[_0x16df9d(0x598)](_0x16df9d(0x3a8));_0x2f3692[_0x16df9d(0x352)][_0x16df9d(0x3f1)]=_0x16df9d(0x507),_0x2f3692['style'][_0x16df9d(0x51f)]=_0x16df9d(0x357),_0x2f3692[_0x16df9d(0x352)]['fontSize']=_0x16df9d(0x33f),_0x2f3692[_0x16df9d(0x352)][_0x16df9d(0x301)]=_0x16df9d(0x203),_0x2f3692[_0x16df9d(0x352)][_0x16df9d(0x3c0)]=_0x16df9d(0x23d),_0x55c646[_0x16df9d(0x46f)](_0x2f3692);const _0x2a4115=document[_0x16df9d(0x598)](_0x16df9d(0x3a8));_0x2a4115['innerText']='点击技能可查看技能详细说明。',_0x2a4115[_0x16df9d(0x352)]=_0x16df9d(0x331),_0x55c646['appendChild'](_0x2a4115);function _0x2c10e2(){const _0x45aaf4=_0x16df9d;_0x2f3692[_0x45aaf4(0x4d5)]='';const _0xa1f98=document[_0x45aaf4(0x4e9)](_0x45aaf4(0x3ff)),_0x3ea47d=Array[_0x45aaf4(0x200)](_0xa1f98['children']),_0x521205=['PA',_0x45aaf4(0x49c),'MA',_0x45aaf4(0x2de),'PP','PPE','PH','PHE','TC'];_0x3ea47d[_0x45aaf4(0x284)](_0x347579=>{const _0x2d2971=_0x45aaf4,_0x2acce3=_0x347579[_0x2d2971(0x341)][_0x2d2971(0x252)]('\x20')[0x0],_0x23c5b6=currentPet[_0x2d2971(0x3bd)]['find'](_0x43f7cc=>_0x43f7cc['name']===_0x2acce3);if(_0x23c5b6){const _0xcc37c0=calculateSkillLevelAndMultiplier(_0x23c5b6);_0x23c5b6[_0x2d2971(0x533)]=_0xcc37c0['skillLevel'];const _0xb1e2af=document[_0x2d2971(0x598)](_0x2d2971(0x3a8));_0xb1e2af[_0x2d2971(0x341)]=_0x23c5b6[_0x2d2971(0x33b)]+_0x2d2971(0x3af)+_0x23c5b6['level'],_0xb1e2af[_0x2d2971(0x352)][_0x2d2971(0x38d)]=_0x2d2971(0x23d),_0xb1e2af[_0x2d2971(0x352)][_0x2d2971(0x3f6)]=_0x2d2971(0x4c2),_0xb1e2af['style'][_0x2d2971(0x4fd)]=_0x2d2971(0x44a),_0xb1e2af['style'][_0x2d2971(0x1b2)]=_0x2d2971(0x274),_0xb1e2af[_0x2d2971(0x352)][_0x2d2971(0x2a0)]=_0x2d2971(0x2e4),_0xb1e2af[_0x2d2971(0x352)]['textAlign']=_0x2d2971(0x549),_0xb1e2af['style'][_0x2d2971(0x3d4)]=_0x2d2971(0x238),_0xb1e2af['onclick']=()=>{const _0x436e39=_0x2d2971;document[_0x436e39(0x340)](_0x436e39(0x557))[_0x436e39(0x284)](_0x1d80e2=>{const _0x1822bd=_0x436e39;_0x1d80e2[_0x1822bd(0x3ae)][_0x1822bd(0x3a5)](_0x1822bd(0x383)),_0x1d80e2[_0x1822bd(0x352)][_0x1822bd(0x3f6)]=_0x1822bd(0x4c2),_0x1d80e2[_0x1822bd(0x352)][_0x1822bd(0x258)]=_0x1822bd(0x277);}),_0xb1e2af['classList'][_0x436e39(0x45d)](_0x436e39(0x383)),_0xb1e2af[_0x436e39(0x352)][_0x436e39(0x3f6)]='#add8e6',_0xb1e2af[_0x436e39(0x352)][_0x436e39(0x258)]=_0x436e39(0x1f5);const _0x2feea2=calculateSkillLevelAndMultiplier(_0x23c5b6)[_0x436e39(0x527)],_0x414696=_0x521205[_0x436e39(0x4b2)](_0x23c5b6[_0x436e39(0x2aa)])?_0x436e39(0x323)+Math['floor'](_0x2feea2*0x64)+'%':'';_0x2a4115[_0x436e39(0x341)]=_0x23c5b6[_0x436e39(0x4a3)]+'技能'+_0x414696+_0x436e39(0x3a0)+_0x23c5b6[_0x436e39(0x40e)];},_0x2f3692[_0x2d2971(0x46f)](_0xb1e2af);}});}_0x2c10e2();const _0x2a40f2=document[_0x16df9d(0x598)](_0x16df9d(0x3a8));_0x2a40f2[_0x16df9d(0x352)][_0x16df9d(0x540)]=_0x16df9d(0x281),_0x2a40f2['style'][_0x16df9d(0x3f1)]=_0x16df9d(0x4f9),_0x2a40f2['style'][_0x16df9d(0x3df)]=_0x16df9d(0x506),_0x2a40f2[_0x16df9d(0x352)][_0x16df9d(0x3e3)]=_0x16df9d(0x1ec),_0x2a40f2[_0x16df9d(0x352)][_0x16df9d(0x4b3)]=_0x16df9d(0x549),_0x55c646[_0x16df9d(0x46f)](_0x2a40f2);const _0x32b198=document['createElement'](_0x16df9d(0x52d));_0x32b198[_0x16df9d(0x341)]=_0x16df9d(0x474),_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x38d)]=_0x16df9d(0x505),_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x27a)]='5px',_0x32b198[_0x16df9d(0x352)]['borderRadius']=_0x16df9d(0x274),_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x4fd)]='none',_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x3f6)]=_0x16df9d(0x443),_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x51f)]=_0x16df9d(0x516),_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x2a0)]=_0x16df9d(0x2e4),_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x351)]='12px',_0x32b198[_0x16df9d(0x352)][_0x16df9d(0x3d4)]=_0x16df9d(0x512),_0x32b198[_0x16df9d(0x25a)]=()=>_0x32b198['style'][_0x16df9d(0x3f6)]=_0x16df9d(0x1f9),_0x32b198[_0x16df9d(0x4ca)]=()=>_0x32b198['style'][_0x16df9d(0x3f6)]=_0x16df9d(0x443),_0x32b198[_0x16df9d(0x4b7)]=()=>{handleLevelUp(),_0x2c10e2();},_0x2a40f2[_0x16df9d(0x46f)](_0x32b198);const _0x298e40=document[_0x16df9d(0x598)](_0x16df9d(0x52d));_0x298e40[_0x16df9d(0x341)]=_0x16df9d(0x24f),_0x298e40['style'][_0x16df9d(0x38d)]=_0x16df9d(0x505),_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x27a)]='5px',_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x1b2)]=_0x16df9d(0x274),_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x4fd)]='none',_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x3f6)]=_0x16df9d(0x1cf),_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x51f)]=_0x16df9d(0x516),_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x2a0)]='pointer',_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x351)]=_0x16df9d(0x33f),_0x298e40['style']['transition']=_0x16df9d(0x512),_0x298e40[_0x16df9d(0x25a)]=()=>_0x298e40['style'][_0x16df9d(0x3f6)]=_0x16df9d(0x3f7),_0x298e40[_0x16df9d(0x4ca)]=()=>_0x298e40[_0x16df9d(0x352)][_0x16df9d(0x3f6)]=_0x16df9d(0x1cf),_0x298e40[_0x16df9d(0x4b7)]=()=>{handleBulkLevelUp(),_0x2c10e2();},_0x2a40f2[_0x16df9d(0x46f)](_0x298e40);const _0x19649b=document[_0x16df9d(0x598)](_0x16df9d(0x52d));_0x19649b['innerText']=_0x16df9d(0x583),_0x19649b[_0x16df9d(0x352)][_0x16df9d(0x38d)]=_0x16df9d(0x505),_0x19649b[_0x16df9d(0x352)]['margin']=_0x16df9d(0x1f1),_0x19649b[_0x16df9d(0x352)][_0x16df9d(0x1b2)]='8px',_0x19649b['style'][_0x16df9d(0x4fd)]=_0x16df9d(0x2c0),_0x19649b[_0x16df9d(0x352)]['backgroundColor']=_0x16df9d(0x3de),_0x19649b[_0x16df9d(0x352)]['color']=_0x16df9d(0x516),_0x19649b['style']['cursor']='pointer',_0x19649b[_0x16df9d(0x352)][_0x16df9d(0x351)]=_0x16df9d(0x33f),_0x19649b[_0x16df9d(0x352)]['transition']=_0x16df9d(0x512),_0x19649b[_0x16df9d(0x25a)]=()=>_0x19649b[_0x16df9d(0x352)][_0x16df9d(0x3f6)]='#138496',_0x19649b[_0x16df9d(0x4ca)]=()=>_0x19649b['style'][_0x16df9d(0x3f6)]=_0x16df9d(0x3de),_0x19649b[_0x16df9d(0x4b7)]=()=>showInfoBox(_0x16df9d(0x522)),_0x2a40f2[_0x16df9d(0x46f)](_0x19649b),_0x52e5de[_0x16df9d(0x46f)](_0x55c646),document[_0x16df9d(0x2a4)][_0x16df9d(0x46f)](_0x52e5de);}function handleLevelUp(){const _0x5ed873=_0x38c76e,_0x1ae00c=document['querySelector'](_0x5ed873(0x557));if(!_0x1ae00c){showInfoBox(_0x5ed873(0x499));return;}const _0x5576f9=_0x1ae00c[_0x5ed873(0x341)][_0x5ed873(0x252)]('\x20')[0x0],_0x145c5d=currentPet[_0x5ed873(0x3bd)][_0x5ed873(0x2c5)](_0x1f486d=>_0x1f486d[_0x5ed873(0x33b)]===_0x5576f9);if(!_0x145c5d){showInfoBox(_0x5ed873(0x407));return;}if(_0x145c5d[_0x5ed873(0x533)]>=0x1e&&!_0x145c5d[_0x5ed873(0x41b)]){showInfoBox(_0x5ed873(0x483),_0x5ed873(0x2cf));return;}if(_0x145c5d['level']>=0x6&&_0x145c5d[_0x5ed873(0x2aa)]==='NE'&&_0x145c5d['byLearned']){_0x145c5d[_0x5ed873(0x533)]=0x6;return;}if(_0x145c5d[_0x5ed873(0x41b)]){const _0x39ad49=jinnangItems['find'](_0x32a430=>_0x32a430['displayName']===_0x145c5d['name']+_0x5ed873(0x415)&&_0x32a430[_0x5ed873(0x4b6)]>0x0);if(_0x39ad49){return showCustomOptionsBox('发现可用的'+_0x39ad49[_0x5ed873(0x243)]+_0x5ed873(0x1b3),[{'text':_0x5ed873(0x449),'onClick':function(){const _0x42e145=_0x5ed873;if(_0x145c5d[_0x42e145(0x533)]>0x63){showInfoBox(_0x42e145(0x1cb),null,null,_0x42e145(0x2cf));return;}const _0x39e514=jinnangItems[_0x42e145(0x2c5)](_0x3e729f=>_0x3e729f['name']===_0x42e145(0x3fb)&&_0x3e729f[_0x42e145(0x4b6)]>=0x5);_0x39e514?(useItem(_0x42e145(0x3fb),0x5),_0x145c5d[_0x42e145(0x533)]+=0x1,showInfoBox(_0x145c5d['name']+_0x42e145(0x25c)+_0x145c5d['level']+'\x20级')):showInfoBox(_0x42e145(0x42d),null,null,_0x42e145(0x2cf));}},{'text':''+_0x39ad49[_0x5ed873(0x243)],'onClick':function(){const _0x248c64=_0x5ed873;if(_0x145c5d[_0x248c64(0x533)]>0x63){showInfoBox(_0x248c64(0x1cb),null,null,_0x248c64(0x2cf));return;}Math['random']()<0.2?(useItem(_0x39ad49[_0x248c64(0x33b)],0x1),_0x145c5d[_0x248c64(0x533)]+=0x1,showInfoBox(_0x248c64(0x1fa)+_0x39ad49[_0x248c64(0x243)]+'，'+_0x145c5d[_0x248c64(0x33b)]+_0x248c64(0x25c)+_0x145c5d[_0x248c64(0x533)]+'\x20级！')):(useItem(_0x39ad49['name'],0x1),showInfoBox(_0x248c64(0x1fa)+_0x39ad49[_0x248c64(0x243)]+'，但\x20'+_0x145c5d[_0x248c64(0x33b)]+_0x248c64(0x1eb),null,null,_0x248c64(0x2cf)));}}],'#92341C');return;}const _0x1104d5=jinnangItems[_0x5ed873(0x2c5)](_0xae303e=>_0xae303e[_0x5ed873(0x33b)]==='universalHeart'&&_0xae303e['quantity']>=0x5);if(_0x1104d5){if(_0x145c5d['level']>0x63){showInfoBox('该技能已达到最大等级！',null,null,'red');return;}useItem(_0x5ed873(0x3fb),0x5),_0x145c5d[_0x5ed873(0x533)]+=0x1,showInfoBox(_0x145c5d[_0x5ed873(0x33b)]+_0x5ed873(0x25c)+_0x145c5d[_0x5ed873(0x533)]+'\x20级');return;}else{showInfoBox('天赋高级技能需要使用特殊道具\x22宇宙之心\x22才能升级，请尝试获取后再操作',null,null,_0x5ed873(0x2cf));return;}}const _0x39d666=_0x3a2137=>Math[_0x5ed873(0x207)]()<_0x3a2137;if(_0x145c5d[_0x5ed873(0x533)]>=0x1c&&_0x145c5d[_0x5ed873(0x533)]<=0x1d){if(useItem(_0x5ed873(0x3f2),0x5)){_0x39d666(0.4)?(_0x145c5d[_0x5ed873(0x533)]+=0x1,showInfoBox(_0x145c5d['name']+_0x5ed873(0x25c)+_0x145c5d[_0x5ed873(0x533)]+'\x20级')):showInfoBox(_0x145c5d['name']+'\x20升级失败！',null,null,_0x5ed873(0x2cf));return;}else{showInfoBox(_0x5ed873(0x4ee),null,null,'red');return;}}if(_0x145c5d[_0x5ed873(0x533)]>=0x18&&_0x145c5d['level']<=0x1b){if(useItem(_0x5ed873(0x270),0x5)){_0x39d666(0.4)?(_0x145c5d[_0x5ed873(0x533)]+=0x1,showInfoBox(_0x145c5d[_0x5ed873(0x33b)]+'\x20成功升级至\x20'+_0x145c5d[_0x5ed873(0x533)]+'\x20级')):showInfoBox(_0x145c5d['name']+_0x5ed873(0x471),null,null,_0x5ed873(0x2cf));return;}else{showInfoBox(_0x5ed873(0x304),null,null,_0x5ed873(0x2cf));return;}}if(_0x145c5d['level']<0xa){showInfoBox(_0x5ed873(0x538));return;}if(_0x145c5d['level']>=0x14){showInfoBox('该技能已达到目前阶段最高等级！请尝试使用药品系统中的“魔术棱柱”进行升级！');return;}const _0x259519=_0x145c5d[_0x5ed873(0x533)]+0x1,_0x4b0bc0=0x3e8+0xc8*(_0x259519-0xb);if(currentExp<_0x4b0bc0){showInfoBox('此次升级需要\x20'+_0x4b0bc0+_0x5ed873(0x257));return;}currentExp-=_0x4b0bc0,_0x145c5d[_0x5ed873(0x533)]=_0x259519,showInfoBox('你消耗了\x20'+_0x4b0bc0+'\x20点经验值，将\x20'+_0x145c5d[_0x5ed873(0x33b)]+'\x20成功升至\x20'+_0x259519+_0x5ed873(0x2ee)),updateExpBar(currentExp,maxExp),updateUI();}function handleBulkLevelUp(){const _0x42679f=_0x38c76e,_0x4fc83b=[];currentPet['skills'][_0x42679f(0x284)](_0x985107=>{const _0x5cb04c=_0x42679f;while(!_0x985107['byLearned']&&_0x985107[_0x5cb04c(0x533)]>=0xa&&_0x985107[_0x5cb04c(0x533)]<0x14&&currentExp>=0x4b0+0xc8*(_0x985107['level']-0xa)){const _0x47296e=0x4b0+0xc8*(_0x985107[_0x5cb04c(0x533)]-0xa);currentExp-=_0x47296e,_0x985107[_0x5cb04c(0x533)]+=0x1,_0x4fc83b[_0x5cb04c(0x3e2)](_0x5cb04c(0x37a)+_0x47296e+'点经验值，将'+_0x985107[_0x5cb04c(0x33b)]+'\x20成功升至\x20'+_0x985107[_0x5cb04c(0x533)]+'\x20级，威力增加了！');}}),_0x4fc83b[_0x42679f(0x1f0)]===0x0?showInfoBox('没有技能需要升级或经验不足！'):showInfoBox(_0x4fc83b['join']('\x0a')),updateExpBar(currentExp,maxExp),updateUI();}function getSkillByType(_0x4b7a06){const _0x20ec31=_0x38c76e,_0x29d92f=document[_0x20ec31(0x4e9)](_0x20ec31(0x3ff));if(!_0x29d92f)return console['error'](_0x20ec31(0x327)),null;const _0x572355=Array[_0x20ec31(0x200)](_0x29d92f[_0x20ec31(0x4a5)])[_0x20ec31(0x241)](_0x14474d=>{const _0x158d22=_0x20ec31,_0x25f631=_0x14474d[_0x158d22(0x341)][_0x158d22(0x252)]('\x20')[0x0],_0x365c4a=currentPet[_0x158d22(0x3bd)][_0x158d22(0x2c5)](_0x2d6ec2=>_0x2d6ec2[_0x158d22(0x33b)]===_0x25f631&&_0x2d6ec2[_0x158d22(0x2aa)]===_0x4b7a06);return _0x365c4a;})[_0x20ec31(0x367)](_0x2468d5=>_0x2468d5!==null);return _0x572355[_0x20ec31(0x1f0)]>0x0?_0x572355[Math[_0x20ec31(0x265)](Math[_0x20ec31(0x207)]()*_0x572355[_0x20ec31(0x1f0)])]:null;}function calculateSkillLevelAndMultiplier(_0x12f3b8){const _0x12ab6d=_0x38c76e;let _0x4ea7dd=_0x12f3b8[_0x12ab6d(0x533)]||0x1;if(_0x12f3b8[_0x12ab6d(0x2aa)]==='NE'&&_0x12f3b8[_0x12ab6d(0x41b)])_0x4ea7dd=Math['min'](0x6,Math['floor'](petLevel/0xa)+0x1);else _0x4ea7dd<0xa&&(_0x4ea7dd=Math[_0x12ab6d(0x206)](0xa,Math[_0x12ab6d(0x265)](petLevel/0xa)+0x1));const _0x202404=_0x12f3b8[_0x12ab6d(0x3dd)]*(0x1+0.1*(_0x4ea7dd-0x1));return{'skillLevel':_0x4ea7dd,'skillMultiplier':_0x202404};}function selectSkillAndCalculateMultiplier(_0x2ca32c){const _0xc516c0=_0x38c76e;let _0x18c765=[],_0x18c0a8=0x1,_0x34c4de=0x1,_0x1458f1=![];const _0x4eafe1=document['getElementById']('skills-area'),_0x1f7071=Array['from'](_0x4eafe1['children']);_0x1f7071['forEach'](_0x2341c7=>{const _0x5d9e84=_0x6e96,_0x4c4bc6=_0x2341c7[_0x5d9e84(0x341)][_0x5d9e84(0x252)]('\x20')[0x0],_0x3e7e8a=currentPet[_0x5d9e84(0x3bd)]['find'](_0x92f93c=>_0x92f93c['name']===_0x4c4bc6);if(_0x3e7e8a){if(_0x2ca32c===_0x5d9e84(0x1f6)&&(_0x3e7e8a[_0x5d9e84(0x2aa)]==='PA'||_0x3e7e8a[_0x5d9e84(0x2aa)]===_0x5d9e84(0x49c)))_0x18c765[_0x5d9e84(0x3e2)](_0x3e7e8a);else _0x2ca32c===_0x5d9e84(0x46a)&&(_0x3e7e8a['type']==='MA'||_0x3e7e8a[_0x5d9e84(0x2aa)]===_0x5d9e84(0x2de))&&_0x18c765['push'](_0x3e7e8a);}});const _0x31ef54=Math[_0xc516c0(0x265)](Math[_0xc516c0(0x207)]()*_0x18c765[_0xc516c0(0x1f0)]),_0x22246f=_0x18c765[_0x31ef54];if(_0x18c765[_0xc516c0(0x1f0)]>0x0){const _0x53a92d=calculateSkillLevelAndMultiplier(_0x22246f);_0x34c4de=_0x53a92d['skillLevel'],_0x18c0a8=_0x53a92d['skillMultiplier'],_0x1458f1=!![],logBattleEvent(_0xc516c0(0x4a9)+_0x22246f['name']+'\x20'+_0x34c4de+'级。',_0xc516c0(0x4d0),_0xc516c0(0x281));if(_0x2ca32c===_0xc516c0(0x1f6)){const _0x46bd8f=Math[_0xc516c0(0x265)](Math[_0xc516c0(0x207)]()*(0xc8-0x32+0x1)*_0x34c4de);battleAttributes[_0xc516c0(0x5a5)]=Math['max'](0x0,battleAttributes['mana']-_0x46bd8f),showEffect(_0xc516c0(0x432),_0xc516c0(0x544));}else _0x2ca32c===_0xc516c0(0x46a)&&showEffect(_0xc516c0(0x432),_0xc516c0(0x335));}else{if(_0x2ca32c===_0xc516c0(0x1f6))logBattleEvent(_0xc516c0(0x3a7),null,'20px'),showEffect('playerEffect',_0xc516c0(0x3ab));else _0x2ca32c===_0xc516c0(0x46a)&&(logBattleEvent(_0xc516c0(0x2fc),null,'20px'),showEffect(_0xc516c0(0x432),'https://pic.imgdb.cn/item/6671343bd9c307b7e9031c3d.gif'));}return{'skillMultiplier':_0x18c0a8,'isSkillUsed':_0x1458f1,'selectedSkill':_0x22246f};}function performAttack(_0x11b094){const _0x8aa71f=_0x38c76e;if(!attributesFetched||!battleState||!battleState[_0x8aa71f(0x25b)]||!playerTurn)return;let _0x125687=battleState[_0x8aa71f(0x498)]['taunt']?_0x8aa71f(0x1f6):_0x11b094;const {skillMultiplier:_0x4e9964,isSkillUsed:_0x14e43c,selectedSkill:_0x17f145}=selectSkillAndCalculateMultiplier(_0x125687);let _0x7f7443=0x0,_0x3406c1=![];if(_0x17f145&&(_0x17f145[_0x8aa71f(0x2aa)]==='PAE'||_0x17f145[_0x8aa71f(0x2aa)]===_0x8aa71f(0x2de)))applySpecialSkillEffects(_0x17f145);else{if(_0x125687==='physical')_0x7f7443=performPhysicalAttack(_0x4e9964,_0x14e43c,_0x17f145),handlePostAttackEffects(_0x125687,_0x7f7443,{'selectedSkill':_0x17f145,'isCritical':checkCriticalHit(battleState[_0x8aa71f(0x498)][_0x8aa71f(0x4d2)]),'skillMultiplier':_0x4e9964});else{const _0x12b67e=performMagicalAttack(_0x4e9964,_0x14e43c,_0x17f145);if(_0x12b67e[_0x8aa71f(0x441)]){performAttack(_0x8aa71f(0x1f6));return;}_0x7f7443=_0x12b67e['damage'],handlePostAttackEffects(_0x125687,_0x7f7443,{'selectedSkill':_0x17f145,'isCritical':checkCriticalHit(battleState[_0x8aa71f(0x498)][_0x8aa71f(0x4d2)]),'skillMultiplier':_0x4e9964});}}if(battleState[_0x8aa71f(0x25b)]['health']<=0x0){updateEnemyAttributes(),showNextBattlePrompt(!![]);return;}else{if(battleAttributes[_0x8aa71f(0x5ad)]<=0x0){showNextBattlePrompt(![]);return;}}playerTurn=![],updateUI();};function performPhysicalAttack(_0x154976,_0x590d48,_0x1cbe63){const _0x430d3c=_0x38c76e,_0x1d373f=Math[_0x430d3c(0x207)]()*(1.2-0.8)+0.8,_0x16b351=battleState['enemy'][_0x430d3c(0x263)]*_0x1d373f,_0x2b4c6d=f(_0x16b351),_0x494c24=Math[_0x430d3c(0x53b)](battleState[_0x430d3c(0x25b)][_0x430d3c(0x263)]*0.1);let _0x480012;_0x2b4c6d!==0x0?_0x480012=Math[_0x430d3c(0x275)](0x1,Math[_0x430d3c(0x265)](battleAttributes['physicalAttack']*_0x154976*(0x1-_0x2b4c6d))):_0x480012=Math[_0x430d3c(0x275)](0x1,Math[_0x430d3c(0x265)](battleAttributes['physicalAttack']*_0x154976));if(battleState[_0x430d3c(0x498)][_0x430d3c(0x521)])return logBattleEvent(_0x430d3c(0x410),_0x430d3c(0x218)),playerTurn=![],0x0;if(handleDodge(_0x430d3c(0x25b)))return playerTurn=![],0x0;(ascensionSkill[_0x430d3c(0x33b)]===_0x430d3c(0x1bc)||secondAscensionSkill[_0x430d3c(0x33b)]==='斩龙一式')&&battleState[_0x430d3c(0x25b)]['health']/enemyMaxHealth>battleState[_0x430d3c(0x498)][_0x430d3c(0x249)]&&(_0x480012=Math[_0x430d3c(0x265)](_0x480012*1.4));battleState[_0x430d3c(0x498)][_0x430d3c(0x34b)]&&(_0x480012=Math[_0x430d3c(0x265)](_0x480012*1.2),logBattleEvent(_0x430d3c(0x33d),'red'));let _0x2d980e=checkCriticalHit(battleState[_0x430d3c(0x498)][_0x430d3c(0x4d2)]),_0x5f58bf=calculateDamage(_0x480012,_0x2d980e,battleState['player'][_0x430d3c(0x4e8)],!![]);const _0x1d63f6=applyWuxingEffects();let _0x48e4c2=0x0;if(_0x1d63f6[_0x430d3c(0x462)]&&_0x1d63f6[_0x430d3c(0x462)]>0x0){const _0x537aa2=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x1d63f6[_0x430d3c(0x462)]];_0x48e4c2=Math[_0x430d3c(0x265)](_0x5f58bf*_0x537aa2),_0x5f58bf=Math['floor'](_0x5f58bf*(0x1+_0x537aa2)),!isNaN(_0x48e4c2)&&_0x48e4c2>0x0&&logBattleEvent('🔴奥义·火之易伤！伤害增加了\x20'+_0x48e4c2+'\x20点。',_0x430d3c(0x4db));}_0x5f58bf=Math[_0x430d3c(0x275)](0x1,_0x5f58bf-_0x494c24);enemyRivival&&(_0x5f58bf=Math[_0x430d3c(0x265)](0.1*_0x5f58bf));battleState[_0x430d3c(0x25b)][_0x430d3c(0x5ad)]=Math['max'](0x0,battleState[_0x430d3c(0x25b)][_0x430d3c(0x5ad)]-_0x5f58bf);_0x2d980e?(logBattleEvent(_0x430d3c(0x5af)+_0x5f58bf+_0x430d3c(0x30e),_0x430d3c(0x2cf)),updateDamageValue(_0x5f58bf,![],_0x430d3c(0x504),!![]),showEffect('playerEffect',_0x430d3c(0x308))):(updateDamageValue(_0x5f58bf,![],'damage'),logBattleEvent(_0x430d3c(0x596)+_0x5f58bf+'\x20点物理伤害。',_0x430d3c(0x516)));waterAmuletTriggered&&updateDamageValue(_0x5f58bf,![],_0x430d3c(0x2eb));const _0x4445c8=applySuitEffects?applySuitEffects():0x0;if(_0x4445c8>=0x8&&_0x5f58bf>0x0){if(Math[_0x430d3c(0x207)]()<0.2){const _0x3f2099=Math[_0x430d3c(0x206)](0x7a120,Math[_0x430d3c(0x265)](_0x5f58bf*0.005));battleAttributes['health']=Math[_0x430d3c(0x206)](maxHealth,battleAttributes[_0x430d3c(0x5ad)]+_0x3f2099),updateDamageValue(-_0x3f2099,!![],_0x430d3c(0x2eb)),logBattleEvent('✨【套装效果】觉醒套装之力吸取了\x20'+_0x3f2099+_0x430d3c(0x1c2),_0x430d3c(0x48d),_0x430d3c(0x298)),updateUI();}}if(ascensionSkill[_0x430d3c(0x33b)]===_0x430d3c(0x578)||secondAscensionSkill[_0x430d3c(0x33b)]===_0x430d3c(0x578)){const _0x3f696d=(ascensionSkill['name']===_0x430d3c(0x578)?ascensionSkill:secondAscensionSkill)[_0x430d3c(0x358)]((ascensionSkill[_0x430d3c(0x33b)]===_0x430d3c(0x578)?ascensionSkill:secondAscensionSkill)[_0x430d3c(0x533)])/0x64,_0x5dc714=Math[_0x430d3c(0x265)](_0x5f58bf*_0x3f696d);battleAttributes[_0x430d3c(0x5ad)]=Math[_0x430d3c(0x206)](maxHealth,battleAttributes[_0x430d3c(0x5ad)]+_0x5dc714),logBattleEvent(_0x430d3c(0x52e)+_0x5dc714+'\x20点生命值。',_0x430d3c(0x2cf)),updateUI();}return battleState[_0x430d3c(0x25b)][_0x430d3c(0x266)]&&handlePierced(),applyPhysicalAttackEffects(_0x590d48?_0x154976:0x1),_0x1cbe63&&_0x1cbe63[_0x430d3c(0x2aa)]===_0x430d3c(0x49c)&&applySpecialSkillEffects(_0x1cbe63),console[_0x430d3c(0x397)](_0x1cbe63),_0x5f58bf;}function performMagicalAttack(_0x30f8fc,_0x2c07c6,_0x48e936){const _0x21d65b=_0x38c76e;let _0x362ffb=0x1;battleState[_0x21d65b(0x498)]['spellSlow']&&(_0x362ffb=0x1f4);if(battleAttributes['mana']<0x32*_0x362ffb)return logBattleEvent('您的法力值不足！'),{'damage':0x0,'retryPhysical':!![]};const _0x550773=Math['random']()*(1.2-0.8)+0.8,_0x3e71eb=battleState[_0x21d65b(0x25b)][_0x21d65b(0x4d3)]*_0x550773,_0x1ccbc7=f(_0x3e71eb),_0x551469=Math[_0x21d65b(0x53b)](battleState[_0x21d65b(0x25b)]['magicDefense']*0.1);let _0x2e93f0;_0x1ccbc7!==0x0?_0x2e93f0=Math[_0x21d65b(0x275)](0x1,Math[_0x21d65b(0x265)](battleAttributes[_0x21d65b(0x2b4)]*0.8*_0x30f8fc*(0x1-_0x1ccbc7))):_0x2e93f0=Math[_0x21d65b(0x275)](0x1,Math[_0x21d65b(0x265)](battleAttributes[_0x21d65b(0x2b4)]*0.8*_0x30f8fc));const _0x2da559=Math[_0x21d65b(0x265)](Math[_0x21d65b(0x207)]()*(0xc8-0x32+0x1)+0x32+battleRounds*0x14*_0x30f8fc)*_0x362ffb;battleAttributes[_0x21d65b(0x5a5)]=Math[_0x21d65b(0x275)](0x0,battleAttributes[_0x21d65b(0x5a5)]-_0x2da559);if(handleMagicDodge(_0x21d65b(0x25b)))return playerTurn=![],0x0;let _0x5eb44c=checkCriticalHit(battleState[_0x21d65b(0x498)][_0x21d65b(0x4d2)]),_0x3a4bd1=calculateDamage(_0x2e93f0,_0x5eb44c,battleState[_0x21d65b(0x498)][_0x21d65b(0x4e8)],!![]);const _0x1708b0=applyWuxingEffects();let _0x2f5b7c=0x0;if(_0x1708b0[_0x21d65b(0x462)]&&_0x1708b0[_0x21d65b(0x462)]>0x0){const _0x3c30c9=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x1708b0['fireAmulet']];_0x2f5b7c=Math['floor'](_0x3a4bd1*_0x3c30c9),_0x3a4bd1=Math[_0x21d65b(0x265)](_0x3a4bd1*(0x1+_0x3c30c9)),!isNaN(_0x2f5b7c)&&_0x2f5b7c>0x0&&logBattleEvent(_0x21d65b(0x4a7)+_0x2f5b7c+_0x21d65b(0x53d),_0x21d65b(0x4db));}_0x3a4bd1=Math['max'](0x1,_0x3a4bd1-_0x551469);enemyRivival&&(_0x3a4bd1=Math[_0x21d65b(0x265)](0.1*_0x3a4bd1));battleState[_0x21d65b(0x25b)][_0x21d65b(0x5ad)]=Math[_0x21d65b(0x275)](0x0,battleState[_0x21d65b(0x25b)][_0x21d65b(0x5ad)]-_0x3a4bd1);_0x5eb44c?(logBattleEvent('⚔️【玩家攻击】暴击！！本次对敌方造成了\x20'+_0x3a4bd1+'\x20点法术伤害，消耗了\x20'+_0x2da559+'\x20点法力值！','red'),updateDamageValue(_0x3a4bd1,![],_0x21d65b(0x504),!![]),showEffect('playerEffect',_0x21d65b(0x56d))):(logBattleEvent(_0x21d65b(0x2e6)+_0x3a4bd1+'\x20点法术伤害，消耗了\x20'+_0x2da559+_0x21d65b(0x4e6),_0x21d65b(0x430)),updateDamageValue(_0x3a4bd1,![],_0x21d65b(0x504)),showEffect(_0x21d65b(0x432),_0x21d65b(0x56d)));waterAmuletTriggered&&updateDamageValue(_0x3a4bd1,![],'extra-damage');const _0xc06702=applySuitEffects?applySuitEffects():0x0;if(_0xc06702>=0x8&&_0x3a4bd1>0x0){if(Math[_0x21d65b(0x207)]()<0.2){const _0x1a7075=Math['min'](0x7a120,Math['floor'](_0x3a4bd1*0.005));battleAttributes[_0x21d65b(0x5ad)]=Math[_0x21d65b(0x206)](maxHealth,battleAttributes[_0x21d65b(0x5ad)]+_0x1a7075),updateDamageValue(-_0x1a7075,!![],_0x21d65b(0x2eb)),logBattleEvent('✨【8件套效果】觉醒套装之力吸取了\x20'+_0x1a7075+_0x21d65b(0x1c2),_0x21d65b(0x4d0)),updateUI();}}return battleState[_0x21d65b(0x25b)][_0x21d65b(0x266)]&&handlePierced(),(ascensionSkill[_0x21d65b(0x33b)]===_0x21d65b(0x3a2)||secondAscensionSkill['name']==='法术精通')&&Math[_0x21d65b(0x207)]()*0x64<battleState[_0x21d65b(0x498)][_0x21d65b(0x23b)]&&performIndependentMagicAttack(),applyMagicAttackEffects(_0x3a4bd1,_0x2c07c6?_0x30f8fc:0x1),_0x48e936&&_0x48e936[_0x21d65b(0x2aa)]===_0x21d65b(0x2de)&&applySpecialSkillEffects(_0x48e936),{'damage':_0x3a4bd1,'retryPhysical':![]};}function handlePostAttackEffects(_0x54103d,_0x412d8e,_0x4493bb){const _0x414ec0=_0x38c76e,{selectedSkill:_0x2cafcc,isCritical:isCritical=![],skillMultiplier:skillMultiplier=0x1}=_0x4493bb||{};waterAmuletTriggered&&(updateDamageValue(_0x412d8e,![],_0x414ec0(0x2eb)),waterAmuletTriggered=![]);battleState['enemy'][_0x414ec0(0x266)]&&handlePierced();if(_0x54103d==='physical'){if(ascensionSkill['name']===_0x414ec0(0x578)||secondAscensionSkill[_0x414ec0(0x33b)]===_0x414ec0(0x578)){const _0x336338=(ascensionSkill[_0x414ec0(0x33b)]==='吸血魔刃'?ascensionSkill:secondAscensionSkill)['increment']((ascensionSkill[_0x414ec0(0x33b)]==='吸血魔刃'?ascensionSkill:secondAscensionSkill)[_0x414ec0(0x533)])/0x64,_0x6021ee=Math[_0x414ec0(0x265)](_0x412d8e*_0x336338);battleAttributes[_0x414ec0(0x5ad)]=Math[_0x414ec0(0x206)](maxHealth,battleAttributes[_0x414ec0(0x5ad)]+_0x6021ee),logBattleEvent(_0x414ec0(0x52e)+_0x6021ee+_0x414ec0(0x1c2),'red');}_0x2cafcc&&applyPhysicalAttackEffects(skillMultiplier);}_0x54103d===_0x414ec0(0x46a)&&((ascensionSkill[_0x414ec0(0x33b)]===_0x414ec0(0x3a2)||secondAscensionSkill[_0x414ec0(0x33b)]===_0x414ec0(0x3a2))&&Math[_0x414ec0(0x207)]()*0x64<battleState[_0x414ec0(0x498)]['spellMasteryChance']&&performIndependentMagicAttack(),_0x2cafcc&&applyMagicAttackEffects(_0x412d8e,skillMultiplier)),handleShocked(),applyDefenseBonusEffect(),handleManaRecover(),applyAscensionEffects(),checkBattleState(_0x412d8e),updateUI(),updateEnemyStatusDisplay();}function checkBattleState(_0x464a16){if(battleState['enemy']['health']<=0x0)return updateEnemyAttributes(),showNextBattlePrompt(!![]),!![];if(battleAttributes['health']<=0x0)return showNextBattlePrompt(![]),!![];return![];}function f(_0x4769a5){const _0x11b45b=_0x38c76e,_0x4e0614=_0x4769a5/(_0x4769a5+0x493e0)-0.1;return Math[_0x11b45b(0x275)](_0x4e0614,0x0);}function checkWaterAmuletChance(){const _0x42cb28=_0x38c76e,_0x2c34f2=applyWuxingEffects();if(_0x2c34f2[_0x42cb28(0x487)]&&_0x2c34f2[_0x42cb28(0x487)]>0x0){const _0x2236b4=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x2c34f2[_0x42cb28(0x487)]];if(Math[_0x42cb28(0x207)]()<_0x2236b4)return!![];}return![];}function handleWaterAmuletEffect(_0x171c3d,_0x5c0b93){const _0x45dbe7=_0x38c76e;logBattleEvent(_0x45dbe7(0x45b),'aqua'),performAttack(_0x171c3d);}const DamageDisplayManager={'damageContainers':{'player':null,'enemy':null},'initialize'(){const _0x406033=_0x38c76e,_0x43c77c=document[_0x406033(0x598)](_0x406033(0x3a8));_0x43c77c['id']='player-damage-container',_0x43c77c[_0x406033(0x352)][_0x406033(0x210)]=_0x406033(0x362);const _0x3c31c3=document[_0x406033(0x598)](_0x406033(0x3a8));_0x3c31c3['id']=_0x406033(0x461),_0x3c31c3['style'][_0x406033(0x210)]=_0x406033(0x500),document[_0x406033(0x2a4)][_0x406033(0x46f)](_0x43c77c),document['body'][_0x406033(0x46f)](_0x3c31c3),this[_0x406033(0x3e1)]['player']=_0x43c77c,this['damageContainers'][_0x406033(0x25b)]=_0x3c31c3;},'createDamageElement'(_0x340608,_0x43532c,_0x3f913a,_0x314e3e){const _0x1ede87=_0x38c76e,_0x3234db=document['createElement'](_0x1ede87(0x3a8));_0x3234db['style']['position']=_0x1ede87(0x1d9);const _0x472040=_0x314e3e?'floatUpRight':_0x1ede87(0x57b);_0x3234db[_0x1ede87(0x352)][_0x1ede87(0x26f)]=_0x472040+'\x200.8s\x20ease-out\x20forwards';if(_0x340608>=0x0)_0x3234db[_0x1ede87(0x341)]='-'+_0x340608,_0x3f913a?_0x3234db[_0x1ede87(0x352)][_0x1ede87(0x210)]+=_0x1ede87(0x50c)+(_0x314e3e?'floatUpRightCritical':_0x1ede87(0x4f5))+_0x1ede87(0x4cc):_0x3234db['style']['cssText']+=_0x1ede87(0x4d9);else{const _0x440d85=Math[_0x1ede87(0x29d)](_0x340608);_0x3234db['innerText']='+'+_0x440d85,_0x3234db[_0x1ede87(0x352)][_0x1ede87(0x210)]+=_0x1ede87(0x1e5)+(_0x314e3e?_0x1ede87(0x4a4):_0x1ede87(0x4f5))+_0x1ede87(0x20c);}return _0x3234db;}},style=document['createElement']('style');style['textContent']='\x0a\x20\x20\x20\x20@keyframes\x20floatUpLeft\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-50px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20floatUpRight\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0)\x20translateX(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-50px)\x20translateX(20px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20floatUpLeftCritical\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0)\x20scale(1)\x20translateX(0);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2020%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-10px)\x20scale(1.2)\x20translateX(-5px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-60px)\x20scale(1)\x20translateX(-20px);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20@keyframes\x20floatUpRightCritical\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x200%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(0)\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x2020%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-10px)\x20scale(1.2);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20100%\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20opacity:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateY(-60px)\x20scale(1);\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20}\x0a',document[_0x38c76e(0x205)][_0x38c76e(0x46f)](style);function updateDamageValue(_0xaa55cd,_0x48adaf=![],_0x6378e0=_0x38c76e(0x504),_0x1c447b=![]){const _0x41cbb4=_0x38c76e;!DamageDisplayManager[_0x41cbb4(0x3e1)][_0x41cbb4(0x498)]&&DamageDisplayManager[_0x41cbb4(0x2db)]();if(isNaN(_0xaa55cd)){console[_0x41cbb4(0x1b6)](_0x41cbb4(0x36e));return;}const _0x5a1eef=_0x48adaf?DamageDisplayManager[_0x41cbb4(0x3e1)][_0x41cbb4(0x498)]:DamageDisplayManager[_0x41cbb4(0x3e1)][_0x41cbb4(0x25b)],_0x481f7b=DamageDisplayManager['createDamageElement'](_0xaa55cd,_0x6378e0,_0x1c447b,_0x48adaf);_0x5a1eef[_0x41cbb4(0x46f)](_0x481f7b),setTimeout(()=>{const _0x1ff6a5=_0x41cbb4;_0x5a1eef[_0x1ff6a5(0x24a)](_0x481f7b)&&_0x5a1eef[_0x1ff6a5(0x4e5)](_0x481f7b);},0x4b0);}function ensureCompatibility(){const _0x4cc016=_0x38c76e,_0x4a9220=[_0x4cc016(0x42e),_0x4cc016(0x22d),_0x4cc016(0x3b0),_0x4cc016(0x49d)];_0x4a9220[_0x4cc016(0x284)](_0x11f9e1=>{const _0x3fa47f=_0x4cc016;if(!document[_0x3fa47f(0x4e9)](_0x11f9e1)){const _0xd39761=document['createElement'](_0x3fa47f(0x3a8));_0xd39761['id']=_0x11f9e1,_0xd39761[_0x3fa47f(0x352)][_0x3fa47f(0x3f1)]=_0x3fa47f(0x2c0),document['body']['appendChild'](_0xd39761);}});}function checkTrumpCardState(){const _0x29dbd8=_0x38c76e,_0x5f5830=[],_0x360761=document[_0x29dbd8(0x4e9)](_0x29dbd8(0x3ff));_0x360761&&Array[_0x29dbd8(0x200)](_0x360761[_0x29dbd8(0x4a5)])[_0x29dbd8(0x284)](_0x4fb629=>{const _0x157227=_0x29dbd8,_0x12eb90=_0x4fb629[_0x157227(0x341)][_0x157227(0x252)]('\x20')[0x0],_0x2afd0e=currentPet['skills'][_0x157227(0x2c5)](_0x8e8f3c=>_0x8e8f3c['name']===_0x12eb90&&_0x8e8f3c[_0x157227(0x2aa)]==='TC');_0x2afd0e&&_0x5f5830[_0x157227(0x3e2)](_0x2afd0e);});if(_0x5f5830['length']===0x0)return{'exists':![],'skill':null};let _0x4ea58a=_0x5f5830[0x0];if(_0x5f5830[_0x29dbd8(0x1f0)]>0x1){const _0x33cf48=Math[_0x29dbd8(0x265)](Math[_0x29dbd8(0x207)]()*_0x5f5830[_0x29dbd8(0x1f0)]);_0x4ea58a=_0x5f5830[_0x33cf48];}return{'exists':!![],'skill':_0x4ea58a};}function checkLifeSpan(_0x46a80d){const _0x198c4a=_0x38c76e,_0x7759a8=currentLifeSpan-_0x46a80d;if(_0x7759a8<0x0)return logBattleEvent('你的宠物看起来起色很不好，多关心关心它吧！',_0x198c4a(0x562)),![];return currentLifeSpan-=_0x46a80d,!![];}function recoverLifeSpan(_0x480fc1){const _0x269a06=_0x38c76e;currentLifeSpan=Math[_0x269a06(0x265)](Math[_0x269a06(0x206)](maxLifeSpan,currentLifeSpan+_0x480fc1));}function performTrumpCard(){const _0x4495e9=_0x38c76e,_0x3c9282=checkTrumpCardState();if(!_0x3c9282[_0x4495e9(0x4e7)]){logBattleEvent(_0x4495e9(0x5a3),'red');return;}if(!playerTurn)return;const _0x4e7a65=_0x3c9282[_0x4495e9(0x54f)],_0xc4bb5e=calculateSkillLevelAndMultiplier(_0x4e7a65);applySpecialSkillEffects(_0x4e7a65);if(battleAttributes[_0x4495e9(0x5ad)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState['enemy']['health']<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![];}function performIndependentMagicAttack(){const _0x204901=_0x38c76e,_0x441a07=document[_0x204901(0x4e9)](_0x204901(0x3ff)),_0x3205bd=Array['from'](_0x441a07[_0x204901(0x4a5)]),_0xee14b8=_0x3205bd[_0x204901(0x241)](_0x16a656=>_0x16a656['innerText']['split']('\x20')[0x0])[_0x204901(0x241)](_0x36a6bd=>currentPet['skills']['find'](_0x2d935d=>_0x2d935d[_0x204901(0x33b)]===_0x36a6bd&&_0x2d935d['type']==='MA'||_0x36a6bd&&_0x2d935d[_0x204901(0x2aa)]===_0x204901(0x2de)))[_0x204901(0x367)](_0x3be6d7=>_0x3be6d7);let _0x575129=0x1,_0x301b15=0x1;if(_0xee14b8['length']>0x0){const _0x1202ec=Math[_0x204901(0x265)](Math['random']()*_0xee14b8[_0x204901(0x1f0)]),_0x5f06c7=_0xee14b8[_0x1202ec],_0x2ba438=calculateSkillLevelAndMultiplier(_0x5f06c7);_0x301b15=_0x2ba438[_0x204901(0x41e)],_0x575129=_0x2ba438[_0x204901(0x527)],logBattleEvent(_0x204901(0x5a2)+_0x5f06c7[_0x204901(0x33b)]+'\x20'+_0x301b15+'级。','wheat');}else logBattleEvent('⚔️【玩家攻击】触发法术精通，但没有可用的法术攻击技能，使用普通法术攻击。',_0x204901(0x430));let _0xbeb06b=0x1;battleState[_0x204901(0x498)][_0x204901(0x20f)]&&(_0xbeb06b=0x1f4,logBattleEvent('妖怪令你对法术的操控更迟钝了，你耗费了更多的法力值！',_0x204901(0x562)));const _0x34e18d=Math[_0x204901(0x207)]()*(1.2-0.8)+0.8,_0x42ba58=battleState[_0x204901(0x25b)]['magicDefense']*_0x34e18d,_0x3ca3de=f(_0x42ba58),_0x1ec83e=Math['round'](battleState['enemy'][_0x204901(0x4d3)]*0.1);let _0x581eb5;_0x3ca3de!==0x0?_0x581eb5=Math[_0x204901(0x275)](0x1,Math[_0x204901(0x265)](battleAttributes[_0x204901(0x2b4)]*0.8*_0x575129*(0x1-_0x3ca3de))):_0x581eb5=Math[_0x204901(0x275)](0x1,Math[_0x204901(0x265)](battleAttributes[_0x204901(0x2b4)]*0.8*_0x575129));let _0x40cc41=checkCriticalHit(battleState[_0x204901(0x498)][_0x204901(0x4d2)]);if(handleMagicDodge('enemy'))return playerTurn=![],0x0;let _0x1c9f4b=calculateDamage(_0x581eb5,_0x40cc41,battleState[_0x204901(0x498)]['critDamage'],!![]);const _0x10da29=applyWuxingEffects();let _0x4ec016=0x0;if(_0x10da29[_0x204901(0x462)]&&_0x10da29[_0x204901(0x462)]>0x0){const _0x286889=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x10da29['fireAmulet']];_0x4ec016=Math[_0x204901(0x265)](_0x1c9f4b*_0x286889),_0x1c9f4b=Math[_0x204901(0x265)](_0x1c9f4b*(0x1+_0x286889)),!isNaN(_0x4ec016)&&_0x4ec016>0x0&&logBattleEvent('🔴奥义·火之易伤！伤害增加了\x20'+_0x4ec016+_0x204901(0x53d),_0x204901(0x4db));}_0x1c9f4b=Math[_0x204901(0x275)](0x1,_0x1c9f4b-_0x1ec83e);enemyRivival&&(_0x1c9f4b=Math[_0x204901(0x265)](0.1*_0x1c9f4b));battleState['enemy'][_0x204901(0x5ad)]=Math[_0x204901(0x275)](0x0,battleState[_0x204901(0x25b)][_0x204901(0x5ad)]-_0x1c9f4b);_0x40cc41?(logBattleEvent(_0x204901(0x5af)+_0x1c9f4b+'\x20点伤害。',_0x204901(0x2cf)),showEffect(_0x204901(0x432),_0x204901(0x308))):logBattleEvent(_0x204901(0x596)+_0x1c9f4b+_0x204901(0x531),_0x204901(0x430));updateDamageValue(_0x1c9f4b,![],_0x204901(0x2eb)),showEffect(_0x204901(0x432),_0x204901(0x335)),applyMagicAttackEffects(_0x1c9f4b,_0x575129);battleState[_0x204901(0x25b)][_0x204901(0x266)]&&handlePierced();if(battleState['player'][_0x204901(0x3a9)]&&_0x1c9f4b>0x0){const _0xd5ee20=Math[_0x204901(0x265)](_0x1c9f4b*0.1);battleAttributes['health']=Math[_0x204901(0x275)](0x0,battleAttributes[_0x204901(0x5ad)]-_0xd5ee20),logBattleEvent(_0x204901(0x20e)+_0xd5ee20+'\x20点溅射伤害。',_0x204901(0x532));}}function performPoison(){const _0x1fd916=_0x38c76e;if(!attributesFetched){showInfoBox(_0x1fd916(0x4e3));return;}if(!battleState||!battleState[_0x1fd916(0x25b)]){console[_0x1fd916(0x1b6)](_0x1fd916(0x54a));return;}if(!playerTurn)return;if(battleState[_0x1fd916(0x498)][_0x1fd916(0x34b)]){performAttack(_0x1fd916(0x1f6));return;}if(!poisonSkillActivated){if(useItem(_0x1fd916(0x32f)))poisonSkillActivated=!![],logBattleEvent(_0x1fd916(0x1da),'#C10066');else{logBattleEvent('你还没有获得施毒之术，请尝试通过武神仙葫获取！',_0x1fd916(0x2cf));return;}}const _0x36be8e=document[_0x1fd916(0x4e9)](_0x1fd916(0x3ff)),_0x277aa4=Array['from'](_0x36be8e[_0x1fd916(0x4a5)]),_0x2af965=_0x277aa4[_0x1fd916(0x241)](_0x3c5809=>_0x3c5809[_0x1fd916(0x341)][_0x1fd916(0x252)]('\x20')[0x0])[_0x1fd916(0x241)](_0x278857=>currentPet[_0x1fd916(0x3bd)][_0x1fd916(0x2c5)](_0x24418e=>_0x24418e['name']===_0x278857&&(_0x24418e[_0x1fd916(0x2aa)]==='PP'||_0x24418e['type']==='PPE')))[_0x1fd916(0x367)](_0x5b5b18=>_0x5b5b18);let _0xbaf77=0x1,_0x5a5f78=0x1,_0x1d649f;if(_0x2af965[_0x1fd916(0x1f0)]>0x0){const _0x7daea1=Math[_0x1fd916(0x265)](Math[_0x1fd916(0x207)]()*_0x2af965[_0x1fd916(0x1f0)]);_0x1d649f=_0x2af965[_0x7daea1];const _0x1db140=calculateSkillLevelAndMultiplier(_0x1d649f);_0x5a5f78=_0x1db140['skillLevel'],_0xbaf77=_0x1db140['skillMultiplier'],logBattleEvent('你施放了\x20'+_0x1d649f['name']+'\x20'+_0x5a5f78+_0x1fd916(0x1fe),_0x1fd916(0x259));}const _0x276478=Math['floor'](maxMana*0.4);if(battleAttributes['mana']<_0x276478){logBattleEvent(_0x1fd916(0x279),'red');return;}battleAttributes[_0x1fd916(0x5a5)]=Math[_0x1fd916(0x275)](0x0,battleAttributes[_0x1fd916(0x5a5)]-_0x276478);if(handleMagicDodge('enemy')){playerTurn=![];return;}let _0x5229ae=0.3;useItem(_0x1fd916(0x455))&&(_0x5229ae=0.7,_0xbaf77+=0x1);const _0x4f071d=Math[_0x1fd916(0x265)](battleAttributes[_0x1fd916(0x2b4)]*0.5*_0xbaf77*(Math[_0x1fd916(0x207)]()*(1.1-0.9)+0.9));battleState[_0x1fd916(0x25b)][_0x1fd916(0x5ad)]=Math[_0x1fd916(0x275)](0x0,battleState[_0x1fd916(0x25b)][_0x1fd916(0x5ad)]-_0x4f071d),logBattleEvent(_0x1fd916(0x54b)+_0x4f071d+_0x1fd916(0x3d2)+_0x276478+_0x1fd916(0x4e6),'#C10066');battleState[_0x1fd916(0x25b)]['pierced']&&handlePierced();showEffect(_0x1fd916(0x432),_0x1fd916(0x426)),updateDamageValue(_0x4f071d,![],_0x1fd916(0x504));Math['random']()<_0x5229ae&&!battleState[_0x1fd916(0x25b)][_0x1fd916(0x307)]&&(battleState[_0x1fd916(0x25b)][_0x1fd916(0x307)]=!![],handlePoison(_0xbaf77,_0x1d649f));handleShocked(),handleManaRecover(),applyAscensionEffects(),updateUI();if(battleAttributes['health']<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x1fd916(0x25b)][_0x1fd916(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![];}function handlePoison(_0x562594=0x1,_0x156818=null){const _0x534d85=_0x38c76e,_0x13f66b=0x3e8,_0x5350eb=Math[_0x534d85(0x53b)](playerCultivation/0x3a980)*0x3e8,_0x432b10=_0x13f66b+_0x5350eb;let _0x2dc54b=_0x432b10,_0x738adf=0x0;const _0x5e574b=setInterval(()=>{const _0x4b0b0b=_0x534d85;if(!battleState[_0x4b0b0b(0x25b)]['poisoned']){clearInterval(_0x5e574b);return;}const _0x2040a5=Math[_0x4b0b0b(0x265)](battleAttributes[_0x4b0b0b(0x2b4)]*0.5*_0x562594*(Math['random']()*(1.1-0.9)+0.9)*(0x1+battleState['player']['critDamage']*0.1));battleState[_0x4b0b0b(0x25b)][_0x4b0b0b(0x5ad)]=Math[_0x4b0b0b(0x275)](0x0,battleState['enemy'][_0x4b0b0b(0x5ad)]-_0x2040a5),_0x156818&&_0x156818[_0x4b0b0b(0x2aa)]===_0x4b0b0b(0x53f)&&applySpecialSkillEffects(_0x156818,_0x2040a5),_0x738adf+=_0x2040a5,_0x2dc54b-=0x3e8,updateUI(),updateDamageValue(_0x2040a5,![],'extra-damage'),updateEnemyStatusDisplay();},0xc8);if(battleState[_0x534d85(0x25b)][_0x534d85(0x5ad)]<=0x0){clearInterval(_0x5e574b),showNextBattlePrompt(!![]),battleState[_0x534d85(0x25b)][_0x534d85(0x307)]=![];return;}battleState['enemy']['poisonedTimer']=setTimeout(()=>{const _0x5a5f55=_0x534d85;battleState[_0x5a5f55(0x25b)][_0x5a5f55(0x307)]=![],clearInterval(_0x5e574b),updateEnemyStatusDisplay(),logBattleEvent(_0x5a5f55(0x381)+_0x738adf+_0x5a5f55(0x28d),_0x5a5f55(0x259));},_0x432b10);}function getCultivationBonusDuration(){const _0x1b35ef=_0x38c76e;if(playerCultivation<=0x1d4c0)return 0x0;return Math[_0x1b35ef(0x206)](0xa,(playerCultivation-0x1d4c0)/0x2710*0.1);}function applyPhysicalAttackEffects(){const _0xb7e018=_0x38c76e;if(!divineWeaponManager['lostBook'][_0xb7e018(0x280)])return;const _0x5c920c=divineWeaponManager['lostBook'][_0xb7e018(0x448)],_0x22b9a3=_0x5c920c[Math[_0xb7e018(0x265)](Math[_0xb7e018(0x207)]()*_0x5c920c[_0xb7e018(0x1f0)])];let _0x4f8981=Math[_0xb7e018(0x206)](0x1,0.01+(divineWeaponManager['lostBook'][_0xb7e018(0x533)]-0x1)*0.006);const _0x5d24e3=playerCultivation-battleState[_0xb7e018(0x25b)][_0xb7e018(0x5a6)];if(_0x5d24e3<0x0){const _0x1977f1=Math[_0xb7e018(0x265)](-_0x5d24e3/0x2710)*0.01;_0x4f8981=Math[_0xb7e018(0x275)](0.01,_0x4f8981-_0x1977f1),console[_0xb7e018(0x397)](_0xb7e018(0x40b)+_0x4f8981);}if(Math[_0xb7e018(0x207)]()>_0x4f8981)return;const _0x3dd251=getCultivationBonusDuration();switch(_0x22b9a3){case'破甲':const _0x3f7be0=Math[_0xb7e018(0x265)](battleAttributes[_0xb7e018(0x3f0)]*(Math[_0xb7e018(0x207)]()*(0.24-0.12)+0.12));battleState[_0xb7e018(0x25b)]['physicalDefense']-=_0x3f7be0,battleState[_0xb7e018(0x25b)][_0xb7e018(0x1c6)]=!![],logBattleEvent(_0xb7e018(0x239)+_0x3f7be0+'\x20点。',_0xb7e018(0x516)),showEffect(_0xb7e018(0x432),_0xb7e018(0x1bf)),updateEnemyStatusDisplay(),battleState['enemy']['armorBreakTimer']=setTimeout(()=>{const _0xb88761=_0xb7e018;battleState[_0xb88761(0x25b)][_0xb88761(0x263)]+=_0x3f7be0,battleState[_0xb88761(0x25b)][_0xb88761(0x1c6)]=![],updateEnemyStatusDisplay();},0xbb8+_0x3dd251*0x3e8);break;case'眩晕':battleState[_0xb7e018(0x25b)][_0xb7e018(0x411)]=!![],logBattleEvent('妖怪被眩晕，无法行动。',_0xb7e018(0x430)),showEffect(_0xb7e018(0x432),_0xb7e018(0x1b5)),updateEnemyStatusDisplay(),battleState[_0xb7e018(0x25b)]['stunnedTimer']=setTimeout(()=>{const _0x255bf3=_0xb7e018;battleState[_0x255bf3(0x25b)]['stunned']=![],updateEnemyStatusDisplay();},0x3e8+_0x3dd251*0x3e8);break;case'恐吓':battleState[_0xb7e018(0x25b)][_0xb7e018(0x2a7)]=!![],logBattleEvent(_0xb7e018(0x246),'white'),updateEnemyStatusDisplay(),battleState['enemy'][_0xb7e018(0x31f)]=setTimeout(()=>{const _0x2905c6=_0xb7e018;battleState['enemy'][_0x2905c6(0x2a7)]=![],updateEnemyStatusDisplay();},0x3e8+_0x3dd251*0x3e8);break;case'穿透':!battleState['enemy'][_0xb7e018(0x266)]?handlePiercedEffect(_0x3dd251):console[_0xb7e018(0x397)](_0xb7e018(0x384));break;case'惶恐':!battleState[_0xb7e018(0x25b)][_0xb7e018(0x40d)]?handleTerrified(_0x3dd251):console[_0xb7e018(0x397)](_0xb7e018(0x49f));break;case'麻痹':!battleState['enemy'][_0xb7e018(0x32b)]&&(battleState[_0xb7e018(0x25b)][_0xb7e018(0x32b)]=!![],battleState[_0xb7e018(0x25b)][_0xb7e018(0x467)]=enemyMaxHealth,battleState[_0xb7e018(0x25b)][_0xb7e018(0x214)]=0x0);const _0x4fe73f=Math['floor'](battleState[_0xb7e018(0x25b)]['originalMaxHealth']*0.03);enemyMaxHealth-=_0x4fe73f,battleState[_0xb7e018(0x25b)][_0xb7e018(0x214)]+=_0x4fe73f;battleState[_0xb7e018(0x25b)][_0xb7e018(0x5ad)]>enemyMaxHealth&&(battleState['enemy']['health']=enemyMaxHealth);logBattleEvent(_0xb7e018(0x4d6)+_0x4fe73f+_0xb7e018(0x53d),'lightblue'),showEffect(_0xb7e018(0x432),_0xb7e018(0x34d)),updateEnemyStatusDisplay(),battleState['enemy'][_0xb7e018(0x2b1)]=setTimeout(()=>{const _0x218c56=_0xb7e018;battleState[_0x218c56(0x25b)][_0x218c56(0x467)]&&(battleState[_0x218c56(0x25b)][_0x218c56(0x214)]-=_0x4fe73f,battleState[_0x218c56(0x25b)]['benumbStack']<=0x0?(enemyMaxHealth=battleState['enemy'][_0x218c56(0x467)],battleState[_0x218c56(0x25b)][_0x218c56(0x32b)]=![]):enemyMaxHealth=battleState[_0x218c56(0x25b)][_0x218c56(0x467)]-battleState[_0x218c56(0x25b)][_0x218c56(0x214)]),updateEnemyStatusDisplay();},0xbb8+_0x3dd251*0x3e8);break;}}function applyMagicAttackEffects(_0x2a0cb9){const _0x1a2408=_0x38c76e;if(!divineWeaponManager['fragmentedMap'][_0x1a2408(0x280)])return;const _0x4c2f7f=divineWeaponManager[_0x1a2408(0x1b4)][_0x1a2408(0x448)],_0x382dbc=_0x4c2f7f[Math[_0x1a2408(0x265)](Math['random']()*_0x4c2f7f[_0x1a2408(0x1f0)])];let _0x1ed946=Math[_0x1a2408(0x206)](0x1,0.01+(divineWeaponManager[_0x1a2408(0x1b4)][_0x1a2408(0x533)]-0x1)*0.006);const _0x4e6fc4=playerCultivation-battleState[_0x1a2408(0x25b)][_0x1a2408(0x5a6)];if(_0x4e6fc4<0x0){const _0x2e02a4=Math[_0x1a2408(0x265)](-_0x4e6fc4/0x2710)*0.01;_0x1ed946=Math[_0x1a2408(0x275)](0.01,_0x1ed946-_0x2e02a4),console[_0x1a2408(0x397)](_0x1a2408(0x48f)+_0x1ed946);}if(Math[_0x1a2408(0x207)]()>_0x1ed946)return;const _0x2437eb=getCultivationBonusDuration();switch(_0x382dbc){case'沉默':battleState[_0x1a2408(0x25b)][_0x1a2408(0x1e8)]=!![],showEffect('playerEffect',_0x1a2408(0x530)),updateEnemyStatusDisplay(),battleState['enemy'][_0x1a2408(0x39a)]=setTimeout(()=>{const _0x4285c0=_0x1a2408;battleState[_0x4285c0(0x25b)][_0x4285c0(0x1e8)]=![],updateEnemyStatusDisplay();},0xbb8+_0x2437eb*0x3e8);break;case'迟缓':handleSlow(_0x2437eb);break;case'混乱':battleState[_0x1a2408(0x25b)][_0x1a2408(0x41c)]=!![],showEffect(_0x1a2408(0x432),_0x1a2408(0x3d0)),updateEnemyStatusDisplay(),battleState['enemy'][_0x1a2408(0x237)]=setTimeout(()=>{const _0x19991e=_0x1a2408;battleState[_0x19991e(0x25b)][_0x19991e(0x41c)]=![],updateEnemyStatusDisplay();},0xbb8+_0x2437eb*0x3e8);break;case _0x1a2408(0x343):const _0x28d120=Math['floor'](_0x2a0cb9*0.8);let _0x355e2a=0x0;battleState[_0x1a2408(0x25b)]['mana']<_0x28d120&&(_0x355e2a=_0x28d120-battleState[_0x1a2408(0x25b)][_0x1a2408(0x5a5)]);battleState[_0x1a2408(0x25b)][_0x1a2408(0x5a5)]=Math[_0x1a2408(0x275)](0x0,battleState[_0x1a2408(0x25b)][_0x1a2408(0x5a5)]-_0x28d120),battleState[_0x1a2408(0x25b)][_0x1a2408(0x5ad)]=Math[_0x1a2408(0x275)](0x0,battleState[_0x1a2408(0x25b)][_0x1a2408(0x5ad)]-_0x355e2a);_0x355e2a>0x0?logBattleEvent(_0x1a2408(0x27b)+_0x355e2a+_0x1a2408(0x1c2),_0x1a2408(0x34a)):logBattleEvent('法力燃烧！妖怪失去了\x20'+_0x28d120+_0x1a2408(0x4e6),_0x1a2408(0x391));showEffect('playerEffect',_0x1a2408(0x3f8));break;case _0x1a2408(0x44e):const _0x5afdda=Math['floor'](_0x2a0cb9*0.01);let _0x5d5629=Math[_0x1a2408(0x206)](_0x5afdda,battleState[_0x1a2408(0x25b)][_0x1a2408(0x5a5)]);battleState[_0x1a2408(0x25b)]['mana']=Math[_0x1a2408(0x275)](0x0,battleState[_0x1a2408(0x25b)][_0x1a2408(0x5a5)]-_0x5d5629),battleAttributes[_0x1a2408(0x5a5)]=Math['min'](maxMana,battleAttributes[_0x1a2408(0x5a5)]+_0x5d5629),logBattleEvent('你吸取了\x20'+_0x5d5629+'\x20点法力值。','#00BBFF'),showEffect('playerEffect',_0x1a2408(0x311));break;case'灼烧':battleState['enemy'][_0x1a2408(0x42c)]=!![],showEffect(_0x1a2408(0x432),'https://pic.imgdb.cn/item/66a647c5d9c307b7e9f3c332.gif'),updateEnemyStatusDisplay(),battleState[_0x1a2408(0x25b)][_0x1a2408(0x4fc)]=setTimeout(()=>{const _0x198d3a=_0x1a2408;battleState[_0x198d3a(0x25b)]['burnt']=![],updateEnemyStatusDisplay();},0xbb8+_0x2437eb*0x3e8);break;}}function handlePiercedEffect(_0x23415a){const _0x1ea312=_0x38c76e;pierceDamageContainer[_0x1ea312(0x2b2)]=0x0,battleState[_0x1ea312(0x25b)][_0x1ea312(0x266)]=!![],logBattleEvent('妖怪被施加穿透效果，每次造成伤害时会附加真实伤害。穿透效果结束后会给予妖怪致命的余波伤害。',_0x1ea312(0x1dc)),showEffect(_0x1ea312(0x432),_0x1ea312(0x529)),updateEnemyStatusDisplay(),battleState[_0x1ea312(0x25b)][_0x1ea312(0x4e2)]=setTimeout(()=>{const _0x4d7c28=_0x1ea312;if(battleState[_0x4d7c28(0x25b)][_0x4d7c28(0x266)]){const _0x39da19=Math[_0x4d7c28(0x265)](pierceDamageContainer[_0x4d7c28(0x2b2)]*(Math[_0x4d7c28(0x207)]()*(0.84-0.42)+0.24)*(0x1+playerCultivation/0x7a120));battleState[_0x4d7c28(0x25b)][_0x4d7c28(0x5ad)]=Math[_0x4d7c28(0x275)](0x0,battleState[_0x4d7c28(0x25b)]['health']-_0x39da19),logBattleEvent('穿心蚀骨之毒爆！敌人承受了\x20'+_0x39da19+_0x4d7c28(0x451),_0x4d7c28(0x1dc)),updateDamageValue(_0x39da19,![],'extra-damage'),showBattleOverlay(_0x4d7c28(0x2cb),0x5dc,0.8),pierceDamageContainer[_0x4d7c28(0x2b2)]=0x0,battleState[_0x4d7c28(0x25b)][_0x4d7c28(0x266)]=![];}updateUI(),updateEnemyStatusDisplay();},0xbb8+_0x23415a*0x3e8);}function handlePierced(){const _0x57cb8d=_0x38c76e;if(!battleState[_0x57cb8d(0x25b)]['pierced'])return;const _0x4887df=Math[_0x57cb8d(0x265)](battleAttributes[_0x57cb8d(0x3f0)]*0x5);battleState[_0x57cb8d(0x25b)]['health']=Math[_0x57cb8d(0x275)](0x0,battleState[_0x57cb8d(0x25b)][_0x57cb8d(0x5ad)]-_0x4887df),logBattleEvent(_0x57cb8d(0x534)+_0x4887df+_0x57cb8d(0x1c0),'#ADFF2F'),updateDamageValue(_0x4887df,![],_0x57cb8d(0x2eb)),pierceDamageContainer[_0x57cb8d(0x2b2)]+=_0x4887df,updateUI();if(battleState[_0x57cb8d(0x25b)][_0x57cb8d(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}}function handleStunned(){const _0x733a6c=_0x38c76e;if(battleState[_0x733a6c(0x25b)][_0x733a6c(0x411)])return logBattleEvent('妖怪眩晕，无法行动。',_0x733a6c(0x430)),playerTurn=!![],!![];return![];}function handleCriticalAndDrunken(_0x402d88){const _0x43427a=_0x38c76e;let _0x43f704=checkCriticalHit(battleState[_0x43427a(0x498)][_0x43427a(0x4d2)]);if((ascensionSkill[_0x43427a(0x33b)]==='灵魂穿刺'||secondAscensionSkill['name']===_0x43427a(0x478))&&_0x43f704&&Math['random']()<battleState[_0x43427a(0x498)][_0x43427a(0x56e)]){const _0x4159dd=Math[_0x43427a(0x265)](battleAttributes[_0x43427a(0x3f0)]*battleState[_0x43427a(0x498)][_0x43427a(0x1d2)]);battleState[_0x43427a(0x25b)][_0x43427a(0x5ad)]=Math[_0x43427a(0x275)](0x0,battleState[_0x43427a(0x25b)]['health']-_0x4159dd),updateDamageValue(_0x4159dd,![],_0x43427a(0x2eb)),logBattleEvent(_0x43427a(0x48e)+_0x4159dd+_0x43427a(0x531),_0x43427a(0x2cf));}handleDrunken(_0x402d88);}function handleSlow(_0x1bd5b4){const _0x21f3fa=_0x38c76e,_0x2d6b9d=Math[_0x21f3fa(0x265)](battleState['enemy'][_0x21f3fa(0x495)]*0.25);battleState[_0x21f3fa(0x25b)]['speed']-=_0x2d6b9d,battleState['enemy'][_0x21f3fa(0x4da)]=!![],showEffect(_0x21f3fa(0x432),'https://pic.imgdb.cn/item/66742c80d9c307b7e930b159.gif'),updateEnemyStatusDisplay(),battleState[_0x21f3fa(0x25b)]['slowTimer']=setTimeout(()=>{const _0x2a7fde=_0x21f3fa;battleState['enemy'][_0x2a7fde(0x495)]+=_0x2d6b9d,battleState[_0x2a7fde(0x25b)]['slow']=![],updateEnemyStatusDisplay();},0xbb8+_0x1bd5b4*0x3e8);}function handleTerrified(_0x1b8c3f){const _0x19b3a9=_0x38c76e,_0x130dc4=Math['floor'](battleAttributes[_0x19b3a9(0x3f0)]*0x1);battleState[_0x19b3a9(0x25b)][_0x19b3a9(0x3f0)]-_0x130dc4<0x0&&(_0x130dc4=battleState['enemy'][_0x19b3a9(0x3f0)]),battleState[_0x19b3a9(0x25b)][_0x19b3a9(0x3f0)]-=_0x130dc4,battleState['enemy'][_0x19b3a9(0x40d)]=!![],showEffect(_0x19b3a9(0x432),'https://pic.imgdb.cn/item/66c43d02d9c307b7e954d4f7.gif'),updateEnemyStatusDisplay(),updateUI(),battleState[_0x19b3a9(0x25b)][_0x19b3a9(0x32e)]=setTimeout(()=>{const _0x93d853=_0x19b3a9;battleState[_0x93d853(0x25b)]['physicalAttack']+=_0x130dc4,battleState[_0x93d853(0x25b)][_0x93d853(0x40d)]=![],updateEnemyStatusDisplay(),updateUI();},0xbb8+_0x1b8c3f*0x3e8);}function handleBurnt(){const _0x1863b7=_0x38c76e;if(battleState[_0x1863b7(0x25b)][_0x1863b7(0x42c)]){let _0x5cb0d7=0x0;const _0x3bf23a=battleState[_0x1863b7(0x498)]['speed']-battleState[_0x1863b7(0x25b)][_0x1863b7(0x495)];_0x3bf23a>0x0?_0x5cb0d7=0x7d0+_0x3bf23a*0x32:_0x5cb0d7=0x3e8+Math[_0x1863b7(0x29d)](_0x3bf23a)*0x19;battleState[_0x1863b7(0x25b)]['health']=Math[_0x1863b7(0x275)](0x0,battleState['enemy']['health']-_0x5cb0d7),logBattleEvent(_0x1863b7(0x291)+_0x5cb0d7+_0x1863b7(0x56f),_0x1863b7(0x2cf)),updateDamageValue(_0x5cb0d7,![],_0x1863b7(0x2eb)),updateUI();if(battleState[_0x1863b7(0x25b)]['health']<=0x0){showNextBattlePrompt(!![]);return;}}}function _0x48cc(){const _0x1331ca=['normalExperienceBook','originalAscensionSkill','https://pic.imgdb.cn/item/66713185d9c307b7e9fe5fc6.gif','幸运金币','铜墙铁壁','技能或寿命状态无效','1000','\x20秒的仙气护体。','burnt','宇宙之心数量不足，无法升级！','player-damage-value','armorBreakTimer','wheat','🟢奥义·木之春意！治疗量增加了\x20','playerEffect','Invalid\x20player\x20attribute\x20type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','https://pic.imgdb.cn/item/66cc999fd9c307b7e9d7ca2a.gif','被封印的技能','金子打点进山凭证，采集到了','\x20颗精灵精炼石，将精灵升至\x20','天山雪莲','https://pic.imgdb.cn/item/66bc6806d9c307b7e987b921.webp','一个富贵宝石袋','点助攻伤害！','your-pet-speed','nirvanaGem','沉檀凝香生效，清除了异常状态。','Enemy\x20is\x20rampaged.','retryPhysical','反弹状态触发，反弹了\x20','#28a745','get','slowTimer','🟡奥义·金之境界！反弹了\x20','https://pic.imgdb.cn/item/665aecc0d9c307b7e90a239e.png','effects','宇宙之心','1px\x20solid\x20#000','使用武尊秘露，物理攻击力提升150%，持续20秒。','startsWith','Reflect\x20damage\x20is\x20NaN,\x20setting\x20to\x200.','法力吸取','border-box','join','\x20点穿透余波伤害。','%以上时，对妖怪的物理攻击伤害增加40%','expMultiplier','your-pet-health','poisonPowder','https://pic.imgdb.cn/item/6672bfa5d9c307b7e9b19753.webp','attribute-exp-bar','player-physical-dodge-rate','%\x20暴击率和\x20','治疗量计算为0，不触发效果','🔵奥义·水之再动！！','currentPet\x20is\x20not\x20initialized','add','\x20点伤害给妖怪。','JKE','武尊秘露冷却结束。','enemy-damage-container','fireAmulet','enable-ascension','https://pic.imgdb.cn/item/66a33f39d9c307b7e942c36c.gif','你受到了压制效果，必须在3秒内进行有效操作。','rampaged','originalMaxHealth','法术防御','#003670','magical','getEffectChineseName','级触发，复活并恢复\x20','恭喜你战胜了第100轮妖怪，获得了1个灵兽符文！','hailMonsterAmulet','appendChild','生生不息','\x20升级失败！','凤佑天下','spirit-magic-attack','升级技能','battle-spirit-modal','upgradeMaxDivineWeapon','enemyCritDamage','灵魂穿刺','开启神器后才能执行刷新！','enemy-magic-dodge-rate','poisonedTimer','这是敌人的行动条，当轮到玩家回合但玩家未行动时，此行动条积满敌人将会行动。行动条的积累速度与敌人的当前速度有关。关闭战斗界面会停止积累。','级为你恢复了\x20','enemyCritRate','绿色品阶，每1.5秒恢复1%生命值值，持续3秒，可叠加生效','url','飞升之术技能已达最大等级！','faith','当前技能已达到最大等级！','遁入无我之境！','ascension-effect','蓝色品阶，临时增加300点法力值（刷新游戏后失效）','waterAmulet','⚔️【敌人攻击】道高一尺，魔高一丈，你低于敌人的修为，施法时损失','key','className','defenseReduction','你受到了禁疗效果，无法恢复生命值。','crimson','灵魂穿刺触发，额外造成了\x20','当前法术效果真实触发概率为：','已有同系效果发挥作用或正在冷却中，无法叠加效果使用','珍贵药材','忘却之时','your-pet-magic-attack','紫色品阶，使用后60秒内战斗获胜所得经验增加四倍','speed','轮，当前是','试炼之地召唤卡数量不足，自动战斗已停止！','player','请选择一个技能！','src','earthlyEnergy','PAE','enemy-extra-damage-value','width:\x2085%;max-height:\x2080%;background-color:\x20rgba(0,\x200,\x200,\x200.1);color:\x20white;border:\x201px\x20solid\x20rgb(221,\x20221,\x20221);padding:\x2020px;overflow-y:\x20scroll;position:\x20relative;display:\x20flex;flex-direction:\x20column;justify-content:\x20center;align-items:\x20stretch;','惶恐效果持续中','向死而生','some','spirit-multiplier','rarity','floatUpRightCritical','children','⭐️生命值','🔴奥义·火之易伤！伤害增加了\x20','蓝色品阶，20秒内暴击率提高50%','你施放了\x20','长生泉','reward','toFixed','gold-text','。\x0a2.精灵的各项数值为：\x0a\x20','\x20级。','点生命值和','神力仙丹冷却结束。','includes','textAlign','⚔️【敌人攻击】妖怪施放法术技能·嗜血魔咒并发起暴击，造成了\x20','你受到了摄魂效果，攻击力大幅下降。','quantity','onclick','%概率触发以下技能效果：','intelligence','等级:\x20','show-effect','setWeaponData','angelWings','effect','太古魔魂封印','请输入目标精灵等级：','https://pic.imgdb.cn/item/66a484fcd9c307b7e95c2645.gif','#fff','marginRight','10px\x200','combat','药品不足！','当前宠物没有学会任何治疗技能！','https://pic.imgdb.cn/item/666c0afbd9c307b7e9beef9c.png','当妖怪生命值在','onmouseout','noWorkBoss','\x201s\x20ease-out\x20forwards;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','举一反三','修为灵丹（橙）','见手青','gold','bloodSuckPercentage','critRate','magicDefense','heat','innerHTML','妖怪被麻痹，最大生命值减少了\x20','当前是第','https://pic.imgdb.cn/item/666e9aeed9c307b7e90669fa.png','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2024px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x200\x200\x202px\x20black;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','slow','pink','your-pet-max-mana','lightblue','永夜大帝','使用狂暴之魂，暴击率永久提高1%。','無班之魂','drug-modal','piercedTimer','请先从属性面板获取属性。','your-pet-image','removeChild','\x20点法力值。','exists','critDamage','getElementById','当玩家暴击时,有','神品·遗失的洛书\x20(Lv','使用物理技能时，有','spiritRefreshStone','你没有宇宙精华了！','妖怪的生命力正在复苏，请在2秒内击杀它，否则它将复活！','actionPerformed','混乱状态下，敌人攻击了自己，造成了\x20','227420EEWJJz','pow','遗失的洛书开启后，能够为你的物理技能附加专属效果，同时最多拥有3个效果。可以附加效果如下：\x0a1.破甲：根据物理攻击扣除怪物的物理防御力\x20\x0a2.恐吓：持续时间内禁止怪物触发暴击\x20\x0a3.眩晕：持续时间内怪物无法动作\x20\x0a4.穿透：造成伤害时额外附加物理攻击1/10的穿透伤害，并在持续时间结束后基于穿透伤害总和的一定比例给予怪物余波收尾伤害\x20\x0a5.麻痹：根据本次物理伤害减少怪物的血量上限\x20\x0a6.惶恐：降低敌人物理攻击力，降低值为自身物理攻击','floatUpLeftCritical','player-cultivation','battle-spirit-button','⚔️【敌人攻击】杀戮状态下由于修为差距，敌人本次物理攻击额外造成了\x20','flex','物理攻击','silver','burntTimer','border','brown','点生命值。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateX(50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x20200px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20','受到致命伤害时，消耗法力值上限','https://pic.imgdb.cn/item/66d5d91ad9c307b7e95066ac.gif','🧚🏻对方在精灵的低语里陷入沉睡','damage','10px\x2020px','row','grid','您的法力值不足，无法治疗！','soulCapture','https://pic.imgdb.cn/item/666c1408d9c307b7e9cea310.png','您的心鉴之石不足！','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20red;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2028px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x20-2px\x20-2px\x200\x20#8a2e27,\x202px\x20-2px\x200\x20#8a2e27,\x20-2px\x202px\x200\x20#8a2e27,\x202px\x202px\x200\x20#8a2e27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bolder;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20','secondary-attributes-panel','点伤害，目前护盾量为\x20','enemy-level','practiceEnemy','你花费','background-color\x200.3s','enemy-status','parse','上善若水','white','universalAsh','三花丸','getElementsByTagName','点伤害，宽容抵挡了','紫色品阶，消耗自身生命值上限20%生命值，20秒内提升50%物理攻击力、法术攻击、暴击率和暴击伤害。生命值不足上限20%时无法使用。','\x0a1.当前你携带的精灵等级为','上古传说中的仙葫，流传久远，极其稀有，打开可获得随机珍稀道具','双倍经验药效果消失。','color','green','blindfold','宠物等级每提升10级，所拥有的技能会自动提升1级。技能的等级很大程度上决定了它们的威力（被动技能会按一定比例增加各项属性值）。每个技能等级上限为20级，当技能等级到10级后，需要在本界面消耗一定经验值来升级技能。','冰莲絮','目前召唤敌人和妖怪共享一套战斗系统，但它们通常具备特殊的战斗效果。','applied','神器等级已达到上限。','skillMultiplier','\x22\x20alt=\x22残页的河图\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x20border:\x201px\x20solid\x20white;\x20border-radius:\x205px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x200;\x22>','https://pic.imgdb.cn/item/66a647c5d9c307b7e9f3c43c.gif','化功散','永夜大帝の吸血魔刃，破坏了你的护甲且吸取了你','damageReductionPercentage','button','吸血魔刃触发,吸取了\x20','\x20级，保底\x20','https://pic.imgdb.cn/item/66a63612d9c307b7e9d72d78.gif','\x20点伤害。','#FF0088','level','敌人受到\x20','https://pic.imgdb.cn/item/66742cffd9c307b7e931d5ee.gif','.battle-system-drawer','height','该技能现在不需要升级,10级后再来吧！','四倍经验药','使用神器可以为你的技能附加各种强力效果，极大增强你的战斗能力。\x0a1.神器的开启和使用需要消耗大量经验值或特定的「钥匙」。\x20\x0a2.【升满】按钮会根据你当前经验值或所拥有的道具数量直接升至最大值，请知悉。\x0a3.不建议未满级（180级）前执行神器升级操作。','round','\x22\x20alt=\x22','\x20点。','equipped','PPE','marginTop','291892BdZpdz','蓝色品阶，临时增加300点生命值（刷新游戏后失效）','中途退出会视为挑战失败哦。','https://pic.imgdb.cn/item/667269e9d9c307b7e915e15a.gif','经验不足200000或缺少对应的「钥匙」。神器的「钥匙」可以通过武神仙葫小概率获得。','\x0a\x20\x20\x20\x20<div\x20style=\x22z-index:1000;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22width:\x20100%;\x20background-color:\x20#35472C;\x20overflow:\x20hidden;\x20position:\x20relative;\x20border:\x201px\x20solid\x20black;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22','珍贵的神秘药材','大渊神真身','center','战斗状态未初始化','你对妖怪造成了\x20','8pHmlCs','slaughter','click','skill','24px','你受到了醉酒效果，每次攻击都会受到额外伤害。','被封锁的上古神器（庇护）','的战斗中失败了，没有获得任何奖励。','https://pic.imgdb.cn/item/666e9aeed9c307b7e9066a20.png','你跳过了','second-ascension-icon','.selected-skill','Enemy\x20is\x20not\x20rampaged.','秒的仙气护体','enemy-image','img','orange','\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','boxSizing','已关闭自动战斗！','法力值\x20+\x20','财源滚滚','grey','绿色品阶，临时增加20点速度，收集3个可以合成1个蓝色品阶的药品','未开启','级消耗\x20','usingBuff','enemyEffect','经验值:\x20','睡眠时刻的敌人生命值为','使用天山雪莲，恢复了\x20','<p>开启后可能为法术技能附加如下效果：</p><p>迟缓、沉默、混乱、灼烧、法力燃烧、法力吸取</p>','https://pic1.imgdb.cn/item/6791d204d0e0a243d4f7088b.gif','https://pic.imgdb.cn/item/668a30dbd9c307b7e9c54fff.gif','extraCritDamageChance','\x20点灼烧伤害。','rewardMessage','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718c8f.gif','每回合恢复','晗灵果','，你最终受到了\x20','岩龙开始汲取雷电的力量，你被附加了触电效果，每次攻击岩龙将大幅削减你的物理防御和法术防御。','<p>炽热明亮的金樽，开启后可为物理技能概率附加效果：</p><p>破甲、恐吓、眩晕、穿透、麻痹、惶恐</p>','紫色品阶，恢复10%生命值并有几率清除玩家的异常状态','吸血魔刃','焚灵之丸','⚔️【敌人攻击】妖怪施放物理技能·黑暗血刃并发起暴击，造成了\x20','floatUpLeft','target','速度条元素未找到','refreshDivineWeapon','vigor','敌人被攻击惊醒。','https://pic.imgdb.cn/item/666d311dd9c307b7e996b522.png','⚔️【敌人攻击】妖怪施放物理技能·黑暗血刃，造成了\x20','升级说明','2px\x20solid\x20white','spirit-speed','个内丹元气已耗尽，请及时补充！','Invalid\x20drug\x20type','焚灵之丸冷却结束。','使用幸运金币，你成功回退至10轮之前。','drug-grid','opacity','defensing','%;\x20height:\x20100%;\x20background:\x20','你至少需要5个同类药品才能进行合成！（橙色品阶需要3个）','https://pic.imgdb.cn/item/666e9aeed9c307b7e9066a29.png','🛡【玩家防御】你施放了防御技能\x20','drug-description','https://pic.imgdb.cn/item/66cc8f01d9c307b7e9c6d2e8.png','endurance','🥷【敌人偷窃】妖怪想窃取你的资源，但被你抓包打跑了，你没受到任何损失','marginBottom','⚔️【玩家攻击】你造成了\x20','applyNirvanaGemEffects','createElement','复活中','hasOwnProperty','286nNJOXZ','https://pic.imgdb.cn/item/66cc940fd9c307b7e9cb77b1.png','hongHuang','lostBook','100%','closeDivineWeaponUI','狂暴之魂','⚔️【玩家攻击】触发法术精通，你再次施放了\x20','你还没有解锁任何必杀技！','enemy-crit-damage','mana','cultivation','protectionDuration','【被动技能】元素力量（宽容）\x20','divineProtectionChance','absolute','未知的敌人类型','额外提供','health','maxLevel','⚔️【玩家攻击】暴击！！本次对敌方造成了\x20','top','经验不足100000或没有对应钥匙，无法刷新效果。（如果你拥有钥匙，将会优先自动使用钥匙刷新）','紫色品阶，20秒内增加150%物理攻击力。','蓝色品阶，临时增加59点生命值和法力值，收集3个可以合成1个紫色品阶的药品','borderRadius','，你想使用哪种方式升级？\x0a【宇宙之心】按钮：使用5个宇宙之心（必定成功）\x0a【技能书】按钮：使用1本技能书（20%成功）','fragmentedMap','https://pic.imgdb.cn/item/66742c80d9c307b7e930b160.gif','error','你在与','上等药材','#cc0000','enemy-pet-health','-bar\x22\x20style=\x22width:\x20','斩龙一式','url(','您的精灵精炼石不足！','https://pic.imgdb.cn/item/66742a77d9c307b7e92c52b4.gif','\x20点穿透伤害。','尚未开启！','\x20点生命值。','torn','textContent','暗黑大渊神','armorBreak','焉知非福带来的仙气护体效果消失。','经验不足3000或缺少对应「钥匙」，无法升级神器。','点经验值，将','☣【敌人中毒】妖怪中毒，失去了\x20','该技能已达到最大等级！','，但没有任何奖励。','woodAmulet','toggle','#ffc107','\x20金子。','使用双倍经验药，60秒内战斗获胜所得经验变成两倍。','extraCritDamageMultiplier','天降甘霖','\x20点真实伤害给妖怪。','#B94FFF','agility','\x20的安慰金。','exp-bar','relative','你使用了施毒之术，现在可以对妖怪施毒了。','attribute','#ADFF2F','金牌调解','🛡【敌人防御】敌人释放了能量场，双防得到了提升！','恭喜您升级了！','开启增益','使用法术技能时，有','第二个飞升技能尚未开启，且当前没有技能名称可显示。','lightgreen','\x20状态，无法叠加。','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20limegreen;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2028px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-shadow:\x200\x200\x208px\x20lime;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-weight:\x20bolder;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20animation:\x20','护盾为','heartStone','silenced','未开启飞升技能','🥷【敌人偷窃】妖怪窥探了你的锦囊，吸收了一个来自你所拥有的天山雪莲的能量，恢复了','\x20升级失败了！','space-between','宠物已达到最高等级，经验转化为普通经验书！','hidden','没有其他宠物可以更换，本次战斗已失败！','length','5px','沉檀凝香','getElementsByClassName','refresh-ascension','scale(1.05)','physical','点速度和','beiming','#218838','消耗一本','魔术棱柱最高只能将所选技能等级提升至24级！','enemy-pet-cultivation','open','级\x20，毒性大大加强。','四倍经验药效果消失。','from','反弹本次承受伤害的','level-up-ascension','repeat(4,\x201fr)','reflecting','head','min','random','敌人从沉睡中醒来了。','点法力值','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.closeDivineWeaponUI()\x22\x20style=\x22background:\x20transparent;\x20border:\x20none;\x20color:\x20white;\x20font-size:\x2020px;\x20cursor:\x20pointer;\x22>×</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2020px;\x20border:\x201px\x20solid\x20#F5F5F5;\x20border-radius:\x2010px;\x20padding:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','元素力量（宽容）','\x201s\x20ease-out\x20forwards;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','你还没有打开第一个飞升技能！','醉酒状态下，你招式过猛误伤自身，受到\x20','spellSlow','cssText','魔龙之力','refresh-second-ascension','https://pic.imgdb.cn/item/66a33f3ad9c307b7e942c38c.gif','benumbStack','linear-gradient(to\x20bottom,\x20#477AD6,\x20#8FF1FD,\x20#477AD6)','spirit-mana','点生命值，消耗','yellow','block','法术攻击','白色品阶，恢复1000点生命值和法力值，收集3个可以合成1个绿色品阶的药品','ascension-name','getRandomEffect','ceil','绿色品阶，每1.5秒恢复2%法力值，持续3秒，可叠加生效','🧚🏻Attack\x20from\x20your\x20best\x20teammate！敌人受到来自精灵的','技能区域不存在','https://pic.imgdb.cn/item/666c0afbd9c307b7e9beef97.png','魔术棱柱','轮，无法再继续跳过！','https://pic.imgdb.cn/item/666d311dd9c307b7e996b5b7.png','【被动技能】','每秒有','完美药材','狂暴印记','白银VIP怪','防御增益已达到最大值，无法再增加。','橙色品阶，永久提高1%暴击伤害，最多可使用此道具提升至350%','player-extra-damage-value','焉知非福触发,战斗获得持续\x20','力劈华山','玩家闪避概率为：','maxWidth','divineProtectionDuration','PDE','尝试合成，但没有产出任何事物','\x20点伤害，智慧守护抵挡','cultivationPill500','dazedTimer','background-color\x200.3s,\x20transform\x200.3s','妖怪的护甲被破坏，物理防御减少了\x20','Damage\x20is\x20NaN,\x20setting\x20to\x200.','spellMasteryChance','earthAmulet','10px','🥷【敌人偷窃】妖怪窥探了你的锦囊，吸收了一个来自你所拥有的延寿露的能量，恢复了','</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-evenly;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.activateDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>开启</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.refreshDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>刷新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升级</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeMaxDivineWeapon(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升满</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.description(\x27fragmentedMap\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>说明</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2010px;\x20border:\x201px\x20solid\x20#F5F5F5;\x20border-radius:\x2010px;\x20padding:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22','蓝色品阶，30秒内妖怪暴击率降低至0%','map','玩家已经处于杀戮状态，无法叠加。','displayName','穷奇擅长吸收敌人的生命之力转换为自己的护甲','https://pic.imgdb.cn/item/666d311dd9c307b7e996b52a.png','妖怪被恐吓，无法暴击。','1562499BNYOvz','势如破竹','whiteNightThreshold','contains','战胜后可得到大量经验值和概率获得提升宠物技能的神秘物质','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718c7d.gif','法力值','Invalid\x20target\x20for\x20dodge\x20handling','全部升级','试炼之地开始！持续60秒，期间会自动开始战斗，请勿执行其他操作以免造成崩溃！','你使用3个','split','https://pic.imgdb.cn/item/665433e8d9c307b7e93ac758.gif',',\x20enemyMaxHealth:\x20','getWeaponData','enemyKey','\x20点经验值，你的经验值不足，无法升级！','transform','#C10066','onmouseover','enemy','\x20成功升级至\x20','ascension-skill-modal',',\x20enemy\x20health:\x20','position','生命值','⚔️【敌人攻击】妖怪施放法术技能·嗜血魔咒，造成了\x20','url(\x27','physicalDefense','blue-text','floor','pierced','Invalid\x20target\x20for\x20magic\x20dodge\x20handling','https://pic.imgdb.cn/item/666c1408d9c307b7e9cea34b.png','远古魔神的低吟充满离散心智的声量，令你短暂被封印了飞升技能带来的战斗增益。','金牌调解触发，未扣除金子并获得\x20','点法力值。','焉知非福','妖怪令你对法术的操控更迟钝了，你耗费了更多的法力值！','当玩家受击时，有','animation','universalCrystal','https://pic.imgdb.cn/item/66e6d18fd9c307b7e9c12e52.gif','logDiv\x20not\x20found','练习树桩','8px','max','https://pic1.imgdb.cn/item/6791d32dd0e0a243d4f708f4.gif','scale(1)','options','您的法力值不足，无法使用施毒之法！','margin','敌人的法力已经燃烧殆尽，敌人开始燃烧生命之力！失去了\x20','translate(-50%,\x20-50%)',';\x20text-align:\x20center;\x20color:\x20white;\x20font-size:\x2012px;\x20font-weight:\x20bold;\x20transition:\x20width\x200.5s\x20ease-in-out;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20style=\x22text-stroke:\x201px\x20black;\x22>','Invalid\x20damage\x20value:','attribute-exp-text','active','20px','法术迟钝','set','forEach','https://pic.imgdb.cn/item/66e6d194d9c307b7e9c131d3.png','mao','，格挡技能抵挡\x20','https://pic.imgdb.cn/item/66db2daed9c307b7e9c7508a.png','\x20点生命值！','borderColor','战斗失败时不扣除金子，并获得','interval','\x20点毒性伤害。','\x20/\x20','openDivineWeaponUI','%概率进入无我之境，免受一切伤害。持续时间5秒','妖怪受到了\x20','upgradeDivineWeapon','divineProtection','your-pet-mana','survivalChance','，本回合抵抗了\x20','你获得一个宇宙之尘','18px','请先选中要合成的药品。','法术攻击力','反弹伤害','ascension-icon','abs','极品药材','darkShape','cursor','🧚🏻精灵为你祈福，恢复了⭐️','fightingDrawer','player-crit-rate','body','%的生命值，每级提升1%','这是一个召唤得来的怪物。','intimidated','enemy-pet-magic-defense','your-pet-max-health','type','你仓皇逃跑中，损失了20两金','shocked','Blessing!','已通过经验刷新。','神力仙丹','#FFC8B4','benumbedTimer','totalPierceDamage','战斗失败后，下一轮获得持续','magicAttack','-warning\x22\x20style=\x22position:\x20absolute;\x20top:\x200;\x20left:\x200;\x20right:\x200;\x20bottom:\x200;\x20border:\x201px\x20solid\x20','ignoranceWater','PHE','固若金汤','\x20的猛烈伤害！消耗了\x20','treasureMap','⚔️【敌人攻击】杀戮状态下由于修为差距，敌人在施放物理攻击时自身损失了\x20','被封锁的上古神器（法术）','timer','以牙还牙触发，反弹了\x20','以牙还牙','none','，战胜后你会获得奖励','your-pet-magic-defense','https://pic.imgdb.cn/item/66bc6806d9c307b7e987b907.webp','stringify','find','蓝色品阶，20秒内暴击伤害提高50%','你的蓄力增益效果已应用：','神器100级后，只能使用「钥匙」升级，你可以通过开启武神仙葫获取「钥匙」。','\x20x1','https://pic.imgdb.cn/item/6678135ed9c307b7e9060dd6.gif','https://pic.imgdb.cn/item/66a647c5d9c307b7e9f3c420.gif','开启神器后才能执行升级！','定空的灵石','無班之魂の法术穿透，损失','red','your-pet-cultivation','#66CDAA','还没死，还得练，再给你上上强度','#FFDD55','defenseBonus','realShape','蓄力中','suppressed','经脉伤害加成计算出错，使用默认伤害:','enemy-name','defending','initialize','太古魔魂','敌人\x20','MAE','reenable-ascension','20px\x200','%\x20暴击伤害。','妖怪共有两种形态：正常和狂暴','467854LoZraq','pointer','https://pic.imgdb.cn/item/66726727d9c307b7e9118748.png','⚔️【玩家攻击】你进行了法术攻击，造成了\x20','慈悲心怀','battle-log-head','即时性药品效果已被重置。','您的宠物没有飞升，无法开启飞升增益！','extra-damage','858074AHHbFG','试炼之地妖怪','\x20级，威力增加了！','https://pic.imgdb.cn/item/66d0b3f3d9c307b7e995a14c.png','🔮【敌人治疗】妖怪施放魔王之力，恢复了\x20','Heal\x20amount\x20is\x20NaN,\x20setting\x20to\x200.','level-up-second-ascension','，成长系数为','aqua','strength','damageLost','成功炼制出了2个随机橙色品阶药品：','使用延寿露，恢复了\x20','https://pic.imgdb.cn/item/666d311dd9c307b7e996b4f5.png','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','enemy-pet-physical-defense','⚔️【玩家攻击】你操控小树枝击向了对方。','额外经验1600000点','普通防御','\x20已经无法再触发复活。','没有可用的宠物进行更换，本次战斗已失败！','gridTemplateColumns','#0066ff','\x20成功升至\x20','你没有宇宙之晶了！','https://pic.imgdb.cn/item/66a0d383d9c307b7e93a3779.gif','position:\x20fixed;\x20top:\x2050%;\x20left:\x2050%;\x20transform:\x20translate(-50%,\x20-50%);\x20background:\x20rgba(0,\x200,\x200,\x200.8);\x20border:\x201px\x20solid\x20#F5F5F5;\x20width:\x2090%;\x20padding:\x2010px;\x20color:\x20white;\x20z-index:\x209990;','poisoned','https://pic.imgdb.cn/item/66a0d3e8d9c307b7e93a8108.gif','playerWon','状态。','width','无我之境','敌人闪避概率为：','\x20点物理伤害！','https://pic.imgdb.cn/item/666d311dd9c307b7e996b538.png','https://pic.imgdb.cn/item/666c0afbd9c307b7e9beefcb.png','https://pic.imgdb.cn/item/66c44a29d9c307b7e967d02b.gif','1px\x20solid\x20white','使用长生泉，你如获新生。','0.5','baiYin','天空之晶','600px','seal','50%','https://pic.imgdb.cn/item/669c8a9ed9c307b7e94f5766.gif',';\x20animation:\x20warning-blink\x201s\x20infinite;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','，请检查你的背包！','妖怪极尽嬉笑怒骂之攻势,你未能压抑心中怒火,嘲讽时间内你只能对其使用物理攻击。','your-pet-physical-defense','intimidatedTimer','apply','</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p\x20style=\x22margin:\x200;\x22>','技能说明','，当前技能倍率为','延寿露','sleep','使用幸运金币，怪物血量变为1。','skills-area\x20element\x20not\x20found.','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718ca1.gif','divineWeaponUI','你击败了','benumbed','%概率驱散以下减益效果：','%\x20伤害。','terrifiedTimer','poisonSkillBook','试炼之地正在持续中！无法叠加！','display:\x20flex;color:\x20white;font-size:\x2014px;gap:\x2010px;padding:\x2020px;height:\x20110px;align-items:\x20center;border:\x201px\x20solid\x20#fff;margin-top:\x2010px;border-radius:\x202px;','https://pic.imgdb.cn/item/666d311dd9c307b7e996b565.png','%的生命值','drug-item','https://pic.imgdb.cn/item/66712ba3d9c307b7e9f2ab59.gif','https://pic.imgdb.cn/item/66d5dd07d9c307b7e953e4e1.png','stunnedTimer','你的无动于衷极大助长了妖怪的威压，它降下地狱之火焚尽了你的战斗能力。','magicPetAmulet','级触发，成功解除敌人的控制效果！','name','\x20点生命值，消耗了\x20','怒意激发了你的斗志，嘲讽下你的物理伤害提升20%！','#D3D3D3','12px','querySelectorAll','innerText','close-ascension-modal','法力燃烧','杀戮状态已被解除。','6FmzpSU','本次战斗已失败！请加强一下再进来吧~','tornInterval','向死而生触发，生命值恢复至1，消耗大量法力值。','您已经输掉此次战斗，扣除金子','#FF4500','taunt','left','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718cb5.gif','jingmaiStates','封印解除，飞升技能可以发挥作用了。','战斗停止。','fontSize','style','battleRounds','🧚🏻Bless\x20from\x20your\x20best\x20teammate！战斗精灵带来全属性提升！','！点击确认继续战斗，取消回到主页。','default','black','increment','weaken','橙色品阶，投喂敌人后敌人会中毒，能力下降50%，直至本轮胜利','发动魔龙之力恢复了\x20','warn','聚灵丹数量不足，无法开启自动战斗！','enemy-pet-mana','%\x20伤害，溢出值已形成护盾。','点法术攻击力','金子不足，无法进行采集！','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2025%;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20transform:\x20translateX(-50%);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20pointer-events:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20min-height:\x20200px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20z-index:\x209999;\x0a\x20\x20\x20\x20\x20\x20\x20\x20','成功炼制出了1个','5px\x2010px','https://pic.imgdb.cn/item/666d311dd9c307b7e996b585.png','每10轮妖怪会进入狂暴状态，此时妖怪生命低于20%时将在2秒内加持霸体且触发复生。','filter','action','100px','仙气护体','second-ascension-effect','addEventListener','您的飞升之石不足！','Invalid\x20damage\x20value:\x20NaN.','正在战斗中或未知错误','你已经被嘲讽,不能使用其他技能。','\x20点生命值，本局战斗还能再生效','物理攻击力','baiyinOverlay','您的宠物未飞升，还没有掌握飞升之术！','28ZmZYpZ','战斗胜利后金子奖励额外增加','undefined','效果尚在冷却中，无法叠加使用。','corrode','你消耗了','baseValue','settlement','你获得一个宇宙之晶','https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0b15.png','auto-level-up-spirit','goldCompensation','持续时间内，敌人一共受到\x20','战斗胜利时获得的经验值增加','selected-skill','穿透效果持续中','transparent','keys','stoneDragon','妖怪复生成功，生命值恢复到100%！','火焰巨人','🔮【玩家治疗】仙气护体触发，恢复了\x20','originalSecondAscensionSkill','妖怪(精英)','padding','https://pic.imgdb.cn/item/666c1408d9c307b7e9cea328.png','\x22\x20alt=\x22定空的灵石\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x20border:\x201px\x20solid\x20white;\x20border-radius:\x205px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x200;\x22>','Status\x20\x27','#00BBFF','点伤害','ancientEvil','你使用5个','狂暴的心魔','时钟空转，你已进入忘却之时……','log','\x20级！','，获得了','silencedTimer','spiritPowerActive','https://pic.imgdb.cn/item/66d071cbd9c307b7e9344927.png','级触发，治疗了','洗练失败！','enhance-spirit','，说明：','https://pic.imgdb.cn/item/66cc940cd9c307b7e9cb752e.png','法术精通','%的法力让自己血量变为1','lifeSpanBonus','remove','Invalid\x20damage\x20value\x20before\x20reduction:','⚔️【玩家攻击】你用拳头平A了对方。','div','drunken','shielded','https://pic.imgdb.cn/item/667123f9d9c307b7e9e34049.gif','洪荒至尊仙葫','spiritAwakenStone','classList','\x20Lv','enemy-damage-value','紫色品阶，临时增加35物理防御和法术防御，收集3个可以合成1个橙色品阶的药品','使用四倍经验药，60秒内战斗获胜所得经验变成四倍。','info','https://pic.imgdb.cn/item/66cd61f8d9c307b7e9af46c0.png','点生命值，被当即斩杀！','expBonus','backgroundImage','231987twvfLa','Battle\x20state\x20or\x20player\x20state\x20is\x20not\x20initialized','https://pic.imgdb.cn/item/666c1408d9c307b7e9cea2fd.png','hailMonsterPill','普通药材','skills','\x20的数量已更新，当前数量:\x20','【提示】这里是战斗面板，测试当前宠物极限战斗能力，轮次越高，当前宠物越强悍。\x20\x0a\x0a\x20【清屏】点击上方战斗记录字样可清屏\x20\x0a\x0a\x20【兼容】如果你无法完整看到本文本框底部，请调整网页字体大小至适当值','gap','value','entries','instant','遗失的洛书','⚔️【敌人攻击】道高一尺，魔高一丈，敌人低于你的修为，施法时损失','lime','tier','使用神力仙丹，暴击伤害提高50%，持续20秒。','永久增加了\x20','沉檀凝香生效，但未能清除异常状态。','🟤奥义·土之庇护！你减少了\x20','https://pic.imgdb.cn/item/66bb115dd9c307b7e9a6c2d0.png','点经验值，升级技能失败！','唤妖符数量不足，无法跳过轮次！','https://pic.imgdb.cn/item/6699fa28d9c307b7e9ad0b38.png','https://pic.imgdb.cn/item/66a63695d9c307b7e9d82c29.gif','spirit-physical-defense','\x20点中毒伤害，消耗了\x20','second-ascension-skill','transition','你可以消耗10个飞升之石为宠物开启第二个飞升之术，确认请继续','querySelector','https://pic.imgdb.cn/item/66d5d9a1d9c307b7e950d6b2.png','enemy-max-health','\x20点溅射伤害。','invincibilityChance','玩家已经处于\x20','enemy-physical-dodge-rate','multiplier','#17a2b8','flexDirection','spirit-magic-defense','damageContainers','push','justifyContent','healingBan','removeEventListener','has','使用慧心糖果，暴击伤害永久提高1%。','击败白银之地怪物的嘉奖，收集一定数量可兑换宇宙之晶','https://pic.imgdb.cn/item/66d4a22dd9c307b7e9f5faec.gif','自动战斗已停止。','baiYinCard','\x20没有特殊攻击能力','<p>开启后可能解除如下减益效果：</p><p>醉酒、禁疗、摄魂、失明、法术迟钝、撕裂、压制、嘲讽、封印、杀戮</p>','你可以使用100个固元鼎和100个清心酿回到第一轮','player-crit-damage','physicalAttack','display','universalKernel','your-pet-physical-attack','10000经验值','666565iCeEsw','backgroundColor','#e0a800','https://pic.imgdb.cn/item/66a5d698d9c307b7e9718c68.gif','忘忧水','物理防御','universalHeart','enemy-speed-container','使用狂暴印记，暴击率提高50%，持续20秒。','尚未开始战斗','skills-area','双倍经验药','使用焚灵之丸，消耗20%生命值，提升50%物理攻击力、法术攻击、暴击率和暴击伤害，持续20秒。','宠物已达到最高等级，经验值上限被设为最大值。','close-spirit-modal','show','specialty','3000经验值','未找到该技能！','Enemy\x20revived\x20to\x20full\x20health.','【被动技能】凤佑天下\x20','你至少需要3个同类药品才能进行合成！','当前物理效果真实触发概率为：','number','terrified','description','举一反三触发，经验值增加了\x20','处于短暂失明，敌人闪避了你的物理攻击。','stunned','上古心魔','spirit-level','天空精华','天赋书','\x22\x20alt=\x22遗失的洛书\x22\x20style=\x22width:\x2045px;\x20height:\x2045px;\x20border:\x201px\x20solid\x20white;\x20border-radius:\x205px;\x20margin-right:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:\x200;\x22>','gemLuckyBag','rgba(0,\x200,\x200,\x200.8)','进行炼制，但只得到了1个','https://pic.imgdb.cn/item/66a250dfd9c307b7e97f96eb.png','byLearned','dazed','goldAmulet','skillLevel','currentLevel','使用见手青，敌人的所有能力降至50%直至本轮战斗胜利。','玩家魔法闪避概率为：','defenseBonusCount','creditCard100'];_0x48cc=function(){return _0x1331ca;};return _0x48cc();}function handleDazed(){const _0x3ff7c2=_0x38c76e;if(battleState[_0x3ff7c2(0x25b)][_0x3ff7c2(0x41c)]){if(Math['random']()<0.5){const _0x2317c1=battleState[_0x3ff7c2(0x25b)][_0x3ff7c2(0x3f0)];return battleState['enemy'][_0x3ff7c2(0x5ad)]=Math[_0x3ff7c2(0x275)](0x0,battleState[_0x3ff7c2(0x25b)][_0x3ff7c2(0x5ad)]-_0x2317c1),logBattleEvent(_0x3ff7c2(0x4f1)+_0x2317c1+'\x20点伤害。',_0x3ff7c2(0x516)),updateDamageValue(_0x2317c1,![],'damage'),playerTurn=!![],!![];}}return![];}let alreadyUseMushroom=![];function handleMushroom(){const _0x23017b=_0x38c76e;if(alreadyUseMushroom||summonEnemy){showInfoBox('现在无法使用，生效失败！',null,null,_0x23017b(0x2cf));return;}alreadyUseMushroom=!![];const _0x12f8ca=JSON[_0x23017b(0x514)](JSON['stringify'](enemyPet)),_0x386e2a={'health':Math['round'](enemyPet['health']*0.5),'mana':Math[_0x23017b(0x53b)](enemyPet[_0x23017b(0x5a5)]*0.5),'physicalAttack':Math['round'](enemyPet[_0x23017b(0x3f0)]*0.5),'physicalDefense':Math[_0x23017b(0x53b)](enemyPet[_0x23017b(0x263)]*0.5),'magicAttack':Math['round'](enemyPet[_0x23017b(0x2b4)]*0.5),'magicDefense':Math[_0x23017b(0x53b)](enemyPet['magicDefense']*0.5),'speed':Math[_0x23017b(0x53b)](enemyPet['speed']*0.5),'cultivation':Math[_0x23017b(0x53b)](enemyPet['cultivation']*0x1)};enemyPet=_0x386e2a,enemyMaxHealth=enemyPet[_0x23017b(0x5ad)],enemyMaxMana=enemyPet[_0x23017b(0x5a5)],battleState[_0x23017b(0x25b)]={...enemyPet},logBattleEvent(_0x23017b(0x420),_0x23017b(0x4fb));function _0x5a11a5(){const _0xc324ee=_0x23017b;battleState[_0xc324ee(0x309)]&&(enemyPet=_0x12f8ca,enemyMaxHealth=enemyPet[_0xc324ee(0x5ad)],enemyMaxMana=enemyPet[_0xc324ee(0x5a5)],battleState['enemy']={...enemyPet},updateEnemyAttributes());}const _0x1b1866=showNextBattlePrompt;showNextBattlePrompt=function(_0x5bb4c1){alreadyUseMushroom=![],_0x5a11a5(),_0x1b1866(_0x5bb4c1),showNextBattlePrompt=_0x1b1866;};}function handleSleep(){const _0x45843a=_0x38c76e;if(battleState[_0x45843a(0x25b)]['sleep'])return;const _0x5e4f31=battleState[_0x45843a(0x25b)][_0x45843a(0x5ad)];console['log'](_0x45843a(0x569)+_0x5e4f31),battleState[_0x45843a(0x25b)]['sleep']=!![],logBattleEvent(_0x45843a(0x503),'pink');const _0x5ad2b8=0x2710,_0x573485=0x1f4,_0x208804=setInterval(()=>{const _0x4f5637=_0x45843a;if(!battleState[_0x4f5637(0x25b)][_0x4f5637(0x325)]){clearInterval(_0x208804);return;}battleState[_0x4f5637(0x25b)]['health']=Math['min'](enemyMaxHealth,battleState[_0x4f5637(0x25b)][_0x4f5637(0x5ad)]+Math['round'](enemyMaxHealth*0.005)),updateUI();},_0x573485),_0x1abbbd=setTimeout(()=>{const _0x1b7659=_0x45843a;clearInterval(_0x208804),battleState[_0x1b7659(0x25b)]['sleep']=![],logBattleEvent(_0x1b7659(0x208),_0x1b7659(0x4db)),updateUI();},_0x5ad2b8),_0x3e3599=setInterval(()=>{const _0x25953d=_0x45843a;battleState[_0x25953d(0x25b)][_0x25953d(0x5ad)]<_0x5e4f31&&(clearInterval(_0x208804),clearTimeout(_0x1abbbd),clearInterval(_0x3e3599),battleState[_0x25953d(0x25b)]['sleep']=![],logBattleEvent(_0x25953d(0x580),'pink'),updateUI());},0x64);}function getShieldStatus(){const _0x19ab31=_0x38c76e;extraShield!==0x0?battleState[_0x19ab31(0x498)][_0x19ab31(0x3aa)]=!![]:battleState[_0x19ab31(0x498)][_0x19ab31(0x3aa)]=![];}function performHeal(){const _0x246ed1=_0x38c76e;if(!attributesFetched){showInfoBox(_0x246ed1(0x4e3));return;}if(!playerTurn)return;if(battleState[_0x246ed1(0x498)][_0x246ed1(0x34b)]){performAttack(_0x246ed1(0x1f6));return;}let _0x3de155=0x1;battleState[_0x246ed1(0x498)][_0x246ed1(0x20f)]&&(_0x3de155=0x1f4,logBattleEvent(_0x246ed1(0x26d),'blue'));const _0x3bee50=document['getElementById']('skills-area'),_0x672d66=Array[_0x246ed1(0x200)](_0x3bee50[_0x246ed1(0x4a5)]),_0x3bb884=_0x672d66[_0x246ed1(0x241)](_0x39f30c=>_0x39f30c['innerText'][_0x246ed1(0x252)]('\x20')[0x0])['map'](_0x1d23fa=>currentPet[_0x246ed1(0x3bd)][_0x246ed1(0x2c5)](_0x1c7e70=>_0x1c7e70['name']===_0x1d23fa&&(_0x1c7e70['type']==='PH'||_0x1c7e70['type']==='PHE')))[_0x246ed1(0x367)](_0x28aabe=>{return _0x28aabe;});let _0x849303=0x1,_0x4f3dee=0x1,_0xf7c3be;if(_0x3bb884[_0x246ed1(0x1f0)]>0x0){const _0x24deda=Math[_0x246ed1(0x265)](Math[_0x246ed1(0x207)]()*_0x3bb884[_0x246ed1(0x1f0)]);_0xf7c3be=_0x3bb884[_0x24deda];const _0x40359b=calculateSkillLevelAndMultiplier(_0xf7c3be);_0x4f3dee=_0x40359b[_0x246ed1(0x41e)],_0x849303=_0x40359b[_0x246ed1(0x527)],logBattleEvent('你正在施放恢复技能\x20'+_0xf7c3be[_0x246ed1(0x33b)]+'\x20'+_0x4f3dee+'级。',_0x246ed1(0x2f4));}else{logBattleEvent(_0x246ed1(0x4c7),_0x246ed1(0x2cf));return;}const _0xf9a2f0=handleHealingBan(_0x849303);if(battleAttributes[_0x246ed1(0x5ad)]+_0xf9a2f0>maxHealth){const _0x35b6f2=battleAttributes[_0x246ed1(0x5ad)]+_0xf9a2f0-maxHealth,_0x654d38=Math[_0x246ed1(0x265)](_0x35b6f2*0.01);extraShield+=_0x654d38,console['log'](_0x246ed1(0x1e6)+extraShield);}const _0x2d5e5a=Math[_0x246ed1(0x53b)](0x184*battleRounds*_0x4f3dee*0.1)*_0x3de155;if(battleAttributes[_0x246ed1(0x5a5)]<_0x2d5e5a){logBattleEvent(_0x246ed1(0x508),_0x246ed1(0x2cf));return;}battleAttributes[_0x246ed1(0x5ad)]=Math['min'](maxHealth,battleAttributes[_0x246ed1(0x5ad)]+_0xf9a2f0),battleAttributes[_0x246ed1(0x5a5)]=Math[_0x246ed1(0x275)](0x0,battleAttributes[_0x246ed1(0x5a5)]-_0x2d5e5a),logBattleEvent('🔮【玩家治疗】你恢复了\x20'+_0xf9a2f0+_0x246ed1(0x33c)+_0x2d5e5a+'\x20点法力值。',_0x246ed1(0x2f4)),showEffect('enemyEffect',_0x246ed1(0x571)),updateDamageValue(-_0xf9a2f0,!![],_0x246ed1(0x504)),handleDivineProtection(_0x3bb884,_0x4f3dee);_0xf7c3be&&_0xf7c3be[_0x246ed1(0x2aa)]===_0x246ed1(0x2b7)&&applySpecialSkillEffects(_0xf7c3be,_0xf9a2f0);handleManaRecover(),applyAscensionEffects(),getShieldStatus(),updateUI();if(battleAttributes[_0x246ed1(0x5ad)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState['enemy'][_0x246ed1(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![],setTimeout(()=>enemyAttack(),0x15e);}function handleDivineProtection(_0x550576,_0x2c3493){const _0x584062=_0x38c76e;let _0xa873d5=0.05,_0xc7cafa=0x0,_0x317782=0x0;_0x550576[_0x584062(0x1f0)]>0x0&&(_0xa873d5+=_0x2c3493*0.01,_0xc7cafa+=_0x2c3493*0.1);playerCultivation>=0xfa00&&(_0x317782+=playerCultivation/0x2ee0*0.1);let _0x5cccac=0x3+_0xc7cafa+_0x317782;console[_0x584062(0x397)]('当前仙气护体持续时间为：'+_0x5cccac),(ascensionSkill[_0x584062(0x33b)]==='天降甘霖'||secondAscensionSkill[_0x584062(0x33b)]===_0x584062(0x1d3))&&(_0xa873d5=battleState[_0x584062(0x498)][_0x584062(0x5a9)]||0.5,_0x5cccac=battleState[_0x584062(0x498)][_0x584062(0x232)]||0x5),Math[_0x584062(0x207)]()<_0xa873d5&&(battleState[_0x584062(0x498)][_0x584062(0x293)]=!![],logBattleEvent('你获得了仙气护体状态，受到伤害时会恢复生命值。','aqua'),updatePlayerStatusDisplay(),setTimeout(()=>{const _0x30d872=_0x584062;battleState[_0x30d872(0x498)][_0x30d872(0x293)]=![],updatePlayerStatusDisplay();},_0x5cccac*0x3e8));}let GQreflectPercentage;function handleReflectAndHeal(_0x4e72e1){const _0x3ad4b0=_0x38c76e;if(isNaN(_0x4e72e1)||_0x4e72e1<=0x0){console[_0x3ad4b0(0x1b6)](_0x3ad4b0(0x27e),_0x4e72e1);return;}if(ascensionSkill[_0x3ad4b0(0x33b)]===_0x3ad4b0(0x2bf)||secondAscensionSkill[_0x3ad4b0(0x33b)]===_0x3ad4b0(0x2bf)){const _0x1cd1e8=(0x2d+0x2*ascensionSkill['level'])/0x64,_0x1d425d=Math[_0x3ad4b0(0x207)]()*0xf,_0xcc5fbf=_0x1cd1e8+_0x1d425d/0x64;if(!isNaN(_0xcc5fbf)&&_0xcc5fbf>0x0){let _0x4d628c=Math[_0x3ad4b0(0x265)](_0x4e72e1*_0xcc5fbf);isNaN(_0x4d628c)&&(_0x4d628c=0x0,console[_0x3ad4b0(0x1b6)]('Reflect\x20damage\x20is\x20NaN,\x20setting\x20to\x200.'));const _0x388c92=Math[_0x3ad4b0(0x53b)]((battleAttributes[_0x3ad4b0(0x3f0)]+battleAttributes[_0x3ad4b0(0x2b4)])*0x5);_0x4d628c>_0x388c92&&(_0x4d628c=_0x388c92),battleState[_0x3ad4b0(0x25b)][_0x3ad4b0(0x5ad)]=Math[_0x3ad4b0(0x275)](0x0,battleState[_0x3ad4b0(0x25b)][_0x3ad4b0(0x5ad)]-_0x4d628c),logBattleEvent(_0x3ad4b0(0x2be)+_0x4d628c+_0x3ad4b0(0x45e),_0x3ad4b0(0x2cf)),console[_0x3ad4b0(0x397)]('Current\x20reflectPercentage\x20is\x20'+_0xcc5fbf);}else console[_0x3ad4b0(0x1b6)]('Invalid\x20reflectPercentage:',_0xcc5fbf);}if(battleState['player']['reflecting']&&GQreflectPercentage!==null){let _0x21eee6=GQreflectPercentage,_0x50173a=Math[_0x3ad4b0(0x275)](0x3e8,Math[_0x3ad4b0(0x265)](_0x4e72e1*_0x21eee6));console['log']('当前反弹比例为'+_0x21eee6),isNaN(_0x50173a)&&(_0x50173a=0x0,console[_0x3ad4b0(0x1b6)](_0x3ad4b0(0x44d))),battleState[_0x3ad4b0(0x25b)][_0x3ad4b0(0x5ad)]=Math[_0x3ad4b0(0x275)](0x0,battleState['enemy'][_0x3ad4b0(0x5ad)]-_0x50173a),logBattleEvent(_0x3ad4b0(0x442)+_0x50173a+_0x3ad4b0(0x1d4));}const _0x113815=applyWuxingEffects();if(_0x113815[_0x3ad4b0(0x41d)]&&_0x113815[_0x3ad4b0(0x41d)]>0x0){const _0x494020=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x113815['goldAmulet']];if(!isNaN(_0x494020)&&_0x494020>0x0){let _0x1b7371=Math[_0x3ad4b0(0x265)](_0x4e72e1*_0x494020);isNaN(_0x1b7371)&&(_0x1b7371=0x0,console[_0x3ad4b0(0x1b6)]('Reflect\x20damage\x20is\x20NaN,\x20setting\x20to\x200.')),battleState[_0x3ad4b0(0x25b)][_0x3ad4b0(0x5ad)]=Math['max'](0x0,battleState[_0x3ad4b0(0x25b)][_0x3ad4b0(0x5ad)]-_0x1b7371),logBattleEvent(_0x3ad4b0(0x446)+_0x1b7371+_0x3ad4b0(0x531),_0x3ad4b0(0x4d0));}else console[_0x3ad4b0(0x1b6)]('Invalid\x20goldReflectPercentage:',_0x494020);}if(battleState['player']['divineProtection']){let _0x2d982d=Math['floor'](0x3*battleAttributes[_0x3ad4b0(0x2b4)]*(Math[_0x3ad4b0(0x207)]()*(0.12-0.08)+0.2));isNaN(_0x2d982d)&&(_0x2d982d=0x0,console[_0x3ad4b0(0x1b6)](_0x3ad4b0(0x2f1))),battleAttributes[_0x3ad4b0(0x5ad)]=Math[_0x3ad4b0(0x206)](maxHealth,battleAttributes['health']+_0x2d982d),updateDamageValue(-_0x2d982d,!![],_0x3ad4b0(0x2eb)),logBattleEvent(_0x3ad4b0(0x38a)+_0x2d982d+_0x3ad4b0(0x1c2),'aqua'),showEffect(_0x3ad4b0(0x567),_0x3ad4b0(0x24c));}}let resurrectionState=![],resurrectionTimesMap=new Map();function checkResurrectionState(_0x16e62c){resurrectionState=_0x16e62c>0x0;}function resetResurrectionState(){resurrectionTimesMap['clear'](),checkResurrectionState(0x0);}function handleResurrection(_0x8a4320){const _0x4fe96d=_0x38c76e;if(battleAttributes['health']>_0x8a4320)return;if(battleAttributes[_0x4fe96d(0x5ad)]<=0x0&&(ascensionSkill[_0x4fe96d(0x33b)]===_0x4fe96d(0x4a0)||secondAscensionSkill['name']===_0x4fe96d(0x4a0))){let _0x18e6a1=ascensionSkill[_0x4fe96d(0x33b)]==='向死而生'?ascensionSkill:secondAscensionSkill;const _0x4ad6d3=_0x18e6a1['baseValue']+_0x18e6a1['increment'](_0x18e6a1[_0x4fe96d(0x533)]),_0x1078b7=Math['floor'](maxMana*(_0x4ad6d3/0x64));battleAttributes[_0x4fe96d(0x5a5)]>=_0x1078b7&&(battleAttributes[_0x4fe96d(0x5ad)]=0x1,battleAttributes[_0x4fe96d(0x5a5)]-=_0x1078b7,logBattleEvent(_0x4fe96d(0x348),_0x4fe96d(0x2cf)),updateUI());return;}const _0x53703b=[],_0x6a3673=document[_0x4fe96d(0x4e9)]('skills-area');_0x6a3673&&Array[_0x4fe96d(0x200)](_0x6a3673[_0x4fe96d(0x4a5)])[_0x4fe96d(0x284)](_0x1fdea2=>{const _0x1457c1=_0x4fe96d,_0x5e0067=_0x1fdea2[_0x1457c1(0x341)][_0x1457c1(0x252)]('\x20')[0x0],_0x1c1819=currentPet['skills'][_0x1457c1(0x2c5)](_0x2cdbff=>_0x2cdbff['name']===_0x5e0067&&_0x2cdbff[_0x1457c1(0x2aa)]==='FH');_0x1c1819&&_0x53703b[_0x1457c1(0x3e2)](_0x1c1819);});if(_0x53703b[_0x4fe96d(0x1f0)]===0x0)return;for(const _0x4e3dad of _0x53703b){const _0x784d87=_0x4e3dad[_0x4fe96d(0x533)]||0x1,_0x753df3=_0x4e3dad[_0x4fe96d(0x3dd)]||0x1,_0xf43624=Math[_0x4fe96d(0x21e)](_0x753df3+_0x784d87*0.01);!resurrectionTimesMap[_0x4fe96d(0x3e6)](_0x4e3dad[_0x4fe96d(0x33b)])&&resurrectionTimesMap['set'](_0x4e3dad[_0x4fe96d(0x33b)],0x0);let _0x317495=resurrectionTimesMap['get'](_0x4e3dad['name']),_0x1e93a1=_0xf43624-_0x317495;if(_0x317495<_0xf43624&&battleAttributes['health']<=0x0){const _0x4c2b82=Math[_0x4fe96d(0x53b)](maxHealth*(0.1*_0x753df3));battleAttributes['health']+=_0x4c2b82,_0x317495++,resurrectionTimesMap[_0x4fe96d(0x283)](_0x4e3dad['name'],_0x317495),updateDamageValue(-_0x4c2b82,![],'damage'),logBattleEvent(_0x4e3dad[_0x4fe96d(0x33b)]+'\x20'+_0x784d87+_0x4fe96d(0x46c)+_0x4c2b82+_0x4fe96d(0x371)+_0x1e93a1+'次',_0x4fe96d(0x3c6)),checkResurrectionState(_0x1e93a1);}else _0x317495>=_0xf43624&&(resurrectionState=![],logBattleEvent(_0x4e3dad[_0x4fe96d(0x33b)]+_0x4fe96d(0x2ff),'gray'),showNextBattlePrompt(![]));updateUI();}}function handlePlayerPassiveSkills(_0x236393=null){const _0x1db689=_0x38c76e,_0x33e380=[_0x1db689(0x515)],_0x48f191=document[_0x1db689(0x4e9)](_0x1db689(0x3ff));if(!_0x48f191||!currentPet||!currentPet[_0x1db689(0x3bd)])return;const _0x34c7ae=Array['from'](_0x48f191[_0x1db689(0x4a5)]);for(const _0x3e081b of _0x34c7ae){if(!_0x3e081b||!_0x3e081b[_0x1db689(0x341)])continue;const _0x1396c5=_0x3e081b['innerText'];for(const _0x21bf0e of _0x33e380){if(_0x1396c5[_0x1db689(0x4b2)](_0x21bf0e)){const _0x5e5a4b=_0x1396c5[_0x1db689(0x252)]('\x20')[0x0],_0x4d2661=currentPet[_0x1db689(0x3bd)][_0x1db689(0x2c5)](_0x25a5ff=>_0x25a5ff[_0x1db689(0x33b)]===_0x5e5a4b);if(!_0x4d2661)continue;switch(_0x21bf0e){case _0x1db689(0x515):handleShanShuiSkill(_0x4d2661,_0x236393);break;}break;}}}}function handleShanShuiSkill(_0x146413,_0x3a89a3){const _0x1ca7a4=_0x38c76e;if(!_0x146413||typeof currentLifeSpan==='undefined'){console[_0x1ca7a4(0x397)](_0x1ca7a4(0x429));return;}if(currentLifeSpan<_0x146413[_0x1ca7a4(0x533)]){console[_0x1ca7a4(0x397)]('寿命不足，无法触发上善若水');return;}if(_0x3a89a3>maxHealth)return;let _0x189b30=0x0;battleAttributes&&typeof battleAttributes[_0x1ca7a4(0x2b4)]!==_0x1ca7a4(0x377)&&(_0x189b30=Math[_0x1ca7a4(0x265)](battleAttributes[_0x1ca7a4(0x2b4)]*(_0x146413[_0x1ca7a4(0x3dd)]||0x0)));if(_0x3a89a3&&typeof _0x3a89a3===_0x1ca7a4(0x40c)){const _0x2683f0=Math[_0x1ca7a4(0x265)](_0x3a89a3*(_0x146413['multiplier']||0x0));_0x189b30=Math[_0x1ca7a4(0x275)](_0x189b30,_0x2683f0);}if(_0x189b30<=0x0){console['log'](_0x1ca7a4(0x45a));return;}currentLifeSpan-=_0x146413[_0x1ca7a4(0x533)];if(typeof battleAttributes[_0x1ca7a4(0x5ad)]!==_0x1ca7a4(0x377)&&typeof maxHealth!==_0x1ca7a4(0x377)){const _0x45a0c6=battleAttributes[_0x1ca7a4(0x5ad)];battleAttributes['health']=Math[_0x1ca7a4(0x206)](battleAttributes[_0x1ca7a4(0x5ad)]+_0x189b30,maxHealth),logBattleEvent(_0x1ca7a4(0x226)+_0x146413[_0x1ca7a4(0x33b)]+'\x20'+_0x146413[_0x1ca7a4(0x533)]+_0x1ca7a4(0x39d)+_0x189b30+_0x1ca7a4(0x217)+_0x146413[_0x1ca7a4(0x533)]+'点寿命',_0x1ca7a4(0x3c6)),updateDamageValue(-_0x189b30,!![],'damage'),console[_0x1ca7a4(0x397)]('上善若水触发:\x20HP\x20'+_0x45a0c6+'\x20->\x20'+battleAttributes['health']+',\x20消耗寿命\x20'+_0x146413[_0x1ca7a4(0x533)]);}updateUI();}function handleRelieveEffects(){const _0x52cbcc=_0x38c76e;try{const _0x491644=[],_0xde630c=document[_0x52cbcc(0x4e9)](_0x52cbcc(0x3ff));if(!_0xde630c){console['warn'](_0x52cbcc(0x221));return;}Array[_0x52cbcc(0x200)](_0xde630c[_0x52cbcc(0x4a5)])[_0x52cbcc(0x284)](_0x630a07=>{const _0x1db2df=_0x52cbcc;if(!_0x630a07||!_0x630a07[_0x1db2df(0x341)])return;const _0xee52c0=_0x630a07[_0x1db2df(0x341)]['split']('\x20')[0x0];if(!_0xee52c0)return;const _0x3253dd=currentPet?.['skills']?.[_0x1db2df(0x2c5)](_0x58d92b=>_0x58d92b[_0x1db2df(0x33b)]===_0xee52c0&&(_0x58d92b[_0x1db2df(0x2aa)]==='JK'||_0x58d92b[_0x1db2df(0x2aa)]==='JKE'));_0x3253dd&&_0x491644[_0x1db2df(0x3e2)](_0x3253dd);});if(_0x491644['length']===0x0)return;for(const _0x20cfe3 of _0x491644){const _0xb974c=Number(_0x20cfe3[_0x52cbcc(0x533)])||0x1,_0x30002b=Number(_0x20cfe3[_0x52cbcc(0x3dd)])||0.01,_0x5efbe5=Math['min'](0.1,_0xb974c*_0x30002b);if(Math['random']()<_0x5efbe5){clearEnemyEffect(),logBattleEvent(_0x20cfe3['name']+'\x20'+_0xb974c+_0x52cbcc(0x33a),_0x52cbcc(0x3c6));if(_0x20cfe3[_0x52cbcc(0x2aa)]===_0x52cbcc(0x45f))try{applySpecialSkillEffects(_0x20cfe3,null);}catch(_0x369d94){console[_0x52cbcc(0x1b6)]('应用特殊效果时发生错误:',_0x369d94);}}}}catch(_0x4da450){console['error']('处理解控效果时发生错误:',_0x4da450);}finally{updateUI();}}function performDefense(){const _0x39f1a2=_0x38c76e;if(!attributesFetched){showInfoBox(_0x39f1a2(0x4e3));return;}if(!battleState||!battleState[_0x39f1a2(0x25b)]){console[_0x39f1a2(0x1b6)](_0x39f1a2(0x54a));return;}if(!playerTurn)return;if(battleState[_0x39f1a2(0x498)][_0x39f1a2(0x34b)]){performAttack(_0x39f1a2(0x1f6));return;}const _0x31f5d9=document[_0x39f1a2(0x4e9)](_0x39f1a2(0x3ff)),_0x126535=Array[_0x39f1a2(0x200)](_0x31f5d9[_0x39f1a2(0x4a5)]),_0x36a687=_0x126535[_0x39f1a2(0x241)](_0x12035e=>_0x12035e[_0x39f1a2(0x341)][_0x39f1a2(0x252)]('\x20')[0x0])[_0x39f1a2(0x241)](_0x228292=>currentPet[_0x39f1a2(0x3bd)][_0x39f1a2(0x2c5)](_0x4c121f=>_0x4c121f[_0x39f1a2(0x33b)]===_0x228292&&(_0x4c121f[_0x39f1a2(0x2aa)]==='PD'||_0x4c121f[_0x39f1a2(0x2aa)]===_0x39f1a2(0x233))))[_0x39f1a2(0x367)](_0x31e0cf=>_0x31e0cf);let _0x1788ed=0x1,_0x4dbd68=_0x39f1a2(0x2fe),_0x37385a;if(_0x36a687['length']>0x0){const _0x3b796b=Math['floor'](Math['random']()*_0x36a687['length']);_0x37385a=_0x36a687[_0x3b796b],_0x1788ed=_0x37385a[_0x39f1a2(0x3dd)],_0x4dbd68=_0x37385a[_0x39f1a2(0x33b)];}let _0x38a66a=(Math[_0x39f1a2(0x207)]()*(0.99-0.8)+0.8)*_0x1788ed;battleState[_0x39f1a2(0x498)][_0x39f1a2(0x2da)]=!![],battleState[_0x39f1a2(0x498)][_0x39f1a2(0x48b)]=_0x38a66a;_0x38a66a<0x1?logBattleEvent(_0x39f1a2(0x590)+_0x4dbd68+_0x39f1a2(0x296)+Math[_0x39f1a2(0x265)](_0x38a66a*0x64)+_0x39f1a2(0x32d),'orange'):logBattleEvent(_0x39f1a2(0x590)+_0x4dbd68+_0x39f1a2(0x296)+Math[_0x39f1a2(0x265)](_0x38a66a*0x64)+_0x39f1a2(0x35f),_0x39f1a2(0x55c));showEffect('enemyEffect',_0x39f1a2(0x328));_0x37385a&&_0x37385a[_0x39f1a2(0x2aa)]==='PDE'&&applySpecialSkillEffects(_0x37385a,value=null);applyDefenseBonus(_0x4dbd68),handleManaRecover(),getShieldStatus(),applyAscensionEffects(),updateUI();if(battleAttributes[_0x39f1a2(0x5ad)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x39f1a2(0x25b)][_0x39f1a2(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}}playerTurn=![];}function handleDamageReduction(_0x45a8d3,_0x45d67d=![]){const _0x46052d=_0x38c76e;let _0x276ac8=_0x45a8d3,_0x342639=0x0,_0x4ec327=0x0,_0x287331=0x0,_0xde7ccc=_0x45a8d3,_0x46d92f=0x0;const _0x2e7686=applyWuxingEffects();_0xde7ccc=handleWiseDefense(_0xde7ccc);const _0x5e28c2=document['getElementById'](_0x46052d(0x3ff));if(_0x5e28c2&&currentPet&&currentPet[_0x46052d(0x3bd)]){const _0xccc5e4=currentPet['skills'][_0x46052d(0x2c5)](_0x2bd0e4=>_0x2bd0e4[_0x46052d(0x33b)]===_0x46052d(0x20b));if(_0xccc5e4){let _0x28aa5e;_0xccc5e4[_0x46052d(0x533)]<=0x14?_0x28aa5e=_0xccc5e4[_0x46052d(0x533)]*0.005:_0x28aa5e=0x14*0.005+(_0xccc5e4[_0x46052d(0x533)]-0x14)*0.01,_0x46d92f=Math[_0x46052d(0x265)](_0xde7ccc*_0x28aa5e),_0x46d92f>0x0&&(_0xde7ccc-=_0x46d92f,_0x342639+=_0x46d92f,logBattleEvent(_0x46052d(0x5a8)+_0xccc5e4[_0x46052d(0x533)]+'级触发，减免了'+_0x46d92f+_0x46052d(0x392),'lime'));}}const _0x356f68=currentPet['skills']['find'](_0x1152a2=>_0x1152a2['name']===_0x46052d(0x472));if(_0x356f68){let _0x53c07a;if(_0x356f68[_0x46052d(0x533)]<=0x14)_0x53c07a=_0x356f68[_0x46052d(0x533)]*0.04;else _0x356f68[_0x46052d(0x533)]<=0x1e&&(_0x53c07a=0x14*0.04+(_0x356f68[_0x46052d(0x533)]-0x14)*0.01);const _0x53e65e=Math['floor'](_0xde7ccc*_0x53c07a);_0x53e65e>0x0&&(_0xde7ccc-=_0x53e65e,_0x342639+=_0x53e65e,logBattleEvent(_0x46052d(0x409)+_0x356f68[_0x46052d(0x533)]+'级触发，减免了'+_0x53e65e+_0x46052d(0x392),_0x46052d(0x55c)));}if((ascensionSkill['name']===_0x46052d(0x30c)||secondAscensionSkill[_0x46052d(0x33b)]===_0x46052d(0x30c))&&Math[_0x46052d(0x207)]()<battleState['player'][_0x46052d(0x3da)]){_0xde7ccc=0x0,logBattleEvent(_0x46052d(0x484),'silver'),showBattleOverlay('https://pic.imgdb.cn/item/66b86c3ad9c307b7e93202e9.gif',0xbb8,0.8);return;}isNaN(_0xde7ccc)&&(_0xde7ccc=0x0,console[_0x46052d(0x1b6)](_0x46052d(0x23a)));if(extraShield>0x0){const _0x3eec89=extraShield;_0xde7ccc-=extraShield,_0xde7ccc<0x0?(extraShield=-_0xde7ccc,_0xde7ccc=0x0):extraShield=0x0,_0x4ec327=_0x3eec89-extraShield;}const _0x458fb3=battleState[_0x46052d(0x498)][_0x46052d(0x52c)]/0x64;if(_0x458fb3>0x0){const _0x232b92=Math[_0x46052d(0x265)](_0xde7ccc*_0x458fb3);_0xde7ccc-=_0x232b92,_0x342639+=_0x232b92;}if(battleState['player']['defending']){const _0x2c4859=battleState[_0x46052d(0x498)][_0x46052d(0x48b)],_0x1d4ad8=Math[_0x46052d(0x265)](_0xde7ccc*_0x2c4859);_0x2c4859>0x1&&(extraShield+=Math[_0x46052d(0x265)](_0xde7ccc*(_0x2c4859-0x1))),_0xde7ccc-=_0x1d4ad8,_0x287331+=_0x1d4ad8,battleState[_0x46052d(0x498)][_0x46052d(0x2da)]=![];}if(_0x2e7686[_0x46052d(0x23c)]&&_0x2e7686['earthAmulet']>0x0){const _0x45db56=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x2e7686[_0x46052d(0x23c)]],_0x35a285=Math[_0x46052d(0x265)](_0xde7ccc*_0x45db56);_0xde7ccc-=_0x35a285,_0x342639+=_0x35a285,logBattleEvent(_0x46052d(0x3cb)+_0x35a285+'点所受的伤害。',_0x46052d(0x4fe));}const _0x53af09=battleAttributes[_0x46052d(0x5ad)];battleAttributes['health']=Math[_0x46052d(0x275)](0x0,battleAttributes[_0x46052d(0x5ad)]-_0xde7ccc);battleAttributes[_0x46052d(0x5ad)]>_0x53af09&&(battleAttributes[_0x46052d(0x5ad)]=_0x53af09);const _0x38e9a2=_0x4ec327+_0x287331+_0x342639+(isNaN(wiseDefense)?0x0:wiseDefense),_0x5cfe86=isNaN(_0x38e9a2)?0x0:_0x38e9a2,_0x53ba07=isNaN(_0xde7ccc)?0x0:_0xde7ccc,_0x4fba95=isNaN(extraShield)?0x0:extraShield;wiseDefenseManaCost=0x0,handleReflectAndHeal(_0x53ba07),_0x45d67d?updateDamageValue(_0x53ba07,!![],_0x46052d(0x504),!![]):updateDamageValue(_0x53ba07,!![],'damage'),console[_0x46052d(0x397)]('护盾抵挡了\x20'+_0x4ec327+'\x20点伤害，土符抵挡了'+_0x342639+_0x46052d(0x287)+_0x287331+_0x46052d(0x235)+(isNaN(wiseDefense)?0x0:wiseDefense)+_0x46052d(0x51a)+_0x46d92f+_0x46052d(0x50e)+_0x4fba95+_0x46052d(0x574)+_0x53ba07+'\x20点伤害。'),getShieldStatus();}function handleWiseDefense(_0x37d467){const _0x254e9b=_0x38c76e,_0x5937fd=[],_0x57d028=document[_0x254e9b(0x4e9)]('skills-area');_0x57d028&&Array[_0x254e9b(0x200)](_0x57d028[_0x254e9b(0x4a5)])[_0x254e9b(0x284)](_0x515a97=>{const _0x5363e4=_0x254e9b,_0x4f2a69=_0x515a97[_0x5363e4(0x341)]['split']('\x20')[0x0],_0x1b07e5=currentPet[_0x5363e4(0x3bd)]['find'](_0x22478d=>_0x22478d[_0x5363e4(0x33b)]===_0x4f2a69&&_0x22478d[_0x5363e4(0x2aa)]==='SH');_0x1b07e5&&_0x5937fd['push'](_0x1b07e5);});if(_0x5937fd['length']===0x0)return _0x37d467;let _0x4ff3e9=_0x37d467;for(const _0x3a31b1 of _0x5937fd){const {skillLevel:_0x424461,skillMultiplier:_0x4b79a8}=calculateSkillLevelAndMultiplier(_0x3a31b1),_0x157e59=Math[_0x254e9b(0x206)](0.6,0.4+_0x424461*0.01),_0x1aad87=0x1+0.05*(_0x424461-0x1),_0x3f470a=Math[_0x254e9b(0x275)](0x0,0.19-0.01*(_0x424461-0x1)),_0x39e601=Math['floor'](battleAttributes[_0x254e9b(0x5a5)]*(0x1-_0x3f470a)),_0x2d1bd7=Math[_0x254e9b(0x53b)](_0x4ff3e9*_0x157e59),_0x261cc5=Math[_0x254e9b(0x206)](_0x2d1bd7,_0x39e601*_0x1aad87),_0x13f4fe=Math[_0x254e9b(0x206)](_0x39e601,Math[_0x254e9b(0x21e)](_0x261cc5/_0x1aad87));battleAttributes[_0x254e9b(0x5a5)]-=_0x13f4fe,_0x4ff3e9-=Math['round'](_0x13f4fe*_0x1aad87),wiseDefense=Math[_0x254e9b(0x53b)](_0x13f4fe*_0x1aad87),wiseDefenseManaCost=_0x13f4fe,console[_0x254e9b(0x397)](_0x3a31b1['name']+'\x20'+_0x424461+_0x254e9b(0x565)+_0x13f4fe+_0x254e9b(0x4e6));}return _0x4ff3e9;}function applyDefenseBonus(_0x2049c4){const _0x46a39c=_0x38c76e;!battleState[_0x46a39c(0x498)]['defenseBonusCount']&&(battleState['player']['defenseBonusCount']=0x0);if(battleState[_0x46a39c(0x498)]['defenseBonusCount']<0x5){battleState[_0x46a39c(0x498)][_0x46a39c(0x422)]+=0x1;const _0x194b8d=0.06,_0x414633=0.09;battleState[_0x46a39c(0x498)]['critRate']+=_0x194b8d,battleState[_0x46a39c(0x498)][_0x46a39c(0x4e8)]+=_0x414633,!battleState['player'][_0x46a39c(0x2d4)]&&(battleState[_0x46a39c(0x498)][_0x46a39c(0x2d4)]={'critRate':0x0,'critDamage':0x0}),battleState[_0x46a39c(0x498)][_0x46a39c(0x2d4)][_0x46a39c(0x4d2)]+=_0x194b8d,battleState['player'][_0x46a39c(0x2d4)][_0x46a39c(0x4e8)]+=_0x414633,battleState[_0x46a39c(0x498)]['defensing']=!![],updatePlayerStatusDisplay();}else logBattleEvent(_0x46a39c(0x22b),_0x46a39c(0x218));}function applyDefenseBonusEffect(){const _0x22bcc9=_0x38c76e;if(battleState[_0x22bcc9(0x498)][_0x22bcc9(0x2d4)]){const {critRate:_0x167972,critDamage:_0x476ff4}=battleState['player']['defenseBonus'];battleState[_0x22bcc9(0x498)][_0x22bcc9(0x4d2)]-=_0x167972,battleState[_0x22bcc9(0x498)][_0x22bcc9(0x4e8)]-=_0x476ff4,logBattleEvent(_0x22bcc9(0x2c7)+Math['round'](_0x167972*0x64)+_0x22bcc9(0x459)+Math[_0x22bcc9(0x53b)](_0x476ff4*0x64)+_0x22bcc9(0x2e1),_0x22bcc9(0x218)),battleState[_0x22bcc9(0x498)][_0x22bcc9(0x422)]=0x0,battleState[_0x22bcc9(0x498)][_0x22bcc9(0x2d4)]=null,battleState[_0x22bcc9(0x498)][_0x22bcc9(0x58c)]=![];}}function handleManaRecover(){const _0x1bb04a=_0x38c76e,_0x161644=[],_0x517a26=document[_0x1bb04a(0x4e9)](_0x1bb04a(0x3ff));_0x517a26&&Array[_0x1bb04a(0x200)](_0x517a26[_0x1bb04a(0x4a5)])[_0x1bb04a(0x284)](_0xa2e40f=>{const _0x5cac48=_0x1bb04a,_0x4fd239=_0xa2e40f[_0x5cac48(0x341)]['split']('\x20')[0x0],_0x7a4274=currentPet[_0x5cac48(0x3bd)][_0x5cac48(0x2c5)](_0x22e242=>_0x22e242[_0x5cac48(0x33b)]===_0x4fd239&&_0x22e242[_0x5cac48(0x2aa)]==='HL');_0x7a4274&&_0x161644[_0x5cac48(0x3e2)](_0x7a4274);});if(_0x161644[_0x1bb04a(0x1f0)]===0x0)return;for(const _0x429782 of _0x161644){const _0x2535f7=_0x429782[_0x1bb04a(0x533)]||0x1,_0x2ef497=_0x429782[_0x1bb04a(0x3dd)]||0x1,_0x44d02d=_0x2ef497+_0x2535f7*0.01,_0x4227c0=Math[_0x1bb04a(0x53b)](maxMana*_0x44d02d);battleAttributes[_0x1bb04a(0x5a5)]=Math[_0x1bb04a(0x206)](maxMana,battleAttributes[_0x1bb04a(0x5a5)]+_0x4227c0),logBattleEvent(_0x429782[_0x1bb04a(0x33b)]+'\x20'+_0x2535f7+_0x1bb04a(0x47d)+_0x4227c0+_0x1bb04a(0x4e6),_0x1bb04a(0x4dd));}}let enemyActionInterval;function decideEnemyCanPerform(){const _0x37e030=_0x38c76e;if(!battleState?.[_0x37e030(0x25b)]||!battleAttributes){console[_0x37e030(0x1b6)](_0x37e030(0x54a));return;}const _0x11c063=document[_0x37e030(0x4e9)]('enemy-speed-bar');if(!_0x11c063){console[_0x37e030(0x1b6)](_0x37e030(0x57d));return;}enemyActionInterval&&(clearInterval(enemyActionInterval),enemyActionInterval=null);_0x11c063[_0x37e030(0x352)][_0x37e030(0x30b)]='0%';let _0x24f63e=![];enemyActionInterval=setInterval(()=>{const _0x1b4568=_0x37e030;if(!onBattleState){clearInterval(enemyActionInterval),enemyActionInterval=null;return;}if(playerTurn)try{const _0x2202ac=battleState[_0x1b4568(0x25b)]['speed']||0x0,_0x482312=Math['max'](0x0,_0x2202ac/(_0x2202ac+0x2710)*battleRounds*0.1),_0x3d35c5=parseFloat(_0x11c063[_0x1b4568(0x352)]['width'])||0x0,_0x43fc12=Math[_0x1b4568(0x206)](0x64,_0x3d35c5+_0x482312);_0x11c063['style'][_0x1b4568(0x30b)]=_0x43fc12+'%',_0x43fc12>=0x64&&(_0x11c063[_0x1b4568(0x352)][_0x1b4568(0x30b)]='0%',playerTurn=![],enemyAttack()),updateUI();}catch(_0x16dea5){console['error']('进度条更新出错:',_0x16dea5);}else!_0x24f63e&&(_0x24f63e=!![],setTimeout(()=>{onBattleState&&!playerTurn&&enemyAttack(),_0x24f63e=![];},0x1f4));},0x15e);}function _0x6e96(_0xbf099b,_0x180c23){const _0x48cc66=_0x48cc();return _0x6e96=function(_0x6e9696,_0x379f06){_0x6e9696=_0x6e9696-0x1b0;let _0x49e438=_0x48cc66[_0x6e9696];return _0x49e438;},_0x6e96(_0xbf099b,_0x180c23);}document[_0x38c76e(0x4e9)](_0x38c76e(0x3fc))['addEventListener'](_0x38c76e(0x54e),()=>{const _0x2bdcd4=_0x38c76e;showInfoBox(_0x2bdcd4(0x47c));});function stopEnemyAction(){enemyActionInterval&&(clearInterval(enemyActionInterval),enemyActionInterval=null);}function enemyAttack(){const _0x215ecc=_0x38c76e;if(!battleState||!battleAttributes||!battleState[_0x215ecc(0x25b)]){console[_0x215ecc(0x1b6)](_0x215ecc(0x54a));return;}!summonEnemy&&handleRampaged();if(playerTurn)return;if(handleDazed())return;if(handleStunned())return;if(battleState['enemy'][_0x215ecc(0x325)]){playerTurn=!![];return;}playerTurn=!![];const _0x29b733=battleState[_0x215ecc(0x25b)][_0x215ecc(0x5ad)]/enemyMaxHealth,_0x579bc7=battleState[_0x215ecc(0x25b)]['mana']/enemyMaxMana,_0x261042=_0x29b733<0.3?0.7:0.1;if(Math[_0x215ecc(0x207)]()<_0x261042){enemyHeal();return;}const _0x2ab031=getRandomInt(0x0,0x64),_0x2f177a=enemyMaxHealth*0.5;if(battleState[_0x215ecc(0x25b)][_0x215ecc(0x5ad)]<=_0x2f177a&&_0x2ab031<=0x32){enemyDefense();return;}if(handleEnemySteal(_0x29b733,_0x579bc7)){updateUI();return;}let _0x12fc1d=0x0,_0x990c46=checkCriticalHit(enemyCritRate);battleState[_0x215ecc(0x25b)][_0x215ecc(0x2a7)]&&(_0x990c46=![]);const _0x1c14c6=Math[_0x215ecc(0x207)]()<0.5?_0x215ecc(0x1f6):_0x215ecc(0x46a);if(_0x1c14c6==='physical')_0x12fc1d=performEnemyPhysicalAttack(_0x990c46);else _0x1c14c6===_0x215ecc(0x46a)&&!battleState['enemy'][_0x215ecc(0x1e8)]?_0x12fc1d=performEnemyMagicalAttack(_0x990c46):logBattleEvent('妖怪被沉默，无法进行法术攻击。',_0x215ecc(0x516));handleBurnt();(isNaN(_0x12fc1d)||_0x12fc1d<=0x0)&&(console[_0x215ecc(0x1b6)](_0x215ecc(0x3a6),_0x12fc1d),_0x12fc1d=0x0);_0x12fc1d=handleDamageReduction(_0x12fc1d,_0x990c46),handleResurrection(_0x12fc1d),handlePlayerPassiveSkills(_0x12fc1d),handleRelieveEffects();if(battleAttributes[_0x215ecc(0x5ad)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x215ecc(0x25b)][_0x215ecc(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}else updateUI();}}function performEnemyPhysicalAttack(_0x551f2e){const _0x49b032=_0x38c76e;if(handleDodge('player'))return 0x0;const _0x30b742=Math['random']()*(1.2-0.8)+0.8,_0x545cef=parseInt(document[_0x49b032(0x4e9)]('enemy-level')[_0x49b032(0x341)],0xa)||0x0,_0x2e4a91=0x1+_0x545cef/0x64,_0x479142=battleAttributes['physicalDefense']*_0x30b742,_0x311872=f(_0x479142),_0x2a6234=Math[_0x49b032(0x53b)](battleAttributes[_0x49b032(0x263)]*0.1);let _0x5f1cdf;_0x311872!==0x0?_0x5f1cdf=Math[_0x49b032(0x275)](0x1,Math[_0x49b032(0x265)](battleState[_0x49b032(0x25b)][_0x49b032(0x3f0)]*1.2*_0x2e4a91*(0x1-_0x311872))):_0x5f1cdf=Math['max'](0x1,Math[_0x49b032(0x265)](battleState[_0x49b032(0x25b)][_0x49b032(0x3f0)]*1.2*_0x2e4a91));_0x5f1cdf=calculateDamage(_0x5f1cdf,_0x551f2e,enemyCritDamage),_0x5f1cdf=Math[_0x49b032(0x275)](0x1,_0x5f1cdf-_0x2a6234);_0x551f2e?logBattleEvent(_0x49b032(0x57a)+_0x5f1cdf+'\x20的猛烈伤害！',_0x49b032(0x2cf)):logBattleEvent(_0x49b032(0x582)+_0x5f1cdf+_0x49b032(0x531),'white');showEffect(_0x49b032(0x567),_0x49b032(0x308));if(battleState['player'][_0x49b032(0x54d)]){const _0x41eadd=playerCultivation-enemyPetCultivation;let _0xa745ff=0x0;if(_0x41eadd<0x0){const _0x4abbe6=Math[_0x49b032(0x29d)](_0x41eadd);enemyPhysicalAttackCount++,_0xa745ff=_0x4abbe6*enemyPhysicalAttackCount,logBattleEvent(_0x49b032(0x4f8)+_0xa745ff+'\x20点伤害！',_0x49b032(0x562)),updateDamageValue(_0xa745ff,!![],'extra-damage');}else{if(_0x41eadd>0x0){const _0x44e45f=_0x41eadd;battleState[_0x49b032(0x25b)][_0x49b032(0x5ad)]-=_0x44e45f,logBattleEvent(_0x49b032(0x2bb)+_0x44e45f+_0x49b032(0x289),_0x49b032(0x562)),updateDamageValue(_0xa745ff,![],_0x49b032(0x2eb));}}_0x5f1cdf+=_0xa745ff;}return(!battleState[_0x49b032(0x25b)]['silenced']||_0x5f1cdf!==0x0)&&applyEnemyPhysicalEffects(_0x5f1cdf),_0x5f1cdf;}function performEnemyMagicalAttack(_0x2e57b1){const _0x318e84=_0x38c76e;if(battleState[_0x318e84(0x25b)][_0x318e84(0x5a5)]<0x32)return enemyAttack('physical'),0x0;const _0xdd61c5=parseInt(document['getElementById']('enemy-level')[_0x318e84(0x341)],0xa)||0x0,_0x19e6e6=0x1+_0xdd61c5/0x64,_0x2223de=Math[_0x318e84(0x207)]()*(1.2-0.8)+0.8,_0x350bbe=battleAttributes['magicDefense']*_0x2223de,_0x1dfc8f=f(_0x350bbe),_0x355fa7=Math[_0x318e84(0x53b)](battleAttributes[_0x318e84(0x4d3)]*0.1);let _0x583aca;_0x1dfc8f!==0x0?_0x583aca=Math[_0x318e84(0x275)](0x1,Math[_0x318e84(0x265)](battleState[_0x318e84(0x25b)][_0x318e84(0x2b4)]*_0x19e6e6*(0x1-_0x1dfc8f))-_0x355fa7):_0x583aca=Math[_0x318e84(0x275)](0x1,Math['floor'](battleState['enemy']['magicAttack']*_0x19e6e6)-_0x355fa7);_0x583aca=calculateDamage(_0x583aca,_0x2e57b1,enemyCritDamage),_0x583aca=Math[_0x318e84(0x275)](0x1,_0x583aca-_0x355fa7);if(handleMagicDodge('player'))return 0x0;const _0x93ed4f=Math[_0x318e84(0x265)](Math[_0x318e84(0x207)]()*(0x64-0x32+0x1))+0x1f4;return battleState[_0x318e84(0x25b)][_0x318e84(0x5a5)]=Math[_0x318e84(0x275)](0x0,battleState[_0x318e84(0x25b)][_0x318e84(0x5a5)]-_0x93ed4f),_0x2e57b1?(logBattleEvent(_0x318e84(0x4b4)+_0x583aca+_0x318e84(0x2b9)+_0x93ed4f+_0x318e84(0x4e6),'red'),showEffect('enemyEffect',_0x318e84(0x308))):logBattleEvent(_0x318e84(0x261)+_0x583aca+'\x20点伤害，消耗了\x20'+_0x93ed4f+'\x20点法力值。','wheat'),showEffect(_0x318e84(0x567),'https://pic.imgdb.cn/item/66717584d9c307b7e98a90e6.gif'),applyEnemyMagicEffects(_0x583aca),_0x583aca;}function enemyHeal(){const _0x9358e9=_0x38c76e;if(enemyHealCount>=0x14){enemyAttack();return;}if(battleState['enemy']['sleep'])return;const _0x48cc41=0x120*battleRounds;if(battleState[_0x9358e9(0x25b)][_0x9358e9(0x5a5)]<_0x48cc41){performEnemyPhysicalAttack(![]);return;}if(battleState[_0x9358e9(0x25b)][_0x9358e9(0x1e8)]){logBattleEvent('由于妖怪被沉默，无法治疗',_0x9358e9(0x2b0)),performEnemyPhysicalAttack(![]);return;}const _0x3b4e2c=Math[_0x9358e9(0x265)](0x3*battleState[_0x9358e9(0x25b)][_0x9358e9(0x2b4)]*(Math['random']()*(1.2-0.8)+0.8));battleState[_0x9358e9(0x25b)][_0x9358e9(0x5ad)]=Math[_0x9358e9(0x206)](enemyMaxHealth,battleState[_0x9358e9(0x25b)][_0x9358e9(0x5ad)]+_0x3b4e2c),battleState[_0x9358e9(0x25b)][_0x9358e9(0x5a5)]=Math[_0x9358e9(0x275)](0x0,battleState[_0x9358e9(0x25b)][_0x9358e9(0x5a5)]-_0x48cc41),enemyHealCount+=0x1,logBattleEvent(_0x9358e9(0x2f0)+_0x3b4e2c+_0x9358e9(0x33c)+_0x48cc41+_0x9358e9(0x4e6),_0x9358e9(0x2f4)),showEffect('playerEffect','https://pic.imgdb.cn/item/66754252d9c307b7e9e67706.gif'),updateDamageValue(-_0x3b4e2c,![],_0x9358e9(0x504));if(battleState[_0x9358e9(0x25b)]['poisoned']){const _0x1d74cc=Math[_0x9358e9(0x265)](battleAttributes['magicAttack']*battleRounds*(Math[_0x9358e9(0x207)]()*(0.06-0.03)+0.03));battleState[_0x9358e9(0x25b)][_0x9358e9(0x5ad)]=Math[_0x9358e9(0x275)](0x0,battleState[_0x9358e9(0x25b)][_0x9358e9(0x5ad)]-_0x1d74cc),logBattleEvent(_0x9358e9(0x1ca)+_0x1d74cc+_0x9358e9(0x1c2),_0x9358e9(0x259)),updateDamageValue(_0x1d74cc,![],_0x9358e9(0x2eb));}handleBurnt(),showEffect(_0x9358e9(0x567)),updateUI();}function enemyDefense(){const _0x109ecd=_0x38c76e;if(battleState['enemy'][_0x109ecd(0x325)])return;if(battleState[_0x109ecd(0x25b)][_0x109ecd(0x58c)]){enemyAttack();return;}battleState[_0x109ecd(0x25b)][_0x109ecd(0x58c)]=!![];const _0x33a1f1=battleState[_0x109ecd(0x25b)][_0x109ecd(0x263)],_0x1d15b6=battleState[_0x109ecd(0x25b)]['magicDefense'],_0x407e41=Math[_0x109ecd(0x53b)]((_0x33a1f1+_0x1d15b6)*0.5);battleState[_0x109ecd(0x25b)][_0x109ecd(0x263)]+=_0x407e41,battleState[_0x109ecd(0x25b)][_0x109ecd(0x4d3)]+=_0x407e41,setTimeout(()=>{const _0x24030b=_0x109ecd;battleState['enemy']['defensing']=![],battleState[_0x24030b(0x25b)]['physicalDefense']=_0x33a1f1,battleState[_0x24030b(0x25b)][_0x24030b(0x4d3)]=_0x1d15b6,updateUI();},0x7d0),logBattleEvent(_0x109ecd(0x1de),_0x109ecd(0x55c)),showEffect(_0x109ecd(0x432),_0x109ecd(0x3e9));}function applyEnemyPhysicalEffects(_0x17bc41){const _0x58b56b=_0x38c76e,_0x22370b=[_0x58b56b(0x1c3),_0x58b56b(0x2d7),_0x58b56b(0x34b),_0x58b56b(0x318),_0x58b56b(0x54d)],_0x2eee75=enemyPetCultivation-playerCultivation,_0x32eb71=_0x2eee75/0x2710*0.01,_0x22705b=[];_0x22370b['forEach'](_0x10fb1e=>{const _0x1ee261=_0x58b56b,_0x4cb78b=0.2,_0x4686e9=Math[_0x1ee261(0x275)](0.01,_0x4cb78b+_0x32eb71),_0x10f3da=Math[_0x1ee261(0x207)]();if(battleState[_0x1ee261(0x498)][_0x10fb1e]){console[_0x1ee261(0x397)](_0x1ee261(0x3db)+_0x10fb1e+_0x1ee261(0x1e4));return;}_0x10f3da<_0x4686e9&&_0x22705b[_0x1ee261(0x3e2)](_0x10fb1e);});if(_0x22705b['length']>0x0){const _0x149a32=_0x22705b[Math['floor'](Math['random']()*_0x22705b['length'])];switch(_0x149a32){case _0x58b56b(0x1c3):!effectCooldowns['torn']&&handleTorn();break;case _0x58b56b(0x2d7):!effectCooldowns[_0x58b56b(0x2d7)]&&handleSuppressed();break;case'taunt':!battleState[_0x58b56b(0x498)][_0x58b56b(0x34b)]&&handleTaunt();break;case'slaughter':!battleState['player'][_0x58b56b(0x54d)]&&handleSlaughter();break;case _0x58b56b(0x318):!battleState[_0x58b56b(0x498)]['seal']&&handleSeal();break;}}}function applyEnemyMagicEffects(_0x24042d){const _0x4b2dbe=_0x38c76e,_0x16edf4=['drunken',_0x4b2dbe(0x3e4),'soulCapture',_0x4b2dbe(0x521),_0x4b2dbe(0x20f)],_0x2f467b=enemyPetCultivation-playerCultivation,_0x459b9c=_0x2f467b/0x2710*0.01,_0x3fde87=[];_0x16edf4['forEach'](_0x212159=>{const _0x7814be=_0x4b2dbe,_0x38582e=0.2,_0x4f1365=Math[_0x7814be(0x275)](0.01,_0x38582e+_0x459b9c),_0x350c67=Math[_0x7814be(0x207)]();_0x350c67<_0x4f1365&&_0x3fde87[_0x7814be(0x3e2)](_0x212159);});if(_0x3fde87[_0x4b2dbe(0x1f0)]>0x0){const _0x4267de=_0x3fde87[Math[_0x4b2dbe(0x265)](Math[_0x4b2dbe(0x207)]()*_0x3fde87[_0x4b2dbe(0x1f0)])];switch(_0x4267de){case _0x4b2dbe(0x3a9):!effectCooldowns[_0x4b2dbe(0x3a9)]&&(battleState[_0x4b2dbe(0x498)][_0x4b2dbe(0x3a9)]=!![],logBattleEvent(_0x4b2dbe(0x551),_0x4b2dbe(0x532)),showEffect(_0x4b2dbe(0x567),_0x4b2dbe(0x535)),effectCooldowns[_0x4b2dbe(0x3a9)]=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x28b755=_0x4b2dbe;battleState[_0x28b755(0x498)][_0x28b755(0x3a9)]=![],effectCooldowns[_0x28b755(0x3a9)]=![],updatePlayerStatusDisplay();},0x1388));break;case _0x4b2dbe(0x3e4):!effectCooldowns[_0x4b2dbe(0x3e4)]&&(battleState['player'][_0x4b2dbe(0x3e4)]=!![],logBattleEvent(_0x4b2dbe(0x48c),'#B94FFF'),showEffect(_0x4b2dbe(0x567),_0x4b2dbe(0x535)),effectCooldowns['healingBan']=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x6effc5=_0x4b2dbe;battleState[_0x6effc5(0x498)][_0x6effc5(0x3e4)]=![],effectCooldowns[_0x6effc5(0x3e4)]=![],updatePlayerStatusDisplay();},0x1388));break;case _0x4b2dbe(0x509):!effectCooldowns[_0x4b2dbe(0x509)]&&handleSoulCapture();break;case'spellSlow':!effectCooldowns['spellSlow']&&(battleState[_0x4b2dbe(0x498)][_0x4b2dbe(0x20f)]=!![],showEffect('enemyEffect',_0x4b2dbe(0x535)),effectCooldowns[_0x4b2dbe(0x20f)]=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x4dab03=_0x4b2dbe;battleState[_0x4dab03(0x498)][_0x4dab03(0x20f)]=![],effectCooldowns['spellSlow']=![],updatePlayerStatusDisplay();},0x1388));break;case'blindfold':!effectCooldowns[_0x4b2dbe(0x521)]&&(battleState[_0x4b2dbe(0x498)][_0x4b2dbe(0x521)]=!![],logBattleEvent('你被附加了失明，施放物理技能时将无法对敌人造成伤害！','yellow'),showEffect(_0x4b2dbe(0x567),_0x4b2dbe(0x535)),effectCooldowns[_0x4b2dbe(0x521)]=!![],updatePlayerStatusDisplay(),setTimeout(()=>{const _0x26ba39=_0x4b2dbe;battleState['player'][_0x26ba39(0x521)]=![],effectCooldowns[_0x26ba39(0x521)]=![],updatePlayerStatusDisplay();},0x1388));break;}}}function handleEnemySteal(_0x539681,_0x303df4){const _0x31a367=_0x38c76e;if(_0x539681<0.05&&Math[_0x31a367(0x207)]()<0.5&&drugInventory['延寿露']&&drugInventory[_0x31a367(0x324)][_0x31a367(0x4b6)]>0x0){if(Math[_0x31a367(0x207)]()<0.8){const _0x3cd958=Math['min'](0x1e8480,Math['floor'](enemyMaxHealth*0.2));battleState[_0x31a367(0x25b)]['health']=Math[_0x31a367(0x206)](enemyMaxHealth,battleState['enemy']['health']+_0x3cd958),drugInventory['延寿露'][_0x31a367(0x4b6)]-=0x1,logBattleEvent(_0x31a367(0x23e)+_0x3cd958+_0x31a367(0x4ff),'#66CDAA'),updateDamageValue(-_0x3cd958,![],_0x31a367(0x504)),showEffect(_0x31a367(0x567),_0x31a367(0x41a));}else logBattleEvent(_0x31a367(0x594),_0x31a367(0x2d1)),handleSlow();return!![];}else{if(_0x303df4<0.05&&Math[_0x31a367(0x207)]()<0.5&&drugInventory[_0x31a367(0x439)]&&drugInventory[_0x31a367(0x439)]['quantity']>0x0){if(Math[_0x31a367(0x207)]()<0.8){const _0x11e517=Math['min'](0x1e8480,Math['floor'](enemyMaxMana*0.2));battleState['enemy'][_0x31a367(0x5a5)]=Math[_0x31a367(0x206)](enemyMaxMana,battleState[_0x31a367(0x25b)][_0x31a367(0x5a5)]+_0x11e517),drugInventory[_0x31a367(0x439)][_0x31a367(0x4b6)]-=0x1,logBattleEvent(_0x31a367(0x1ea)+_0x11e517+_0x31a367(0x26b),'#66CDAA'),showEffect(_0x31a367(0x567),_0x31a367(0x41a));}else logBattleEvent('🥷【敌人偷窃】妖怪想窃取你的资源，但你识破了，没受到任何损失',_0x31a367(0x2d1)),handleSlow();return!![];}}return![];}function handleSlaughter(){const _0x1d4772=_0x38c76e;if(battleState[_0x1d4772(0x498)]['slaughter']){console[_0x1d4772(0x397)](_0x1d4772(0x242));return;}battleState[_0x1d4772(0x498)]['slaughter']=!![],effectCooldowns['slaughter']=!![],showEffect(_0x1d4772(0x567),_0x1d4772(0x464)),updatePlayerStatusDisplay();const _0x5f0cc6=setInterval(()=>{const _0x485fe7=_0x1d4772;if(!battleState[_0x485fe7(0x498)][_0x485fe7(0x54d)]){clearInterval(_0x5f0cc6);return;}const _0x944c1=playerCultivation-enemyPetCultivation;if(_0x944c1>0x0&&battleState['enemy']['health']<=_0x944c1*0x96)battleState[_0x485fe7(0x25b)][_0x485fe7(0x5ad)]=0x0,logBattleEvent(_0x485fe7(0x3c5)+battleState['enemy']['health']+'点生命值，被当即斩杀！',_0x485fe7(0x2d3)),updateDamageValue(battleState[_0x485fe7(0x25b)][_0x485fe7(0x5ad)],![],_0x485fe7(0x504)),updateUI(),updatePlayerStatusDisplay();else _0x944c1<0x0&&battleAttributes[_0x485fe7(0x5ad)]<=Math[_0x485fe7(0x29d)](_0x944c1)&&(battleAttributes['health']=0x0,logBattleEvent(_0x485fe7(0x488)+battleAttributes[_0x485fe7(0x5ad)]+_0x485fe7(0x3b5),'#FFDD55'),updateDamageValue(battleState[_0x485fe7(0x25b)]['health'],!![],'damage'),updateUI(),updatePlayerStatusDisplay());},0x1f4);if(battleAttributes[_0x1d4772(0x5ad)]<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState['enemy'][_0x1d4772(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}}setTimeout(()=>{const _0x2d63eb=_0x1d4772;battleState[_0x2d63eb(0x498)][_0x2d63eb(0x54d)]=![],effectCooldowns[_0x2d63eb(0x54d)]=![],enemyPhysicalAttackCount=0x0,clearInterval(_0x5f0cc6),updatePlayerStatusDisplay();},0x2710);}function handleShocked(){const _0x347fd9=_0x38c76e;battleState['player'][_0x347fd9(0x2ac)]&&(battleAttributes['physicalDefense']=Math[_0x347fd9(0x275)](0x0,Math['floor'](battleAttributes[_0x347fd9(0x263)]*0.8)),battleAttributes[_0x347fd9(0x4d3)]=Math[_0x347fd9(0x275)](0x0,Math[_0x347fd9(0x265)](battleAttributes['physicalDefense']*0.8)));}function handleSeal(){const _0x4455c8=_0x38c76e;if(battleState[_0x4455c8(0x498)][_0x4455c8(0x318)])return;battleState[_0x4455c8(0x498)][_0x4455c8(0x318)]=!![],battleState[_0x4455c8(0x498)][_0x4455c8(0x425)]=ascensionSkill[_0x4455c8(0x33b)],battleState['player']['originalSecondAscensionSkill']=secondAscensionSkill['name'],ascensionSkill[_0x4455c8(0x33b)]=_0x4455c8(0x436),secondAscensionSkill['name']='被封印的技能',updateAscensionDisplay(),updateSecondAscensionDisplay(),logBattleEvent(_0x4455c8(0x269),_0x4455c8(0x2f4)),setTimeout(()=>{const _0x3209fa=_0x4455c8;battleState[_0x3209fa(0x498)][_0x3209fa(0x318)]=![],ascensionSkill['name']=battleState['player']['originalAscensionSkill'],secondAscensionSkill[_0x3209fa(0x33b)]=battleState['player'][_0x3209fa(0x38b)],logBattleEvent(_0x3209fa(0x34f),'aqua'),updateAscensionDisplay(),updateSecondAscensionDisplay(),updateUI();},0x2710);}function handleTorn(){const _0x2fe348=_0x38c76e;battleState[_0x2fe348(0x498)][_0x2fe348(0x1c3)]=!![],showEffect(_0x2fe348(0x567),_0x2fe348(0x31a)),effectCooldowns['torn']=!![],updatePlayerStatusDisplay();const _0x512411=setInterval(()=>{const _0x25a9d8=_0x2fe348;if(!battleState['player'][_0x25a9d8(0x1c3)]){clearInterval(_0x512411);return;}const _0x567fd8=Math[_0x25a9d8(0x265)](battleState['enemy'][_0x25a9d8(0x3f0)]*0.1);battleAttributes['health']=Math[_0x25a9d8(0x275)](0x0,battleAttributes[_0x25a9d8(0x5ad)]-_0x567fd8),updateDamageValue(_0x567fd8,!![],'extra-damage'),updateUI(),updatePlayerStatusDisplay();},0x1f4);if(battleAttributes['health']<=0x0){showNextBattlePrompt(![]);return;}else{if(battleState[_0x2fe348(0x25b)][_0x2fe348(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}}setTimeout(()=>{const _0x3477b5=_0x2fe348;battleState[_0x3477b5(0x498)][_0x3477b5(0x1c3)]=![],effectCooldowns[_0x3477b5(0x1c3)]=![],clearInterval(_0x512411),updatePlayerStatusDisplay();},0x2710);}const suppressionState={'actionPerformed':![],'timeoutId':null};function handleSuppressed(){const _0x50a6a0=_0x38c76e;if(battleState[_0x50a6a0(0x498)][_0x50a6a0(0x2d7)])return;battleState[_0x50a6a0(0x498)][_0x50a6a0(0x2d7)]=!![],logBattleEvent(_0x50a6a0(0x465),_0x50a6a0(0x34a)),showEffect(_0x50a6a0(0x567),_0x50a6a0(0x31a)),effectCooldowns['suppressed']=!![],updatePlayerStatusDisplay(),suppressionState[_0x50a6a0(0x4f0)]=![];const _0x13c4ac=performPhysicalAttack,_0x25ed6c=performMagicalAttack,_0x4bab68=performHeal,_0x49035c=performPoison,_0x47fd06=performDefense,_0x42ca46=_0x1ab504=>{return function(..._0x3ea678){const _0x2f1d4b=_0x6e96;return suppressionState[_0x2f1d4b(0x4f0)]=!![],_0x1ab504[_0x2f1d4b(0x320)](this,_0x3ea678);};};performPhysicalAttack=_0x42ca46(performPhysicalAttack),performMagicalAttack=_0x42ca46(performMagicalAttack),performHeal=_0x42ca46(performHeal),performPoison=_0x42ca46(performPoison),performDefense=_0x42ca46(performDefense),suppressionState['timeoutId']=setTimeout(()=>{cleanSuppressed();},0xbb8);}let tauntTimeout;function handleTaunt(){const _0x1f5fa5=_0x38c76e;if(battleState[_0x1f5fa5(0x498)][_0x1f5fa5(0x34b)]){logBattleEvent(_0x1f5fa5(0x370),_0x1f5fa5(0x34a));return;}clearTimeout(tauntTimeout),battleState[_0x1f5fa5(0x498)]['taunt']=!![],logBattleEvent(_0x1f5fa5(0x31d),_0x1f5fa5(0x34a)),showEffect(_0x1f5fa5(0x567),_0x1f5fa5(0x31a)),effectCooldowns[_0x1f5fa5(0x34b)]=!![],updatePlayerStatusDisplay(),updateUI(),tauntTimeout=setTimeout(()=>{const _0x42e248=_0x1f5fa5;battleState[_0x42e248(0x498)][_0x42e248(0x34b)]=![],effectCooldowns[_0x42e248(0x34b)]=![],updatePlayerStatusDisplay(),updateUI();},0x2710);}function handleHealingBan(_0x1b9f75){const _0x29437f=_0x38c76e;if(battleState[_0x29437f(0x498)]['healingBan'])return 0x0;let _0x454768=Math[_0x29437f(0x265)](0x3*battleAttributes[_0x29437f(0x2b4)]*(Math[_0x29437f(0x207)]()*(0.12-0.08)+0.08)*_0x1b9f75),_0x2c50ac;const _0x4329c1=applyWuxingEffects();if(_0x4329c1[_0x29437f(0x1cd)]&&_0x4329c1[_0x29437f(0x1cd)]>0x0){const _0x41bcc0=[0x0,0.02,0.05,0.07,0.12,0.2,0.22,0.25,0.28,0.4][_0x4329c1[_0x29437f(0x1cd)]],_0x21a914=Math[_0x29437f(0x265)](_0x454768*_0x41bcc0);_0x454768=Math['floor'](_0x454768*(0x1+_0x41bcc0)),logBattleEvent(_0x29437f(0x431)+_0x21a914+'。',_0x29437f(0x2f4));}return _0x454768;}function handleSoulCapture(){const _0x1995c4=_0x38c76e;if(battleState['player']['soulCapture'])return;battleState[_0x1995c4(0x498)][_0x1995c4(0x509)]=!![],battleAttributes[_0x1995c4(0x3f0)]*=0.5,battleAttributes['magicAttack']*=0.5,logBattleEvent(_0x1995c4(0x4b5),_0x1995c4(0x1d5)),showEffect(_0x1995c4(0x567),_0x1995c4(0x535)),updatePlayerStatusDisplay(),setTimeout(()=>{const _0x2692aa=_0x1995c4;battleState[_0x2692aa(0x498)][_0x2692aa(0x509)]=![],battleAttributes[_0x2692aa(0x3f0)]=battleState[_0x2692aa(0x498)][_0x2692aa(0x3f0)],battleAttributes[_0x2692aa(0x2b4)]=battleState[_0x2692aa(0x498)][_0x2692aa(0x2b4)],updateUI(),updatePlayerStatusDisplay();},0x1388);}function handleDrunken(_0x242c84){const _0x3bd3c0=_0x38c76e;if(battleState[_0x3bd3c0(0x498)][_0x3bd3c0(0x3a9)]&&_0x242c84>0x0){const _0x43ebc5=Math[_0x3bd3c0(0x265)](_0x242c84*0.05);battleAttributes[_0x3bd3c0(0x5ad)]=Math[_0x3bd3c0(0x275)](0x0,battleAttributes[_0x3bd3c0(0x5ad)]-_0x43ebc5),logBattleEvent('⚔️【敌人反弹】醉酒状态下，你招式过猛误伤自身，受到\x20'+_0x43ebc5+_0x3bd3c0(0x3d9),'#FF0088'),updateDamageValue(_0x43ebc5,!![],_0x3bd3c0(0x2eb));}}let enemyRivival=![],enemyRivivalCount=0x0;function handleRampaged(){const _0x2150d5=_0x38c76e;console['log']('handleRampaged\x20called.\x20battleRounds:\x20'+battleRounds+_0x2150d5(0x25e)+battleState[_0x2150d5(0x25b)][_0x2150d5(0x5ad)]+_0x2150d5(0x254)+enemyMaxHealth);if(summonEnemy)return;enemyRivival&&(enemyRivival=![]);if(battleRounds===0x96)enemyCritRate=0x1,enemyCritDamage=3.5,battleState[_0x2150d5(0x25b)][_0x2150d5(0x466)]=!![],changeEnemyImage('mao'),setBackgroundImage(_0x2150d5(0x43a)),console['log'](_0x2150d5(0x440));else{if(battleRounds>0x96&&battleRounds%0xa===0x0)enemyCritRate=0x1,enemyCritDamage=3.5,battleState[_0x2150d5(0x25b)]['rampaged']=!![],changeEnemyImage(_0x2150d5(0x29f)),setBackgroundImage('https://pic.imgdb.cn/item/66bc6806d9c307b7e987b8ec.webp'),console[_0x2150d5(0x397)]('Enemy\x20is\x20rampaged.');else battleRounds<=0x96&&battleRounds%0xa===0x0?(enemyCritRate=0x1,enemyCritDamage=2.5,battleState[_0x2150d5(0x25b)][_0x2150d5(0x466)]=!![],changeEnemyImage('rampaged'),setBackgroundImage(_0x2150d5(0x43a)),console[_0x2150d5(0x397)](_0x2150d5(0x440))):(battleState['enemy']['rampaged']=![],changeEnemyImage(battleRounds>0x96?_0x2150d5(0x2d5):'default'),setBackgroundImage(battleRounds>0x96?_0x2150d5(0x2c3):'https://pic.imgdb.cn/item/66bc6806d9c307b7e987b92d.webp'),console[_0x2150d5(0x397)](_0x2150d5(0x558)));}battleState[_0x2150d5(0x25b)][_0x2150d5(0x466)]&&battleState['enemy']['health']<enemyMaxHealth*0.2&&enemyRivivalCount<=(battleRounds===0x96?0x3:0x1)&&(enemyRivivalCount+=0x1,logBattleEvent(_0x2150d5(0x4ef),'red'),enemyRivival=!![],console[_0x2150d5(0x397)]('Revival\x20triggered.\x20revivalCount:\x20'+enemyRivivalCount),setTimeout(()=>{const _0x458edc=_0x2150d5;enemyRivival&&battleState[_0x458edc(0x25b)][_0x458edc(0x5ad)]<enemyMaxHealth*0.2&&(battleState[_0x458edc(0x25b)]['health']=enemyMaxHealth,logBattleEvent(_0x458edc(0x388),'red'),updateDamageValue(-enemyMaxHealth,![],_0x458edc(0x504)),enemyRivival=![],updateUI(),console[_0x458edc(0x397)](_0x458edc(0x408)));},0x7d0));}function useDrug(){const _0x5bb8aa=_0x38c76e;!alreadyUseDrug&&(showInfoBox('这是你第一次打开药品面板，附送至尊药品礼包一份！'),alreadyUseDrug=!![]);if(battleState[_0x5bb8aa(0x498)]['taunt']){performAttack(_0x5bb8aa(0x1f6));return;}document['getElementById'](_0x5bb8aa(0x4e1))['style'][_0x5bb8aa(0x3f1)]=_0x5bb8aa(0x219),updateDrugGrid();}function updateDrugGrid(){const _0x32ffe7=_0x38c76e,_0x182a04=document[_0x32ffe7(0x4e9)](_0x32ffe7(0x58a));_0x182a04[_0x32ffe7(0x4d5)]='';for(let _0x121cec in drugInventory){if(drugInventory[_0x121cec][_0x32ffe7(0x4b6)]>0x0){const _0x101d45=document[_0x32ffe7(0x598)](_0x32ffe7(0x3a8));_0x101d45[_0x32ffe7(0x48a)]=_0x32ffe7(0x334),_0x101d45['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+drugInventory[_0x121cec][_0x32ffe7(0x480)]+_0x32ffe7(0x53c)+_0x121cec+'\x22\x20width=\x2245\x22\x20height=\x2245\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div>'+_0x121cec+'\x20<span>'+drugInventory[_0x121cec][_0x32ffe7(0x4b6)]+'</span>个</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20',_0x101d45[_0x32ffe7(0x4b7)]=()=>selectDrug(_0x121cec),_0x182a04[_0x32ffe7(0x46f)](_0x101d45);}}if(selectedDrug){const _0x13bf2f=Array[_0x32ffe7(0x200)](_0x182a04[_0x32ffe7(0x1f3)](_0x32ffe7(0x334)))[_0x32ffe7(0x2c5)](_0x475268=>_0x475268[_0x32ffe7(0x3d6)](_0x32ffe7(0x3a8))[_0x32ffe7(0x341)][_0x32ffe7(0x44c)](selectedDrug));_0x13bf2f&&(_0x13bf2f[_0x32ffe7(0x352)][_0x32ffe7(0x4fd)]=_0x32ffe7(0x584),_0x13bf2f[_0x32ffe7(0x352)][_0x32ffe7(0x1b2)]='10px',_0x13bf2f[_0x32ffe7(0x352)][_0x32ffe7(0x38d)]=_0x32ffe7(0x1f1));}}function addDrugToInventory(_0x285e6e,_0xd282f0=0x1){const _0x588374=_0x38c76e;drugInventory[_0x285e6e]?drugInventory[_0x285e6e][_0x588374(0x4b6)]+=_0xd282f0:drugInventory[_0x285e6e]={'quantity':_0xd282f0,'url':_0x588374(0x59c),'tier':0x0,'description':_0x588374(0x547)},updateDrugGrid(),console[_0x588374(0x397)](_0x285e6e+_0x588374(0x3be)+drugInventory[_0x285e6e][_0x588374(0x4b6)]);}function closeDrugModal(){const _0x11c221=_0x38c76e;document['getElementById'](_0x11c221(0x4e1))[_0x11c221(0x352)][_0x11c221(0x3f1)]=_0x11c221(0x2c0),selectedDrug=null,document[_0x11c221(0x4e9)](_0x11c221(0x591))[_0x11c221(0x341)]='选中药品后可直接使用，低品阶药品可合成更高品阶的药品。采集会花费金子，采集所得的原始药材只能用于合成。战斗精灵成长后，每次战斗胜利会有额外的掉落奖励。';}function selectDrug(_0x2d31cf){const _0x2ae764=_0x38c76e,_0x417a34=document[_0x2ae764(0x4e9)]('drug-description');selectedDrug=_0x2d31cf,_0x417a34&&(_0x417a34[_0x2ae764(0x341)]=drugInventory[_0x2d31cf][_0x2ae764(0x40e)]),updateDrugGrid();}function useSelectedDrug(){const _0x364f52=_0x38c76e;if(!selectedDrug){showInfoBox('请选择一种药品！');return;}if(activeBuffs[selectedDrug]){showInfoBox(selectedDrug+_0x364f52(0x378));return;}if(checkConflictingBuffs(selectedDrug))return;const _0x34c4dd=drugInventory[selectedDrug];if(_0x34c4dd[_0x364f52(0x4b6)]>0x0){_0x34c4dd[_0x364f52(0x4b6)]-=0x1,updateDrugGrid();switch(selectedDrug){case _0x364f52(0x4aa):tempBonus['health']+=0x3e8,updatePetInfo(),logBattleEvent(_0x364f52(0x313),_0x364f52(0x4d0));break;case _0x364f52(0x518):const _0x147c37=0x3*0x3e8,_0x2afe1e=1.5*0x3e8,_0x1784c3=Math['floor'](maxMana*0.01);let _0x2477fe=0x0;const _0x185224=setInterval(()=>{const _0x4720bd=_0x364f52;_0x2477fe>=_0x147c37?clearInterval(_0x185224):(battleAttributes[_0x4720bd(0x5a5)]=Math['min'](maxMana,battleAttributes[_0x4720bd(0x5a5)]+_0x1784c3),logBattleEvent(_0x4720bd(0x560)+_0x1784c3+'点。',_0x4720bd(0x4d0)),updateUI(),_0x2477fe+=_0x2afe1e);},_0x2afe1e);break;case _0x364f52(0x3f9):const _0x30f307=0x3*0x3e8,_0x174b2a=1.5*0x3e8,_0x5ab40b=Math[_0x364f52(0x265)](maxHealth*0.02);let _0x473d03=0x0;const _0x2d1680=setInterval(()=>{const _0x222dde=_0x364f52;_0x473d03>=_0x30f307?clearInterval(_0x2d1680):(battleAttributes['health']=Math[_0x222dde(0x206)](maxHealth,battleAttributes[_0x222dde(0x5ad)]+_0x5ab40b),updateDamageValue(-_0x5ab40b,!![],_0x222dde(0x504)),updateUI(),_0x473d03+=_0x174b2a);},_0x174b2a);break;case _0x364f52(0x223):const _0x2ca6ad=document[_0x364f52(0x4e9)]('skills-area'),_0xd8102=Array[_0x364f52(0x200)](_0x2ca6ad[_0x364f52(0x4a5)])[_0x364f52(0x241)](_0x43756f=>{const _0x5ce17e=_0x364f52,_0x1ff006=_0x43756f['innerText']['split']('\x20')[0x0],_0x6e498c=currentPet[_0x5ce17e(0x3bd)][_0x5ce17e(0x2c5)](_0x41af5d=>_0x41af5d[_0x5ce17e(0x33b)]===_0x1ff006);return _0x6e498c;})[_0x364f52(0x367)](_0x4a9472=>_0x4a9472[_0x364f52(0x533)]<0x18&&_0x4a9472!==null&&!_0x4a9472[_0x364f52(0x41b)]);if(_0xd8102['length']===0x0){showInfoBox(_0x364f52(0x1fb));break;}let _0x123585=_0xd8102[Math['floor'](Math[_0x364f52(0x207)]()*_0xd8102[_0x364f52(0x1f0)])];const _0x90c103=(_0x123585[_0x364f52(0x533)]+0x1)*0x2710;currentExp>=_0x90c103?(currentExp-=_0x90c103,_0x123585['level']>=0x18&&(_0x123585=_0xd8102['find'](_0x16d4ad=>_0x16d4ad[_0x364f52(0x533)]<0x18)),_0x123585&&Math['random']()<0.4?(_0x123585[_0x364f52(0x533)]+=0x1,showInfoBox(_0x364f52(0x37a)+_0x90c103+_0x364f52(0x1c9)+_0x123585[_0x364f52(0x33b)]+_0x364f52(0x303)+_0x123585['level']+_0x364f52(0x2ee))):showInfoBox('你消耗了'+_0x90c103+_0x364f52(0x3cd)),updateExpBar(currentExp,maxExp),updateUI()):(addDrugToInventory(_0x364f52(0x223),0x1),showInfoBox('经验不足，无法使用魔术棱柱。'));break;case _0x364f52(0x427):if(Math[_0x364f52(0x207)]()<0.1&&battleRounds>0xa){const _0x13dea3=battleRounds-0xa;initializeEnemyPet(),battleRounds=_0x13dea3,updateEnemyAttributes(),logBattleEvent(_0x364f52(0x589),_0x364f52(0x4d0));}else Math[_0x364f52(0x207)]()<0.8?(gainExp(0xc350),logBattleEvent('使用幸运金币，获得了50000点经验值。',_0x364f52(0x4d0))):(battleState['enemy']['health']=0x1,logBattleEvent(_0x364f52(0x326),_0x364f52(0x4d0)));updateUI(),updateExpBar(currentExp,maxExp);break;case _0x364f52(0x400):applyTimedBuff(selectedDrug,()=>{const _0x284dad=_0x364f52;return battleState[_0x284dad(0x498)][_0x284dad(0x453)]=0x2,logBattleEvent(_0x284dad(0x1d1),_0x284dad(0x4d0)),()=>{const _0x31c0f7=_0x284dad;battleState[_0x31c0f7(0x498)]['expMultiplier']=0x1,logBattleEvent(_0x31c0f7(0x51e),'red');};},0xea60);break;case _0x364f52(0x539):applyTimedBuff(selectedDrug,()=>{const _0x6d069a=_0x364f52;return battleState[_0x6d069a(0x498)][_0x6d069a(0x453)]=0x4,logBattleEvent(_0x6d069a(0x3b2),_0x6d069a(0x4d0)),()=>{const _0xf7d3b7=_0x6d069a;battleState[_0xf7d3b7(0x498)][_0xf7d3b7(0x453)]=0x1,logBattleEvent(_0xf7d3b7(0x1ff),'red');};},0xea60);break;case'武尊秘露':case _0x364f52(0x2af):case _0x364f52(0x229):case'化功散':case _0x364f52(0x1f2):case _0x364f52(0x579):if(!activeBuffs[selectedDrug])applyBuff(selectedDrug);else{showInfoBox(selectedDrug+'效果尚在冷却中，无法叠加使用。');return;}break;case _0x364f52(0x4cf):handleMushroom();break;case _0x364f52(0x5a1):playerCritRate=Math[_0x364f52(0x206)](0x1,playerCritRate+0.01),logBattleEvent(_0x364f52(0x4df),_0x364f52(0x4d0));break;case'慧心糖果':playerCritDamage=Math[_0x364f52(0x206)](0x1e,playerCritDamage+0.01),logBattleEvent(_0x364f52(0x3e7),_0x364f52(0x4d0));break;case _0x364f52(0x324):battleAttributes[_0x364f52(0x5ad)]=Math[_0x364f52(0x206)](maxHealth,battleAttributes[_0x364f52(0x5ad)]+Math['floor'](maxHealth*0.2)),updateDamageValue(-Math['floor'](maxHealth*0.2),!![],_0x364f52(0x504)),logBattleEvent(_0x364f52(0x2f8)+Math[_0x364f52(0x265)](maxHealth*0.2)+_0x364f52(0x1c2),'gold');break;case _0x364f52(0x439):battleAttributes[_0x364f52(0x5a5)]=Math['min'](maxMana,battleAttributes['mana']+Math[_0x364f52(0x265)](maxMana*0.2)),logBattleEvent(_0x364f52(0x56a)+Math[_0x364f52(0x265)](maxMana*0.2)+_0x364f52(0x4e6),_0x364f52(0x4d0));break;case _0x364f52(0x3bc):battleAttributes[_0x364f52(0x5ad)]=Math[_0x364f52(0x206)](maxHealth,battleAttributes[_0x364f52(0x5ad)]+0x3e8),updateDamageValue(-(battleAttributes['health']+0x3e8),!![],'damage'),battleAttributes[_0x364f52(0x5a5)]=Math[_0x364f52(0x206)](maxMana,battleAttributes[_0x364f52(0x5a5)]+0x3e8);break;case _0x364f52(0x1b8):tempBonus[_0x364f52(0x495)]+=0x14;break;case _0x364f52(0x29e):tempBonus[_0x364f52(0x5ad)]+=0x32,tempBonus['mana']+=0x32;break;case _0x364f52(0x491):tempBonus['physicalDefense']+=0x23,tempBonus[_0x364f52(0x4d3)]+=0x23;break;case _0x364f52(0x228):tempBonus[_0x364f52(0x3f0)]+=0xf,tempBonus[_0x364f52(0x2b4)]+=0xf;break;case _0x364f52(0x523):tempBonus[_0x364f52(0x5ad)]+=0x12c;break;case _0x364f52(0x573):tempBonus[_0x364f52(0x5a5)]+=0x12c;break;}updateUI();}else showInfoBox(_0x364f52(0x4c6),'red');}function checkConflictingBuffs(_0x3cc0d0){const _0xea794e=_0x38c76e,_0x4de5ab=[_0xea794e(0x2af),_0xea794e(0x229),_0xea794e(0x579)];if(_0x4de5ab[_0xea794e(0x4b2)](_0x3cc0d0))for(const _0x120191 of _0x4de5ab){if(activeBuffs[_0x120191])return showInfoBox(_0xea794e(0x490)),!![];}return![];}function applyBuff(_0x429ec5){const _0x544136=_0x38c76e;switch(_0x429ec5){case'武尊秘露':applyTimedBuff(_0x429ec5,()=>{const _0x304e15=_0x6e96,_0x2190aa=battleAttributes['physicalAttack'];return battleAttributes[_0x304e15(0x3f0)]=Math[_0x304e15(0x265)](battleAttributes[_0x304e15(0x3f0)]*1.5),logBattleEvent(_0x304e15(0x44b),_0x304e15(0x4d0)),()=>{const _0x138e48=_0x304e15;battleAttributes[_0x138e48(0x3f0)]=_0x2190aa,logBattleEvent(_0x138e48(0x460),_0x138e48(0x2cf));};},0x4e20);break;case'神力仙丹':applyTimedBuff(_0x429ec5,()=>{const _0x5dc5cf=_0x6e96;return battleState['player'][_0x5dc5cf(0x4e8)]=Math[_0x5dc5cf(0x206)](0x1e,playerCritDamage+0.5),logBattleEvent(_0x5dc5cf(0x3c8),_0x5dc5cf(0x4d0)),()=>{const _0x2f1af9=_0x5dc5cf;battleState['player'][_0x2f1af9(0x4e8)]=playerCritDamage-0.5,logBattleEvent(_0x2f1af9(0x4b1),_0x2f1af9(0x2cf));};},0x4e20);break;case _0x544136(0x229):applyTimedBuff(_0x429ec5,()=>{const _0x2eb5fc=_0x544136;return battleState[_0x2eb5fc(0x498)][_0x2eb5fc(0x4d2)]=Math[_0x2eb5fc(0x206)](0xa,playerCritRate+0.5),logBattleEvent(_0x2eb5fc(0x3fd),_0x2eb5fc(0x4d0)),()=>{const _0x35c3ab=_0x2eb5fc;battleState[_0x35c3ab(0x498)][_0x35c3ab(0x4d2)]=playerCritRate-0.5,logBattleEvent('狂暴印记冷却结束。',_0x35c3ab(0x2cf));};},0x4e20);break;case _0x544136(0x52a):applyTimedBuff(_0x429ec5,()=>{const _0x1e79f3=enemyCritRate;return enemyCritRate=0x0,logBattleEvent('使用化功散，妖怪暴击率降低至0%，持续30秒。','gold'),()=>{const _0x43265f=_0x6e96;enemyCritRate=_0x1e79f3,logBattleEvent('化功散冷却结束。',_0x43265f(0x2cf));};},0x7530);break;case'沉檀凝香':const _0x53a581=Math['floor'](maxHealth*0.1);battleAttributes[_0x544136(0x5ad)]=Math['min'](maxHealth,battleAttributes[_0x544136(0x5ad)]+_0x53a581),logBattleEvent('使用沉檀凝香，恢复了\x20'+_0x53a581+_0x544136(0x1c2),_0x544136(0x4d0));Math['random']()<0.8?(clearEnemyEffect(),logBattleEvent(_0x544136(0x43f),'gold')):logBattleEvent(_0x544136(0x3ca),_0x544136(0x2cf));break;case _0x544136(0x579):battleAttributes[_0x544136(0x5ad)]>=maxHealth*0.2?applyTimedBuff(_0x429ec5,()=>{const _0x5c3d67=_0x544136,_0x294208=battleAttributes[_0x5c3d67(0x3f0)],_0x5065dd=battleAttributes['magicAttack'];return battleAttributes['health']-=Math['floor'](maxHealth*0.2),battleAttributes[_0x5c3d67(0x3f0)]=Math[_0x5c3d67(0x265)](battleAttributes[_0x5c3d67(0x3f0)]*1.5),battleAttributes[_0x5c3d67(0x2b4)]=Math[_0x5c3d67(0x265)](battleAttributes[_0x5c3d67(0x2b4)]*1.5),battleState[_0x5c3d67(0x498)][_0x5c3d67(0x4d2)]=Math[_0x5c3d67(0x206)](0xa,playerCritRate+0.5),battleState[_0x5c3d67(0x498)][_0x5c3d67(0x4e8)]=Math[_0x5c3d67(0x206)](0x1e,playerCritDamage+0.5),logBattleEvent(_0x5c3d67(0x401),_0x5c3d67(0x4d0)),()=>{const _0x3e2e5e=_0x5c3d67;battleAttributes['physicalAttack']=_0x294208,battleAttributes[_0x3e2e5e(0x2b4)]=_0x5065dd,battleState['player'][_0x3e2e5e(0x4d2)]-=0.5,battleState['player']['critDamage']-=0.5,logBattleEvent(_0x3e2e5e(0x588),'red');};},0x4e20):showInfoBox('焚灵之丸效果无法触发，生命值不足20%。');break;}}function applyTimedBuff(_0x141c07,_0x17a197,_0x446bea){if(activeBuffs[_0x141c07])return;const _0x5b39cf=_0x17a197();activeBuffs[_0x141c07]=setTimeout(()=>{_0x5b39cf(),delete activeBuffs[_0x141c07],updateUI();},_0x446bea);}function applyDrugBonus0(_0x2d0fbd,_0x5ca145){const _0x4beb30=_0x38c76e;if(!battleState||!battleState[_0x4beb30(0x498)]){console[_0x4beb30(0x1b6)](_0x4beb30(0x3b9));return;}if(drugBonus0[_0x4beb30(0x59a)](_0x2d0fbd))drugBonus0[_0x2d0fbd]+=_0x5ca145;else{console[_0x4beb30(0x1b6)](_0x4beb30(0x587));return;}battleState[_0x4beb30(0x498)]['hasOwnProperty'](_0x2d0fbd)?battleState[_0x4beb30(0x498)][_0x2d0fbd]+=_0x5ca145:console['error'](_0x4beb30(0x433));if(_0x2d0fbd==='health')maxHealth=battleState[_0x4beb30(0x498)][_0x4beb30(0x5ad)];else _0x2d0fbd===_0x4beb30(0x5a5)&&(maxMana=battleState[_0x4beb30(0x498)][_0x4beb30(0x5a5)]);[_0x4beb30(0x3f0),_0x4beb30(0x263),_0x4beb30(0x2b4),_0x4beb30(0x4d3),_0x4beb30(0x495)][_0x4beb30(0x4b2)](_0x2d0fbd)&&updatePetInfo();const _0x361da6={'health':_0x4beb30(0x260),'mana':'法力值','physicalAttack':_0x4beb30(0x372),'physicalDefense':'物理防御力','magicAttack':_0x4beb30(0x29a),'magicDefense':'法术防御力','speed':'速度'};logBattleEvent(_0x4beb30(0x3c9)+_0x5ca145+'\x20点'+_0x361da6[_0x2d0fbd]+'。','gold'),updateUI();}function collectDrug(){const _0x44c6fb=_0x38c76e;if(goldAmount<collectCost){showInfoBox(_0x44c6fb(0x361));return;}goldAmount-=collectCost,updateGoldDisplay(goldAmount),collectCost+=0x64;const _0x284ea2=Math[_0x44c6fb(0x207)]()*0x64;let _0x20f28b;if(_0x284ea2<0x32)_0x20f28b='普通药材',drugInventory['普通药材']['quantity']+=0x1;else{if(_0x284ea2<0x50)_0x20f28b='上等药材',drugInventory['上等药材'][_0x44c6fb(0x4b6)]+=0x1;else{if(_0x284ea2<0x5f)_0x20f28b=_0x44c6fb(0x29e),drugInventory[_0x44c6fb(0x29e)][_0x44c6fb(0x4b6)]+=0x1;else _0x284ea2<0x62?(_0x20f28b=_0x44c6fb(0x491),drugInventory[_0x44c6fb(0x491)]['quantity']+=0x1):(_0x20f28b=_0x44c6fb(0x228),drugInventory[_0x44c6fb(0x228)][_0x44c6fb(0x4b6)]+=0x1,addItemToJinnang(_0x44c6fb(0x2ba),0x1),showInfoBox('功夫不负有心人，你意外获得一份藏宝图！'));}}const _0x3e1be8=Math[_0x44c6fb(0x207)]()*0x64;let _0x430c6d=0x1;if(_0x3e1be8<0x1)_0x430c6d=0x3;else _0x3e1be8<0x3&&(_0x430c6d=0x2);_0x430c6d>0x1?(drugInventory[_0x20f28b][_0x44c6fb(0x4b6)]+=_0x430c6d-0x1,document[_0x44c6fb(0x4e9)](_0x44c6fb(0x591))[_0x44c6fb(0x341)]=_0x44c6fb(0x511)+convertPrice(collectCost-0x64)+_0x44c6fb(0x437)+_0x430c6d+'个'+_0x20f28b+'！'):document[_0x44c6fb(0x4e9)](_0x44c6fb(0x591))['innerText']=_0x44c6fb(0x511)+convertPrice(collectCost-0x64)+'金子打点进山凭证，采集到了1个'+_0x20f28b+'！',updateDrugGrid();}function mergeDrug(){const _0x116254=_0x38c76e;if(!selectedDrug){showInfoBox(_0x116254(0x299));return;}const _0x12a8cb=drugInventory[selectedDrug],_0x2ee81a=_0x12a8cb[_0x116254(0x3c7)];if(_0x2ee81a===0x0){const _0x5cb0a2=0x3;if(_0x12a8cb[_0x116254(0x4b6)]<_0x5cb0a2){showInfoBox(_0x116254(0x40a));return;}_0x12a8cb['quantity']-=_0x5cb0a2;const _0x3dc1c0=Math[_0x116254(0x207)]();let _0x50a245='';if(_0x3dc1c0<0.1)_0x50a245=_0x116254(0x251)+selectedDrug+_0x116254(0x234);else{if(_0x3dc1c0<0.2)drugInventory[selectedDrug][_0x116254(0x4b6)]+=0x1,_0x50a245=_0x116254(0x251)+selectedDrug+_0x116254(0x419)+selectedDrug;else{if(_0x3dc1c0<0.5){const _0x340b48=Object[_0x116254(0x386)](drugInventory)[_0x116254(0x367)](_0x160e2d=>drugInventory[_0x160e2d][_0x116254(0x3c7)]===0x1),_0x570c2a=[];for(let _0x4030fc=0x0;_0x4030fc<0x3;_0x4030fc++){const _0x43be2b=_0x340b48[Math[_0x116254(0x265)](Math[_0x116254(0x207)]()*_0x340b48[_0x116254(0x1f0)])];drugInventory[_0x43be2b][_0x116254(0x4b6)]+=0x1,_0x570c2a[_0x116254(0x3e2)](_0x43be2b);}_0x50a245='你使用3个'+selectedDrug+'成功炼制出了3个随机紫色品阶药品：'+_0x570c2a[_0x116254(0x450)](',\x20');}else{const _0x147a70=Object[_0x116254(0x386)](drugInventory)[_0x116254(0x367)](_0x5eae0a=>drugInventory[_0x5eae0a][_0x116254(0x3c7)]===0x0),_0x3a2bea=[];for(let _0x1057d3=0x0;_0x1057d3<0x2;_0x1057d3++){const _0x311da0=_0x147a70[Math[_0x116254(0x265)](Math[_0x116254(0x207)]()*_0x147a70[_0x116254(0x1f0)])];drugInventory[_0x311da0]['quantity']+=0x1,_0x3a2bea[_0x116254(0x3e2)](_0x311da0);}_0x50a245=_0x116254(0x251)+selectedDrug+_0x116254(0x2f7)+_0x3a2bea['join'](',\x20');}}}document[_0x116254(0x4e9)](_0x116254(0x591))['innerText']=_0x50a245;}else{const _0x47dd61=0x5;if(_0x12a8cb[_0x116254(0x4b6)]<_0x47dd61){showInfoBox(_0x116254(0x58e));return;}_0x12a8cb['quantity']-=_0x47dd61;const _0x172a41=_0x2ee81a-0x1,_0x422522=Object[_0x116254(0x386)](drugInventory)[_0x116254(0x367)](_0x37c4f6=>drugInventory[_0x37c4f6][_0x116254(0x3c7)]===_0x172a41),_0x7837dd=_0x422522[Math['floor'](Math[_0x116254(0x207)]()*_0x422522[_0x116254(0x1f0)])];drugInventory[_0x7837dd]['quantity']+=0x1,document[_0x116254(0x4e9)](_0x116254(0x591))[_0x116254(0x341)]=_0x116254(0x394)+selectedDrug+_0x116254(0x363)+_0x7837dd;}updateDrugGrid();}document[_0x38c76e(0x4e9)]('battle-spirit-button')['addEventListener'](_0x38c76e(0x54e),()=>{const _0x225dcb=_0x38c76e;if(battleState['player'][_0x225dcb(0x34b)]){performAttack(_0x225dcb(0x1f6));return;}!awakened?showInfoBox('\x0a1.宠物在觉醒后可以开启战斗精灵\x20\x0a2.经过精心培养的精灵可以大幅增加战斗属性\x0a3.精灵会提供额外的战场胜利物资\x0a4.战斗中精灵有概率施加恢复、控制或强化\x20\x0a5.精灵等级和增幅越高，增益越明显'):(document['getElementById']('battle-spirit-modal')[_0x225dcb(0x352)][_0x225dcb(0x3f1)]=_0x225dcb(0x219),updateSpiritDisplay());});function checkAwakening(){const _0x52566b=_0x38c76e;awakened?document[_0x52566b(0x4e9)](_0x52566b(0x4f7))[_0x52566b(0x352)]['display']=_0x52566b(0x219):document['getElementById'](_0x52566b(0x4f7))[_0x52566b(0x352)][_0x52566b(0x3f1)]=_0x52566b(0x219);}function getBaseSpiritAttributes(){return!awakened?{'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0}:{'health':0x7,'mana':0x6,'physicalAttack':0x2,'physicalDefense':2.1,'magicAttack':1.9,'magicDefense':2.05,'speed':0x1};}function displayInBottle(){const _0x6c1563=_0x38c76e,_0x566926=getCurrentSpiritAttributes(),_0x5cdaaa=new Map([[_0x6c1563(0x5ad),'生命值'],[_0x6c1563(0x2b4),'法术攻击'],[_0x6c1563(0x4d3),_0x6c1563(0x468)],[_0x6c1563(0x5a5),_0x6c1563(0x24d)],[_0x6c1563(0x3f0),'物理攻击'],['physicalDefense',_0x6c1563(0x3fa)],['speed','速度']]);let _0x8d0f5c='';for(const [_0x2e87b7,_0x294c57]of Object[_0x6c1563(0x3c2)](_0x566926)){const _0x4de0e4=_0x5cdaaa['get'](_0x2e87b7)||_0x2e87b7;_0x8d0f5c+=_0x4de0e4+':\x20'+_0x294c57+'\x0a';}showInfoBox(_0x6c1563(0x51c)+spiritLevel+_0x6c1563(0x2f3)+spiritMultiplier+_0x6c1563(0x4ae)+_0x8d0f5c);}function updateSpiritDisplay(){const _0x214dcb=_0x38c76e,_0x4335ea=getCurrentSpiritAttributes();document['getElementById'](_0x214dcb(0x413))[_0x214dcb(0x341)]=spiritLevel,document[_0x214dcb(0x4e9)](_0x214dcb(0x4a2))['innerText']=Math[_0x214dcb(0x53b)](spiritMultiplier*0x64)+'%',document['getElementById']('spirit-health')[_0x214dcb(0x341)]=_0x4335ea[_0x214dcb(0x5ad)],document[_0x214dcb(0x4e9)](_0x214dcb(0x216))[_0x214dcb(0x341)]=_0x4335ea['mana'],document['getElementById']('spirit-physical-attack')[_0x214dcb(0x341)]=_0x4335ea[_0x214dcb(0x3f0)],document[_0x214dcb(0x4e9)](_0x214dcb(0x3d1))[_0x214dcb(0x341)]=_0x4335ea[_0x214dcb(0x263)],document['getElementById'](_0x214dcb(0x473))[_0x214dcb(0x341)]=_0x4335ea[_0x214dcb(0x2b4)],document['getElementById'](_0x214dcb(0x3e0))[_0x214dcb(0x341)]=_0x4335ea[_0x214dcb(0x4d3)],document[_0x214dcb(0x4e9)](_0x214dcb(0x585))[_0x214dcb(0x341)]=_0x4335ea[_0x214dcb(0x495)];}document[_0x38c76e(0x4e9)](_0x38c76e(0x403))[_0x38c76e(0x36c)]('click',()=>{const _0x12452c=_0x38c76e;document[_0x12452c(0x4e9)](_0x12452c(0x475))[_0x12452c(0x352)][_0x12452c(0x3f1)]=_0x12452c(0x2c0);}),document[_0x38c76e(0x4e9)]('level-up-spirit')[_0x38c76e(0x36c)](_0x38c76e(0x54e),()=>{const _0xe9a6b=_0x38c76e;if(spiritLevel>=0x64){showMessage('战斗精灵已达到最大等级！','error');return;}if(useItem(_0xe9a6b(0x4ed),0x1)){let _0x3c93e8,_0x499016=0x0,_0x53d22c;if(spiritLevel<=0x14)_0x3c93e8=0x1,_0x53d22c=0x1;else{if(spiritLevel<=0x1e)_0x3c93e8=0.95,_0x53d22c=0x15;else{if(spiritLevel<=0x28)_0x3c93e8=0.9,_0x499016=0x1,_0x53d22c=0x1f;else{if(spiritLevel<=0x32)_0x3c93e8=0.85,_0x499016=0x1,_0x53d22c=0x29;else{if(spiritLevel<=0x3c)_0x3c93e8=0.8,_0x499016=0x1,_0x53d22c=0x33;else{if(spiritLevel<=0x46)_0x3c93e8=0.85,_0x499016=0x2,_0x53d22c=0x3d;else{if(spiritLevel<=0x50)_0x3c93e8=0.8,_0x499016=0x2,_0x53d22c=0x47;else{if(spiritLevel<=0x5a)_0x3c93e8=0.75,_0x499016=0x2,_0x53d22c=0x51;else spiritLevel<=0x63&&(_0x3c93e8=0.7,_0x499016=0x2,_0x53d22c=0x5b);}}}}}}}const _0x3c9415=Math[_0xe9a6b(0x207)]();_0x3c9415<_0x3c93e8?(spiritLevel+=0x1,updateSpiritDisplay(),updatePetInfo()):(_0x499016>0x0?(spiritLevel=Math[_0xe9a6b(0x275)](_0x53d22c,spiritLevel-_0x499016),showMessage('洗练失败，等级下降了\x20'+_0x499016+_0xe9a6b(0x52f)+_0x53d22c+_0xe9a6b(0x398),_0xe9a6b(0x1b6))):showMessage(_0xe9a6b(0x39e),'error'),updateSpiritDisplay(),updatePetInfo());}else showMessage(_0xe9a6b(0x1be),_0xe9a6b(0x1b6));}),document[_0x38c76e(0x4e9)](_0x38c76e(0x37f))[_0x38c76e(0x36c)]('click',()=>{const _0x26a2ac=_0x38c76e,_0xb608f6=parseInt(prompt(_0x26a2ac(0x4c0)),0xa);if(isNaN(_0xb608f6)||_0xb608f6<=spiritLevel||_0xb608f6>maxSpiritLevel){showMessage('无效的目标等级！',_0x26a2ac(0x1b6));return;}let _0x4f25cc=spiritLevel,_0x1cc5a9=0x0;while(spiritLevel<_0xb608f6&&useItem(_0x26a2ac(0x4ed),0x1)){_0x1cc5a9++;let _0x1f1dd9,_0x40e614=0x0,_0x3b8a8a;if(spiritLevel<=0x14)_0x1f1dd9=0x1,_0x3b8a8a=0x1;else{if(spiritLevel<=0x1e)_0x1f1dd9=0.95,_0x3b8a8a=0x15;else{if(spiritLevel<=0x28)_0x1f1dd9=0.9,_0x40e614=0x1,_0x3b8a8a=0x1f;else{if(spiritLevel<=0x32)_0x1f1dd9=0.85,_0x40e614=0x1,_0x3b8a8a=0x29;else{if(spiritLevel<=0x3c)_0x1f1dd9=0.8,_0x40e614=0x1,_0x3b8a8a=0x33;else{if(spiritLevel<=0x46)_0x1f1dd9=0.85,_0x40e614=0x2,_0x3b8a8a=0x3d;else{if(spiritLevel<=0x50)_0x1f1dd9=0.8,_0x40e614=0x2,_0x3b8a8a=0x47;else{if(spiritLevel<=0x5a)_0x1f1dd9=0.75,_0x40e614=0x2,_0x3b8a8a=0x51;else spiritLevel<=0x63&&(_0x1f1dd9=0.7,_0x40e614=0x2,_0x3b8a8a=0x5b);}}}}}}}const _0x1706aa=Math[_0x26a2ac(0x207)]();_0x1706aa<_0x1f1dd9?(spiritLevel+=0x1,updateSpiritDisplay(),updatePetInfo()):(_0x40e614>0x0&&(spiritLevel=Math[_0x26a2ac(0x275)](_0x3b8a8a,spiritLevel-_0x40e614)),updateSpiritDisplay(),updatePetInfo());}showMessage('您耗费了\x20'+_0x1cc5a9+_0x26a2ac(0x438)+spiritLevel+_0x26a2ac(0x4af),_0x26a2ac(0x3b3));});function getCurrentSpiritAttributes(){const _0x4d397b=_0x38c76e,_0x350ef4=getBaseSpiritAttributes();return{'health':Math[_0x4d397b(0x265)](_0x350ef4[_0x4d397b(0x5ad)]*Math[_0x4d397b(0x4f3)](1.08,spiritLevel)*spiritMultiplier),'mana':Math[_0x4d397b(0x265)](_0x350ef4['mana']*Math[_0x4d397b(0x4f3)](1.08,spiritLevel)*spiritMultiplier),'physicalAttack':Math[_0x4d397b(0x265)](_0x350ef4[_0x4d397b(0x3f0)]*Math[_0x4d397b(0x4f3)](1.07,spiritLevel)*spiritMultiplier),'physicalDefense':Math[_0x4d397b(0x265)](_0x350ef4[_0x4d397b(0x263)]*Math[_0x4d397b(0x4f3)](1.08,spiritLevel)*spiritMultiplier),'magicAttack':Math[_0x4d397b(0x265)](_0x350ef4['magicAttack']*Math['pow'](1.07,spiritLevel)*spiritMultiplier),'magicDefense':Math['floor'](_0x350ef4['magicDefense']*Math['pow'](1.08,spiritLevel)*spiritMultiplier),'speed':Math['floor'](_0x350ef4[_0x4d397b(0x495)]*Math[_0x4d397b(0x4f3)](1.07,spiritLevel)*spiritMultiplier)};}document[_0x38c76e(0x4e9)](_0x38c76e(0x39f))[_0x38c76e(0x36c)]('click',()=>{const _0x29cbaa=_0x38c76e;if(useItem(_0x29cbaa(0x3ad),0x1)){let _0x54827d;const _0x2b9f59=Math[_0x29cbaa(0x207)]();if(_0x2b9f59<0.95)_0x54827d=(Math[_0x29cbaa(0x207)]()*(0x3-0.01)+0.01)[_0x29cbaa(0x4ac)](0x2);else{if(_0x2b9f59<0.98)_0x54827d=(Math[_0x29cbaa(0x207)]()*(3.99-3.01)+3.01)[_0x29cbaa(0x4ac)](0x2);else _0x2b9f59<0.99?_0x54827d=(Math[_0x29cbaa(0x207)]()*(4.1-0x4)+0x4)['toFixed'](0x2):_0x54827d=(Math['random']()*(4.15-4.11)+4.11)['toFixed'](0x2);}if(parseFloat(_0x54827d)>3.9){const _0x383539='您的精灵增幅已经到了一个比较高的层次，确定继续吗？';showInfoBox(_0x383539,()=>{spiritMultiplier=parseFloat(_0x54827d),updateSpiritDisplay(),updatePetInfo();});}else spiritMultiplier=parseFloat(_0x54827d),updateSpiritDisplay(),updatePetInfo();}else showInfoBox('您的精灵觉醒石不足！');});function handleSpiritHeal(){const _0x133575=_0x38c76e;if(!awakened)return;if(summonEnemy)return;const _0xb0a2de=0.01,_0x548193=_0xb0a2de+spiritMultiplier/0x190,_0xac6c2f=Math[_0x133575(0x53b)](_0x548193*0x64);if(Math[_0x133575(0x207)]()*0x64<_0xac6c2f){const _0x33df43=getCurrentSpiritAttributes(),_0x31f4d3=Math[_0x133575(0x53b)]((Math[_0x133575(0x207)]()*(1.8-0.9)+0.9)*_0x33df43[_0x133575(0x2b4)]*spiritMultiplier*2.5);battleState[_0x133575(0x498)]['health']=Math[_0x133575(0x206)](battleState[_0x133575(0x498)][_0x133575(0x5ad)]+_0x31f4d3,maxHealth),logBattleEvent(_0x133575(0x2a1)+_0x31f4d3+_0x133575(0x4a6),_0x133575(0x4db)),updateDamageValue(-_0x31f4d3,!![],'extra-damage'),updateUI();}}function handleSpiritPower(){const _0xbb4c69=_0x38c76e;if(!awakened)return;if(summonEnemy)return;const _0x3e7bf6=0.01,_0x2f1b78=_0x3e7bf6+spiritMultiplier/0x190,_0x57af26=Math['round'](_0x2f1b78*0x64);if(Math[_0xbb4c69(0x207)]()*0x64<_0x57af26&&!spiritPowerActive){spiritPowerActive=!![],battleState[_0xbb4c69(0x498)][_0xbb4c69(0x39b)]=!![];const _0x231a3d=getCurrentSpiritAttributes(),_0x219560={'health':Math['round'](_0x231a3d[_0xbb4c69(0x5ad)]/0x2),'mana':Math['round'](_0x231a3d[_0xbb4c69(0x5a5)]/1.5),'physicalAttack':Math['round'](_0x231a3d[_0xbb4c69(0x3f0)]/1.5),'physicalDefense':Math[_0xbb4c69(0x53b)](_0x231a3d[_0xbb4c69(0x263)]/1.2),'magicAttack':Math['round'](_0x231a3d[_0xbb4c69(0x2b4)]/1.5),'magicDefense':Math[_0xbb4c69(0x53b)](_0x231a3d['magicDefense']/1.3),'speed':Math['round'](_0x231a3d['speed']/1.3)};Object[_0xbb4c69(0x386)](_0x219560)[_0xbb4c69(0x284)](_0x4327b6=>{battleAttributes[_0x4327b6]+=_0x219560[_0x4327b6];}),logBattleEvent(_0xbb4c69(0x354),_0xbb4c69(0x4db)),updateUI(),setTimeout(()=>{const _0x21d3f0=_0xbb4c69;Object[_0x21d3f0(0x386)](_0x219560)[_0x21d3f0(0x284)](_0x10aa19=>{battleAttributes[_0x10aa19]-=_0x219560[_0x10aa19];}),spiritPowerActive=![],battleState[_0x21d3f0(0x498)][_0x21d3f0(0x39b)]=![],updateUI();},0x1388);}}function handleSpiritAttack(){const _0x5d20bc=_0x38c76e;if(!awakened)return;if(summonEnemy)return;const _0x4ac78b=0.01,_0x1d4c07=_0x4ac78b+spiritMultiplier/0x190,_0x2bdadf=Math['round'](_0x1d4c07*0x64);if(Math['random']()*0x64<_0x2bdadf){const _0xaa364d=getCurrentSpiritAttributes(),_0x1988f9=Math[_0x5d20bc(0x53b)]((Math['random']()*(2.4-1.8)+1.8)*_0xaa364d[_0x5d20bc(0x2b4)]*spiritMultiplier*battleState[_0x5d20bc(0x498)][_0x5d20bc(0x4e8)]);battleState[_0x5d20bc(0x25b)][_0x5d20bc(0x5ad)]=Math[_0x5d20bc(0x275)](battleState[_0x5d20bc(0x25b)][_0x5d20bc(0x5ad)]-_0x1988f9,0x0),logBattleEvent(_0x5d20bc(0x220)+_0x1988f9+_0x5d20bc(0x43c),'pink');if(battleState[_0x5d20bc(0x25b)][_0x5d20bc(0x5ad)]<=0x0){showNextBattlePrompt(!![]);return;}Math[_0x5d20bc(0x207)]()<0.4+_0x1d4c07&&handleSleep(),updateUI();}}document[_0x38c76e(0x4e9)](_0x38c76e(0x463))[_0x38c76e(0x36c)](_0x38c76e(0x54e),handleAscensionButtonClick);function handleAscensionButtonClick(){const _0x1ae288=_0x38c76e;if(!ascend){showInfoBox(_0x1ae288(0x2ea));return;}ascensionEnabled?ascensionSkillDescription():useItem(_0x1ae288(0x1e7),0x1)?(showInfoBox('飞升之术增益已启用！'),refreshAscensionSkill(),applyAscensionBonus(),ascensionEnabled=!![]):showInfoBox(_0x1ae288(0x50b)),updateAscensionButton();}document[_0x38c76e(0x4e9)](_0x38c76e(0x342))[_0x38c76e(0x36c)](_0x38c76e(0x54e),()=>{const _0x24821f=_0x38c76e;document[_0x24821f(0x4e9)](_0x24821f(0x25d))[_0x24821f(0x352)][_0x24821f(0x3f1)]=_0x24821f(0x2c0);});function checkAscensionEnabled(){if(!ascensionEnabled)return showInfoBox('请先开启飞升之术增益！'),![];return!![];}function updateAscensionButton(){const _0x1f2fba=_0x38c76e,_0x40925d=document[_0x1f2fba(0x4e9)](_0x1f2fba(0x463));ascensionEnabled?(_0x40925d['innerText']=_0x1f2fba(0x322),_0x40925d[_0x1f2fba(0x352)][_0x1f2fba(0x3f6)]='darkred',_0x40925d[_0x1f2fba(0x3e5)](_0x1f2fba(0x54e),handleAscensionButtonClick),_0x40925d[_0x1f2fba(0x36c)](_0x1f2fba(0x54e),ascensionSkillDescription)):(_0x40925d[_0x1f2fba(0x341)]=_0x1f2fba(0x1e0),_0x40925d[_0x1f2fba(0x352)][_0x1f2fba(0x3f6)]='',_0x40925d[_0x1f2fba(0x3e5)](_0x1f2fba(0x54e),ascensionSkillDescription),_0x40925d[_0x1f2fba(0x36c)](_0x1f2fba(0x54e),handleAscensionButtonClick));}function ascensionSkillDescription(){const _0x43a27d=_0x38c76e;let _0x3b076d=[],_0x49043a=0x1;for(const _0x296c9e in ascensionSkills){ascensionSkills[_0x43a27d(0x59a)](_0x296c9e)&&ascensionSkills[_0x296c9e][_0x43a27d(0x284)](_0x4d748e=>{const _0x344ef6=_0x43a27d;_0x3b076d[_0x344ef6(0x3e2)](_0x49043a+'.\x20'+_0x4d748e[_0x344ef6(0x33b)]+'：'+_0x4d748e[_0x344ef6(0x4be)](0x1)),_0x49043a++;});}const _0x1672de=_0x3b076d[_0x43a27d(0x450)]('\x0a');showInfoBox(_0x1672de);}document[_0x38c76e(0x4e9)]('ascension-skill-button')[_0x38c76e(0x36c)](_0x38c76e(0x54e),()=>{const _0x365bc8=_0x38c76e;if(!petAscended)showInfoBox(_0x365bc8(0x374));else{if(battleState[_0x365bc8(0x498)][_0x365bc8(0x34b)]){performAttack(_0x365bc8(0x1f6));return;}else document['getElementById'](_0x365bc8(0x25d))[_0x365bc8(0x352)][_0x365bc8(0x3f1)]=_0x365bc8(0x219),updateAscensionDisplay();}}),document['getElementById'](_0x38c76e(0x1f4))[_0x38c76e(0x36c)]('click',()=>{const _0x51f34f=_0x38c76e;if(!checkAscensionEnabled())return;useItem('heartStone',0x1)?(refreshAscensionSkill(),applyAscensionBonus()):showInfoBox(_0x51f34f(0x50b));});function refreshAscensionSkill(){const _0x393099=_0x38c76e;let _0x588af8;do{const _0x597fe1=[...ascensionSkills[_0x393099(0x1db)],...ascensionSkills[_0x393099(0x4c5)],...ascensionSkills['settlement']];_0x588af8=_0x597fe1[Math['floor'](Math[_0x393099(0x207)]()*_0x597fe1[_0x393099(0x1f0)])];}while(_0x588af8[_0x393099(0x33b)]===secondAscensionSkill[_0x393099(0x33b)]||_0x588af8[_0x393099(0x33b)]==='未开启'||_0x588af8[_0x393099(0x33b)]==='被封印的技能');ascensionSkill={..._0x588af8,'level':0x1},updateAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects(),updatePetInfo();}document['getElementById'](_0x38c76e(0x202))[_0x38c76e(0x36c)](_0x38c76e(0x54e),()=>{const _0x397b38=_0x38c76e;if(!checkAscensionEnabled())return;useItem(_0x397b38(0x49b),0xa)?levelUpAscensionSkill():showInfoBox('每次提升技能需要消耗10个天地灵气，你的天地灵气数量不足！');});function levelUpAscensionSkill(){const _0x1e203d=_0x38c76e;ascensionSkill[_0x1e203d(0x533)]<0x14?(ascensionSkill[_0x1e203d(0x533)]+=0x1,updateAscensionDisplay(),applyAscensionBonus()):showInfoBox(_0x1e203d(0x481));}function updateAscensionDisplay(){const _0xce95b8=_0x38c76e;document['getElementById'](_0xce95b8(0x29c))[_0xce95b8(0x49a)]='https://pic.imgdb.cn/item/666aa7b6d9c307b7e9495e97.png',document[_0xce95b8(0x4e9)](_0xce95b8(0x21c))[_0xce95b8(0x341)]=ascensionSkill[_0xce95b8(0x33b)],document[_0xce95b8(0x4e9)]('ascension-level')[_0xce95b8(0x341)]=_0xce95b8(0x4ba)+ascensionSkill[_0xce95b8(0x533)],document['getElementById'](_0xce95b8(0x485))[_0xce95b8(0x341)]='';const _0x45a9c6=ascensionSkills['combat']['find'](_0x2450a7=>_0x2450a7[_0xce95b8(0x33b)]===ascensionSkill[_0xce95b8(0x33b)])||ascensionSkills['attribute'][_0xce95b8(0x2c5)](_0x5e759a=>_0x5e759a[_0xce95b8(0x33b)]===ascensionSkill[_0xce95b8(0x33b)])||ascensionSkills[_0xce95b8(0x37c)][_0xce95b8(0x2c5)](_0x12e9de=>_0x12e9de[_0xce95b8(0x33b)]===ascensionSkill[_0xce95b8(0x33b)]);_0x45a9c6&&(document['getElementById'](_0xce95b8(0x485))[_0xce95b8(0x341)]=_0x45a9c6['effect'](ascensionSkill[_0xce95b8(0x533)]));}function checkSecondAscensionEnabled(){const _0x47679c=_0x38c76e,_0x127220=document[_0x47679c(0x4e9)](_0x47679c(0x3d3));if(!reenableAscension||!ascensionEnabled){const _0x5bb6b6=secondAscensionSkill?secondAscensionSkill['name']:null;return _0x127220[_0x47679c(0x352)][_0x47679c(0x3f1)]='none',_0x5bb6b6?console[_0x47679c(0x397)]('第二个飞升技能'+_0x5bb6b6+_0x47679c(0x1c1)):console[_0x47679c(0x397)](_0x47679c(0x1e2)),![];}else return _0x127220[_0x47679c(0x352)][_0x47679c(0x3f1)]=_0x47679c(0x219),!![];}document['getElementById'](_0x38c76e(0x2df))[_0x38c76e(0x36c)](_0x38c76e(0x54e),()=>{const _0x20fd64=_0x38c76e;if(!ascensionSkill[_0x20fd64(0x33b)]&&!ascensionEnabled){showInfoBox(_0x20fd64(0x20d));return;}const _0x33aa6b=document['getElementById']('second-ascension-skill');_0x33aa6b[_0x20fd64(0x352)][_0x20fd64(0x3f1)]==='none'?confirm(_0x20fd64(0x3d5))&&(useItem('ascensionStone',0xa)?(_0x33aa6b[_0x20fd64(0x352)][_0x20fd64(0x3f1)]='block',refreshSecondAscensionSkill(),reenableAscension=!![]):showInfoBox(_0x20fd64(0x36d))):showInfoBox('您已经开启过第二个飞升之术了！'),checkSecondAscensionEnabled();}),document[_0x38c76e(0x4e9)](_0x38c76e(0x212))['addEventListener'](_0x38c76e(0x54e),()=>{const _0x320a50=_0x38c76e;if(!checkSecondAscensionEnabled())return;useItem(_0x320a50(0x1e7),0x1)?refreshSecondAscensionSkill():showInfoBox('您的心鉴之石不足！');});function refreshSecondAscensionSkill(){const _0x31ddd0=_0x38c76e;let _0x298fc0;do{const _0xd8e70=[...ascensionSkills['attribute'],...ascensionSkills[_0x31ddd0(0x4c5)],...ascensionSkills[_0x31ddd0(0x37c)]];_0x298fc0=_0xd8e70[Math[_0x31ddd0(0x265)](Math[_0x31ddd0(0x207)]()*_0xd8e70[_0x31ddd0(0x1f0)])];}while(_0x298fc0[_0x31ddd0(0x33b)]===ascensionSkill[_0x31ddd0(0x33b)]||_0x298fc0[_0x31ddd0(0x33b)]===_0x31ddd0(0x564)||_0x298fc0[_0x31ddd0(0x33b)]==='被封印的技能');secondAscensionSkill={..._0x298fc0,'level':0x1},updateSecondAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects(),updatePetInfo();}document['getElementById'](_0x38c76e(0x2f2))[_0x38c76e(0x36c)](_0x38c76e(0x54e),()=>{const _0x1e4c79=_0x38c76e;if(!checkSecondAscensionEnabled())return;useItem(_0x1e4c79(0x49b),0xa)?levelUpSecondAscensionSkill():showInfoBox('每次提升技能需要消耗10个天地灵气，你的天地灵气数量不足！');});function levelUpSecondAscensionSkill(){const _0x4d3e91=_0x38c76e;secondAscensionSkill[_0x4d3e91(0x533)]<0x14?(secondAscensionSkill[_0x4d3e91(0x533)]+=0x1,updateSecondAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects()):showInfoBox(_0x4d3e91(0x481));}function updateSecondAscensionSkill(){updateSecondAscensionDisplay(),applyAscensionBonus(),applyAscensionEffects(),updatePetInfo();}function updateSecondAscensionDisplay(){const _0x583449=_0x38c76e;if(!checkSecondAscensionEnabled())return;const _0x19a311=document['getElementById'](_0x583449(0x3d3));document[_0x583449(0x4e9)](_0x583449(0x556))[_0x583449(0x49a)]=_0x583449(0x2e5),document['getElementById']('second-ascension-name')[_0x583449(0x341)]=secondAscensionSkill[_0x583449(0x33b)],document[_0x583449(0x4e9)]('second-ascension-level')[_0x583449(0x341)]=_0x583449(0x4ba)+secondAscensionSkill[_0x583449(0x533)];const _0x30f829=ascensionSkills['combat'][_0x583449(0x2c5)](_0x570202=>_0x570202[_0x583449(0x33b)]===secondAscensionSkill[_0x583449(0x33b)])||ascensionSkills[_0x583449(0x1db)][_0x583449(0x2c5)](_0x56ddce=>_0x56ddce[_0x583449(0x33b)]===secondAscensionSkill['name'])||ascensionSkills[_0x583449(0x37c)][_0x583449(0x2c5)](_0x53f3bc=>_0x53f3bc[_0x583449(0x33b)]===secondAscensionSkill[_0x583449(0x33b)]);_0x30f829&&(document[_0x583449(0x4e9)](_0x583449(0x36b))['innerText']=_0x30f829[_0x583449(0x4be)](secondAscensionSkill[_0x583449(0x533)]));}function applyAscensionBonus(){const _0x5ea8cb=_0x38c76e;let _0x10d898={'health':0x0,'mana':0x0,'physicalAttack':0x0,'physicalDefense':0x0,'magicAttack':0x0,'magicDefense':0x0,'speed':0x0};_0x10d898=applySingleAscensionBonus(ascensionSkill,_0x10d898),secondAscensionSkill[_0x5ea8cb(0x33b)]&&checkSecondAscensionEnabled()&&(_0x10d898=applySingleAscensionBonus(secondAscensionSkill,_0x10d898)),ascensionAttributes=_0x10d898,updatePetInfo();}function applySingleAscensionBonus(_0x59b0c1,_0x6e0048){const _0x112458=_0x38c76e;switch(_0x59b0c1['name']){case _0x112458(0x22f):_0x6e0048['physicalAttack']+=_0x59b0c1[_0x112458(0x37b)]+_0x59b0c1[_0x112458(0x358)](_0x59b0c1['level']);break;case _0x112458(0x2e7):_0x6e0048[_0x112458(0x5ad)]+=_0x59b0c1['baseValue']+_0x59b0c1['increment'](_0x59b0c1[_0x112458(0x533)]),_0x6e0048[_0x112458(0x5a5)]+=0x2710+_0x59b0c1[_0x112458(0x358)](_0x59b0c1[_0x112458(0x533)]);break;case _0x112458(0x248):_0x6e0048[_0x112458(0x495)]+=_0x59b0c1[_0x112458(0x37b)]+_0x59b0c1[_0x112458(0x358)](_0x59b0c1[_0x112458(0x533)]),_0x6e0048[_0x112458(0x2b4)]+=0xbb8+_0x59b0c1[_0x112458(0x358)](_0x59b0c1[_0x112458(0x533)]);break;case _0x112458(0x2b8):_0x6e0048[_0x112458(0x263)]+=_0x59b0c1[_0x112458(0x37b)]+_0x59b0c1[_0x112458(0x358)](_0x59b0c1[_0x112458(0x533)]),_0x6e0048[_0x112458(0x4d3)]+=0x186a0+_0x59b0c1['increment'](_0x59b0c1[_0x112458(0x533)]);break;}return _0x6e0048;}function applyAscensionEffects(){const _0x4dd9aa=_0x38c76e;resetBattleStateEffects(),applySingleAscensionEffect(ascensionSkill),secondAscensionSkill[_0x4dd9aa(0x33b)]&&checkSecondAscensionEnabled()&&applySingleAscensionEffect(secondAscensionSkill);}function applySingleAscensionEffect(_0x42cc18){const _0x2d5d23=_0x38c76e;switch(_0x42cc18['name']){case _0x2d5d23(0x211):const _0x3dd8a2=(_0x42cc18[_0x2d5d23(0x37b)]+_0x42cc18[_0x2d5d23(0x358)](_0x42cc18[_0x2d5d23(0x533)]))/0x64,_0x5548cf=Math['floor'](maxHealth*_0x3dd8a2);battleAttributes['health']=Math[_0x2d5d23(0x206)](maxHealth,battleAttributes['health']+_0x5548cf),logBattleEvent(_0x2d5d23(0x35b)+_0x5548cf+_0x2d5d23(0x1c2),_0x2d5d23(0x4fe)),updateUI();break;case _0x2d5d23(0x1d3):battleState['player']['divineProtectionChance']=0.5,battleState[_0x2d5d23(0x498)][_0x2d5d23(0x232)]=0x5+_0x42cc18[_0x2d5d23(0x358)](_0x42cc18[_0x2d5d23(0x533)]);break;case _0x2d5d23(0x1bc):battleState['player'][_0x2d5d23(0x249)]=_0x42cc18['increment'](_0x42cc18[_0x2d5d23(0x533)])/0x64;break;case _0x2d5d23(0x478):battleState[_0x2d5d23(0x498)][_0x2d5d23(0x56e)]=_0x42cc18['increment'](_0x42cc18[_0x2d5d23(0x533)])/0x64,battleState[_0x2d5d23(0x498)]['extraCritDamageMultiplier']=0xa;break;case _0x2d5d23(0x578):battleState[_0x2d5d23(0x498)][_0x2d5d23(0x4d1)]=_0x42cc18['increment'](_0x42cc18[_0x2d5d23(0x533)])/0x64;break;case _0x2d5d23(0x30c):battleState[_0x2d5d23(0x498)][_0x2d5d23(0x3da)]=_0x42cc18[_0x2d5d23(0x358)](_0x42cc18[_0x2d5d23(0x533)])/0x64;break;case'铜墙铁壁':battleState[_0x2d5d23(0x498)]['damageReductionPercentage']+=_0x42cc18[_0x2d5d23(0x37b)]+_0x42cc18[_0x2d5d23(0x358)](_0x42cc18[_0x2d5d23(0x533)]);break;case'法术精通':battleState['player'][_0x2d5d23(0x23b)]=_0x42cc18[_0x2d5d23(0x37b)]+_0x42cc18[_0x2d5d23(0x358)](_0x42cc18['level']);break;case _0x2d5d23(0x561):battleState['player']['goldBonus']=_0x42cc18['increment'](_0x42cc18[_0x2d5d23(0x533)]);break;case _0x2d5d23(0x1dd):battleState[_0x2d5d23(0x498)]['noGoldPenalty']=!![],battleState['player'][_0x2d5d23(0x380)]=_0x42cc18[_0x2d5d23(0x358)](_0x42cc18[_0x2d5d23(0x533)]);break;case'焉知非福':battleState['player'][_0x2d5d23(0x5a7)]=_0x42cc18['increment'](_0x42cc18['level']);break;case _0x2d5d23(0x4a0):battleState[_0x2d5d23(0x498)][_0x2d5d23(0x295)]=_0x42cc18['increment'](_0x42cc18[_0x2d5d23(0x533)]);break;case _0x2d5d23(0x4cd):battleState['player']['expBonus']=_0x42cc18[_0x2d5d23(0x358)](_0x42cc18[_0x2d5d23(0x533)]);break;}}function resetBattleStateEffects(){const _0x7d4f90=_0x38c76e;battleState[_0x7d4f90(0x498)][_0x7d4f90(0x23b)]=0x0,battleState[_0x7d4f90(0x498)]['divineProtectionChance']=0x0,battleState[_0x7d4f90(0x498)]['reflectPercentage']=0x0,battleState[_0x7d4f90(0x498)][_0x7d4f90(0x4d1)]=0x0,battleState[_0x7d4f90(0x498)][_0x7d4f90(0x3da)]=0x0,battleState[_0x7d4f90(0x498)]['extraCritDamageChance']=0x0,battleState[_0x7d4f90(0x498)][_0x7d4f90(0x1d2)]=0x0,battleState[_0x7d4f90(0x498)][_0x7d4f90(0x249)]=0x0,battleState['player'][_0x7d4f90(0x52c)]=0x0,battleState['player']['goldBonus']=0x0,battleState[_0x7d4f90(0x498)]['noGoldPenalty']=![],battleState[_0x7d4f90(0x498)][_0x7d4f90(0x380)]=0x0,battleState[_0x7d4f90(0x498)][_0x7d4f90(0x5a7)]=0x0,battleState[_0x7d4f90(0x498)][_0x7d4f90(0x295)]=0x0,battleState[_0x7d4f90(0x498)][_0x7d4f90(0x3b6)]=0x0;}function enemyInfo(){const _0xed67dd=_0x38c76e,_0x625db7=document['createElement'](_0xed67dd(0x3a8));_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x25f)]='fixed',_0x625db7['style']['top']=_0xed67dd(0x319),_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x34c)]=_0xed67dd(0x319),_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x258)]=_0xed67dd(0x27c),_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x3f6)]=_0xed67dd(0x418),_0x625db7[_0xed67dd(0x352)]['color']='white',_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x38d)]=_0xed67dd(0x281),_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x4fd)]=_0xed67dd(0x312),_0x625db7['style']['borderRadius']=_0xed67dd(0x23d),_0x625db7[_0xed67dd(0x352)]['zIndex']='9999',_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x30b)]='80%',_0x625db7['style'][_0xed67dd(0x231)]=_0xed67dd(0x317),_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x55e)]=_0xed67dd(0x44f),_0x625db7[_0xed67dd(0x352)][_0xed67dd(0x351)]='14px';const _0x3c32b5=document[_0xed67dd(0x598)](_0xed67dd(0x52d));_0x3c32b5[_0xed67dd(0x341)]='X',_0x3c32b5[_0xed67dd(0x352)][_0xed67dd(0x25f)]='absolute',_0x3c32b5[_0xed67dd(0x352)][_0xed67dd(0x5b0)]='10px',_0x3c32b5[_0xed67dd(0x352)]['right']=_0xed67dd(0x23d),_0x3c32b5['style'][_0xed67dd(0x3f6)]=_0xed67dd(0x385),_0x3c32b5['style'][_0xed67dd(0x51f)]=_0xed67dd(0x516),_0x3c32b5[_0xed67dd(0x352)][_0xed67dd(0x4fd)]=_0xed67dd(0x2c0),_0x3c32b5[_0xed67dd(0x352)][_0xed67dd(0x2a0)]=_0xed67dd(0x2e4),_0x3c32b5[_0xed67dd(0x36c)]('click',()=>{const _0x25b650=_0xed67dd;document[_0x25b650(0x2a4)]['removeChild'](_0x625db7);});const _0x278090=document[_0xed67dd(0x598)](_0xed67dd(0x3a8));_0x278090['style'][_0xed67dd(0x3f1)]='flex',_0x278090[_0xed67dd(0x352)]['alignItems']=_0xed67dd(0x549),_0x278090['style']['marginBottom']=_0xed67dd(0x281);const _0xe44e1b=enemyImages['find'](_0x1b7c5e=>_0x1b7c5e[_0xed67dd(0x33b)]===battleState['enemy'][_0xed67dd(0x33b)]),_0x333a2f=document[_0xed67dd(0x598)](_0xed67dd(0x55b));_0xe44e1b?_0x333a2f[_0xed67dd(0x49a)]=_0xe44e1b['url']:_0x333a2f[_0xed67dd(0x49a)]='https://pic.imgdb.cn/item/6678135ed9c307b7e9060dd6.gif';_0x333a2f[_0xed67dd(0x352)][_0xed67dd(0x30b)]='100px',_0x333a2f['style'][_0xed67dd(0x537)]=_0xed67dd(0x369),_0x333a2f['style'][_0xed67dd(0x4c3)]=_0xed67dd(0x281);const _0x32dd29=document[_0xed67dd(0x598)](_0xed67dd(0x3a8)),_0x45c2ca=document[_0xed67dd(0x598)]('h2');!summonEnemy?_0x45c2ca[_0xed67dd(0x341)]=_0xed67dd(0x38c):_0x45c2ca['innerText']=''+battleState[_0xed67dd(0x25b)]['name'];_0x45c2ca[_0xed67dd(0x352)][_0xed67dd(0x27a)]='0',_0x45c2ca['style'][_0xed67dd(0x595)]='10px';const _0xa94396=document[_0xed67dd(0x598)]('p');!summonEnemy?_0xa94396[_0xed67dd(0x341)]='潜藏于三界裂缝，以迷惑人心智、吸收人的恐惧而不断变强的邪祟。':_0xa94396[_0xed67dd(0x341)]=_0xed67dd(0x2a6);_0xa94396[_0xed67dd(0x352)][_0xed67dd(0x27a)]='0',_0x32dd29[_0xed67dd(0x46f)](_0x45c2ca),_0x32dd29[_0xed67dd(0x46f)](_0xa94396),_0x278090[_0xed67dd(0x46f)](_0x333a2f),_0x278090[_0xed67dd(0x46f)](_0x32dd29);const _0x11b682=document[_0xed67dd(0x598)]('hr');_0x11b682[_0xed67dd(0x352)][_0xed67dd(0x28a)]=_0xed67dd(0x516),_0x11b682[_0xed67dd(0x352)][_0xed67dd(0x27a)]=_0xed67dd(0x2e0);const _0x96f6fb=document[_0xed67dd(0x598)]('div');let _0x2bc123;!summonEnemy?_0x2bc123=[_0xed67dd(0x2e2),'正常形态下，它会交替使用物理和法术技能攻击妖怪。妖怪精通人心操纵之术,若玩家被施加\x22醉酒\x22、\x22摄魂\x22等效果，战局风险会极大提高。',_0xed67dd(0x366),'妖怪一共有150轮，通关后可以继续挑战无尽Boss“深渊之神”。这是一个强大的怪物，能力多变。']:_0x2bc123=['挑战召唤的敌人往往会获得更丰富的奖励',_0xed67dd(0x524),'挑战失败会受到惩罚。',_0xed67dd(0x543)];_0x2bc123[_0xed67dd(0x284)](_0x93d5ed=>{const _0x26aa4c=_0xed67dd,_0x49a9a5=document[_0x26aa4c(0x598)]('p');_0x49a9a5[_0x26aa4c(0x341)]=_0x93d5ed,_0x49a9a5[_0x26aa4c(0x352)][_0x26aa4c(0x27a)]=_0x26aa4c(0x4c4),_0x96f6fb[_0x26aa4c(0x46f)](_0x49a9a5);});const _0x1679ba=document['createElement'](_0xed67dd(0x3a8));_0x1679ba[_0xed67dd(0x352)][_0xed67dd(0x3f1)]=_0xed67dd(0x4f9),_0x1679ba[_0xed67dd(0x352)][_0xed67dd(0x3e3)]=_0xed67dd(0x1ec),_0x1679ba[_0xed67dd(0x352)][_0xed67dd(0x30b)]=_0xed67dd(0x59f),_0x1679ba['style']['marginTop']=_0xed67dd(0x281);const _0x329d0d=document['createElement'](_0xed67dd(0x52d));_0x329d0d['innerText']='跳过十轮',_0x329d0d['style'][_0xed67dd(0x38d)]=_0xed67dd(0x364),_0x329d0d[_0xed67dd(0x352)][_0xed67dd(0x3f6)]=_0xed67dd(0x469),_0x329d0d[_0xed67dd(0x352)]['color']='white',_0x329d0d[_0xed67dd(0x352)][_0xed67dd(0x4fd)]=_0xed67dd(0x2c0),_0x329d0d[_0xed67dd(0x352)][_0xed67dd(0x1b2)]=_0xed67dd(0x1f1),_0x329d0d[_0xed67dd(0x352)]['cursor']=_0xed67dd(0x2e4),_0x329d0d[_0xed67dd(0x36c)]('click',()=>{jumpByTenRounds();});const _0x20037c=document['createElement'](_0xed67dd(0x52d));_0x20037c[_0xed67dd(0x341)]='自动战斗',_0x20037c['style'][_0xed67dd(0x38d)]=_0xed67dd(0x364),_0x20037c[_0xed67dd(0x352)][_0xed67dd(0x3f6)]=_0xed67dd(0x469),_0x20037c[_0xed67dd(0x352)][_0xed67dd(0x51f)]='white',_0x20037c[_0xed67dd(0x352)][_0xed67dd(0x4fd)]=_0xed67dd(0x2c0),_0x20037c[_0xed67dd(0x352)][_0xed67dd(0x1b2)]=_0xed67dd(0x1f1),_0x20037c[_0xed67dd(0x352)][_0xed67dd(0x2a0)]=_0xed67dd(0x2e4),_0x20037c['addEventListener'](_0xed67dd(0x54e),()=>{const _0x17dc50=_0xed67dd;autoBattle(),document[_0x17dc50(0x2a4)]['removeChild'](_0x625db7);});const _0xd166d3=document['createElement']('button');_0xd166d3[_0xed67dd(0x341)]=_0xed67dd(0x492),_0xd166d3['style']['padding']=_0xed67dd(0x364),_0xd166d3[_0xed67dd(0x352)][_0xed67dd(0x3f6)]=_0xed67dd(0x469),_0xd166d3[_0xed67dd(0x352)][_0xed67dd(0x51f)]=_0xed67dd(0x516),_0xd166d3[_0xed67dd(0x352)][_0xed67dd(0x4fd)]=_0xed67dd(0x2c0),_0xd166d3['style'][_0xed67dd(0x1b2)]=_0xed67dd(0x1f1),_0xd166d3[_0xed67dd(0x352)]['cursor']='pointer',_0xd166d3[_0xed67dd(0x36c)](_0xed67dd(0x54e),()=>{backToRoundOne();}),_0x1679ba[_0xed67dd(0x46f)](_0x329d0d),_0x1679ba[_0xed67dd(0x46f)](_0x20037c),_0x1679ba[_0xed67dd(0x46f)](_0xd166d3),_0x625db7['appendChild'](_0x3c32b5),_0x625db7[_0xed67dd(0x46f)](_0x278090),_0x625db7['appendChild'](_0x11b682),_0x625db7[_0xed67dd(0x46f)](_0x96f6fb),_0x625db7[_0xed67dd(0x46f)](_0x1679ba),document['body'][_0xed67dd(0x46f)](_0x625db7),_0x625db7['addEventListener'](_0xed67dd(0x54e),_0x539e40=>{const _0x5cdcb6=_0xed67dd;_0x539e40[_0x5cdcb6(0x57c)]===_0x625db7&&document['body']['removeChild'](_0x625db7);});}function autoBattle(){const _0x50b014=_0x38c76e;if(!battleState||!battleState[_0x50b014(0x25b)]){console[_0x50b014(0x1b6)](_0x50b014(0x54a)),clearAutoBattle();return;}if(autoBattleInterval!==null){clearAutoBattle(),showInfoBox(_0x50b014(0x55f));return;}useItem(_0x50b014(0x3bb),0x1)?(logBattleEvent('自动战斗已开始。',_0x50b014(0x1e3)),autoBattleInterval=setInterval(()=>{const _0x47bfb5=_0x50b014;if(!battleState||!battleState[_0x47bfb5(0x25b)]){console[_0x47bfb5(0x1b6)]('战斗状态未初始化'),clearAutoBattle();return;}if(!playerTurn)return;if(battleAttributes[_0x47bfb5(0x5ad)]/maxHealth<0.5&&playerTurn){Math[_0x47bfb5(0x207)]()<0.5?performDefense():performHeal();return;}const _0x5a942f=[battleState[_0x47bfb5(0x498)]['drunken'],battleState['player']['healingBan'],battleState[_0x47bfb5(0x498)][_0x47bfb5(0x509)],battleState[_0x47bfb5(0x498)][_0x47bfb5(0x521)],battleState[_0x47bfb5(0x498)]['seal'],battleState['player'][_0x47bfb5(0x1c3)],battleState[_0x47bfb5(0x498)][_0x47bfb5(0x34b)],battleState[_0x47bfb5(0x498)]['spellSlow'],battleState[_0x47bfb5(0x498)][_0x47bfb5(0x2d7)],battleState[_0x47bfb5(0x498)]['slaughter']],_0x1a5edf=_0x5a942f['filter'](Boolean)[_0x47bfb5(0x1f0)];if(_0x1a5edf>=0x2){const _0x2e5304=_0x47bfb5(0x1f2),_0x25a622=drugInventory[_0x2e5304];if(_0x25a622&&_0x25a622[_0x47bfb5(0x4b6)]>0x0){selectDrug(_0x2e5304),useSelectedDrug();return;}}battleState[_0x47bfb5(0x498)]['blindfold']?performAttack(_0x47bfb5(0x46a)):battleAttributes[_0x47bfb5(0x2b4)]>0.8*battleAttributes[_0x47bfb5(0x3f0)]&&!battleState['player']['taunt']?Math[_0x47bfb5(0x207)]()<0.99?performAttack(_0x47bfb5(0x46a)):performAttack(_0x47bfb5(0x1f6)):performAttack(_0x47bfb5(0x1f6));},0x15e)):showInfoBox(_0x50b014(0x35d),null,null,'red');}function clearAutoBattle(){const _0xabdbca=_0x38c76e;autoBattleInterval!==null&&(clearInterval(autoBattleInterval),autoBattleInterval=null,logBattleEvent(_0xabdbca(0x3ea),'red'));}function jumpByTenRounds(){const _0x21a330=_0x38c76e;if(battleState[_0x21a330(0x498)]['taunt']){performAttack('physical');return;}const _0x1fb903=0x3e8,_0x5c7fd2=_0x1fb903-battleRounds,_0x3e51ad=Math['min'](0xa,_0x5c7fd2);if(battleRounds>=_0x1fb903){showInfoBox(_0x21a330(0x4d7)+battleRounds+_0x21a330(0x224));return;}if(useItem(_0x21a330(0x46e),0x1)){let _0x45ec92=currentExp;battleRounds+=_0x3e51ad;for(let _0x50c2fc=0x0;_0x50c2fc<_0x3e51ad;_0x50c2fc++){updateEnemyAttributes(),gainExp(),currentExp=_0x45ec92,updateExpBar(currentExp,maxExp),logBattleEvent(_0x21a330(0x555)+_0x3e51ad+_0x21a330(0x496)+battleRounds+'轮','pink'),updatePetInfo(),updateUI();}}else{showInfoBox(_0x21a330(0x3ce),null,null,_0x21a330(0x2cf));return;}}function backToRoundOne(){const _0x324e09=_0x38c76e;showInfoBox(_0x324e09(0x3ee),()=>{const _0x8d07ae=_0x324e09,_0x3287d5=jinnangItems[_0x8d07ae(0x2c5)](_0x19a109=>_0x19a109[_0x8d07ae(0x33b)]==='enhanceBowl'),_0x2c250f=jinnangItems[_0x8d07ae(0x2c5)](_0x3c16f7=>_0x3c16f7[_0x8d07ae(0x33b)]==='ignoranceWater');if(!_0x3287d5||_0x3287d5[_0x8d07ae(0x4b6)]<0x64||!_0x2c250f||_0x2c250f[_0x8d07ae(0x4b6)]<0x64){showInfoBox('你的固元鼎或清心酿数量不足，无法回退！');return;}useItem('enhanceBowl',0x64),useItem(_0x8d07ae(0x2b6),0x64),battleRounds=0x1,initializeEnemyPet(),updateEnemyAttributes(),updateUI(),showInfoBox(_0x8d07ae(0x396));});}function divinedWeapon(){const _0x303888=_0x38c76e;!divinedWeaponStatus&&(showInfoBox(_0x303888(0x53a)),divinedWeaponStatus=!![]),divineWeaponManager['openDivineWeaponUI']();}class DivineWeaponManager{constructor(){const _0x133456=_0x38c76e;this[_0x133456(0x59e)]={'active':![],'level':0x1,'effects':[]},this[_0x133456(0x1b4)]={'active':![],'level':0x1,'effects':[]},this[_0x133456(0x43e)]={'active':![],'level':0x1,'effects':[]},this[_0x133456(0x329)]=null;}[_0x38c76e(0x255)](){const _0xc798b1=_0x38c76e;return{'lostBook':this[_0xc798b1(0x59e)],'fragmentedMap':this[_0xc798b1(0x1b4)],'nirvanaGem':this[_0xc798b1(0x43e)]};}[_0x38c76e(0x4bc)](_0x50d805){const _0x1ef545=_0x38c76e;if(_0x50d805[_0x1ef545(0x59e)])this['lostBook']=_0x50d805['lostBook'];if(_0x50d805['fragmentedMap'])this[_0x1ef545(0x1b4)]=_0x50d805['fragmentedMap'];if(_0x50d805[_0x1ef545(0x43e)])this[_0x1ef545(0x43e)]=_0x50d805[_0x1ef545(0x43e)];}['openDivineWeaponUI'](){const _0x2942ff=_0x38c76e;this[_0x2942ff(0x329)]&&this['divineWeaponUI'][_0x2942ff(0x3a5)]();if(battleState[_0x2942ff(0x498)]['taunt']){performAttack(_0x2942ff(0x1f6));return;}this['divineWeaponUI']=document['createElement'](_0x2942ff(0x3a8)),this[_0x2942ff(0x329)]['style']=_0x2942ff(0x306);const _0x27fd7e=this[_0x2942ff(0x59e)][_0x2942ff(0x280)]?_0x2942ff(0x4eb)+this[_0x2942ff(0x59e)][_0x2942ff(0x533)]+')':'被封锁的上古神器（物理）',_0x39c95d=this[_0x2942ff(0x59e)][_0x2942ff(0x280)]?this[_0x2942ff(0x59e)][_0x2942ff(0x448)][_0x2942ff(0x1f0)]>0x0?_0x2942ff(0x4ec)+(this[_0x2942ff(0x59e)]['level']*0.6+0x1)[_0x2942ff(0x4ac)](0x1)+_0x2942ff(0x4b8)+this[_0x2942ff(0x59e)][_0x2942ff(0x448)]['map'](this[_0x2942ff(0x46b)])['join'](',\x20'):'<p>开启后可能为物理技能附加如下效果：</p><p>破甲、恐吓、眩晕、穿透、麻痹、惶恐</p>':_0x2942ff(0x576),_0x42594c=this['fragmentedMap'][_0x2942ff(0x280)]?'神品·残页的河图\x20(Lv'+this[_0x2942ff(0x1b4)][_0x2942ff(0x533)]+')':_0x2942ff(0x2bc),_0x424f3f=this[_0x2942ff(0x1b4)][_0x2942ff(0x280)]?this[_0x2942ff(0x1b4)]['effects'][_0x2942ff(0x1f0)]>0x0?_0x2942ff(0x1e1)+(this[_0x2942ff(0x1b4)][_0x2942ff(0x533)]*0.6+0x1)[_0x2942ff(0x4ac)](0x1)+_0x2942ff(0x4b8)+this[_0x2942ff(0x1b4)][_0x2942ff(0x448)]['map'](this['getEffectChineseName'])[_0x2942ff(0x450)](',\x20'):_0x2942ff(0x56b):'<p>闪烁星光的宝盒，开启后可为法术技能概率附加效果：</p><p>迟缓、沉默、混乱、灼烧、法力燃烧、法力吸取</p>',_0x2811fc=this['nirvanaGem']['active']?'神品·定空的灵石\x20(Lv'+this['nirvanaGem']['level']+')':_0x2942ff(0x552),_0x4b7c48=this[_0x2942ff(0x43e)]['active']?this['nirvanaGem']['effects']['length']>0x0?_0x2942ff(0x227)+(this[_0x2942ff(0x43e)][_0x2942ff(0x533)]*0.3+0.5)[_0x2942ff(0x4ac)](0x1)+_0x2942ff(0x32c)+this[_0x2942ff(0x43e)][_0x2942ff(0x448)][_0x2942ff(0x241)](this[_0x2942ff(0x46b)])['join'](',\x20'):_0x2942ff(0x3ed):'<p>流光溢彩的锦囊，开启后每秒有一定概率驱散敌人的减益效果，成功概率与等级有关。</p>';this[_0x2942ff(0x329)]['innerHTML']=_0x2942ff(0x20a)+(this[_0x2942ff(0x59e)][_0x2942ff(0x280)]?'https://pic.imgdb.cn/item/669a7ce3d9c307b7e9450f04.png':_0x2942ff(0x447))+_0x2942ff(0x416)+_0x27fd7e+_0x2942ff(0x321)+_0x39c95d+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-evenly;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.activateDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>开启</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.refreshDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>刷新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升级</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeMaxDivineWeapon(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升满</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.description(\x27lostBook\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>说明</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:\x2020px;\x20border:\x201px\x20solid\x20#F5F5F5;\x20border-radius:\x2010px;\x20padding:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20align-items:\x20center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<img\x20src=\x22'+(this[_0x2942ff(0x1b4)][_0x2942ff(0x280)]?'https://pic.imgdb.cn/item/669a7ce2d9c307b7e9450ef4.png':'https://pic.imgdb.cn/item/665aecc0d9c307b7e90a239e.png')+_0x2942ff(0x528)+_0x42594c+_0x2942ff(0x321)+_0x424f3f+_0x2942ff(0x23f)+(this['nirvanaGem'][_0x2942ff(0x280)]?'https://pic.imgdb.cn/item/66a48e2cd9c307b7e9649085.png':_0x2942ff(0x447))+_0x2942ff(0x38f)+_0x2811fc+_0x2942ff(0x321)+_0x4b7c48+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:\x20flex;\x20justify-content:\x20space-evenly;\x20margin-top:\x2010px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.activateDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>开启</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.refreshDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>刷新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升级</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.upgradeMaxDivineWeapon(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>升满</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.description(\x27nirvanaGem\x27)\x22\x20style=\x22background:\x20green;\x20color:\x20white;\x20font-size:\x2014px;\x20border:\x201px\x20solid\x20white;\x22>说明</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:\x20right;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22divineWeaponManager.closeDivineWeaponUI()\x22\x20style=\x22background:\x20transparent;\x20border:\x20none;\x20color:\x20white;\x20font-size:\x2020px;\x20cursor:\x20pointer;\x22></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document['body'][_0x2942ff(0x46f)](this['divineWeaponUI']);}[_0x38c76e(0x5a0)](){const _0x5e2765=_0x38c76e;this['divineWeaponUI']&&(this[_0x5e2765(0x329)][_0x5e2765(0x3a5)](),this['divineWeaponUI']=null);}['activateDivineWeapon'](_0x59fc0e){const _0x2f89ed=_0x38c76e;if(this[_0x59fc0e][_0x2f89ed(0x280)]){showInfoBox('你已经开启此神器了，无法重复开启！');return;}const _0x1408dc=_0x59fc0e===_0x2f89ed(0x59e)?_0x2f89ed(0x59e):_0x59fc0e==='fragmentedMap'?_0x2f89ed(0x1b4):_0x2f89ed(0x43e);if(useItem(_0x1408dc)){this[_0x59fc0e]['active']=!![],this[_0x59fc0e][_0x2f89ed(0x448)]=[this[_0x2f89ed(0x21d)](_0x59fc0e)],showInfoBox((_0x59fc0e===_0x2f89ed(0x59e)?_0x2f89ed(0x3c4):_0x59fc0e===_0x2f89ed(0x1b4)?'残页的河图':_0x2f89ed(0x2cd))+'已成功开启！'),this[_0x2f89ed(0x28f)]();return;}if(currentExp<0x30d40){showInfoBox(_0x2f89ed(0x545));return;}currentExp-=0x30d40,updateExpBar(currentExp,maxExp),this[_0x59fc0e][_0x2f89ed(0x280)]=!![],this[_0x59fc0e]['effects']=[this['getRandomEffect'](_0x59fc0e)],showInfoBox((_0x59fc0e===_0x2f89ed(0x59e)?_0x2f89ed(0x3c4):_0x59fc0e===_0x2f89ed(0x1b4)?'残页的河图':_0x2f89ed(0x2cd))+'已成功开启！'),this[_0x2f89ed(0x28f)]();}[_0x38c76e(0x40e)](_0x202da3){const _0x3b17d6=_0x38c76e,_0x571a64=_0x202da3===_0x3b17d6(0x59e)?_0x3b17d6(0x59e):_0x202da3==='fragmentedMap'?'fragmentedMap':'nirvanaGem';showInfoBox(weaponDescriptions[_0x571a64]),this['openDivineWeaponUI']();}[_0x38c76e(0x57e)](_0x326da4){const _0x53d1fd=_0x38c76e;if(!this[_0x326da4][_0x53d1fd(0x280)]){showInfoBox(_0x53d1fd(0x479));return;}const _0x43710c=_0x326da4==='lostBook'?_0x53d1fd(0x59e):_0x326da4==='fragmentedMap'?_0x53d1fd(0x1b4):'nirvanaGem';if(useItem(_0x43710c)){const _0x48b467=Math[_0x53d1fd(0x207)]();if(_0x326da4==='nirvanaGem'){if(_0x48b467<0.05)this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)];else{if(_0x48b467<0.15)this[_0x326da4]['effects']=[this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this['getRandomEffect'](_0x326da4)];else{if(_0x48b467<0.3)this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)];else _0x48b467<0.6?this[_0x326da4][_0x53d1fd(0x448)]=[this['getRandomEffect'](_0x326da4),this['getRandomEffect'](_0x326da4)]:this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4)];}}}else{if(_0x48b467<0.05)this[_0x326da4]['effects']=[this['getRandomEffect'](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)];else _0x48b467<0.2?this[_0x326da4][_0x53d1fd(0x448)]=[this['getRandomEffect'](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)]:this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4)];}this[_0x53d1fd(0x28f)]();return;}if(currentExp<0x186a0){showInfoBox(_0x53d1fd(0x5b1));return;}currentExp-=0x186a0,updateExpBar(currentExp,maxExp);const _0x24d8ee=Math['random']();if(_0x326da4===_0x53d1fd(0x43e)){if(_0x24d8ee<0.05)this[_0x326da4]['effects']=[this['getRandomEffect'](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)];else{if(_0x24d8ee<0.15)this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this['getRandomEffect'](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)];else{if(_0x24d8ee<0.3)this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)];else _0x24d8ee<0.6?this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)]:this[_0x326da4][_0x53d1fd(0x448)]=[this['getRandomEffect'](_0x326da4)];}}}else{if(_0x24d8ee<0.05)this[_0x326da4]['effects']=[this[_0x53d1fd(0x21d)](_0x326da4),this['getRandomEffect'](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)];else _0x24d8ee<0.2?this[_0x326da4][_0x53d1fd(0x448)]=[this['getRandomEffect'](_0x326da4),this[_0x53d1fd(0x21d)](_0x326da4)]:this[_0x326da4][_0x53d1fd(0x448)]=[this[_0x53d1fd(0x21d)](_0x326da4)];}showInfoBox((_0x326da4===_0x53d1fd(0x59e)?_0x53d1fd(0x3c4):_0x326da4==='fragmentedMap'?'残页的河图':'定空的灵石')+_0x53d1fd(0x2ae)),this['openDivineWeaponUI']();}[_0x38c76e(0x292)](_0x43df50){const _0x1bf63e=_0x38c76e;if(!this[_0x43df50][_0x1bf63e(0x280)]){showInfoBox(_0x1bf63e(0x2cc));return;}if(this[_0x43df50]['level']>=0xa5){showInfoBox(_0x1bf63e(0x526));return;}const _0x1c3c7f=_0x43df50===_0x1bf63e(0x59e)?_0x1bf63e(0x59e):_0x43df50==='fragmentedMap'?'fragmentedMap':_0x1bf63e(0x43e);if(this[_0x43df50]['level']>=0x64||useItem(_0x1c3c7f)){if(this[_0x43df50][_0x1bf63e(0x533)]>=0x64&&!useItem(_0x1c3c7f)){showInfoBox(_0x1bf63e(0x2c8));return;}this[_0x43df50][_0x1bf63e(0x533)]+=0x1,this[_0x1bf63e(0x28f)]();return;}if(currentExp<0xbb8){showInfoBox(_0x1bf63e(0x1c8));return;}currentExp-=0xbb8,updateExpBar(currentExp,maxExp),this[_0x43df50]['level']+=0x1,this['openDivineWeaponUI']();}[_0x38c76e(0x476)](_0x58e112){const _0x2284cd=_0x38c76e;while(this[_0x58e112][_0x2284cd(0x533)]<0xa5){const _0x2dce02=this[_0x58e112][_0x2284cd(0x533)];this['upgradeDivineWeapon'](_0x58e112);if(this[_0x58e112]['level']===_0x2dce02)break;}}['getRandomEffect'](_0xe57df2){const _0x28ba0e=_0x38c76e;if(_0xe57df2===_0x28ba0e(0x59e)){const _0x2332d6=['破甲','眩晕','恐吓','麻痹','穿透','惶恐'];return _0x2332d6[Math[_0x28ba0e(0x265)](Math['random']()*_0x2332d6[_0x28ba0e(0x1f0)])];}else{if(_0xe57df2===_0x28ba0e(0x1b4)){const _0x533170=['沉默','迟缓','混乱',_0x28ba0e(0x343),'灼烧','法力吸取'];return _0x533170[Math['floor'](Math[_0x28ba0e(0x207)]()*_0x533170[_0x28ba0e(0x1f0)])];}else{if(_0xe57df2===_0x28ba0e(0x43e)){const _0x10de44=[_0x28ba0e(0x3a9),_0x28ba0e(0x3e4),'soulCapture',_0x28ba0e(0x521),_0x28ba0e(0x20f),_0x28ba0e(0x1c3),_0x28ba0e(0x2d7),'taunt',_0x28ba0e(0x318),_0x28ba0e(0x54d)];return _0x10de44[Math[_0x28ba0e(0x265)](Math[_0x28ba0e(0x207)]()*_0x10de44[_0x28ba0e(0x1f0)])];}}}}[_0x38c76e(0x46b)](_0x1fcd1f){const _0x216f2e=_0x38c76e,_0x296804={'破甲':'破甲','眩晕':'眩晕','恐吓':'恐吓','麻痹':'麻痹','穿透':'穿透','惶恐':'惶恐','沉默':'沉默','迟缓':'迟缓','混乱':'混乱','法力燃烧':_0x216f2e(0x343),'法力吸取':_0x216f2e(0x44e),'灼烧':'灼烧','drunken':'醉酒','healingBan':'禁疗','soulCapture':'摄魂','blindfold':'失明','spellSlow':_0x216f2e(0x282),'torn':'撕裂','suppressed':'压制','taunt':'嘲讽','seal':'封印','slaughter':'杀戮'};return _0x296804[_0x1fcd1f]||_0x1fcd1f;}['applyNirvanaGemEffects'](){const _0x5609d1=_0x38c76e;if(!this[_0x5609d1(0x43e)][_0x5609d1(0x280)])return;const _0x3ab287=Math[_0x5609d1(0x206)](0x1,0.005+(this[_0x5609d1(0x43e)][_0x5609d1(0x533)]-0x1)*0.003);if(Math[_0x5609d1(0x207)]()>_0x3ab287)return;const _0x11b00a=[_0x5609d1(0x3a9),_0x5609d1(0x3e4),_0x5609d1(0x509),_0x5609d1(0x521),_0x5609d1(0x20f),_0x5609d1(0x1c3),'suppressed','taunt',_0x5609d1(0x318),_0x5609d1(0x54d)],_0x2ec1f4=_0x11b00a[_0x5609d1(0x367)](_0x1bc306=>battleState[_0x5609d1(0x498)][_0x1bc306]),_0x2700b0=this['nirvanaGem']['effects']['filter'](_0x4e55d3=>_0x11b00a['includes'](_0x4e55d3)),_0x26a66c=_0x2ec1f4[_0x5609d1(0x367)](_0x2cefe9=>_0x2700b0['includes'](_0x2cefe9));if(_0x26a66c[_0x5609d1(0x1f0)]>0x0){const _0x17b093=_0x26a66c[Math[_0x5609d1(0x265)](Math['random']()*_0x26a66c[_0x5609d1(0x1f0)])];battleState['player'][_0x17b093]=![];switch(_0x17b093){case _0x5609d1(0x3a9):break;case _0x5609d1(0x3e4):break;case'spellSlow':break;case'soulCapture':battleAttributes[_0x5609d1(0x3f0)]=battleState['player'][_0x5609d1(0x3f0)],battleAttributes[_0x5609d1(0x2b4)]=battleState['player'][_0x5609d1(0x2b4)],updateUI(),updatePlayerStatusDisplay();break;case'torn':clearInterval(battleState[_0x5609d1(0x498)][_0x5609d1(0x347)]),effectCooldowns[_0x5609d1(0x1c3)]=![];break;case'suppressed':cleanSuppressed();break;case _0x5609d1(0x34b):clearTaunt();break;case _0x5609d1(0x54d):cleanSlaughter();break;case'blindFold':break;case _0x5609d1(0x318):ascensionSkill[_0x5609d1(0x33b)]=battleState[_0x5609d1(0x498)]['originalAscensionSkill'],secondAscensionSkill[_0x5609d1(0x33b)]=battleState[_0x5609d1(0x498)][_0x5609d1(0x38b)],updateAscensionDisplay(),updateSecondAscensionDisplay(),effectCooldowns['seal']=![],updateUI();break;}logBattleEvent('定空的灵石解除了你的'+this[_0x5609d1(0x46b)](_0x17b093)+_0x5609d1(0x30a),_0x5609d1(0x33e)),showBattleOverlay(_0x5609d1(0x213),0x3e8,0x1,0x3e8),updatePlayerStatusDisplay(),updateUI();}}}function cleanSlaughter(){const _0x11adab=_0x38c76e;battleState['player'][_0x11adab(0x54d)]=![],effectCooldowns[_0x11adab(0x54d)]=![],enemyPhysicalAttackCount=0x0,updatePlayerStatusDisplay(),console['log'](_0x11adab(0x344));}function cleanSuppressed(){const _0x2f582c=_0x38c76e;if(battleState[_0x2f582c(0x498)][_0x2f582c(0x2d7)]){clearTimeout(suppressionState['timeoutId']);const _0x45f58e=performPhysicalAttack,_0x50bc35=performMagicalAttack,_0x4183a7=performHeal,_0x3dc1a2=performPoison,_0x3fc5c9=performDefense;battleState[_0x2f582c(0x498)][_0x2f582c(0x2d7)]=![],effectCooldowns[_0x2f582c(0x2d7)]=![],(!suppressionState['actionPerformed']||battleState[_0x2f582c(0x498)][_0x2f582c(0x2d7)])&&(battleAttributes[_0x2f582c(0x5ad)]=0x1,battleAttributes[_0x2f582c(0x5a5)]=0x1,battleAttributes[_0x2f582c(0x3f0)]=0x1,battleAttributes['magicAttack']=0x1,logBattleEvent(_0x2f582c(0x338),'#FF4500'),showBattleOverlay(_0x2f582c(0x4c1),0x5dc,0.8)),performPhysicalAttack=_0x45f58e,performMagicalAttack=_0x50bc35,performHeal=_0x4183a7,performPoison=_0x3dc1a2,performDefense=_0x3fc5c9,updatePlayerStatusDisplay();}updateUI();}function clearTaunt(){const _0x378f63=_0x38c76e;battleState[_0x378f63(0x498)][_0x378f63(0x34b)]=![],effectCooldowns['taunt']=![],clearTimeout(tauntTimeout),updatePlayerStatusDisplay(),updateUI();}function clearEnemyEffect(){const _0x3569e5=_0x38c76e,_0x14b530=[_0x3569e5(0x3a9),_0x3569e5(0x3e4),_0x3569e5(0x509),_0x3569e5(0x521),_0x3569e5(0x20f),'torn',_0x3569e5(0x2d7),_0x3569e5(0x34b),_0x3569e5(0x318),_0x3569e5(0x54d),_0x3569e5(0x2ac),'heat'];_0x14b530[_0x3569e5(0x284)](_0x53e74c=>{const _0x200c4f=_0x3569e5;if(battleState[_0x200c4f(0x498)][_0x53e74c]){switch(_0x53e74c){case _0x200c4f(0x3a9):break;case'healingBan':break;case'soulCapture':battleAttributes[_0x200c4f(0x3f0)]=battleState['player'][_0x200c4f(0x3f0)],battleAttributes[_0x200c4f(0x2b4)]=battleState['player']['magicAttack'],updateUI(),updatePlayerStatusDisplay();break;case _0x200c4f(0x1c3):clearInterval(battleState['player'][_0x200c4f(0x347)]);break;case _0x200c4f(0x2d7):cleanSuppressed();break;case _0x200c4f(0x34b):clearTaunt();break;case _0x200c4f(0x54d):cleanSlaughter();break;case _0x200c4f(0x318):ascensionSkill['name']=battleState['player']['originalAscensionSkill'],secondAscensionSkill[_0x200c4f(0x33b)]=battleState[_0x200c4f(0x498)][_0x200c4f(0x38b)],updateAscensionDisplay(),updateSecondAscensionDisplay(),updateUI();break;case _0x200c4f(0x2ac):break;case'heat':handleCleanHeat();break;}battleState[_0x200c4f(0x498)][_0x53e74c]=![],effectCooldowns[_0x53e74c]=![];}}),updatePlayerStatusDisplay();}function clearPlayerEffect(){const _0x44085b=_0x38c76e,_0x2f2b96=[{'name':'armorBreak','timer':battleState[_0x44085b(0x25b)][_0x44085b(0x42f)]},{'name':'pierced','timer':battleState['enemy'][_0x44085b(0x4e2)]},{'name':_0x44085b(0x1e8),'timer':battleState[_0x44085b(0x25b)]['silencedTimer']},{'name':_0x44085b(0x307),'timer':battleState['enemy'][_0x44085b(0x47b)]},{'name':_0x44085b(0x411),'timer':battleState[_0x44085b(0x25b)][_0x44085b(0x337)]},{'name':_0x44085b(0x2a7),'timer':battleState['enemy'][_0x44085b(0x31f)]},{'name':_0x44085b(0x32b),'timer':battleState['enemy'][_0x44085b(0x2b1)]},{'name':_0x44085b(0x41c),'timer':battleState[_0x44085b(0x25b)][_0x44085b(0x237)]},{'name':_0x44085b(0x42c),'timer':battleState[_0x44085b(0x25b)]['burntTimer']},{'name':_0x44085b(0x4da),'timer':battleState[_0x44085b(0x25b)][_0x44085b(0x445)]},{'name':_0x44085b(0x40d),'timer':battleState[_0x44085b(0x25b)][_0x44085b(0x32e)]}];_0x2f2b96['forEach'](_0x2a8fc9=>{const _0x4a871e=_0x44085b;battleState[_0x4a871e(0x25b)][_0x2a8fc9[_0x4a871e(0x33b)]]=![],_0x2a8fc9[_0x4a871e(0x2bd)]&&(clearTimeout(_0x2a8fc9[_0x4a871e(0x2bd)]),_0x2a8fc9[_0x4a871e(0x2bd)]=null);}),updateEnemyStatusDisplay();}const divineWeaponManager=new DivineWeaponManager();
